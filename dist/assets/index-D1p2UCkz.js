(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ke={},Fr=[],Kt=()=>{},hg=()=>!1,Uo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Fc=t=>t.startsWith("onUpdate:"),tt=Object.assign,Uc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dg=Object.prototype.hasOwnProperty,be=(t,e)=>dg.call(t,e),le=Array.isArray,Ur=t=>Bo(t)==="[object Map]",Qd=t=>Bo(t)==="[object Set]",he=t=>typeof t=="function",ze=t=>typeof t=="string",Qn=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",Yd=t=>(De(t)||he(t))&&he(t.then)&&he(t.catch),Jd=Object.prototype.toString,Bo=t=>Jd.call(t),fg=t=>Bo(t).slice(8,-1),Xd=t=>Bo(t)==="[object Object]",Bc=t=>ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ms=Mc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},pg=/-(\w)/g,Nt=jo(t=>t.replace(pg,(e,n)=>n?n.toUpperCase():"")),mg=/\B([A-Z])/g,yr=jo(t=>t.replace(mg,"-$1").toLowerCase()),$o=jo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ra=jo(t=>t?`on${$o(t)}`:""),Gn=(t,e)=>!Object.is(t,e),Pa=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Zd=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},gg=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let zu;const ef=()=>zu||(zu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ys(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ze(r)?wg(r):Ys(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ze(t)||De(t))return t}const _g=/;(?![^(]*\))/g,vg=/:([^]+)/,yg=/\/\*[^]*?\*\//g;function wg(t){const e={};return t.replace(yg,"").split(_g).forEach(n=>{if(n){const r=n.split(vg);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Br(t){let e="";if(ze(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=Br(t[n]);r&&(e+=r+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Eg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tg=Mc(Eg);function tf(t){return!!t||t===""}const nf=t=>!!(t&&t.__v_isRef===!0),or=t=>ze(t)?t:t==null?"":le(t)||De(t)&&(t.toString===Jd||!he(t.toString))?nf(t)?or(t.value):JSON.stringify(t,rf,2):String(t),rf=(t,e)=>nf(e)?rf(t,e.value):Ur(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ka(r,i)+" =>"]=s,n),{})}:Qd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ka(n))}:Qn(e)?ka(e):De(e)&&!le(e)&&!Xd(e)?String(e):e,ka=(t,e="")=>{var n;return Qn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class Ig{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=At;try{return At=this,e()}finally{At=n}}}on(){At=this}off(){At=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function bg(){return At}let xe;const xa=new WeakSet;class sf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xa.has(this)&&(xa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||af(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hu(this),cf(this);const e=xe,n=Bt;xe=this,Bt=!0;try{return this.fn()}finally{lf(this),xe=e,Bt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zc(e);this.deps=this.depsTail=void 0,Hu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ec(this)&&this.run()}get dirty(){return ec(this)}}let of=0,Fs,Us;function af(t,e=!1){if(t.flags|=8,e){t.next=Us,Us=t;return}t.next=Fs,Fs=t}function jc(){of++}function $c(){if(--of>0)return;if(Us){let e=Us;for(Us=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Fs;){let e=Fs;for(Fs=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function cf(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function lf(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),zc(r),Sg(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function ec(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(uf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function uf(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Js))return;t.globalVersion=Js;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!ec(t)){t.flags&=-3;return}const n=xe,r=Bt;xe=t,Bt=!0;try{cf(t);const s=t.fn(t._value);(e.version===0||Gn(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{xe=n,Bt=r,lf(t),t.flags&=-3}}function zc(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)zc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Sg(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Bt=!0;const hf=[];function Yn(){hf.push(Bt),Bt=!1}function Jn(){const t=hf.pop();Bt=t===void 0?!0:t}function Hu(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xe;xe=void 0;try{e()}finally{xe=n}}}let Js=0;class Ag{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xe||!Bt||xe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xe)n=this.activeLink=new Ag(xe,this),xe.deps?(n.prevDep=xe.depsTail,xe.depsTail.nextDep=n,xe.depsTail=n):xe.deps=xe.depsTail=n,df(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xe.depsTail,n.nextDep=void 0,xe.depsTail.nextDep=n,xe.depsTail=n,xe.deps===n&&(xe.deps=r)}return n}trigger(e){this.version++,Js++,this.notify(e)}notify(e){jc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$c()}}}function df(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)df(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const tc=new WeakMap,lr=Symbol(""),nc=Symbol(""),Xs=Symbol("");function ft(t,e,n){if(Bt&&xe){let r=tc.get(t);r||tc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Hc),s.map=r,s.key=n),s.track()}}function _n(t,e,n,r,s,i){const o=tc.get(t);if(!o){Js++;return}const c=l=>{l&&l.trigger()};if(jc(),e==="clear")o.forEach(c);else{const l=le(t),h=l&&Bc(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,g)=>{(g==="length"||g===Xs||!Qn(g)&&g>=d)&&c(p)})}else switch(n!==void 0&&c(o.get(n)),h&&c(o.get(Xs)),e){case"add":l?h&&c(o.get("length")):(c(o.get(lr)),Ur(t)&&c(o.get(nc)));break;case"delete":l||(c(o.get(lr)),Ur(t)&&c(o.get(nc)));break;case"set":Ur(t)&&c(o.get(lr));break}}$c()}function Pr(t){const e=Se(t);return e===t?e:(ft(e,"iterate",Xs),Dt(t)?e:e.map(lt))}function zo(t){return ft(t=Se(t),"iterate",Xs),t}const Cg={__proto__:null,[Symbol.iterator](){return Va(this,Symbol.iterator,lt)},concat(...t){return Pr(this).concat(...t.map(e=>le(e)?Pr(e):e))},entries(){return Va(this,"entries",t=>(t[1]=lt(t[1]),t))},every(t,e){return cn(this,"every",t,e,void 0,arguments)},filter(t,e){return cn(this,"filter",t,e,n=>n.map(lt),arguments)},find(t,e){return cn(this,"find",t,e,lt,arguments)},findIndex(t,e){return cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cn(this,"findLast",t,e,lt,arguments)},findLastIndex(t,e){return cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Da(this,"includes",t)},indexOf(...t){return Da(this,"indexOf",t)},join(t){return Pr(this).join(t)},lastIndexOf(...t){return Da(this,"lastIndexOf",t)},map(t,e){return cn(this,"map",t,e,void 0,arguments)},pop(){return Cs(this,"pop")},push(...t){return Cs(this,"push",t)},reduce(t,...e){return Gu(this,"reduce",t,e)},reduceRight(t,...e){return Gu(this,"reduceRight",t,e)},shift(){return Cs(this,"shift")},some(t,e){return cn(this,"some",t,e,void 0,arguments)},splice(...t){return Cs(this,"splice",t)},toReversed(){return Pr(this).toReversed()},toSorted(t){return Pr(this).toSorted(t)},toSpliced(...t){return Pr(this).toSpliced(...t)},unshift(...t){return Cs(this,"unshift",t)},values(){return Va(this,"values",lt)}};function Va(t,e,n){const r=zo(t),s=r[e]();return r!==t&&!Dt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Rg=Array.prototype;function cn(t,e,n,r,s,i){const o=zo(t),c=o!==t&&!Dt(t),l=o[e];if(l!==Rg[e]){const p=l.apply(t,i);return c?lt(p):p}let h=n;o!==t&&(c?h=function(p,g){return n.call(this,lt(p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const d=l.call(o,h,r);return c&&s?s(d):d}function Gu(t,e,n,r){const s=zo(t);let i=n;return s!==t&&(Dt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,lt(c),l,t)}),s[e](i,...r)}function Da(t,e,n){const r=Se(t);ft(r,"iterate",Xs);const s=r[e](...n);return(s===-1||s===!1)&&Kc(n[0])?(n[0]=Se(n[0]),r[e](...n)):s}function Cs(t,e,n=[]){Yn(),jc();const r=Se(t)[e].apply(t,n);return $c(),Jn(),r}const Pg=Mc("__proto__,__v_isRef,__isVue"),ff=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Qn));function kg(t){Qn(t)||(t=String(t));const e=Se(this);return ft(e,"has",t),e.hasOwnProperty(t)}class pf{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?zg:vf:i?_f:gf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){let l;if(o&&(l=Cg[n]))return l;if(n==="hasOwnProperty")return kg}const c=Reflect.get(e,n,dt(e)?e:r);return(Qn(n)?ff.has(n):Pg(n))||(s||ft(e,"get",n),i)?c:dt(c)?o&&Bc(n)?c:c.value:De(c)?s?wf(c):fi(c):c}}class mf extends pf{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=dr(i);if(!Dt(r)&&!dr(r)&&(i=Se(i),r=Se(r)),!le(e)&&dt(i)&&!dt(r))return l?!1:(i.value=r,!0)}const o=le(e)&&Bc(n)?Number(n)<e.length:be(e,n),c=Reflect.set(e,n,r,dt(e)?e:s);return e===Se(s)&&(o?Gn(r,i)&&_n(e,"set",n,r):_n(e,"add",n,r)),c}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&_n(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Qn(n)||!ff.has(n))&&ft(e,"has",n),r}ownKeys(e){return ft(e,"iterate",le(e)?"length":lr),Reflect.ownKeys(e)}}class xg extends pf{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Vg=new mf,Dg=new xg,Og=new mf(!0);const Gc=t=>t,Ho=t=>Reflect.getPrototypeOf(t);function $i(t,e,n=!1,r=!1){t=t.__v_raw;const s=Se(t),i=Se(e);n||(Gn(e,i)&&ft(s,"get",e),ft(s,"get",i));const{has:o}=Ho(s),c=r?Gc:n?Qc:lt;if(o.call(s,e))return c(t.get(e));if(o.call(s,i))return c(t.get(i));t!==s&&t.get(e)}function zi(t,e=!1){const n=this.__v_raw,r=Se(n),s=Se(t);return e||(Gn(t,s)&&ft(r,"has",t),ft(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Hi(t,e=!1){return t=t.__v_raw,!e&&ft(Se(t),"iterate",lr),Reflect.get(t,"size",t)}function qu(t,e=!1){!e&&!Dt(t)&&!dr(t)&&(t=Se(t));const n=Se(this);return Ho(n).has.call(n,t)||(n.add(t),_n(n,"add",t,t)),this}function Wu(t,e,n=!1){!n&&!Dt(e)&&!dr(e)&&(e=Se(e));const r=Se(this),{has:s,get:i}=Ho(r);let o=s.call(r,t);o||(t=Se(t),o=s.call(r,t));const c=i.call(r,t);return r.set(t,e),o?Gn(e,c)&&_n(r,"set",t,e):_n(r,"add",t,e),this}function Ku(t){const e=Se(this),{has:n,get:r}=Ho(e);let s=n.call(e,t);s||(t=Se(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&_n(e,"delete",t,void 0),i}function Qu(){const t=Se(this),e=t.size!==0,n=t.clear();return e&&_n(t,"clear",void 0,void 0),n}function Gi(t,e){return function(r,s){const i=this,o=i.__v_raw,c=Se(o),l=e?Gc:t?Qc:lt;return!t&&ft(c,"iterate",lr),o.forEach((h,d)=>r.call(s,l(h),l(d),i))}}function qi(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),o=Ur(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=s[t](...r),d=n?Gc:e?Qc:lt;return!e&&ft(i,"iterate",l?nc:lr),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:c?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function xn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ng(){const t={get(i){return $i(this,i)},get size(){return Hi(this)},has:zi,add:qu,set:Wu,delete:Ku,clear:Qu,forEach:Gi(!1,!1)},e={get(i){return $i(this,i,!1,!0)},get size(){return Hi(this)},has:zi,add(i){return qu.call(this,i,!0)},set(i,o){return Wu.call(this,i,o,!0)},delete:Ku,clear:Qu,forEach:Gi(!1,!0)},n={get(i){return $i(this,i,!0)},get size(){return Hi(this,!0)},has(i){return zi.call(this,i,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Gi(!0,!1)},r={get(i){return $i(this,i,!0,!0)},get size(){return Hi(this,!0)},has(i){return zi.call(this,i,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Gi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=qi(i,!1,!1),n[i]=qi(i,!0,!1),e[i]=qi(i,!1,!0),r[i]=qi(i,!0,!0)}),[t,n,e,r]}const[Lg,Mg,Fg,Ug]=Ng();function qc(t,e){const n=e?t?Ug:Fg:t?Mg:Lg;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const Bg={get:qc(!1,!1)},jg={get:qc(!1,!0)},$g={get:qc(!0,!1)};const gf=new WeakMap,_f=new WeakMap,vf=new WeakMap,zg=new WeakMap;function Hg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gg(t){return t.__v_skip||!Object.isExtensible(t)?0:Hg(fg(t))}function fi(t){return dr(t)?t:Wc(t,!1,Vg,Bg,gf)}function yf(t){return Wc(t,!1,Og,jg,_f)}function wf(t){return Wc(t,!0,Dg,$g,vf)}function Wc(t,e,n,r,s){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Gg(t);if(o===0)return t;const c=new Proxy(t,o===2?r:n);return s.set(t,c),c}function jr(t){return dr(t)?jr(t.__v_raw):!!(t&&t.__v_isReactive)}function dr(t){return!!(t&&t.__v_isReadonly)}function Dt(t){return!!(t&&t.__v_isShallow)}function Kc(t){return t?!!t.__v_raw:!1}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function qg(t){return!be(t,"__v_skip")&&Object.isExtensible(t)&&Zd(t,"__v_skip",!0),t}const lt=t=>De(t)?fi(t):t,Qc=t=>De(t)?wf(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function Wg(t){return Ef(t,!1)}function Kg(t){return Ef(t,!0)}function Ef(t,e){return dt(t)?t:new Qg(t,e)}class Qg{constructor(e,n){this.dep=new Hc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Se(e),this._value=n?e:lt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Dt(e)||dr(e);e=r?e:Se(e),Gn(e,n)&&(this._rawValue=e,this._value=r?e:lt(e),this.dep.trigger())}}function $r(t){return dt(t)?t.value:t}const Yg={get:(t,e,n)=>e==="__v_raw"?t:$r(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return dt(s)&&!dt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Tf(t){return jr(t)?t:new Proxy(t,Yg)}class Jg{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Hc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xe!==this)return af(this,!0),!0}get value(){const e=this.dep.track();return uf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Xg(t,e,n=!1){let r,s;return he(t)?r=t:(r=t.get,s=t.set),new Jg(r,s,n)}const Wi={},ho=new WeakMap;let sr;function Zg(t,e=!1,n=sr){if(n){let r=ho.get(n);r||ho.set(n,r=[]),r.push(t)}}function e1(t,e,n=ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,h=q=>s?q:Dt(q)||s===!1||s===0?hn(q,1):hn(q);let d,p,g,v,P=!1,x=!1;if(dt(t)?(p=()=>t.value,P=Dt(t)):jr(t)?(p=()=>h(t),P=!0):le(t)?(x=!0,P=t.some(q=>jr(q)||Dt(q)),p=()=>t.map(q=>{if(dt(q))return q.value;if(jr(q))return h(q);if(he(q))return l?l(q,2):q()})):he(t)?e?p=l?()=>l(t,2):t:p=()=>{if(g){Yn();try{g()}finally{Jn()}}const q=sr;sr=d;try{return l?l(t,3,[v]):t(v)}finally{sr=q}}:p=Kt,e&&s){const q=p,de=s===!0?1/0:s;p=()=>hn(q(),de)}const O=bg(),$=()=>{d.stop(),O&&Uc(O.effects,d)};if(i&&e){const q=e;e=(...de)=>{q(...de),$()}}let B=x?new Array(t.length).fill(Wi):Wi;const H=q=>{if(!(!(d.flags&1)||!d.dirty&&!q))if(e){const de=d.run();if(s||P||(x?de.some((fe,I)=>Gn(fe,B[I])):Gn(de,B))){g&&g();const fe=sr;sr=d;try{const I=[de,B===Wi?void 0:x&&B[0]===Wi?[]:B,v];l?l(e,3,I):e(...I),B=de}finally{sr=fe}}}else d.run()};return c&&c(H),d=new sf(p),d.scheduler=o?()=>o(H,!1):H,v=q=>Zg(q,!1,d),g=d.onStop=()=>{const q=ho.get(d);if(q){if(l)l(q,4);else for(const de of q)de();ho.delete(d)}},e?r?H(!0):B=d.run():o?o(H.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function hn(t,e=1/0,n){if(e<=0||!De(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,dt(t))hn(t.value,e,n);else if(le(t))for(let r=0;r<t.length;r++)hn(t[r],e,n);else if(Qd(t)||Ur(t))t.forEach(r=>{hn(r,e,n)});else if(Xd(t)){for(const r in t)hn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&hn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pi(t,e,n,r){try{return r?t(...r):t()}catch(s){Go(s,e,n)}}function Zt(t,e,n,r){if(he(t)){const s=pi(t,e,n,r);return s&&Yd(s)&&s.catch(i=>{Go(i,e,n)}),s}if(le(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Zt(t[i],e,n,r));return s}}function Go(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ke;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const d=c.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,h)===!1)return}c=c.parent}if(i){Yn(),pi(i,null,10,[t,l,h]),Jn();return}}t1(t,n,s,r,o)}function t1(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const yt=[];let qt=-1;const zr=[];let On=null,Vr=0;const If=Promise.resolve();let fo=null;function bf(t){const e=fo||If;return t?e.then(this?t.bind(this):t):e}function n1(t){let e=qt+1,n=yt.length;for(;e<n;){const r=e+n>>>1,s=yt[r],i=Zs(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Yc(t){if(!(t.flags&1)){const e=Zs(t),n=yt[yt.length-1];!n||!(t.flags&2)&&e>=Zs(n)?yt.push(t):yt.splice(n1(e),0,t),t.flags|=1,Sf()}}function Sf(){fo||(fo=If.then(Cf))}function r1(t){le(t)?zr.push(...t):On&&t.id===-1?On.splice(Vr+1,0,t):t.flags&1||(zr.push(t),t.flags|=1),Sf()}function Yu(t,e,n=qt+1){for(;n<yt.length;n++){const r=yt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;yt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Af(t){if(zr.length){const e=[...new Set(zr)].sort((n,r)=>Zs(n)-Zs(r));if(zr.length=0,On){On.push(...e);return}for(On=e,Vr=0;Vr<On.length;Vr++){const n=On[Vr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}On=null,Vr=0}}const Zs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Cf(t){try{for(qt=0;qt<yt.length;qt++){const e=yt[qt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),pi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;qt<yt.length;qt++){const e=yt[qt];e&&(e.flags&=-2)}qt=-1,yt.length=0,Af(),fo=null,(yt.length||zr.length)&&Cf()}}let Ct=null,Rf=null;function po(t){const e=Ct;return Ct=t,Rf=t&&t.type.__scopeId||null,e}function s1(t,e=Ct,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ih(-1);const i=po(e);let o;try{o=t(...s)}finally{po(i),r._d&&ih(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function mo(t,e){if(Ct===null)return t;const n=Yo(Ct),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=ke]=e[s];i&&(he(i)&&(i={mounted:i,updated:i}),i.deep&&hn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function nr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Yn(),Zt(l,n,8,[t.el,c,t,e]),Jn())}}const i1=Symbol("_vte"),o1=t=>t.__isTeleport;function Jc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Jc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Pf(t,e){return he(t)?tt({name:t.name},e,{setup:t}):t}function kf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function rc(t,e,n,r,s=!1){if(le(t)){t.forEach((P,x)=>rc(P,e&&(le(e)?e[x]:e),n,r,s));return}if(Bs(r)&&!s)return;const i=r.shapeFlag&4?Yo(r.component):r.el,o=s?null:i,{i:c,r:l}=t,h=e&&e.r,d=c.refs===ke?c.refs={}:c.refs,p=c.setupState,g=Se(p),v=p===ke?()=>!1:P=>be(g,P);if(h!=null&&h!==l&&(ze(h)?(d[h]=null,v(h)&&(p[h]=null)):dt(h)&&(h.value=null)),he(l))pi(l,c,12,[o,d]);else{const P=ze(l),x=dt(l);if(P||x){const O=()=>{if(t.f){const $=P?v(l)?p[l]:d[l]:l.value;s?le($)&&Uc($,i):le($)?$.includes(i)||$.push(i):P?(d[l]=[i],v(l)&&(p[l]=d[l])):(l.value=[i],t.k&&(d[t.k]=l.value))}else P?(d[l]=o,v(l)&&(p[l]=o)):x&&(l.value=o,t.k&&(d[t.k]=o))};o?(O.id=-1,St(O,n)):O()}}}const Bs=t=>!!t.type.__asyncLoader,xf=t=>t.type.__isKeepAlive;function a1(t,e){Vf(t,"a",e)}function c1(t,e){Vf(t,"da",e)}function Vf(t,e,n=ht){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(qo(e,r,n),n){let s=n.parent;for(;s&&s.parent;)xf(s.parent.vnode)&&l1(r,e,n,s),s=s.parent}}function l1(t,e,n,r){const s=qo(e,t,r,!0);Df(()=>{Uc(r[e],s)},n)}function qo(t,e,n=ht,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Yn();const c=mi(n),l=Zt(e,n,t,o);return c(),Jn(),l});return r?s.unshift(i):s.push(i),i}}const bn=t=>(e,n=ht)=>{(!Qo||t==="sp")&&qo(t,(...r)=>e(...r),n)},u1=bn("bm"),h1=bn("m"),d1=bn("bu"),f1=bn("u"),p1=bn("bum"),Df=bn("um"),m1=bn("sp"),g1=bn("rtg"),_1=bn("rtc");function v1(t,e=ht){qo("ec",t,e)}const y1="components";function Dr(t,e){return E1(y1,t,!0,e)||t}const w1=Symbol.for("v-ndc");function E1(t,e,n=!0,r=!1){const s=Ct||ht;if(s){const i=s.type;{const c=c2(i,!1);if(c&&(c===e||c===Nt(e)||c===$o(Nt(e))))return i}const o=Ju(s[t]||i[t],e)||Ju(s.appContext[t],e);return!o&&r?i:o}}function Ju(t,e){return t&&(t[e]||t[Nt(e)]||t[$o(Nt(e))])}function Of(t,e,n,r){let s;const i=n,o=le(t);if(o||ze(t)){const c=o&&jr(t);let l=!1;c&&(l=!Dt(t),t=zo(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?lt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(De(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const d=c[l];s[l]=e(t[d],d,l,i)}}else s=[];return s}const sc=t=>t?tp(t)?Yo(t):sc(t.parent):null,js=tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sc(t.parent),$root:t=>sc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xc(t),$forceUpdate:t=>t.f||(t.f=()=>{Yc(t.update)}),$nextTick:t=>t.n||(t.n=bf.bind(t.proxy)),$watch:t=>$1.bind(t)}),Oa=(t,e)=>t!==ke&&!t.__isScriptSetup&&be(t,e),T1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let h;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Oa(r,e))return o[e]=1,r[e];if(s!==ke&&be(s,e))return o[e]=2,s[e];if((h=t.propsOptions[0])&&be(h,e))return o[e]=3,i[e];if(n!==ke&&be(n,e))return o[e]=4,n[e];ic&&(o[e]=0)}}const d=js[e];let p,g;if(d)return e==="$attrs"&&ft(t.attrs,"get",""),d(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==ke&&be(n,e))return o[e]=4,n[e];if(g=l.config.globalProperties,be(g,e))return g[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Oa(s,e)?(s[e]=n,!0):r!==ke&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let c;return!!n[o]||t!==ke&&be(t,o)||Oa(e,o)||(c=i[0])&&be(c,o)||be(r,o)||be(js,o)||be(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Xu(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ic=!0;function I1(t){const e=Xc(t),n=t.proxy,r=t.ctx;ic=!1,e.beforeCreate&&Zu(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:v,updated:P,activated:x,deactivated:O,beforeDestroy:$,beforeUnmount:B,destroyed:H,unmounted:q,render:de,renderTracked:fe,renderTriggered:I,errorCaptured:y,serverPrefetch:T,expose:b,inheritAttrs:S,components:A,directives:E,filters:mt}=e;if(h&&b1(h,r,null),o)for(const _e in o){const pe=o[_e];he(pe)&&(r[_e]=pe.bind(n))}if(s){const _e=s.call(n,n);De(_e)&&(t.data=fi(_e))}if(ic=!0,i)for(const _e in i){const pe=i[_e],It=he(pe)?pe.bind(n,n):he(pe.get)?pe.get.bind(n,n):Kt,Lt=!he(pe)&&he(pe.set)?pe.set.bind(n):Kt,kt=Ft({get:It,set:Lt});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>kt.value,set:Oe=>kt.value=Oe})}if(c)for(const _e in c)Nf(c[_e],r,n,_e);if(l){const _e=he(l)?l.call(n):l;Reflect.ownKeys(_e).forEach(pe=>{Zi(pe,_e[pe])})}d&&Zu(d,t,"c");function Be(_e,pe){le(pe)?pe.forEach(It=>_e(It.bind(n))):pe&&_e(pe.bind(n))}if(Be(u1,p),Be(h1,g),Be(d1,v),Be(f1,P),Be(a1,x),Be(c1,O),Be(v1,y),Be(_1,fe),Be(g1,I),Be(p1,B),Be(Df,q),Be(m1,T),le(b))if(b.length){const _e=t.exposed||(t.exposed={});b.forEach(pe=>{Object.defineProperty(_e,pe,{get:()=>n[pe],set:It=>n[pe]=It})})}else t.exposed||(t.exposed={});de&&t.render===Kt&&(t.render=de),S!=null&&(t.inheritAttrs=S),A&&(t.components=A),E&&(t.directives=E),T&&kf(t)}function b1(t,e,n=Kt){le(t)&&(t=oc(t));for(const r in t){const s=t[r];let i;De(s)?"default"in s?i=vn(s.from||r,s.default,!0):i=vn(s.from||r):i=vn(s),dt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Zu(t,e,n){Zt(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Nf(t,e,n,r){let s=r.includes(".")?Qf(n,r):()=>n[r];if(ze(t)){const i=e[t];he(i)&&Gr(s,i)}else if(he(t))Gr(s,t.bind(n));else if(De(t))if(le(t))t.forEach(i=>Nf(i,e,n,r));else{const i=he(t.handler)?t.handler.bind(n):e[t.handler];he(i)&&Gr(s,i,t)}}function Xc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(h=>go(l,h,o,!0)),go(l,e,o)),De(e)&&i.set(e,l),l}function go(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&go(t,i,n,!0),s&&s.forEach(o=>go(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=S1[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const S1={data:eh,props:th,emits:th,methods:Vs,computed:Vs,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:Vs,directives:Vs,watch:C1,provide:eh,inject:A1};function eh(t,e){return e?t?function(){return tt(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function A1(t,e){return Vs(oc(t),oc(e))}function oc(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function Vs(t,e){return t?tt(Object.create(null),t,e):e}function th(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:tt(Object.create(null),Xu(t),Xu(e??{})):e}function C1(t,e){if(!t)return e;if(!e)return t;const n=tt(Object.create(null),t);for(const r in e)n[r]=vt(t[r],e[r]);return n}function Lf(){return{app:null,config:{isNativeTag:hg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R1=0;function P1(t,e){return function(r,s=null){he(r)||(r=tt({},r)),s!=null&&!De(s)&&(s=null);const i=Lf(),o=new WeakSet,c=[];let l=!1;const h=i.app={_uid:R1++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:u2,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&he(d.install)?(o.add(d),d.install(h,...p)):he(d)&&(o.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!l){const v=h._ceVNode||He(r,s);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),p&&e?e(v,d):t(v,d,g),l=!0,h._container=d,d.__vue_app__=h,Yo(v.component)}},onUnmount(d){c.push(d)},unmount(){l&&(Zt(c,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=Hr;Hr=h;try{return d()}finally{Hr=p}}};return h}}let Hr=null;function Zi(t,e){if(ht){let n=ht.provides;const r=ht.parent&&ht.parent.provides;r===n&&(n=ht.provides=Object.create(r)),n[t]=e}}function vn(t,e,n=!1){const r=ht||Ct;if(r||Hr){const s=Hr?Hr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&he(e)?e.call(r&&r.proxy):e}}const Mf={},Ff=()=>Object.create(Mf),Uf=t=>Object.getPrototypeOf(t)===Mf;function k1(t,e,n,r=!1){const s={},i=Ff();t.propsDefaults=Object.create(null),Bf(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:yf(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function x1(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Se(s),[l]=t.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Wo(t.emitsOptions,g))continue;const v=e[g];if(l)if(be(i,g))v!==i[g]&&(i[g]=v,h=!0);else{const P=Nt(g);s[P]=ac(l,c,P,v,t,!1)}else v!==i[g]&&(i[g]=v,h=!0)}}}else{Bf(t,e,s,i)&&(h=!0);let d;for(const p in c)(!e||!be(e,p)&&((d=yr(p))===p||!be(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=ac(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!be(e,p))&&(delete i[p],h=!0)}h&&_n(t.attrs,"set","")}function Bf(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Ms(l))continue;const h=e[l];let d;s&&be(s,d=Nt(l))?!i||!i.includes(d)?n[d]=h:(c||(c={}))[d]=h:Wo(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,o=!0)}if(i){const l=Se(n),h=c||ke;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ac(s,l,p,h[p],t,!be(h,p))}}return o}function ac(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=be(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&he(l)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=mi(s);r=h[n]=l.call(null,e),d()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===yr(n))&&(r=!0))}return r}const V1=new WeakMap;function jf(t,e,n=!1){const r=n?V1:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!he(t)){const d=p=>{l=!0;const[g,v]=jf(p,e,!0);tt(o,g),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!l)return De(t)&&r.set(t,Fr),Fr;if(le(i))for(let d=0;d<i.length;d++){const p=Nt(i[d]);nh(p)&&(o[p]=ke)}else if(i)for(const d in i){const p=Nt(d);if(nh(p)){const g=i[d],v=o[p]=le(g)||he(g)?{type:g}:tt({},g),P=v.type;let x=!1,O=!0;if(le(P))for(let $=0;$<P.length;++$){const B=P[$],H=he(B)&&B.name;if(H==="Boolean"){x=!0;break}else H==="String"&&(O=!1)}else x=he(P)&&P.name==="Boolean";v[0]=x,v[1]=O,(x||be(v,"default"))&&c.push(p)}}const h=[o,c];return De(t)&&r.set(t,h),h}function nh(t){return t[0]!=="$"&&!Ms(t)}const $f=t=>t[0]==="_"||t==="$stable",Zc=t=>le(t)?t.map(Wt):[Wt(t)],D1=(t,e,n)=>{if(e._n)return e;const r=s1((...s)=>Zc(e(...s)),n);return r._c=!1,r},zf=(t,e,n)=>{const r=t._ctx;for(const s in t){if($f(s))continue;const i=t[s];if(he(i))e[s]=D1(s,i,r);else if(i!=null){const o=Zc(i);e[s]=()=>o}}},Hf=(t,e)=>{const n=Zc(e);t.slots.default=()=>n},Gf=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},O1=(t,e,n)=>{const r=t.slots=Ff();if(t.vnode.shapeFlag&32){const s=e._;s?(Gf(r,e,n),n&&Zd(r,"_",s,!0)):zf(e,r)}else e&&Hf(t,e)},N1=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ke;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:Gf(s,e,n):(i=!e.$stable,zf(e,s)),o=e}else e&&(Hf(t,e),o={default:1});if(i)for(const c in s)!$f(c)&&o[c]==null&&delete s[c]},St=Q1;function L1(t){return M1(t)}function M1(t,e){const n=ef();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:v=Kt,insertStaticContent:P}=t,x=(_,w,R,N=null,V=null,M=null,W=void 0,z=null,j=!!w.dynamicChildren)=>{if(_===w)return;_&&!Rs(_,w)&&(N=D(_),Oe(_,V,M,!0),_=null),w.patchFlag===-2&&(j=!1,w.dynamicChildren=null);const{type:F,ref:te,shapeFlag:Q}=w;switch(F){case Ko:O(_,w,R,N);break;case fr:$(_,w,R,N);break;case eo:_==null&&B(w,R,N,W);break;case Et:A(_,w,R,N,V,M,W,z,j);break;default:Q&1?de(_,w,R,N,V,M,W,z,j):Q&6?E(_,w,R,N,V,M,W,z,j):(Q&64||Q&128)&&F.process(_,w,R,N,V,M,W,z,j,J)}te!=null&&V&&rc(te,_&&_.ref,M,w||_,!w)},O=(_,w,R,N)=>{if(_==null)r(w.el=c(w.children),R,N);else{const V=w.el=_.el;w.children!==_.children&&h(V,w.children)}},$=(_,w,R,N)=>{_==null?r(w.el=l(w.children||""),R,N):w.el=_.el},B=(_,w,R,N)=>{[_.el,_.anchor]=P(_.children,w,R,N,_.el,_.anchor)},H=({el:_,anchor:w},R,N)=>{let V;for(;_&&_!==w;)V=g(_),r(_,R,N),_=V;r(w,R,N)},q=({el:_,anchor:w})=>{let R;for(;_&&_!==w;)R=g(_),s(_),_=R;s(w)},de=(_,w,R,N,V,M,W,z,j)=>{w.type==="svg"?W="svg":w.type==="math"&&(W="mathml"),_==null?fe(w,R,N,V,M,W,z,j):T(_,w,V,M,W,z,j)},fe=(_,w,R,N,V,M,W,z)=>{let j,F;const{props:te,shapeFlag:Q,transition:ee,dirs:X}=_;if(j=_.el=o(_.type,M,te&&te.is,te),Q&8?d(j,_.children):Q&16&&y(_.children,j,null,N,V,Na(_,M),W,z),X&&nr(_,null,N,"created"),I(j,_,_.scopeId,W,N),te){for(const Ie in te)Ie!=="value"&&!Ms(Ie)&&i(j,Ie,null,te[Ie],M,N);"value"in te&&i(j,"value",null,te.value,M),(F=te.onVnodeBeforeMount)&&Gt(F,N,_)}X&&nr(_,null,N,"beforeMount");const se=F1(V,ee);se&&ee.beforeEnter(j),r(j,w,R),((F=te&&te.onVnodeMounted)||se||X)&&St(()=>{F&&Gt(F,N,_),se&&ee.enter(j),X&&nr(_,null,N,"mounted")},V)},I=(_,w,R,N,V)=>{if(R&&v(_,R),N)for(let M=0;M<N.length;M++)v(_,N[M]);if(V){let M=V.subTree;if(w===M||Jf(M.type)&&(M.ssContent===w||M.ssFallback===w)){const W=V.vnode;I(_,W,W.scopeId,W.slotScopeIds,V.parent)}}},y=(_,w,R,N,V,M,W,z,j=0)=>{for(let F=j;F<_.length;F++){const te=_[F]=z?Nn(_[F]):Wt(_[F]);x(null,te,w,R,N,V,M,W,z)}},T=(_,w,R,N,V,M,W)=>{const z=w.el=_.el;let{patchFlag:j,dynamicChildren:F,dirs:te}=w;j|=_.patchFlag&16;const Q=_.props||ke,ee=w.props||ke;let X;if(R&&rr(R,!1),(X=ee.onVnodeBeforeUpdate)&&Gt(X,R,w,_),te&&nr(w,_,R,"beforeUpdate"),R&&rr(R,!0),(Q.innerHTML&&ee.innerHTML==null||Q.textContent&&ee.textContent==null)&&d(z,""),F?b(_.dynamicChildren,F,z,R,N,Na(w,V),M):W||pe(_,w,z,null,R,N,Na(w,V),M,!1),j>0){if(j&16)S(z,Q,ee,R,V);else if(j&2&&Q.class!==ee.class&&i(z,"class",null,ee.class,V),j&4&&i(z,"style",Q.style,ee.style,V),j&8){const se=w.dynamicProps;for(let Ie=0;Ie<se.length;Ie++){const we=se[Ie],rt=Q[we],We=ee[we];(We!==rt||we==="value")&&i(z,we,rt,We,V,R)}}j&1&&_.children!==w.children&&d(z,w.children)}else!W&&F==null&&S(z,Q,ee,R,V);((X=ee.onVnodeUpdated)||te)&&St(()=>{X&&Gt(X,R,w,_),te&&nr(w,_,R,"updated")},N)},b=(_,w,R,N,V,M,W)=>{for(let z=0;z<w.length;z++){const j=_[z],F=w[z],te=j.el&&(j.type===Et||!Rs(j,F)||j.shapeFlag&70)?p(j.el):R;x(j,F,te,null,N,V,M,W,!0)}},S=(_,w,R,N,V)=>{if(w!==R){if(w!==ke)for(const M in w)!Ms(M)&&!(M in R)&&i(_,M,w[M],null,V,N);for(const M in R){if(Ms(M))continue;const W=R[M],z=w[M];W!==z&&M!=="value"&&i(_,M,z,W,V,N)}"value"in R&&i(_,"value",w.value,R.value,V)}},A=(_,w,R,N,V,M,W,z,j)=>{const F=w.el=_?_.el:c(""),te=w.anchor=_?_.anchor:c("");let{patchFlag:Q,dynamicChildren:ee,slotScopeIds:X}=w;X&&(z=z?z.concat(X):X),_==null?(r(F,R,N),r(te,R,N),y(w.children||[],R,te,V,M,W,z,j)):Q>0&&Q&64&&ee&&_.dynamicChildren?(b(_.dynamicChildren,ee,R,V,M,W,z),(w.key!=null||V&&w===V.subTree)&&qf(_,w,!0)):pe(_,w,R,te,V,M,W,z,j)},E=(_,w,R,N,V,M,W,z,j)=>{w.slotScopeIds=z,_==null?w.shapeFlag&512?V.ctx.activate(w,R,N,W,j):mt(w,R,N,V,M,W,j):Pt(_,w,j)},mt=(_,w,R,N,V,M,W)=>{const z=_.component=r2(_,N,V);if(xf(_)&&(z.ctx.renderer=J),s2(z,!1,W),z.asyncDep){if(V&&V.registerDep(z,Be,W),!_.el){const j=z.subTree=He(fr);$(null,j,w,R)}}else Be(z,_,w,R,V,M,W)},Pt=(_,w,R)=>{const N=w.component=_.component;if(W1(_,w,R))if(N.asyncDep&&!N.asyncResolved){_e(N,w,R);return}else N.next=w,N.update();else w.el=_.el,N.vnode=w},Be=(_,w,R,N,V,M,W)=>{const z=()=>{if(_.isMounted){let{next:Q,bu:ee,u:X,parent:se,vnode:Ie}=_;{const st=Wf(_);if(st){Q&&(Q.el=Ie.el,_e(_,Q,W)),st.asyncDep.then(()=>{_.isUnmounted||z()});return}}let we=Q,rt;rr(_,!1),Q?(Q.el=Ie.el,_e(_,Q,W)):Q=Ie,ee&&Pa(ee),(rt=Q.props&&Q.props.onVnodeBeforeUpdate)&&Gt(rt,se,Q,Ie),rr(_,!0);const We=La(_),Ye=_.subTree;_.subTree=We,x(Ye,We,p(Ye.el),D(Ye),_,V,M),Q.el=We.el,we===null&&K1(_,We.el),X&&St(X,V),(rt=Q.props&&Q.props.onVnodeUpdated)&&St(()=>Gt(rt,se,Q,Ie),V)}else{let Q;const{el:ee,props:X}=w,{bm:se,m:Ie,parent:we,root:rt,type:We}=_,Ye=Bs(w);if(rr(_,!1),se&&Pa(se),!Ye&&(Q=X&&X.onVnodeBeforeMount)&&Gt(Q,we,w),rr(_,!0),ee&&Re){const st=()=>{_.subTree=La(_),Re(ee,_.subTree,_,V,null)};Ye&&We.__asyncHydrate?We.__asyncHydrate(ee,_,st):st()}else{rt.ce&&rt.ce._injectChildStyle(We);const st=_.subTree=La(_);x(null,st,R,N,_,V,M),w.el=st.el}if(Ie&&St(Ie,V),!Ye&&(Q=X&&X.onVnodeMounted)){const st=w;St(()=>Gt(Q,we,st),V)}(w.shapeFlag&256||we&&Bs(we.vnode)&&we.vnode.shapeFlag&256)&&_.a&&St(_.a,V),_.isMounted=!0,w=R=N=null}};_.scope.on();const j=_.effect=new sf(z);_.scope.off();const F=_.update=j.run.bind(j),te=_.job=j.runIfDirty.bind(j);te.i=_,te.id=_.uid,j.scheduler=()=>Yc(te),rr(_,!0),F()},_e=(_,w,R)=>{w.component=_;const N=_.vnode.props;_.vnode=w,_.next=null,x1(_,w.props,N,R),N1(_,w.children,R),Yn(),Yu(_),Jn()},pe=(_,w,R,N,V,M,W,z,j=!1)=>{const F=_&&_.children,te=_?_.shapeFlag:0,Q=w.children,{patchFlag:ee,shapeFlag:X}=w;if(ee>0){if(ee&128){Lt(F,Q,R,N,V,M,W,z,j);return}else if(ee&256){It(F,Q,R,N,V,M,W,z,j);return}}X&8?(te&16&&wt(F,V,M),Q!==F&&d(R,Q)):te&16?X&16?Lt(F,Q,R,N,V,M,W,z,j):wt(F,V,M,!0):(te&8&&d(R,""),X&16&&y(Q,R,N,V,M,W,z,j))},It=(_,w,R,N,V,M,W,z,j)=>{_=_||Fr,w=w||Fr;const F=_.length,te=w.length,Q=Math.min(F,te);let ee;for(ee=0;ee<Q;ee++){const X=w[ee]=j?Nn(w[ee]):Wt(w[ee]);x(_[ee],X,R,null,V,M,W,z,j)}F>te?wt(_,V,M,!0,!1,Q):y(w,R,N,V,M,W,z,j,Q)},Lt=(_,w,R,N,V,M,W,z,j)=>{let F=0;const te=w.length;let Q=_.length-1,ee=te-1;for(;F<=Q&&F<=ee;){const X=_[F],se=w[F]=j?Nn(w[F]):Wt(w[F]);if(Rs(X,se))x(X,se,R,null,V,M,W,z,j);else break;F++}for(;F<=Q&&F<=ee;){const X=_[Q],se=w[ee]=j?Nn(w[ee]):Wt(w[ee]);if(Rs(X,se))x(X,se,R,null,V,M,W,z,j);else break;Q--,ee--}if(F>Q){if(F<=ee){const X=ee+1,se=X<te?w[X].el:N;for(;F<=ee;)x(null,w[F]=j?Nn(w[F]):Wt(w[F]),R,se,V,M,W,z,j),F++}}else if(F>ee)for(;F<=Q;)Oe(_[F],V,M,!0),F++;else{const X=F,se=F,Ie=new Map;for(F=se;F<=ee;F++){const gt=w[F]=j?Nn(w[F]):Wt(w[F]);gt.key!=null&&Ie.set(gt.key,F)}let we,rt=0;const We=ee-se+1;let Ye=!1,st=0;const Cn=new Array(We);for(F=0;F<We;F++)Cn[F]=0;for(F=X;F<=Q;F++){const gt=_[F];if(rt>=We){Oe(gt,V,M,!0);continue}let xt;if(gt.key!=null)xt=Ie.get(gt.key);else for(we=se;we<=ee;we++)if(Cn[we-se]===0&&Rs(gt,w[we])){xt=we;break}xt===void 0?Oe(gt,V,M,!0):(Cn[xt-se]=F+1,xt>=st?st=xt:Ye=!0,x(gt,w[xt],R,null,V,M,W,z,j),rt++)}const Ir=Ye?U1(Cn):Fr;for(we=Ir.length-1,F=We-1;F>=0;F--){const gt=se+F,xt=w[gt],br=gt+1<te?w[gt+1].el:N;Cn[F]===0?x(null,xt,R,br,V,M,W,z,j):Ye&&(we<0||F!==Ir[we]?kt(xt,R,br,2):we--)}}},kt=(_,w,R,N,V=null)=>{const{el:M,type:W,transition:z,children:j,shapeFlag:F}=_;if(F&6){kt(_.component.subTree,w,R,N);return}if(F&128){_.suspense.move(w,R,N);return}if(F&64){W.move(_,w,R,J);return}if(W===Et){r(M,w,R);for(let Q=0;Q<j.length;Q++)kt(j[Q],w,R,N);r(_.anchor,w,R);return}if(W===eo){H(_,w,R);return}if(N!==2&&F&1&&z)if(N===0)z.beforeEnter(M),r(M,w,R),St(()=>z.enter(M),V);else{const{leave:Q,delayLeave:ee,afterLeave:X}=z,se=()=>r(M,w,R),Ie=()=>{Q(M,()=>{se(),X&&X()})};ee?ee(M,se,Ie):Ie()}else r(M,w,R)},Oe=(_,w,R,N=!1,V=!1)=>{const{type:M,props:W,ref:z,children:j,dynamicChildren:F,shapeFlag:te,patchFlag:Q,dirs:ee,cacheIndex:X}=_;if(Q===-2&&(V=!1),z!=null&&rc(z,null,R,_,!0),X!=null&&(w.renderCache[X]=void 0),te&256){w.ctx.deactivate(_);return}const se=te&1&&ee,Ie=!Bs(_);let we;if(Ie&&(we=W&&W.onVnodeBeforeUnmount)&&Gt(we,w,_),te&6)Ht(_.component,R,N);else{if(te&128){_.suspense.unmount(R,N);return}se&&nr(_,null,w,"beforeUnmount"),te&64?_.type.remove(_,w,R,J,N):F&&!F.hasOnce&&(M!==Et||Q>0&&Q&64)?wt(F,w,R,!1,!0):(M===Et&&Q&384||!V&&te&16)&&wt(j,w,R),N&&Ne(_)}(Ie&&(we=W&&W.onVnodeUnmounted)||se)&&St(()=>{we&&Gt(we,w,_),se&&nr(_,null,w,"unmounted")},R)},Ne=_=>{const{type:w,el:R,anchor:N,transition:V}=_;if(w===Et){An(R,N);return}if(w===eo){q(_);return}const M=()=>{s(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(_.shapeFlag&1&&V&&!V.persisted){const{leave:W,delayLeave:z}=V,j=()=>W(R,M);z?z(_.el,M,j):j()}else M()},An=(_,w)=>{let R;for(;_!==w;)R=g(_),s(_),_=R;s(w)},Ht=(_,w,R)=>{const{bum:N,scope:V,job:M,subTree:W,um:z,m:j,a:F}=_;rh(j),rh(F),N&&Pa(N),V.stop(),M&&(M.flags|=8,Oe(W,_,w,R)),z&&St(z,w),St(()=>{_.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},wt=(_,w,R,N=!1,V=!1,M=0)=>{for(let W=M;W<_.length;W++)Oe(_[W],w,R,N,V)},D=_=>{if(_.shapeFlag&6)return D(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=g(_.anchor||_.el),R=w&&w[i1];return R?g(R):w};let Y=!1;const K=(_,w,R)=>{_==null?w._vnode&&Oe(w._vnode,null,null,!0):x(w._vnode||null,_,w,null,null,null,R),w._vnode=_,Y||(Y=!0,Yu(),Af(),Y=!1)},J={p:x,um:Oe,m:kt,r:Ne,mt,mc:y,pc:pe,pbc:b,n:D,o:t};let ve,Re;return{render:K,hydrate:ve,createApp:P1(K,ve)}}function Na({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function rr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function F1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function qf(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=Nn(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&qf(o,c)),c.type===Ko&&(c.el=o.el)}}function U1(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(s=n[n.length-1],t[s]<h){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<h?i=c+1:o=c;h<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Wf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Wf(e)}function rh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const B1=Symbol.for("v-scx"),j1=()=>vn(B1);function Gr(t,e,n){return Kf(t,e,n)}function Kf(t,e,n=ke){const{immediate:r,deep:s,flush:i,once:o}=n,c=tt({},n);let l;if(Qo)if(i==="sync"){const g=j1();l=g.__watcherHandles||(g.__watcherHandles=[])}else if(!e||r)c.once=!0;else{const g=()=>{};return g.stop=Kt,g.resume=Kt,g.pause=Kt,g}const h=ht;c.call=(g,v,P)=>Zt(g,h,v,P);let d=!1;i==="post"?c.scheduler=g=>{St(g,h&&h.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(g,v)=>{v?g():Yc(g)}),c.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=e1(t,e,c);return l&&l.push(p),p}function $1(t,e,n){const r=this.proxy,s=ze(t)?t.includes(".")?Qf(r,t):()=>r[t]:t.bind(r,r);let i;he(e)?i=e:(i=e.handler,n=e);const o=mi(this),c=Kf(s,i.bind(r),n);return o(),c}function Qf(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const z1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Nt(e)}Modifiers`]||t[`${yr(e)}Modifiers`];function H1(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ke;let s=n;const i=e.startsWith("update:"),o=i&&z1(r,e.slice(7));o&&(o.trim&&(s=n.map(d=>ze(d)?d.trim():d)),o.number&&(s=n.map(gg)));let c,l=r[c=Ra(e)]||r[c=Ra(Nt(e))];!l&&i&&(l=r[c=Ra(yr(e))]),l&&Zt(l,t,6,s);const h=r[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Zt(h,t,6,s)}}function Yf(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!he(t)){const l=h=>{const d=Yf(h,e,!0);d&&(c=!0,tt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(De(t)&&r.set(t,null),null):(le(i)?i.forEach(l=>o[l]=null):tt(o,i),De(t)&&r.set(t,o),o)}function Wo(t,e){return!t||!Uo(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,yr(e))||be(t,e))}function La(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:h,renderCache:d,props:p,data:g,setupState:v,ctx:P,inheritAttrs:x}=t,O=po(t);let $,B;try{if(n.shapeFlag&4){const q=s||r,de=q;$=Wt(h.call(de,q,d,p,v,g,P)),B=c}else{const q=e;$=Wt(q.length>1?q(p,{attrs:c,slots:o,emit:l}):q(p,null)),B=e.props?c:G1(c)}}catch(q){$s.length=0,Go(q,t,1),$=He(fr)}let H=$;if(B&&x!==!1){const q=Object.keys(B),{shapeFlag:de}=H;q.length&&de&7&&(i&&q.some(Fc)&&(B=q1(B,i)),H=Yr(H,B,!1,!0))}return n.dirs&&(H=Yr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Jc(H,n.transition),$=H,po(O),$}const G1=t=>{let e;for(const n in t)(n==="class"||n==="style"||Uo(n))&&((e||(e={}))[n]=t[n]);return e},q1=(t,e)=>{const n={};for(const r in t)(!Fc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function W1(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?sh(r,o,h):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==r[g]&&!Wo(h,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?sh(r,o,h):!0:!!o;return!1}function sh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Wo(n,i))return!0}return!1}function K1({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Jf=t=>t.__isSuspense;function Q1(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):r1(t)}const Et=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),fr=Symbol.for("v-cmt"),eo=Symbol.for("v-stc"),$s=[];let Rt=null;function $e(t=!1){$s.push(Rt=t?null:[])}function Y1(){$s.pop(),Rt=$s[$s.length-1]||null}let ei=1;function ih(t){ei+=t,t<0&&Rt&&(Rt.hasOnce=!0)}function Xf(t){return t.dynamicChildren=ei>0?Rt||Fr:null,Y1(),ei>0&&Rt&&Rt.push(t),t}function Ke(t,e,n,r,s,i){return Xf(ie(t,e,n,r,s,i,!0))}function Zf(t,e,n,r,s){return Xf(He(t,e,n,r,s,!0))}function _o(t){return t?t.__v_isVNode===!0:!1}function Rs(t,e){return t.type===e.type&&t.key===e.key}const ep=({key:t})=>t??null,to=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ze(t)||dt(t)||he(t)?{i:Ct,r:t,k:e,f:!!n}:t:null);function ie(t,e=null,n=null,r=0,s=null,i=t===Et?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ep(e),ref:e&&to(e),scopeId:Rf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ct};return c?(el(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ze(n)?8:16),ei>0&&!o&&Rt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Rt.push(l),l}const He=J1;function J1(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===w1)&&(t=fr),_o(t)){const c=Yr(t,e,!0);return n&&el(c,n),ei>0&&!i&&Rt&&(c.shapeFlag&6?Rt[Rt.indexOf(t)]=c:Rt.push(c)),c.patchFlag=-2,c}if(l2(t)&&(t=t.__vccOpts),e){e=X1(e);let{class:c,style:l}=e;c&&!ze(c)&&(e.class=Br(c)),De(l)&&(Kc(l)&&!le(l)&&(l=tt({},l)),e.style=Ys(l))}const o=ze(t)?1:Jf(t)?128:o1(t)?64:De(t)?4:he(t)?2:0;return ie(t,e,n,r,s,o,i,!0)}function X1(t){return t?Kc(t)||Uf(t)?tt({},t):t:null}function Yr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,h=e?e2(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&ep(h),ref:e&&e.ref?n&&i?le(i)?i.concat(to(e)):[i,to(e)]:to(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Yr(t.ssContent),ssFallback:t.ssFallback&&Yr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Jc(d,l.clone(d)),d}function Z1(t=" ",e=0){return He(Ko,null,t,e)}function Qt(t,e){const n=He(eo,null,t);return n.staticCount=e,n}function Ds(t="",e=!1){return e?($e(),Zf(fr,null,t)):He(fr,null,t)}function Wt(t){return t==null||typeof t=="boolean"?He(fr):le(t)?He(Et,null,t.slice()):_o(t)?Nn(t):He(Ko,null,String(t))}function Nn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Yr(t)}function el(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),el(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Uf(e)?e._ctx=Ct:s===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),r&64?(n=16,e=[Z1(e)]):n=8);t.children=e,t.shapeFlag|=n}function e2(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Br([e.class,r.class]));else if(s==="style")e.style=Ys([e.style,r.style]);else if(Uo(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Gt(t,e,n,r=null){Zt(t,e,7,[n,r])}const t2=Lf();let n2=0;function r2(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||t2,i={uid:n2++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ig(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jf(r,s),emitsOptions:Yf(r,s),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=H1.bind(null,i),t.ce&&t.ce(i),i}let ht=null,vo,cc;{const t=ef(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};vo=e("__VUE_INSTANCE_SETTERS__",n=>ht=n),cc=e("__VUE_SSR_SETTERS__",n=>Qo=n)}const mi=t=>{const e=ht;return vo(t),t.scope.on(),()=>{t.scope.off(),vo(e)}},oh=()=>{ht&&ht.scope.off(),vo(null)};function tp(t){return t.vnode.shapeFlag&4}let Qo=!1;function s2(t,e=!1,n=!1){e&&cc(e);const{props:r,children:s}=t.vnode,i=tp(t);k1(t,r,i,e),O1(t,s,n);const o=i?i2(t,e):void 0;return e&&cc(!1),o}function i2(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,T1);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?a2(t):null,i=mi(t);Yn();const o=pi(r,t,0,[t.props,s]);if(Jn(),i(),Yd(o)){if(Bs(t)||kf(t),o.then(oh,oh),e)return o.then(c=>{ah(t,c,e)}).catch(c=>{Go(c,t,0)});t.asyncDep=o}else ah(t,o,e)}else np(t,e)}function ah(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=Tf(e)),np(t,n)}let ch;function np(t,e,n){const r=t.type;if(!t.render){if(!e&&ch&&!r.render){const s=r.template||Xc(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:c,compilerOptions:l}=r,h=tt(tt({isCustomElement:i,delimiters:c},o),l);r.render=ch(s,h)}}t.render=r.render||Kt}{const s=mi(t);Yn();try{I1(t)}finally{Jn(),s()}}}const o2={get(t,e){return ft(t,"get",""),t[e]}};function a2(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,o2),slots:t.slots,emit:t.emit,expose:e}}function Yo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Tf(qg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in js)return js[n](t)},has(e,n){return n in e||n in js}})):t.proxy}function c2(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function l2(t){return he(t)&&"__vccOpts"in t}const Ft=(t,e)=>Xg(t,e,Qo);function rp(t,e,n){const r=arguments.length;return r===2?De(e)&&!le(e)?_o(e)?He(t,null,[e]):He(t,e):He(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_o(n)&&(n=[n]),He(t,e,n))}const u2="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lc;const lh=typeof window<"u"&&window.trustedTypes;if(lh)try{lc=lh.createPolicy("vue",{createHTML:t=>t})}catch{}const sp=lc?t=>lc.createHTML(t):t=>t,h2="http://www.w3.org/2000/svg",d2="http://www.w3.org/1998/Math/MathML",un=typeof document<"u"?document:null,uh=un&&un.createElement("template"),f2={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?un.createElementNS(h2,t):e==="mathml"?un.createElementNS(d2,t):n?un.createElement(t,{is:n}):un.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>un.createTextNode(t),createComment:t=>un.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>un.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{uh.innerHTML=sp(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=uh.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},p2=Symbol("_vtc");function m2(t,e,n){const r=t[p2];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const yo=Symbol("_vod"),ip=Symbol("_vsh"),wo={beforeMount(t,{value:e},{transition:n}){t[yo]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ps(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ps(t,!0),r.enter(t)):r.leave(t,()=>{Ps(t,!1)}):Ps(t,e))},beforeUnmount(t,{value:e}){Ps(t,e)}};function Ps(t,e){t.style.display=e?t[yo]:"none",t[ip]=!e}const g2=Symbol(""),_2=/(^|;)\s*display\s*:/;function v2(t,e,n){const r=t.style,s=ze(n);let i=!1;if(n&&!s){if(e)if(ze(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&no(r,c,"")}else for(const o in e)n[o]==null&&no(r,o,"");for(const o in n)o==="display"&&(i=!0),no(r,o,n[o])}else if(s){if(e!==n){const o=r[g2];o&&(n+=";"+o),r.cssText=n,i=_2.test(n)}}else e&&t.removeAttribute("style");yo in t&&(t[yo]=i?r.display:"",t[ip]&&(r.display="none"))}const hh=/\s*!important$/;function no(t,e,n){if(le(n))n.forEach(r=>no(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=y2(t,e);hh.test(n)?t.setProperty(yr(r),n.replace(hh,""),"important"):t[r]=n}}const dh=["Webkit","Moz","ms"],Ma={};function y2(t,e){const n=Ma[e];if(n)return n;let r=Nt(e);if(r!=="filter"&&r in t)return Ma[e]=r;r=$o(r);for(let s=0;s<dh.length;s++){const i=dh[s]+r;if(i in t)return Ma[e]=i}return e}const fh="http://www.w3.org/1999/xlink";function ph(t,e,n,r,s,i=Tg(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(fh,e.slice(6,e.length)):t.setAttributeNS(fh,e,n):n==null||i&&!tf(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Qn(n)?String(n):n)}function mh(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sp(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(o!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=tf(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function w2(t,e,n,r){t.addEventListener(e,n,r)}function E2(t,e,n,r){t.removeEventListener(e,n,r)}const gh=Symbol("_vei");function T2(t,e,n,r,s=null){const i=t[gh]||(t[gh]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=I2(e);if(r){const h=i[e]=A2(r,s);w2(t,c,h,l)}else o&&(E2(t,c,o,l),i[e]=void 0)}}const _h=/(?:Once|Passive|Capture)$/;function I2(t){let e;if(_h.test(t)){e={};let r;for(;r=t.match(_h);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):yr(t.slice(2)),e]}let Fa=0;const b2=Promise.resolve(),S2=()=>Fa||(b2.then(()=>Fa=0),Fa=Date.now());function A2(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Zt(C2(r,n.value),e,5,[r])};return n.value=t,n.attached=S2(),n}function C2(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const vh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,R2=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?m2(t,r,o):e==="style"?v2(t,n,r):Uo(e)?Fc(e)||T2(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):P2(t,e,r,o))?(mh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ph(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ze(r))?mh(t,Nt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ph(t,e,r,o))};function P2(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&vh(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return vh(e)&&ze(n)?!1:e in t}const k2=tt({patchProp:R2},f2);let yh;function x2(){return yh||(yh=L1(k2))}const V2=(...t)=>{const e=x2().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=O2(r);if(!s)return;const i=e._component;!he(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,D2(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function D2(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function O2(t){return ze(t)?document.querySelector(t):t}const sn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},N2={};function L2(t,e){const n=Dr("router-view");return $e(),Zf(n)}const op=sn(N2,[["render",L2]]);function M2(){return ap().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ap(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const F2=typeof Proxy=="function",U2="devtools-plugin:setup",B2="plugin:settings:set";let kr,uc;function j2(){var t;return kr!==void 0||(typeof window<"u"&&window.performance?(kr=!0,uc=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(kr=!0,uc=globalThis.perf_hooks.performance):kr=!1),kr}function $2(){return j2()?uc.now():Date.now()}class z2{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const c=e.settings[o];r[o]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),c=JSON.parse(o);Object.assign(i,c)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return $2()}},n&&n.on(B2,(o,c)=>{o===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(o,c)=>this.target?this.target.on[c]:(...l)=>{this.onQueue.push({method:c,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...l)=>(this.targetQueue.push({method:c,args:l,resolve:()=>{}}),this.fallbacks[c](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:c,args:l,resolve:h})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function H2(t,e){const n=t,r=ap(),s=M2(),i=F2&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(U2,t,e);else{const o=i?new z2(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var G2="store";function cs(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function cp(t){return t!==null&&typeof t=="object"}function q2(t){return t&&typeof t.then=="function"}function W2(t,e){return function(){return t(e)}}function lp(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function up(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Jo(t,n,[],t._modules.root,!0),tl(t,n,e)}function tl(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,i={};cs(s,function(o,c){i[c]=W2(o,t),Object.defineProperty(t.getters,c,{get:function(){return i[c]()},enumerable:!0})}),t._state=fi({data:e}),t.strict&&X2(t),r&&n&&t._withCommit(function(){r.data=null})}function Jo(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var c=nl(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){c[l]=r.state})}var h=r.context=K2(t,o,n);r.forEachMutation(function(d,p){var g=o+p;Q2(t,g,d,h)}),r.forEachAction(function(d,p){var g=d.root?p:o+p,v=d.handler||d;Y2(t,g,v,h)}),r.forEachGetter(function(d,p){var g=o+p;J2(t,g,d,h)}),r.forEachChild(function(d,p){Jo(t,e,n.concat(p),d,s)})}function K2(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,c){var l=Eo(i,o,c),h=l.payload,d=l.options,p=l.type;return(!d||!d.root)&&(p=e+p),t.dispatch(p,h)},commit:r?t.commit:function(i,o,c){var l=Eo(i,o,c),h=l.payload,d=l.options,p=l.type;(!d||!d.root)&&(p=e+p),t.commit(p,h,d)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return hp(t,e)}},state:{get:function(){return nl(t.state,n)}}}),s}function hp(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function Q2(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function Y2(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var c=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return q2(c)||(c=Promise.resolve(c)),t._devtoolHook?c.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):c})}function J2(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function X2(t){Gr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function nl(t,e){return e.reduce(function(n,r){return n[r]},t)}function Eo(t,e,n){return cp(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var Z2="vuex bindings",wh="vuex:mutations",Ua="vuex:actions",xr="vuex",e_=0;function t_(t,e){H2({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Z2]},function(n){n.addTimelineLayer({id:wh,label:"Vuex Mutations",color:Eh}),n.addTimelineLayer({id:Ua,label:"Vuex Actions",color:Eh}),n.addInspector({id:xr,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===xr)if(r.filter){var s=[];mp(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[pp(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===xr){var s=r.nodeId;hp(e,s),r.state=s_(o_(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===xr){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(xr),n.sendInspectorState(xr),n.addTimelineEvent({layerId:wh,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=e_++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Ua,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Ua,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Eh=8702998,n_=6710886,r_=16777215,dp={label:"namespaced",textColor:r_,backgroundColor:n_};function fp(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function pp(t,e){return{id:e||"root",label:fp(e),tags:t.namespaced?[dp]:[],children:Object.keys(t._children).map(function(n){return pp(t._children[n],e+n+"/")})}}function mp(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[dp]:[]}),Object.keys(e._children).forEach(function(s){mp(t,e._children[s],n,r+s+"/")})}function s_(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=i_(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?fp(o):o,editable:!1,value:hc(function(){return i[o]})}})}return s}function i_(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=hc(function(){return t[n]})}else e[n]=hc(function(){return t[n]})}),e}function o_(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function hc(t){try{return t()}catch(e){return e}}var zt=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},gp={namespaced:{configurable:!0}};gp.namespaced.get=function(){return!!this._rawModule.namespaced};zt.prototype.addChild=function(e,n){this._children[e]=n};zt.prototype.removeChild=function(e){delete this._children[e]};zt.prototype.getChild=function(e){return this._children[e]};zt.prototype.hasChild=function(e){return e in this._children};zt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};zt.prototype.forEachChild=function(e){cs(this._children,e)};zt.prototype.forEachGetter=function(e){this._rawModule.getters&&cs(this._rawModule.getters,e)};zt.prototype.forEachAction=function(e){this._rawModule.actions&&cs(this._rawModule.actions,e)};zt.prototype.forEachMutation=function(e){this._rawModule.mutations&&cs(this._rawModule.mutations,e)};Object.defineProperties(zt.prototype,gp);var wr=function(e){this.register([],e,!1)};wr.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};wr.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};wr.prototype.update=function(e){_p([],this.root,e)};wr.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new zt(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&cs(n.modules,function(c,l){s.register(e.concat(l),c,r)})};wr.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};wr.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function _p(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;_p(t.concat(r),e.getChild(r),n.modules[r])}}function a_(t){return new Tt(t)}var Tt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new wr(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var o=this,c=this,l=c.dispatch,h=c.commit;this.dispatch=function(g,v){return l.call(o,g,v)},this.commit=function(g,v,P){return h.call(o,g,v,P)},this.strict=s;var d=this._modules.root.state;Jo(this,d,[],this._modules.root),tl(this,d),r.forEach(function(p){return p(n)})},rl={state:{configurable:!0}};Tt.prototype.install=function(e,n){e.provide(n||G2,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&t_(e,this)};rl.state.get=function(){return this._state.data};rl.state.set=function(t){};Tt.prototype.commit=function(e,n,r){var s=this,i=Eo(e,n,r),o=i.type,c=i.payload,l={type:o,payload:c},h=this._mutations[o];h&&(this._withCommit(function(){h.forEach(function(p){p(c)})}),this._subscribers.slice().forEach(function(d){return d(l,s.state)}))};Tt.prototype.dispatch=function(e,n){var r=this,s=Eo(e,n),i=s.type,o=s.payload,c={type:i,payload:o},l=this._actions[i];if(l){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(c,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(d){return d(o)})):l[0](o);return new Promise(function(d,p){h.then(function(g){try{r._actionSubscribers.filter(function(v){return v.after}).forEach(function(v){return v.after(c,r.state)})}catch{}d(g)},function(g){try{r._actionSubscribers.filter(function(v){return v.error}).forEach(function(v){return v.error(c,r.state,g)})}catch{}p(g)})})}};Tt.prototype.subscribe=function(e,n){return lp(e,this._subscribers,n)};Tt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return lp(r,this._actionSubscribers,n)};Tt.prototype.watch=function(e,n,r){var s=this;return Gr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Tt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Tt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Jo(this,this.state,e,this._modules.get(e),r.preserveState),tl(this,this.state)};Tt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=nl(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),up(this)};Tt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Tt.prototype.hotUpdate=function(e){this._modules.update(e),up(this,!0)};Tt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Tt.prototype,rl);var Xo=wp(function(t,e){var n={};return yp(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Ep(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),vp=wp(function(t,e){var n={};return yp(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var c=[],l=arguments.length;l--;)c[l]=arguments[l];var h=this.$store.dispatch;if(t){var d=Ep(this.$store,"mapActions",t);if(!d)return;h=d.context.dispatch}return typeof i=="function"?i.apply(this,[h].concat(c)):h.apply(this.$store,[i].concat(c))}}),n});function yp(t){return c_(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function c_(t){return Array.isArray(t)||cp(t)}function wp(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Ep(t,e,n){var r=t._modulesNamespaceMap[n];return r}var Th={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},l_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,h=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,v=h&63;l||(v=64,o||(g=64)),r.push(n[d],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||p==null)throw new u_;const g=i<<2|c>>4;if(r.push(g),h!==64){const v=c<<4&240|h>>2;if(r.push(v),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h_=function(t){const e=Tp(t);return Ip.encodeByteArray(e,!0)},To=function(t){return h_(t).replace(/\./g,"")},bp=function(t){try{return Ip.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=()=>d_().__FIREBASE_DEFAULTS__,p_=()=>{if(typeof process>"u"||typeof Th>"u")return;const t=Th.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bp(t[1]);return e&&JSON.parse(e)},Zo=()=>{try{return f_()||p_()||m_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sp=t=>{var e,n;return(n=(e=Zo())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},g_=t=>{const e=Sp(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ap=()=>{var t;return(t=Zo())===null||t===void 0?void 0:t.config},Cp=t=>{var e;return(e=Zo())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[To(JSON.stringify(n)),To(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function w_(){var t;const e=(t=Zo())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b_(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S_(){return!w_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A_(){try{return typeof indexedDB=="object"}catch{return!1}}function C_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=R_,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gi.prototype.create)}}class gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P_(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Sn(s,c,r)}}function P_(t,e){return t.replace(k_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k_=/\{\$([^}]+)}/g;function x_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ih(i)&&Ih(o)){if(!Io(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ih(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V_(t,e){const n=new D_(t,e);return n.subscribe.bind(n)}class D_{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");O_(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ba),s.error===void 0&&(s.error=Ba),s.complete===void 0&&(s.complete=Ba);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O_(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ba(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new __;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M_(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L_(t){return t===ir?void 0:t}function M_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new N_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const U_={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},B_=ge.INFO,j_={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},$_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=j_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sl{constructor(e){this.name=e,this._logLevel=B_,this._logHandler=$_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const z_=(t,e)=>e.some(n=>t instanceof n);let bh,Sh;function H_(){return bh||(bh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G_(){return Sh||(Sh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rp=new WeakMap,dc=new WeakMap,Pp=new WeakMap,ja=new WeakMap,il=new WeakMap;function q_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(jn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Rp.set(n,t)}).catch(()=>{}),il.set(e,t),e}function W_(t){if(dc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dc.set(t,e)}let fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K_(t){fc=t(fc)}function Q_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($a(this),e,...n);return Pp.set(r,e.sort?e.sort():[e]),jn(r)}:G_().includes(t)?function(...e){return t.apply($a(this),e),jn(Rp.get(this))}:function(...e){return jn(t.apply($a(this),e))}}function Y_(t){return typeof t=="function"?Q_(t):(t instanceof IDBTransaction&&W_(t),z_(t,H_())?new Proxy(t,fc):t)}function jn(t){if(t instanceof IDBRequest)return q_(t);if(ja.has(t))return ja.get(t);const e=Y_(t);return e!==t&&(ja.set(t,e),il.set(e,t)),e}const $a=t=>il.get(t);function J_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=jn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(jn(o.result),l.oldVersion,l.newVersion,jn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const X_=["get","getKey","getAll","getAllKeys","count"],Z_=["put","add","delete","clear"],za=new Map;function Ah(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(za.get(e))return za.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X_.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&l.done]))[0]};return za.set(e,i),i}K_(t=>({...t,get:(e,n,r)=>Ah(e,n)||t.get(e,n,r),has:(e,n)=>!!Ah(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pc="@firebase/app",Ch="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new sl("@firebase/app"),nv="@firebase/app-compat",rv="@firebase/analytics-compat",sv="@firebase/analytics",iv="@firebase/app-check-compat",ov="@firebase/app-check",av="@firebase/auth",cv="@firebase/auth-compat",lv="@firebase/database",uv="@firebase/data-connect",hv="@firebase/database-compat",dv="@firebase/functions",fv="@firebase/functions-compat",pv="@firebase/installations",mv="@firebase/installations-compat",gv="@firebase/messaging",_v="@firebase/messaging-compat",vv="@firebase/performance",yv="@firebase/performance-compat",wv="@firebase/remote-config",Ev="@firebase/remote-config-compat",Tv="@firebase/storage",Iv="@firebase/storage-compat",bv="@firebase/firestore",Sv="@firebase/vertexai-preview",Av="@firebase/firestore-compat",Cv="firebase",Rv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc="[DEFAULT]",Pv={[pc]:"fire-core",[nv]:"fire-core-compat",[sv]:"fire-analytics",[rv]:"fire-analytics-compat",[ov]:"fire-app-check",[iv]:"fire-app-check-compat",[av]:"fire-auth",[cv]:"fire-auth-compat",[lv]:"fire-rtdb",[uv]:"fire-data-connect",[hv]:"fire-rtdb-compat",[dv]:"fire-fn",[fv]:"fire-fn-compat",[pv]:"fire-iid",[mv]:"fire-iid-compat",[gv]:"fire-fcm",[_v]:"fire-fcm-compat",[vv]:"fire-perf",[yv]:"fire-perf-compat",[wv]:"fire-rc",[Ev]:"fire-rc-compat",[Tv]:"fire-gcs",[Iv]:"fire-gcs-compat",[bv]:"fire-fst",[Av]:"fire-fst-compat",[Sv]:"fire-vertex","fire-js":"fire-js",[Cv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Map,kv=new Map,gc=new Map;function Rh(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jr(t){const e=t.name;if(gc.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;gc.set(e,t);for(const n of bo.values())Rh(n,t);for(const n of kv.values())Rh(n,t);return!0}function ol(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new gi("app","Firebase",xv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=Rv;function kp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $n.create("bad-app-name",{appName:String(s)});if(n||(n=Ap()),!n)throw $n.create("no-options");const i=bo.get(s);if(i){if(Io(n,i.options)&&Io(r,i.config))return i;throw $n.create("duplicate-app",{appName:s})}const o=new F_(s);for(const l of gc.values())o.addComponent(l);const c=new Vv(n,r,o);return bo.set(s,c),c}function xp(t=mc){const e=bo.get(t);if(!e&&t===mc&&Ap())return kp();if(!e)throw $n.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let s=(r=Pv[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(c.join(" "));return}Jr(new pr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="firebase-heartbeat-database",Ov=1,ti="firebase-heartbeat-store";let Ha=null;function Vp(){return Ha||(Ha=J_(Dv,Ov,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ti)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Ha}async function Nv(t){try{const n=(await Vp()).transaction(ti),r=await n.objectStore(ti).get(Dp(t));return await n.done,r}catch(e){if(e instanceof Sn)wn.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function Ph(t,e){try{const r=(await Vp()).transaction(ti,"readwrite");await r.objectStore(ti).put(e,Dp(t)),await r.done}catch(n){if(n instanceof Sn)wn.warn(n.message);else{const r=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function Dp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=1024,Mv=30*24*60*60*1e3;class Fv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Mv}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kh(),{heartbeatsToSend:r,unsentEntries:s}=Uv(this._heartbeatsCache.heartbeats),i=To(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wn.warn(n),""}}}function kh(){return new Date().toISOString().substring(0,10)}function Uv(t,e=Lv){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),xh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A_()?C_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ph(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ph(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xh(t){return To(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){Jr(new pr("platform-logger",e=>new ev(e),"PRIVATE")),Jr(new pr("heartbeat",e=>new Fv(e),"PRIVATE")),zn(pc,Ch,t),zn(pc,Ch,"esm2017"),zn("fire-js","")}jv("");var $v="firebase",zv="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn($v,zv,"app");function al(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Op(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hv=Op,Np=new gi("auth","Firebase",Op());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new sl("@firebase/auth");function Gv(t,...e){So.logLevel<=ge.WARN&&So.warn(`Auth (${ls}): ${t}`,...e)}function ro(t,...e){So.logLevel<=ge.ERROR&&So.error(`Auth (${ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw ll(t,...e)}function jt(t,...e){return ll(t,...e)}function cl(t,e,n){const r=Object.assign(Object.assign({},Hv()),{[e]:n});return new gi("auth","Firebase",r).create(e,{appName:t.name})}function ur(t){return cl(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tn(t,"argument-error"),cl(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ll(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Np.create(t,...e)}function oe(t,e,...n){if(!t)throw ll(e,...n)}function pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ro(e),new Error(e)}function En(t,e){t||pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wv(){return Vh()==="http:"||Vh()==="https:"}function Vh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wv()||T_()||"connection"in navigator)?navigator.onLine:!0}function Qv(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.shortDelay=e,this.longDelay=n,En(n>e,"Short delay should be less than long delay!"),this.isMobile=y_()||I_()}get(){return Kv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e){En(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new vi(3e4,6e4);function hl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function us(t,e,n,r,s={}){return Mp(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=_i(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},i);return E_()||(h.referrerPolicy="no-referrer"),Lp.fetch()(Fp(t,t.config.apiHost,n,c),h)})}async function Mp(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yv),e);try{const s=new Zv(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ki(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ki(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ki(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ki(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw cl(t,d,h);tn(t,d)}}catch(s){if(s instanceof Sn)throw s;tn(t,"network-request-failed",{message:String(s)})}}async function Xv(t,e,n,r,s={}){const i=await us(t,e,n,r,s);return"mfaPendingCredential"in i&&tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Fp(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ul(t.config,s):`${t.config.apiScheme}://${s}`}class Zv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),Jv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ki(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(t,e){return us(t,"POST","/v1/accounts:delete",e)}async function Up(t,e){return us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ty(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=dl(r);oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zs(Ga(s.auth_time)),issuedAtTime:zs(Ga(s.iat)),expirationTime:zs(Ga(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ga(t){return Number(t)*1e3}function dl(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ro("JWT malformed, contained fewer than 3 sections"),null;try{const s=bp(n);return s?JSON.parse(s):(ro("Failed to decode base64 JWT payload"),null)}catch(s){return ro("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Dh(t){const e=dl(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&ny(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ny({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zs(this.lastLoginAt),this.creationTime=zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ni(t,Up(n,{idToken:r}));oe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Bp(i.providerUserInfo):[],c=iy(t.providerData,o),l=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),d=l?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new vc(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function sy(t){const e=en(t);await Ao(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iy(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bp(t){return t.map(e=>{var{providerId:n}=e,r=al(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oy(t,e){const n=await Mp(t,{},async()=>{const r=_i({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Fp(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Lp.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ay(t,e){return us(t,"POST","/v2/accounts:revokeToken",hl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Dh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oy(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new qr;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(oe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qr,this.toJSON())}_performRefresh(){return pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=al(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ry(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ni(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ty(this,e)}reload(){return sy(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ao(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await ni(this,ey(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,l,h,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,$=(h=n.createdAt)!==null&&h!==void 0?h:void 0,B=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:q,isAnonymous:de,providerData:fe,stsTokenManager:I}=n;oe(H&&I,e,"internal-error");const y=qr.fromJSON(this.name,I);oe(typeof H=="string",e,"internal-error"),Vn(p,e.name),Vn(g,e.name),oe(typeof q=="boolean",e,"internal-error"),oe(typeof de=="boolean",e,"internal-error"),Vn(v,e.name),Vn(P,e.name),Vn(x,e.name),Vn(O,e.name),Vn($,e.name),Vn(B,e.name);const T=new mn({uid:H,auth:e,email:g,emailVerified:q,displayName:p,isAnonymous:de,photoURL:P,phoneNumber:v,tenantId:x,stsTokenManager:y,createdAt:$,lastLoginAt:B});return fe&&Array.isArray(fe)&&(T.providerData=fe.map(b=>Object.assign({},b))),O&&(T._redirectEventId=O),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new qr;s.updateFromServerResponse(n);const i=new mn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ao(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];oe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Bp(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new qr;c.updateFromIdToken(r);const l=new mn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map;function gn(t){En(t instanceof Function,"Expected a class definition");let e=Oh.get(t);return e?(En(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jp.type="NONE";const Nh=jp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e,n){return`firebase:${t}:${e}:${n}`}class Wr{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=so(this.userKey,s.apiKey,i),this.fullPersistenceKey=so("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wr(gn(Nh),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||gn(Nh);const o=so(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const d=await h._get(o);if(d){const p=mn._fromJSON(e,d);h!==i&&(c=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Wr(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Wr(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($p(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wp(e))return"Blackberry";if(Kp(e))return"Webos";if(zp(e))return"Safari";if((e.includes("chrome/")||Hp(e))&&!e.includes("edge/"))return"Chrome";if(qp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $p(t=pt()){return/firefox\//i.test(t)}function zp(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hp(t=pt()){return/crios\//i.test(t)}function Gp(t=pt()){return/iemobile/i.test(t)}function qp(t=pt()){return/android/i.test(t)}function Wp(t=pt()){return/blackberry/i.test(t)}function Kp(t=pt()){return/webos/i.test(t)}function fl(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cy(t=pt()){var e;return fl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ly(){return b_()&&document.documentMode===10}function Qp(t=pt()){return fl(t)||qp(t)||Kp(t)||Wp(t)||/windows phone/i.test(t)||Gp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e=[]){let n;switch(t){case"Browser":n=Lh(pt());break;case"Worker":n=`${Lh(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hy(t,e={}){return us(t,"GET","/v2/passwordPolicy",hl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=6;class fy{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dy,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mh(this),this.idTokenSubscription=new Mh(this),this.beforeStateQueue=new uy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Np,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Wr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Up(this,{idToken:e}),r=await mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===c)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ao(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qv()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(ur(this));const n=e?en(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hy(this),n=new fy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ay(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gn(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Wr.create(this,[gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Gv(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ea(t){return en(t)}class Mh{constructor(e){this.auth=e,this.observer=null,this.addObserver=V_(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function my(t){pl=t}function gy(t){return pl.loadJS(t)}function _y(){return pl.gapiScript}function vy(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){const n=ol(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Io(i,e??{}))return s;tn(s,"already-initialized")}return n.initialize({options:e})}function wy(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ey(t,e,n){const r=ea(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jp(e),{host:o,port:c}=Ty(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Iy()}function Jp(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ty(t){const e=Jp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fh(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fh(o)}}}function Fh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Iy(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pn("not implemented")}_getIdTokenResponse(e){return pn("not implemented")}_linkToIdToken(e,n){return pn("not implemented")}_getReauthenticationResolver(e){return pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(t,e){return Xv(t,"POST","/v1/accounts:signInWithIdp",hl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="http://localhost";class mr extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=al(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new mr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Kr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Kr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Kr(e,n)}buildRequest(){const e={requestUri:by,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_i(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends ml{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends yi{constructor(){super("facebook.com")}static credential(e){return mr._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mn.credential(e.oauthAccessToken)}catch{return null}}}Mn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mr._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dn.credentialFromTaggedObject(e)}static credentialFromError(e){return dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dn.credential(n,r)}catch{return null}}}dn.GOOGLE_SIGN_IN_METHOD="google.com";dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends yi{constructor(){super("github.com")}static credential(e){return mr._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com";Fn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends yi{constructor(){super("twitter.com")}static credential(e,n){return mr._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.TWITTER_SIGN_IN_METHOD="twitter.com";Un.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mn._fromIdTokenResponse(e,r,s),o=Uh(r);return new Xr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Uh(r);return new Xr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Uh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Sn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Co.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Co(e,n,r,s)}}function Zp(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Co._fromErrorAndOperation(t,i,e,r):i})}async function Sy(t,e,n=!1){const r=await ni(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(t,e,n=!1){const{auth:r}=t;if(fn(r.app))return Promise.reject(ur(r));const s="reauthenticate";try{const i=await ni(t,Zp(r,s,e,t),n);oe(i.idToken,r,"internal-error");const o=dl(i.idToken);oe(o,r,"internal-error");const{sub:c}=o;return oe(t.uid===c,r,"user-mismatch"),Xr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&tn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(t,e,n=!1){if(fn(t.app))return Promise.reject(ur(t));const r="signIn",s=await Zp(t,r,e),i=await Xr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Ry(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function Py(t,e,n){return en(t).beforeAuthStateChanged(e,n)}const Ro="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=1e3,xy=10;class t0 extends e0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ly()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xy):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ky)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}t0.type="LOCAL";const Vy=t0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends e0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}n0.type="SESSION";const r0=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ta(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),l=await Dy(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ta.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const h=gl("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return window}function Ny(t){Yt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}async function Ly(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function My(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Fy(){return s0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebaseLocalStorageDb",Uy=1,Po="firebaseLocalStorage",o0="fbase_key";class wi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function na(t,e){return t.transaction([Po],e?"readwrite":"readonly").objectStore(Po)}function By(){const t=indexedDB.deleteDatabase(i0);return new wi(t).toPromise()}function yc(){const t=indexedDB.open(i0,Uy);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Po,{keyPath:o0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Po)?e(r):(r.close(),await By(),e(await yc()))})})}async function Bh(t,e,n){const r=na(t,!0).put({[o0]:e,value:n});return new wi(r).toPromise()}async function jy(t,e){const n=na(t,!1).get(e),r=await new wi(n).toPromise();return r===void 0?null:r.value}function jh(t,e){const n=na(t,!0).delete(e);return new wi(n).toPromise()}const $y=800,zy=3;class a0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zy)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ta._getInstance(Fy()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ly(),!this.activeServiceWorker)return;this.sender=new Oy(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||My()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yc();return await Bh(e,Ro,"1"),await jh(e,Ro),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bh(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jy(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=na(s,!1).getAll();return new wi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$y)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a0.type="LOCAL";const Hy=a0;new vi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){return e?gn(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Kr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gy(t){return Cy(t.auth,new _l(t),t.bypassAuthState)}function qy(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Ay(n,new _l(t),t.bypassAuthState)}async function Wy(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Sy(n,new _l(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gy;case"linkViaPopup":case"linkViaRedirect":return Wy;case"reauthViaPopup":case"reauthViaRedirect":return qy;default:tn(this.auth,"internal-error")}}resolve(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new vi(2e3,1e4);async function Qy(t,e,n){if(fn(t.app))return Promise.reject(jt(t,"operation-not-supported-in-this-environment"));const r=ea(t);qv(t,e,ml);const s=c0(r,n);return new ar(r,"signInViaPopup",e,s).executeNotNull()}class ar extends l0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){En(this.filter.length===1,"Popup operations only handle one event");const e=gl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ky.get())};e()}}ar.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="pendingRedirect",io=new Map;class Jy extends l0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=io.get(this.auth._key());if(!e){try{const r=await Xy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}io.set(this.auth._key(),e)}return this.bypassAuthState||io.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xy(t,e){const n=t3(e),r=e3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Zy(t,e){io.set(t._key(),e)}function e3(t){return gn(t._redirectPersistence)}function t3(t){return so(Yy,t.config.apiKey,t.name)}async function n3(t,e,n=!1){if(fn(t.app))return Promise.reject(ur(t));const r=ea(t),s=c0(r,e),o=await new Jy(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=10*60*1e3;class s3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!u0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r3&&this.cachedEventUids.clear(),this.cachedEventUids.has($h(e))}saveEventToCache(e){this.cachedEventUids.add($h(e)),this.lastProcessedEventTime=Date.now()}}function $h(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function u0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e={}){return us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c3=/^https?/;async function l3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await o3(t);for(const n of e)try{if(u3(n))return}catch{}tn(t,"unauthorized-domain")}function u3(t){const e=_c(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!c3.test(n))return!1;if(a3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new vi(3e4,6e4);function zh(){const t=Yt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d3(t){return new Promise((e,n)=>{var r,s,i;function o(){zh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zh(),n(jt(t,"network-request-failed"))},timeout:h3.get()})}if(!((s=(r=Yt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Yt().gapi)===null||i===void 0)&&i.load)o();else{const c=vy("iframefcb");return Yt()[c]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},gy(`${_y()}?onload=${c}`).catch(l=>n(l))}}).catch(e=>{throw oo=null,e})}let oo=null;function f3(t){return oo=oo||d3(t),oo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=new vi(5e3,15e3),m3="__/auth/iframe",g3="emulator/auth/iframe",_3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y3(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ul(e,g3):`https://${t.config.authDomain}/${m3}`,r={apiKey:e.apiKey,appName:t.name,v:ls},s=v3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${_i(r).slice(1)}`}async function w3(t){const e=await f3(t),n=Yt().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:y3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),c=Yt().setTimeout(()=>{i(o)},p3.get());function l(){Yt().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T3=500,I3=600,b3="_blank",S3="http://localhost";class Hh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A3(t,e,n,r=T3,s=I3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},E3),{width:r.toString(),height:s.toString(),top:i,left:o}),h=pt().toLowerCase();n&&(c=Hp(h)?b3:n),$p(h)&&(e=e||S3,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[v,P])=>`${g}${v}=${P},`,"");if(cy(h)&&c!=="_self")return C3(e||"",c),new Hh(null);const p=window.open(e||"",c,d);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new Hh(p)}function C3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="__/auth/handler",P3="emulator/auth/handler",k3=encodeURIComponent("fac");async function Gh(t,e,n,r,s,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ls,eventId:s};if(e instanceof ml){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",x_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof yi){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const d of Object.keys(c))c[d]===void 0&&delete c[d];const l=await t._getAppCheckToken(),h=l?`#${k3}=${encodeURIComponent(l)}`:"";return`${x3(t)}?${_i(c).slice(1)}${h}`}function x3({config:t}){return t.emulator?ul(t,P3):`https://${t.authDomain}/${R3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="webStorageSupport";class V3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r0,this._completeRedirectFn=n3,this._overrideRedirectResult=Zy}async _openPopup(e,n,r,s){var i;En((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Gh(e,n,r,_c(),s);return A3(e,o,gl())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gh(e,n,r,_c(),s);return Ny(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(En(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w3(e),r=new s3(e);return n.register("authEvent",s=>(oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qa,{type:qa},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[qa];o!==void 0&&n(!!o),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qp()||zp()||fl()}}const D3=V3;var qh="@firebase/auth",Wh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L3(t){Jr(new pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yp(t)},h=new py(r,s,i,l);return wy(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jr(new pr("auth-internal",e=>{const n=ea(e.getProvider("auth").getImmediate());return(r=>new O3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(qh,Wh,N3(t)),zn(qh,Wh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=5*60,F3=Cp("authIdTokenMaxAge")||M3;let Kh=null;const U3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F3)return;const s=n==null?void 0:n.token;Kh!==s&&(Kh=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function B3(t=xp()){const e=ol(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yy(t,{popupRedirectResolver:D3,persistence:[Hy,Vy,r0]}),r=Cp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=U3(i.toString());Py(n,o,()=>o(n.currentUser)),Ry(n,c=>o(c))}}const s=Sp("auth");return s&&Ey(n,`http://${s}`),n}function j3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}my({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",j3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L3("Browser");var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,h0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function T(){}T.prototype=y.prototype,I.D=y.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(b,S,A){for(var E=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)E[mt-2]=arguments[mt];return y.prototype[S].apply(b,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,T){T||(T=0);var b=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)b[S]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(S=0;16>S;++S)b[S]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=I.g[0],T=I.g[1],S=I.g[2];var A=I.g[3],E=y+(A^T&(S^A))+b[0]+3614090360&4294967295;y=T+(E<<7&4294967295|E>>>25),E=A+(S^y&(T^S))+b[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(T^A&(y^T))+b[2]+606105819&4294967295,S=A+(E<<17&4294967295|E>>>15),E=T+(y^S&(A^y))+b[3]+3250441966&4294967295,T=S+(E<<22&4294967295|E>>>10),E=y+(A^T&(S^A))+b[4]+4118548399&4294967295,y=T+(E<<7&4294967295|E>>>25),E=A+(S^y&(T^S))+b[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(T^A&(y^T))+b[6]+2821735955&4294967295,S=A+(E<<17&4294967295|E>>>15),E=T+(y^S&(A^y))+b[7]+4249261313&4294967295,T=S+(E<<22&4294967295|E>>>10),E=y+(A^T&(S^A))+b[8]+1770035416&4294967295,y=T+(E<<7&4294967295|E>>>25),E=A+(S^y&(T^S))+b[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(T^A&(y^T))+b[10]+4294925233&4294967295,S=A+(E<<17&4294967295|E>>>15),E=T+(y^S&(A^y))+b[11]+2304563134&4294967295,T=S+(E<<22&4294967295|E>>>10),E=y+(A^T&(S^A))+b[12]+1804603682&4294967295,y=T+(E<<7&4294967295|E>>>25),E=A+(S^y&(T^S))+b[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(T^A&(y^T))+b[14]+2792965006&4294967295,S=A+(E<<17&4294967295|E>>>15),E=T+(y^S&(A^y))+b[15]+1236535329&4294967295,T=S+(E<<22&4294967295|E>>>10),E=y+(S^A&(T^S))+b[1]+4129170786&4294967295,y=T+(E<<5&4294967295|E>>>27),E=A+(T^S&(y^T))+b[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^T&(A^y))+b[11]+643717713&4294967295,S=A+(E<<14&4294967295|E>>>18),E=T+(A^y&(S^A))+b[0]+3921069994&4294967295,T=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(T^S))+b[5]+3593408605&4294967295,y=T+(E<<5&4294967295|E>>>27),E=A+(T^S&(y^T))+b[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^T&(A^y))+b[15]+3634488961&4294967295,S=A+(E<<14&4294967295|E>>>18),E=T+(A^y&(S^A))+b[4]+3889429448&4294967295,T=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(T^S))+b[9]+568446438&4294967295,y=T+(E<<5&4294967295|E>>>27),E=A+(T^S&(y^T))+b[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^T&(A^y))+b[3]+4107603335&4294967295,S=A+(E<<14&4294967295|E>>>18),E=T+(A^y&(S^A))+b[8]+1163531501&4294967295,T=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(T^S))+b[13]+2850285829&4294967295,y=T+(E<<5&4294967295|E>>>27),E=A+(T^S&(y^T))+b[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^T&(A^y))+b[7]+1735328473&4294967295,S=A+(E<<14&4294967295|E>>>18),E=T+(A^y&(S^A))+b[12]+2368359562&4294967295,T=S+(E<<20&4294967295|E>>>12),E=y+(T^S^A)+b[5]+4294588738&4294967295,y=T+(E<<4&4294967295|E>>>28),E=A+(y^T^S)+b[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^T)+b[11]+1839030562&4294967295,S=A+(E<<16&4294967295|E>>>16),E=T+(S^A^y)+b[14]+4259657740&4294967295,T=S+(E<<23&4294967295|E>>>9),E=y+(T^S^A)+b[1]+2763975236&4294967295,y=T+(E<<4&4294967295|E>>>28),E=A+(y^T^S)+b[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^T)+b[7]+4139469664&4294967295,S=A+(E<<16&4294967295|E>>>16),E=T+(S^A^y)+b[10]+3200236656&4294967295,T=S+(E<<23&4294967295|E>>>9),E=y+(T^S^A)+b[13]+681279174&4294967295,y=T+(E<<4&4294967295|E>>>28),E=A+(y^T^S)+b[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^T)+b[3]+3572445317&4294967295,S=A+(E<<16&4294967295|E>>>16),E=T+(S^A^y)+b[6]+76029189&4294967295,T=S+(E<<23&4294967295|E>>>9),E=y+(T^S^A)+b[9]+3654602809&4294967295,y=T+(E<<4&4294967295|E>>>28),E=A+(y^T^S)+b[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^T)+b[15]+530742520&4294967295,S=A+(E<<16&4294967295|E>>>16),E=T+(S^A^y)+b[2]+3299628645&4294967295,T=S+(E<<23&4294967295|E>>>9),E=y+(S^(T|~A))+b[0]+4096336452&4294967295,y=T+(E<<6&4294967295|E>>>26),E=A+(T^(y|~S))+b[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~T))+b[14]+2878612391&4294967295,S=A+(E<<15&4294967295|E>>>17),E=T+(A^(S|~y))+b[5]+4237533241&4294967295,T=S+(E<<21&4294967295|E>>>11),E=y+(S^(T|~A))+b[12]+1700485571&4294967295,y=T+(E<<6&4294967295|E>>>26),E=A+(T^(y|~S))+b[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~T))+b[10]+4293915773&4294967295,S=A+(E<<15&4294967295|E>>>17),E=T+(A^(S|~y))+b[1]+2240044497&4294967295,T=S+(E<<21&4294967295|E>>>11),E=y+(S^(T|~A))+b[8]+1873313359&4294967295,y=T+(E<<6&4294967295|E>>>26),E=A+(T^(y|~S))+b[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~T))+b[6]+2734768916&4294967295,S=A+(E<<15&4294967295|E>>>17),E=T+(A^(S|~y))+b[13]+1309151649&4294967295,T=S+(E<<21&4294967295|E>>>11),E=y+(S^(T|~A))+b[4]+4149444226&4294967295,y=T+(E<<6&4294967295|E>>>26),E=A+(T^(y|~S))+b[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~T))+b[2]+718787259&4294967295,S=A+(E<<15&4294967295|E>>>17),E=T+(A^(S|~y))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var T=y-this.blockSize,b=this.B,S=this.h,A=0;A<y;){if(S==0)for(;A<=T;)s(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<y;)if(b[S++]=I.charCodeAt(A++),S==this.blockSize){s(this,b),S=0;break}}else for(;A<y;)if(b[S++]=I[A++],S==this.blockSize){s(this,b),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var T=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=T&255,T/=256;for(this.u(I),I=Array(16),y=T=0;4>y;++y)for(var b=0;32>b;b+=8)I[T++]=this.g[y]>>>b&255;return I};function i(I,y){var T=c;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=y(I)}function o(I,y){this.h=y;for(var T=[],b=!0,S=I.length-1;0<=S;S--){var A=I[S]|0;b&&A==y||(T[S]=A,b=!1)}this.g=T}var c={};function l(I){return-128<=I&&128>I?i(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return O(h(-I));for(var y=[],T=1,b=0;I>=T;b++)y[b]=I/T|0,T*=4294967296;return new o(y,0)}function d(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return O(d(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),b=p,S=0;S<I.length;S+=8){var A=Math.min(8,I.length-S),E=parseInt(I.substring(S,S+A),y);8>A?(A=h(Math.pow(y,A)),b=b.j(A).add(h(E))):(b=b.j(T),b=b.add(h(E)))}return b}var p=l(0),g=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-O(this).m();for(var I=0,y=1,T=0;T<this.g.length;T++){var b=this.i(T);I+=(0<=b?b:4294967296+b)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(x(this))return"-"+O(this).toString(I);for(var y=h(Math.pow(I,6)),T=this,b="";;){var S=q(T,y).g;T=$(T,S.j(y));var A=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=S,P(T))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=$(this,I),x(I)?-1:P(I)?0:1};function O(I){for(var y=I.g.length,T=[],b=0;b<y;b++)T[b]=~I.g[b];return new o(T,~I.h).add(g)}t.abs=function(){return x(this)?O(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0,S=0;S<=y;S++){var A=b+(this.i(S)&65535)+(I.i(S)&65535),E=(A>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);b=E>>>16,A&=65535,E&=65535,T[S]=E<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function $(I,y){return I.add(O(y))}t.j=function(I){if(P(this)||P(I))return p;if(x(this))return x(I)?O(this).j(O(I)):O(O(this).j(I));if(x(I))return O(this.j(O(I)));if(0>this.l(v)&&0>I.l(v))return h(this.m()*I.m());for(var y=this.g.length+I.g.length,T=[],b=0;b<2*y;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(var S=0;S<I.g.length;S++){var A=this.i(b)>>>16,E=this.i(b)&65535,mt=I.i(S)>>>16,Pt=I.i(S)&65535;T[2*b+2*S]+=E*Pt,B(T,2*b+2*S),T[2*b+2*S+1]+=A*Pt,B(T,2*b+2*S+1),T[2*b+2*S+1]+=E*mt,B(T,2*b+2*S+1),T[2*b+2*S+2]+=A*mt,B(T,2*b+2*S+2)}for(b=0;b<y;b++)T[b]=T[2*b+1]<<16|T[2*b];for(b=y;b<2*y;b++)T[b]=0;return new o(T,0)};function B(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function H(I,y){this.g=I,this.h=y}function q(I,y){if(P(y))throw Error("division by zero");if(P(I))return new H(p,p);if(x(I))return y=q(O(I),y),new H(O(y.g),O(y.h));if(x(y))return y=q(I,O(y)),new H(O(y.g),y.h);if(30<I.g.length){if(x(I)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,b=y;0>=b.l(I);)T=de(T),b=de(b);var S=fe(T,1),A=fe(b,1);for(b=fe(b,2),T=fe(T,2);!P(b);){var E=A.add(b);0>=E.l(I)&&(S=S.add(T),A=E),b=fe(b,1),T=fe(T,1)}return y=$(I,S.j(y)),new H(S,y)}for(S=p;0<=I.l(y);){for(T=Math.max(1,Math.floor(I.m()/y.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=h(T),E=A.j(y);x(E)||0<E.l(I);)T-=b,A=h(T),E=A.j(y);P(A)&&(A=g),S=S.add(A),I=$(I,E)}return new H(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)&I.i(b);return new o(T,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)|I.i(b);return new o(T,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)^I.i(b);return new o(T,this.h^I.h)};function de(I){for(var y=I.g.length+1,T=[],b=0;b<y;b++)T[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(T,I.h)}function fe(I,y){var T=y>>5;y%=32;for(var b=I.g.length-T,S=[],A=0;A<b;A++)S[A]=0<y?I.i(A+T)>>>y|I.i(A+T+1)<<32-y:I.i(A+T);return new o(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,hr=o}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});var Qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d0,Os,f0,ao,wc,p0,m0,g0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,f){return a==Array.prototype||a==Object.prototype||(a[u]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qi=="object"&&Qi];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,u){if(u)e:{var f=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in f))break e;f=f[C]}a=a[a.length-1],m=f[a],u=u(m),u!=m&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}function i(a,u){a instanceof String&&(a+="");var f=0,m=!1,C={next:function(){if(!m&&f<a.length){var k=f++;return{value:u(k,a[k]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function d(a,u,f){return a.call.apply(a.bind,arguments)}function p(a,u,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),a.apply(u,C)}}return function(){return a.apply(u,arguments)}}function g(a,u,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function v(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function P(a,u){function f(){}f.prototype=u.prototype,a.aa=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,C,k){for(var G=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)G[Pe-2]=arguments[Pe];return u.prototype[C].apply(m,G)}}function x(a){const u=a.length;if(0<u){const f=Array(u);for(let m=0;m<u;m++)f[m]=a[m];return f}return[]}function O(a,u){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(l(m)){const C=a.length||0,k=m.length||0;a.length=C+k;for(let G=0;G<k;G++)a[C+G]=m[G]}else a.push(m)}}class ${constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return q[" "](a),a}q[" "]=function(){};var de=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function fe(a,u,f){for(const m in a)u.call(f,a[m],m,a)}function I(a,u){for(const f in a)u.call(void 0,a[f],f,a)}function y(a){const u={};for(const f in a)u[f]=a[f];return u}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,u){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)a[f]=m[f];for(let k=0;k<T.length;k++)f=T[k],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function S(a){var u=1;a=a.split(":");const f=[];for(;0<u&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function E(){var a=It;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class mt{constructor(){this.h=this.g=null}add(u,f){const m=Pt.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Pt=new $(()=>new Be,a=>a.reset());class Be{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,pe=!1,It=new mt,Lt=()=>{const a=c.Promise.resolve(void 0);_e=()=>{a.then(kt)}};var kt=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(f){A(f)}var u=Pt;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}pe=!1};function Oe(){this.s=this.s,this.C=this.C}Oe.prototype.s=!1,Oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var An=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,u),c.removeEventListener("test",f,u)}catch{}return a}();function Ht(a,u){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(de){e:{try{q(u.nodeName);var C=!0;break e}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:wt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ht.aa.h.call(this)}}P(Ht,Ne);var wt={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var D="closure_listenable_"+(1e6*Math.random()|0),Y=0;function K(a,u,f,m,C){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=C,this.key=++Y,this.da=this.fa=!1}function J(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ve(a){this.src=a,this.g={},this.h=0}ve.prototype.add=function(a,u,f,m,C){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var G=_(a,u,m,C);return-1<G?(u=a[G],f||(u.fa=!1)):(u=new K(u,this.src,k,!!m,C),u.fa=f,a.push(u)),u};function Re(a,u){var f=u.type;if(f in a.g){var m=a.g[f],C=Array.prototype.indexOf.call(m,u,void 0),k;(k=0<=C)&&Array.prototype.splice.call(m,C,1),k&&(J(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _(a,u,f,m){for(var C=0;C<a.length;++C){var k=a[C];if(!k.da&&k.listener==u&&k.capture==!!f&&k.ha==m)return C}return-1}var w="closure_lm_"+(1e6*Math.random()|0),R={};function N(a,u,f,m,C){if(Array.isArray(u)){for(var k=0;k<u.length;k++)N(a,u[k],f,m,C);return null}return f=ee(f),a&&a[D]?a.K(u,f,h(m)?!!m.capture:!!m,C):V(a,u,f,!1,m,C)}function V(a,u,f,m,C,k){if(!u)throw Error("Invalid event type");var G=h(C)?!!C.capture:!!C,Pe=te(a);if(Pe||(a[w]=Pe=new ve(a)),f=Pe.add(u,f,m,G,k),f.proxy)return f;if(m=M(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)An||(C=G),C===void 0&&(C=!1),a.addEventListener(u.toString(),m,C);else if(a.attachEvent)a.attachEvent(j(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M(){function a(f){return u.call(a.src,a.listener,f)}const u=F;return a}function W(a,u,f,m,C){if(Array.isArray(u))for(var k=0;k<u.length;k++)W(a,u[k],f,m,C);else m=h(m)?!!m.capture:!!m,f=ee(f),a&&a[D]?(a=a.i,u=String(u).toString(),u in a.g&&(k=a.g[u],f=_(k,f,m,C),-1<f&&(J(k[f]),Array.prototype.splice.call(k,f,1),k.length==0&&(delete a.g[u],a.h--)))):a&&(a=te(a))&&(u=a.g[u.toString()],a=-1,u&&(a=_(u,f,m,C)),(f=-1<a?u[a]:null)&&z(f))}function z(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[D])Re(u.i,a);else{var f=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(f,m,a.capture):u.detachEvent?u.detachEvent(j(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=te(u))?(Re(f,a),f.h==0&&(f.src=null,u[w]=null)):J(a)}}}function j(a){return a in R?R[a]:R[a]="on"+a}function F(a,u){if(a.da)a=!0;else{u=new Ht(u,this);var f=a.listener,m=a.ha||a.src;a.fa&&z(a),a=f.call(m,u)}return a}function te(a){return a=a[w],a instanceof ve?a:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(a){return typeof a=="function"?a:(a[Q]||(a[Q]=function(u){return a.handleEvent(u)}),a[Q])}function X(){Oe.call(this),this.i=new ve(this),this.M=this,this.F=null}P(X,Oe),X.prototype[D]=!0,X.prototype.removeEventListener=function(a,u,f,m){W(this,a,u,f,m)};function se(a,u){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new Ne(u,a);else if(u instanceof Ne)u.target=u.target||a;else{var C=u;u=new Ne(m,a),b(u,C)}if(C=!0,f)for(var k=f.length-1;0<=k;k--){var G=u.g=f[k];C=Ie(G,m,!0,u)&&C}if(G=u.g=a,C=Ie(G,m,!0,u)&&C,C=Ie(G,m,!1,u)&&C,f)for(k=0;k<f.length;k++)G=u.g=f[k],C=Ie(G,m,!1,u)&&C}X.prototype.N=function(){if(X.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var f=a.g[u],m=0;m<f.length;m++)J(f[m]);delete a.g[u],a.h--}}this.F=null},X.prototype.K=function(a,u,f,m){return this.i.add(String(a),u,!1,f,m)},X.prototype.L=function(a,u,f,m){return this.i.add(String(a),u,!0,f,m)};function Ie(a,u,f,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,k=0;k<u.length;++k){var G=u[k];if(G&&!G.da&&G.capture==f){var Pe=G.listener,Je=G.ha||G.src;G.fa&&Re(a.i,G),C=Pe.call(Je,m)!==!1&&C}}return C&&!m.defaultPrevented}function we(a,u,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function rt(a){a.g=we(()=>{a.g=null,a.i&&(a.i=!1,rt(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class We extends Oe{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(a){Oe.call(this),this.h=a,this.g={}}P(Ye,Oe);var st=[];function Cn(a){fe(a.g,function(u,f){this.g.hasOwnProperty(f)&&z(u)},a),a.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),Cn(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=c.JSON.stringify,gt=c.JSON.parse,xt=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function br(){}br.prototype.h=null;function Xl(a){return a.h||(a.h=a.i())}function Zl(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pa(){Ne.call(this,"d")}P(pa,Ne);function ma(){Ne.call(this,"c")}P(ma,Ne);var Xn={},eu=null;function Ci(){return eu=eu||new X}Xn.La="serverreachability";function tu(a){Ne.call(this,Xn.La,a)}P(tu,Ne);function gs(a){const u=Ci();se(u,new tu(u))}Xn.STAT_EVENT="statevent";function nu(a,u){Ne.call(this,Xn.STAT_EVENT,a),this.stat=u}P(nu,Ne);function _t(a){const u=Ci();se(u,new nu(u,a))}Xn.Ma="timingevent";function ru(a,u){Ne.call(this,Xn.Ma,a),this.size=u}P(ru,Ne);function _s(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function vs(){this.g=!0}vs.prototype.xa=function(){this.g=!1};function $m(a,u,f,m,C,k){a.info(function(){if(a.g)if(k)for(var G="",Pe=k.split("&"),Je=0;Je<Pe.length;Je++){var Ee=Pe[Je].split("=");if(1<Ee.length){var it=Ee[0];Ee=Ee[1];var ot=it.split("_");G=2<=ot.length&&ot[1]=="type"?G+(it+"="+Ee+"&"):G+(it+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+u+`
`+f+`
`+G})}function zm(a,u,f,m,C,k,G){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+u+`
`+f+`
`+k+" "+G})}function Sr(a,u,f,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Gm(a,f)+(m?" "+m:"")})}function Hm(a,u){a.info(function(){return"TIMEOUT: "+u})}vs.prototype.info=function(){};function Gm(a,u){if(!a.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var k=C[0];if(k!="noop"&&k!="stop"&&k!="close")for(var G=1;G<C.length;G++)C[G]=""}}}}return Ir(f)}catch{return u}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ga;function Pi(){}P(Pi,br),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},ga=new Pi;function Rn(a,u,f,m){this.j=a,this.i=u,this.l=f,this.R=m||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iu}function iu(){this.i=null,this.g="",this.h=!1}var ou={},_a={};function va(a,u,f){a.L=1,a.v=Di(on(u)),a.m=f,a.P=!0,au(a,null)}function au(a,u){a.F=Date.now(),ki(a),a.A=on(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Eu(f.i,"t",m),a.C=0,f=a.j.J,a.h=new iu,a.g=Uu(a.j,f?u:null,!a.m),0<a.O&&(a.M=new We(g(a.Y,a,a.g),a.O)),u=a.U,f=a.g,m=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(st[0]=C.toString()),C=st);for(var k=0;k<C.length;k++){var G=N(f,C[k],m||u.handleEvent,!1,u.h||u);if(!G)break;u.g[G.key]=G}u=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),gs(),$m(a.i,a.u,a.A,a.l,a.R,a.m)}Rn.prototype.ca=function(a){a=a.target;const u=this.M;u&&an(a)==3?u.j():this.Y(a)},Rn.prototype.Y=function(a){try{if(a==this.g)e:{const ot=an(this.g);var u=this.g.Ba();const Rr=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||ot!=4||u==7||(u==8||0>=Rr?gs(3):gs(2)),ya(this);var f=this.g.Z();this.X=f;t:if(cu(this)){var m=Ru(this.g);a="";var C=m.length,k=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),ys(this);var G="";break t}this.h.i=new c.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(k&&u==C-1)});m.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,zm(this.i,this.u,this.A,this.l,this.R,ot,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Je=this.g;if((Pe=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Pe)){var Ee=Pe;break t}}Ee=null}if(f=Ee)Sr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,f);else{this.o=!1,this.s=3,_t(12),Zn(this),ys(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<G.length;)if(Mt=qm(this,G),Mt==_a){ot==4&&(this.s=4,_t(14),f=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==ou){this.s=4,_t(15),Sr(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else Sr(this.i,this.l,Mt,null),wa(this,Mt);if(cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||G.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)Sr(this.i,this.l,G,"[Invalid Chunked Response]"),Zn(this),ys(this);else if(0<G.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Aa(it),it.M=!0,_t(11))}}else Sr(this.i,this.l,G,null),wa(this,G);ot==4&&Zn(this),this.o&&!this.J&&(ot==4?Nu(this.j,this):(this.o=!1,ki(this)))}else lg(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Zn(this),ys(this)}}}catch{}finally{}};function cu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function qm(a,u){var f=a.C,m=u.indexOf(`
`,f);return m==-1?_a:(f=Number(u.substring(f,m)),isNaN(f)?ou:(m+=1,m+f>u.length?_a:(u=u.slice(m,m+f),a.C=m+f,u)))}Rn.prototype.cancel=function(){this.J=!0,Zn(this)};function ki(a){a.S=Date.now()+a.I,lu(a,a.I)}function lu(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=_s(g(a.ba,a),u)}function ya(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Rn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Hm(this.i,this.A),this.L!=2&&(gs(),_t(17)),Zn(this),this.s=2,ys(this)):lu(this,this.S-a)};function ys(a){a.j.G==0||a.J||Nu(a.j,a)}function Zn(a){ya(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Cn(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function wa(a,u){try{var f=a.j;if(f.G!=0&&(f.g==a||Ea(f.h,a))){if(!a.K&&Ea(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ui(f),Mi(f);else break e;Sa(f),_t(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=_s(g(f.Za,f),6e3));if(1>=du(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else tr(f,11)}else if((a.K||f.g==a)&&Ui(f),!B(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let Ee=C[u];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];const it=Ee[3];it!=null&&(f.la=it,f.j.info("VER="+f.la));const ot=Ee[4];ot!=null&&(f.Aa=ot,f.j.info("SVER="+f.Aa));const Rr=Ee[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(m=1.5*Rr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Mt=a.g;if(Mt){const ji=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ji){var k=m.h;k.g||ji.indexOf("spdy")==-1&&ji.indexOf("quic")==-1&&ji.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Ta(k,k.h),k.h=null))}if(m.D){const Ca=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(m.ya=Ca,Ve(m.I,m.D,Ca))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var G=a;if(m.qa=Fu(m,m.J?m.ia:null,m.W),G.K){fu(m.h,G);var Pe=G,Je=m.L;Je&&(Pe.I=Je),Pe.B&&(ya(Pe),ki(Pe)),m.g=G}else Du(m);0<f.i.length&&Fi(f)}else Ee[0]!="stop"&&Ee[0]!="close"||tr(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?tr(f,7):ba(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}gs(4)}catch{}}var Wm=class{constructor(a,u){this.g=a,this.map=u}};function uu(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function du(a){return a.h?1:a.g?a.g.size:0}function Ea(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Ta(a,u){a.g?a.g.add(u):a.h=u}function fu(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}uu.prototype.cancel=function(){if(this.i=pu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function pu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const f of a.g.values())u=u.concat(f.D);return u}return x(a.i)}function Km(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],f=a.length,m=0;m<f;m++)u.push(a[m]);return u}u=[],f=0;for(m in a)u[f++]=a[m];return u}function Qm(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var f=0;f<a;f++)u.push(f);return u}u=[],f=0;for(const m in a)u[f++]=m;return u}}}function mu(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var f=Qm(a),m=Km(a),C=m.length,k=0;k<C;k++)u.call(void 0,m[k],f&&f[k],a)}var gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ym(a,u){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),C=null;if(0<=m){var k=a[f].substring(0,m);C=a[f].substring(m+1)}else k=a[f];u(k,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function er(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof er){this.h=a.h,xi(this,a.j),this.o=a.o,this.g=a.g,Vi(this,a.s),this.l=a.l;var u=a.i,f=new Ts;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),_u(this,f),this.m=a.m}else a&&(u=String(a).match(gu))?(this.h=!1,xi(this,u[1]||"",!0),this.o=ws(u[2]||""),this.g=ws(u[3]||"",!0),Vi(this,u[4]),this.l=ws(u[5]||"",!0),_u(this,u[6]||"",!0),this.m=ws(u[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}er.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Es(u,vu,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Es(u,vu,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Es(f,f.charAt(0)=="/"?Zm:Xm,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Es(f,tg)),a.join("")};function on(a){return new er(a)}function xi(a,u,f){a.j=f?ws(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Vi(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function _u(a,u,f){u instanceof Ts?(a.i=u,ng(a.i,a.h)):(f||(u=Es(u,eg)),a.i=new Ts(u,a.h))}function Ve(a,u,f){a.i.set(u,f)}function Di(a){return Ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ws(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Es(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,Jm),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jm(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vu=/[#\/\?@]/g,Xm=/[#\?:]/g,Zm=/[#\?]/g,eg=/[#\?@]/g,tg=/#/g;function Ts(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&Ym(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=Ts.prototype,t.add=function(a,u){Pn(this),this.i=null,a=Ar(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function yu(a,u){Pn(a),u=Ar(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function wu(a,u){return Pn(a),u=Ar(a,u),a.g.has(u)}t.forEach=function(a,u){Pn(this),this.g.forEach(function(f,m){f.forEach(function(C){a.call(u,C,m,this)},this)},this)},t.na=function(){Pn(this);const a=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let m=0;m<u.length;m++){const C=a[m];for(let k=0;k<C.length;k++)f.push(u[m])}return f},t.V=function(a){Pn(this);let u=[];if(typeof a=="string")wu(this,a)&&(u=u.concat(this.g.get(Ar(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)u=u.concat(a[f])}return u},t.set=function(a,u){return Pn(this),this.i=null,a=Ar(this,a),wu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Eu(a,u,f){yu(a,u),0<f.length&&(a.i=null,a.g.set(Ar(a,u),x(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var m=u[f];const k=encodeURIComponent(String(m)),G=this.V(m);for(m=0;m<G.length;m++){var C=k;G[m]!==""&&(C+="="+encodeURIComponent(String(G[m]))),a.push(C)}}return this.i=a.join("&")};function Ar(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function ng(a,u){u&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(yu(this,m),Eu(this,C,f))},a)),a.j=u}function rg(a,u){const f=new vs;if(c.Image){const m=new Image;m.onload=v(kn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=v(kn,f,"TestLoadImage: error",!1,u,m),m.onabort=v(kn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=v(kn,f,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function sg(a,u){const f=new vs,m=new AbortController,C=setTimeout(()=>{m.abort(),kn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(k=>{clearTimeout(C),k.ok?kn(f,"TestPingServer: ok",!0,u):kn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),kn(f,"TestPingServer: error",!1,u)})}function kn(a,u,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function ig(){this.g=new xt}function og(a,u,f){const m=f||"";try{mu(a,function(C,k){let G=C;h(C)&&(G=Ir(C)),u.push(m+k+"="+encodeURIComponent(G))})}catch(C){throw u.push(m+"type="+encodeURIComponent("_badmap")),C}}function Oi(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Oi,br),Oi.prototype.g=function(){return new Ni(this.l,this.j)},Oi.prototype.i=function(a){return function(){return a}}({});function Ni(a,u){X.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ni,X),t=Ni.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,bs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Is(this):bs(this),this.readyState==3&&Tu(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Is(this))},t.Qa=function(a){this.g&&(this.response=a,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bs(a)}t.setRequestHeader=function(a,u){this.u.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function bs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Iu(a){let u="";return fe(a,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function Ia(a,u,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Iu(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ve(a,u,f))}function Me(a){X.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Me,X);var ag=/^https?$/i,cg=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ga.g(),this.v=this.o?Xl(this.o):Xl(ga),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(k){bu(this,k);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const k of m.keys())f.set(k,m.get(k));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(k=>k.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cg,u,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of f)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){bu(this,k)}};function bu(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Su(a),Li(a)}function Su(a){a.A||(a.A=!0,se(a,"complete"),se(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,se(this,"complete"),se(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},t.bb=function(){Au(this)};function Au(a){if(a.h&&typeof o<"u"&&(!a.v[1]||an(a)!=4||a.Z()!=2)){if(a.u&&an(a)==4)we(a.Ea,0,a);else if(se(a,"readystatechange"),an(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var m;if(m=G===0){var C=String(a.D).match(gu)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),m=!ag.test(C?C.toLowerCase():"")}f=m}if(f)se(a,"complete"),se(a,"success");else{a.m=6;try{var k=2<an(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",Su(a)}}finally{Li(a)}}}}function Li(a,u){if(a.g){Cu(a);const f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||se(a,"ready");try{f.onreadystatechange=m}catch{}}}function Cu(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function an(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),gt(u)}};function Ru(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function lg(a){const u={};a=(a.g&&2<=an(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(B(a[m]))continue;var f=S(a[m]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const k=u[C]||[];u[C]=k,k.push(f)}I(u,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function Pu(a){this.Aa=0,this.i=[],this.j=new vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ss("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ss("baseRetryDelayMs",5e3,a),this.cb=Ss("retryDelaySeedMs",1e4,a),this.Wa=Ss("forwardChannelMaxRetries",2,a),this.wa=Ss("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new uu(a&&a.concurrentRequestLimit),this.Da=new ig,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pu.prototype,t.la=8,t.G=1,t.connect=function(a,u,f,m){_t(0),this.W=a,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Fu(this,null,this.W),Fi(this)};function ba(a){if(ku(a),a.G==3){var u=a.U++,f=on(a.I);if(Ve(f,"SID",a.K),Ve(f,"RID",u),Ve(f,"TYPE","terminate"),As(a,f),u=new Rn(a,a.j,u),u.L=2,u.v=Di(on(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=u.v,f=!0),f||(u.g=Uu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ki(u)}Mu(a)}function Mi(a){a.g&&(Aa(a),a.g.cancel(),a.g=null)}function ku(a){Mi(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ui(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Fi(a){if(!hu(a.h)&&!a.s){a.s=!0;var u=a.Ga;_e||Lt(),pe||(_e(),pe=!0),It.add(u,a),a.B=0}}function ug(a,u){return du(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=_s(g(a.Ga,a,u),Lu(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Rn(this,this.j,a);let k=this.o;if(this.S&&(k?(k=y(k),b(k,this.S)):k=this.S),this.m!==null||this.O||(C.H=k,k=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Vu(this,C,u),f=on(this.I),Ve(f,"RID",a),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),As(this,f),k&&(this.O?u="headers="+encodeURIComponent(String(Iu(k)))+"&"+u:this.m&&Ia(f,this.m,k)),Ta(this.h,C),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",u),Ve(f,"SID","null"),C.T=!0,va(C,f,null)):va(C,f,u),this.G=2}}else this.G==3&&(a?xu(this,a):this.i.length==0||hu(this.h)||xu(this))};function xu(a,u){var f;u?f=u.l:f=a.U++;const m=on(a.I);Ve(m,"SID",a.K),Ve(m,"RID",f),Ve(m,"AID",a.T),As(a,m),a.m&&a.o&&Ia(m,a.m,a.o),f=new Rn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Vu(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ta(a.h,f),va(f,m,u)}function As(a,u){a.H&&fe(a.H,function(f,m){Ve(u,m,f)}),a.l&&mu({},function(f,m){Ve(u,m,f)})}function Vu(a,u,f){f=Math.min(a.i.length,f);var m=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let k=-1;for(;;){const G=["count="+f];k==-1?0<f?(k=C[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Pe=!0;for(let Je=0;Je<f;Je++){let Ee=C[Je].g;const it=C[Je].map;if(Ee-=k,0>Ee)k=Math.max(0,C[Je].g-100),Pe=!1;else try{og(it,G,"req"+Ee+"_")}catch{m&&m(it)}}if(Pe){m=G.join("&");break e}}}return a=a.i.splice(0,f),u.D=a,m}function Du(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;_e||Lt(),pe||(_e(),pe=!0),It.add(u,a),a.v=0}}function Sa(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=_s(g(a.Fa,a),Lu(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=_s(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Mi(this),Ou(this))};function Aa(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Ou(a){a.g=new Rn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=on(a.qa);Ve(u,"RID","rpc"),Ve(u,"SID",a.K),Ve(u,"AID",a.T),Ve(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ve(u,"TO",a.ja),Ve(u,"TYPE","xmlhttp"),As(a,u),a.m&&a.o&&Ia(u,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Di(on(u)),f.m=null,f.P=!0,au(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Mi(this),Sa(this),_t(19))};function Ui(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Nu(a,u){var f=null;if(a.g==u){Ui(a),Aa(a),a.g=null;var m=2}else if(Ea(a.h,u))f=u.D,fu(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=a.B;m=Ci(),se(m,new ru(m,f)),Fi(a)}else Du(a);else if(C=u.s,C==3||C==0&&0<u.X||!(m==1&&ug(a,u)||m==2&&Sa(a)))switch(f&&0<f.length&&(u=a.h,u.i=u.i.concat(f)),C){case 1:tr(a,5);break;case 4:tr(a,10);break;case 3:tr(a,6);break;default:tr(a,2)}}}function Lu(a,u){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*u}function tr(a,u){if(a.j.info("Error code "+u),u==2){var f=g(a.fb,a),m=a.Xa;const C=!m;m=new er(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xi(m,"https"),Di(m),C?rg(m.toString(),f):sg(m.toString(),f)}else _t(2);a.G=0,a.l&&a.l.sa(u),Mu(a),ku(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Mu(a){if(a.G=0,a.ka=[],a.l){const u=pu(a.h);(u.length!=0||a.i.length!=0)&&(O(a.ka,u),O(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Fu(a,u,f){var m=f instanceof er?on(f):new er(f);if(m.g!="")u&&(m.g=u+"."+m.g),Vi(m,m.s);else{var C=c.location;m=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var k=new er(null);m&&xi(k,m),u&&(k.g=u),C&&Vi(k,C),f&&(k.l=f),m=k}return f=a.D,u=a.ya,f&&u&&Ve(m,f,u),Ve(m,"VER",a.la),As(a,m),m}function Uu(a,u,f){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Me(new Oi({eb:f})):new Me(a.pa),u.Ha(a.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}t=Bu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bi(){}Bi.prototype.g=function(a,u){return new bt(a,u)};function bt(a,u){X.call(this),this.g=new Pu(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!B(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!B(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Cr(this)}P(bt,X),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){ba(this.g)},bt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ir(a),a=f);u.i.push(new Wm(u.Ya++,a)),u.G==3&&Fi(u)},bt.prototype.N=function(){this.g.l=null,delete this.j,ba(this.g),delete this.g,bt.aa.N.call(this)};function ju(a){pa.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}P(ju,pa);function $u(){ma.call(this),this.status=1}P($u,ma);function Cr(a){this.g=a}P(Cr,Bu),Cr.prototype.ua=function(){se(this.g,"a")},Cr.prototype.ta=function(a){se(this.g,new ju(a))},Cr.prototype.sa=function(a){se(this.g,new $u)},Cr.prototype.ra=function(){se(this.g,"b")},Bi.prototype.createWebChannel=Bi.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,g0=function(){return new Bi},m0=function(){return Ci()},p0=Xn,wc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,ao=Ri,su.COMPLETE="complete",f0=su,Zl.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",X.prototype.listen=X.prototype.K,Os=Zl,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,d0=Me}).apply(typeof Qi<"u"?Qi:typeof self<"u"?self:typeof window<"u"?window:{});const Yh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new sl("@firebase/firestore");function ks(){return gr.logLevel}function Z(t,...e){if(gr.logLevel<=ge.DEBUG){const n=e.map(vl);gr.debug(`Firestore (${hs}): ${t}`,...n)}}function Tn(t,...e){if(gr.logLevel<=ge.ERROR){const n=e.map(vl);gr.error(`Firestore (${hs}): ${t}`,...n)}}function Zr(t,...e){if(gr.logLevel<=ge.WARN){const n=e.map(vl);gr.warn(`Firestore (${hs}): ${t}`,...n)}}function vl(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${hs}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function Ce(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class z3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H3{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new _0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new ct(e)}}class G3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new W3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Q3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function es(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new qe(0,0))}static max(){return new ce(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ri{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const Y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends ri{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return Y3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ne(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ne(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Fe.fromString(e))}static fromName(e){return new re(Fe.fromString(e).popFirst(5))}static empty(){return new re(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Fe(e.slice()))}}function J3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new qn(s,re.empty(),e)}function X3(t){return new qn(t.readTime,t.key,-1)}class qn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qn(ce.min(),re.empty(),-1)}static max(){return new qn(ce.max(),re.empty(),-1)}}function Z3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==ew)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;n(e[h]).next(d=>{o[h]=d,++c,c===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function nw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ti(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yl.oe=-1;function ra(t){return t==null}function ko(t){return t===0&&1/t==-1/0}function rw(t){return typeof t=="number"&&Number.isInteger(t)&&!ko(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yi(this.root,e,this.comparator,!0)}}class Yi{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xh(this.data.getIterator())}getIteratorFrom(e){return new Xh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Xh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new et(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return es(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new w0("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const sw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=sw.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _r(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function El(t){const e=t.mapValue.fields.__previous_value__;return wl(e)?El(e):e}function si(t){const e=Wn(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,i,o,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}}class ii{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ii("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ii&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wl(t)?4:aw(t)?9007199254740991:ow(t)?10:11:ae()}function nn(t,e){if(t===e)return!0;const n=vr(t);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return si(t).isEqual(si(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Wn(s.timestampValue),c=Wn(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _r(s.bytesValue).isEqual(_r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),c=Ue(i.doubleValue);return o===c?ko(o)===ko(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return es(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Jh(o)!==Jh(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!nn(o[l],c[l])))return!1;return!0}(t,e);default:return ae()}}function oi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function ts(t,e){if(t===e)return 0;const n=vr(t),r=vr(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ue(i.integerValue||i.doubleValue),l=Ue(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return Zh(t.timestampValue,e.timestampValue);case 4:return Zh(si(t),si(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const c=_r(i),l=_r(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){const d=Te(c[h],l[h]);if(d!==0)return d}return Te(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Te(Ue(i.latitude),Ue(o.latitude));return c!==0?c:Te(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ed(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,l,h,d;const p=i.fields||{},g=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,P=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Te(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((d=P==null?void 0:P.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:ed(v,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ji.mapValue&&o===Ji.mapValue)return 0;if(i===Ji.mapValue)return 1;if(o===Ji.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=o.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Te(l[p],d[p]);if(g!==0)return g;const v=ts(c[l[p]],h[d[p]]);if(v!==0)return v}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Zh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Wn(t),r=Wn(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function ed(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ts(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function ns(t){return Ec(t)}function Ec(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ec(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ec(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function Tc(t){return!!t&&"integerValue"in t}function Tl(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function nd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function co(t){return!!t&&"mapValue"in t}function ow(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!co(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hs(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Hs(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());co(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];co(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(Hs(this.value))}}function E0(t){const e=[];return ds(t.fields,(n,r)=>{const s=new Ze([n]);if(co(r)){const i=E0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ut(e,0,ce.min(),ce.min(),ce.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ce.min(),ce.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ce.min(),ce.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.position=e,this.inclusive=n}}function rd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=ts(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function cw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{}class Ge extends T0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uw(e,n,r):n==="array-contains"?new fw(e,r):n==="in"?new pw(e,r):n==="not-in"?new mw(e,r):n==="array-contains-any"?new gw(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hw(e,r):new dw(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ts(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison(ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends T0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rn(e,n)}matches(e){return I0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function I0(t){return t.op==="and"}function b0(t){return lw(t)&&I0(t)}function lw(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function Ic(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+ns(t.value);if(b0(t))return t.filters.map(e=>Ic(e)).join(",");{const e=t.filters.map(n=>Ic(n)).join(",");return`${t.op}(${e})`}}function S0(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof rn?function(r,s){return s instanceof rn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&S0(o,s.filters[c]),!0):!1}(t,e):void ae()}function A0(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ns(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(A0).join(" ,")+"}"}(t):"Filter"}class uw extends Ge{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class hw extends Ge{constructor(e,n){super(e,"in",n),this.keys=C0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dw extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=C0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function C0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class fw extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tl(n)&&oi(n.arrayValue,this.value)}}class pw extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oi(this.value.arrayValue,n)}}class mw extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(oi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oi(this.value.arrayValue,n)}}class gw extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function id(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _w(t,e,n,r,s,i,o)}function Il(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ic(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ra(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ns(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ns(r)).join(",")),e.ue=n}return e.ue}function bl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function bc(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vw(t,e,n,r,s,i,o,c){return new sa(t,e,n,r,s,i,o,c)}function Sl(t){return new sa(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yw(t){return t.collectionGroup!==null}function Gs(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new et(Ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vo(i,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Vo(Ze.keyField(),r))}return e.ce}function Jt(t){const e=ue(t);return e.le||(e.le=ww(e,Gs(t))),e.le}function ww(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vo(s.field,i)});const n=t.endAt?new xo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xo(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sc(t,e,n){return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ia(t,e){return bl(Jt(t),Jt(e))&&t.limitType===e.limitType}function R0(t){return`${Il(Jt(t))}|lt:${t.limitType}`}function Or(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>A0(s)).join(", ")}]`),ra(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ns(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ns(s)).join(",")),`Target(${r})`}(Jt(t))}; limitType=${t.limitType})`}function oa(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,l){const h=rd(o,c,l);return o.inclusive?h<=0:h<0}(r.startAt,Gs(r),s)||r.endAt&&!function(o,c,l){const h=rd(o,c,l);return o.inclusive?h>=0:h>0}(r.endAt,Gs(r),s))}(t,e)}function Ew(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P0(t){return(e,n)=>{let r=!1;for(const s of Gs(t)){const i=Tw(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Tw(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,c){const l=o.data.field(i),h=c.data.field(i);return l!==null&&h!==null?ts(l,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Le(re.comparator);function In(){return Iw}const k0=new Le(re.comparator);function Ns(...t){let e=k0;for(const n of t)e=e.insert(n.key,n);return e}function x0(t){let e=k0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cr(){return qs()}function V0(){return qs()}function qs(){return new fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bw=new Le(re.comparator),Sw=new et(re.comparator);function me(...t){let e=Sw;for(const n of t)e=e.add(n);return e}const Aw=new et(Te);function Cw(){return Aw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ko(e)?"-0":e}}function D0(t){return{integerValue:""+t}}function Rw(t,e){return rw(e)?D0(e):Al(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this._=void 0}}function Pw(t,e,n){return t instanceof Do?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wl(i)&&(i=El(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ai?N0(t,e):t instanceof ci?L0(t,e):function(s,i){const o=O0(s,i),c=ad(o)+ad(s.Pe);return Tc(o)&&Tc(s.Pe)?D0(c):Al(s.serializer,c)}(t,e)}function kw(t,e,n){return t instanceof ai?N0(t,e):t instanceof ci?L0(t,e):n}function O0(t,e){return t instanceof Oo?function(r){return Tc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Do extends aa{}class ai extends aa{constructor(e){super(),this.elements=e}}function N0(t,e){const n=M0(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ci extends aa{constructor(e){super(),this.elements=e}}function L0(t,e){let n=M0(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Oo extends aa{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ad(t){return Ue(t.integerValue||t.doubleValue)}function M0(t){return Tl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xw(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ai&&s instanceof ai||r instanceof ci&&s instanceof ci?es(r.elements,s.elements,nn):r instanceof Oo&&s instanceof Oo?nn(r.Pe,s.Pe):r instanceof Do&&s instanceof Do}(t.transform,e.transform)}class Vw{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ca{}function F0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new B0(t.key,yn.none()):new Ii(t.key,t.data,yn.none());{const n=t.data,r=Vt.empty();let s=new et(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Er(t.key,r,new Ut(s.toArray()),yn.none())}}function Dw(t,e,n){t instanceof Ii?function(s,i,o){const c=s.value.clone(),l=ld(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(s,i,o){if(!lo(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ld(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(U0(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ws(t,e,n,r){return t instanceof Ii?function(i,o,c,l){if(!lo(i.precondition,o))return c;const h=i.value.clone(),d=ud(i.fieldTransforms,l,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Er?function(i,o,c,l){if(!lo(i.precondition,o))return c;const h=ud(i.fieldTransforms,l,o),d=o.data;return d.setAll(U0(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return lo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function Ow(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=O0(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function cd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&es(r,s,(i,o)=>xw(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ii extends ca{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Er extends ca{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ld(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,kw(o,c,n[s]))}return r}function ud(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Pw(i,o,e))}return r}class B0 extends ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nw extends ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Dw(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ws(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ws(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=V0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=F0(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&es(this.mutations,e.mutations,(n,r)=>cd(n,r))&&es(this.baseMutations,e.baseMutations,(n,r)=>cd(n,r))}}class Cl{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return bw}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cl(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ye;function Uw(t){switch(t){default:return ae();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function j0(t){if(t===void 0)return Tn("GRPC error has no .code"),U.UNKNOWN;switch(t){case je.OK:return U.OK;case je.CANCELLED:return U.CANCELLED;case je.UNKNOWN:return U.UNKNOWN;case je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case je.INTERNAL:return U.INTERNAL;case je.UNAVAILABLE:return U.UNAVAILABLE;case je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case je.NOT_FOUND:return U.NOT_FOUND;case je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case je.ABORTED:return U.ABORTED;case je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case je.DATA_LOSS:return U.DATA_LOSS;default:return ae()}}(ye=je||(je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new hr([4294967295,4294967295],0);function hd(t){const e=Bw().encode(t),n=new h0;return n.update(e),new Uint8Array(n.digest())}function dd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class Rl{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ls(`Invalid padding: ${n}`);if(r<0)throw new Ls(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ls(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ls(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(jw)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=hd(e),[r,s]=dd(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rl(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=hd(e),[r,s]=dd(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ls extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new la(ce.min(),s,new Le(Te),In(),me())}}class bi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bi(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class $0{constructor(e,n){this.targetId=e,this.me=n}}class z0{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fd{constructor(){this.fe=0,this.ge=md(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new bi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=md()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $w{constructor(e){this.Le=e,this.Be=new Map,this.ke=In(),this.qe=pd(),this.Qe=new Le(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(bc(i))if(r===0){const o=new re(i.path);this.Ue(n,o,ut.newNoDocument(o,ce.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=_r(r).toUint8Array()}catch(l){if(l instanceof w0)return Zr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Rl(o,s,i)}catch(l){return Zr(l instanceof Ls?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&bc(c.target)){const l=new re(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ut.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=me();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(l=>{const h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new la(e,n,this.Qe,this.ke,r);return this.ke=In(),this.qe=pd(),this.Qe=new Le(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function pd(){return new Le(re.comparator)}function md(){return new Le(re.comparator)}const zw={asc:"ASCENDING",desc:"DESCENDING"},Hw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gw={and:"AND",or:"OR"};class qw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ac(t,e){return t.useProto3Json||ra(e)?e:{value:e}}function No(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ww(t,e){return No(t,e.toTimestamp())}function Xt(t){return Ce(!!t),ce.fromTimestamp(function(n){const r=Wn(n);return new qe(r.seconds,r.nanos)}(t))}function Pl(t,e){return Cc(t,e).canonicalString()}function Cc(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G0(t){const e=Fe.fromString(t);return Ce(Y0(e)),e}function Rc(t,e){return Pl(t.databaseId,e.path)}function Wa(t,e){const n=G0(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(W0(n))}function q0(t,e){return Pl(t.databaseId,e)}function Kw(t){const e=G0(t);return e.length===4?Fe.emptyPath():W0(e)}function Pc(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W0(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gd(t,e,n){return{name:Rc(t,e),fields:n.value.mapValue.fields}}function Qw(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Ce(d===void 0||typeof d=="string"),nt.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),nt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const d=h.code===void 0?U.UNKNOWN:j0(h.code);return new ne(d,h.message||"")}(o);n=new z0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wa(t,r.document.name),i=Xt(r.document.updateTime),o=r.document.createTime?Xt(r.document.createTime):ce.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(s,i,o,c),h=r.targetIds||[],d=r.removedTargetIds||[];n=new uo(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wa(t,r.document),i=r.readTime?Xt(r.readTime):ce.min(),o=ut.newNoDocument(s,i),c=r.removedTargetIds||[];n=new uo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wa(t,r.document),i=r.removedTargetIds||[];n=new uo([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Fw(s,i),c=r.targetId;n=new $0(c,o)}}return n}function Yw(t,e){let n;if(e instanceof Ii)n={update:gd(t,e.key,e.value)};else if(e instanceof B0)n={delete:Rc(t,e.key)};else if(e instanceof Er)n={update:gd(t,e.key,e.data),updateMask:i4(e.fieldMask)};else{if(!(e instanceof Nw))return ae();n={verify:Rc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Do)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ai)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ci)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oo)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Ww(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function Jw(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xt(s.updateTime):Xt(i);return o.isEqual(ce.min())&&(o=Xt(i)),new Vw(o,s.transformResults||[])}(n,e))):[]}function Xw(t,e){return{documents:[q0(t,e.path)]}}function Zw(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=q0(t,s);const i=function(h){if(h.length!==0)return Q0(rn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Nr(g.field),direction:n4(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Ac(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function e4(t){let e=Kw(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const g=K0(p);return g instanceof rn&&b0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(P){return new Vo(Lr(P.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,ra(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,v=p.values||[];return new xo(v,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,v=p.values||[];return new xo(v,g)}(n.endAt)),vw(e,s,o,i,c,"F",l,h)}function t4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lr(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Lr(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lr(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lr(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Lr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>K0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function n4(t){return zw[t]}function r4(t){return Hw[t]}function s4(t){return Gw[t]}function Nr(t){return{fieldPath:t.canonicalString()}}function Lr(t){return Ze.fromServerFormat(t.fieldPath)}function Q0(t){return t instanceof Ge?function(n){if(n.op==="=="){if(nd(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NAN"}};if(td(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nd(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NAN"}};if(td(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(n.field),op:r4(n.op),value:n.value}}}(t):t instanceof rn?function(n){const r=n.getFilters().map(s=>Q0(s));return r.length===1?r[0]:{compositeFilter:{op:s4(n.op),filters:r}}}(t):ae()}function i4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n,r,s,i=ce.min(),o=ce.min(),c=nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.ct=e}}function a4(t){const e=e4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.un=new l4}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(qn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(qn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class l4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rs(0)}static kn(){return new rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.changes=new fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ws(r.mutation,s,Ut.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=cr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ns();return i.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=In();const o=qs(),c=function(){return qs()}();return n.forEach((l,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Er)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ws(d.mutation,h,d.mutation.getFieldMask(),qe.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var p;return c.set(h,new h4(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=qs();let s=new Le((o,c)=>o-c),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let d=r.get(l)||Ut.empty();d=c.applyToLocalView(h,d),r.set(l,d);const p=(s.get(c.batchId)||me()).add(l);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,d=l.value,p=V0();d.forEach(g=>{if(!i.has(g)){const v=F0(n.get(g),r.get(g));v!==null&&p.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(cr());let c=-1,l=i;return o.next(h=>L.forEach(h,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,l,h,me())).next(d=>({batchId:c,changes:x0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Ns();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ns();return this.indexManager.getCollectionParents(e,i).next(c=>L.forEach(c,l=>{const h=function(p,g){return new sa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ut.newInvalidDocument(d)))});let c=Ns();return o.forEach((l,h)=>{const d=i.get(l);d!==void 0&&Ws(d.mutation,h,Ut.empty(),qe.now()),oa(n,h)&&(c=c.insert(l,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:a4(s.bundledQuery),readTime:Xt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.overlays=new Le(re.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=cr(),i=n.length+1,o=new re(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=cr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const c=cr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>c.set(h,d)),!(c.size()>=s)););return L.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mw(n,r));let i=this.Ir.get(n);i===void 0&&(i=me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.Tr=new et(Qe.Er),this.dr=new et(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Fe([])),r=new Qe(n,e),s=new Qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Fe([])),r=new Qe(n,e),s=new Qe(n,e+1);let i=me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(Qe.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lw(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Qe(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(Te);return n.forEach(s=>{const i=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new Qe(new re(i),0);let c=new et(Te);return this.br.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.wr)),!0)},o),L.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Qe(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.Mr=e,this.docs=function(){return new Le(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=In();const o=n.path,c=new re(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Z3(X3(d),r)<=0||(s.has(d.key)||oa(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new v4(this)}getSize(e){return L.resolve(this.size)}}class v4 extends u4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.persistence=e,this.Nr=new fs(n=>Il(n),bl),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kl,this.targetCount=0,this.kr=rs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new rs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new yl(0),this.Kr=!1,this.Kr=!0,this.$r=new m4,this.referenceDelegate=e(this),this.Ur=new y4(this),this.indexManager=new c4,this.remoteDocumentCache=function(s){return new _4(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new o4(n),this.Gr=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new p4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new g4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new E4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class E4 extends tw{constructor(e){super(),this.currentSequenceNumber=e}}class xl{constructor(e){this.persistence=e,this.Jr=new kl,this.Yr=null}static Zr(e){return new xl(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return S_()?8:nw(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new T4;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ks()<=ge.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(ks()<=ge.DEBUG&&Z("QueryEngine","Query:",Or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ks()<=ge.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(n))):L.resolve())}Yi(e,n){if(od(n))return L.resolve(null);let r=Jt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sc(n,null,"F"),r=Jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.ts(n,c);return this.ns(n,h,o,l.readTime)?this.Yi(e,Sc(n,null,"F")):this.rs(e,h,n,l)}))})))}Zi(e,n,r,s){return od(n)||s.isEqual(ce.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(ks()<=ge.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Or(n)),this.rs(e,o,n,J3(s,-1)).next(c=>c))})}ts(e,n){let r=new et(P0(e));return n.forEach((s,i)=>{oa(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ks()<=ge.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Or(n)),this.Ji.getDocumentsMatchingQuery(e,n,qn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Le(Te),this._s=new fs(i=>Il(i),bl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function S4(t,e,n,r){return new b4(t,e,n,r)}async function J0(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let l=me();for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of i){c.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function A4(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,d){const p=h.batch,g=p.keys();let v=L.resolve();return g.forEach(P=>{v=v.next(()=>d.getEntry(l,P)).next(x=>{const O=h.docVersions.get(P);Ce(O!==null),x.version.compareTo(O)<0&&(p.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),d.addEntry(x)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=me();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function X0(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function C4(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((d,p)=>{const g=s.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(nt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(p,v),function(x,O,$){return x.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(g,v,d)&&c.push(n.Ur.updateTargetData(i,v))});let l=In(),h=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),c.push(R4(i,o,e.documentUpdates).next(d=>{l=d.Ps,h=d.Is})),!r.isEqual(ce.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(d)}return L.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,h)).next(()=>l)}).then(i=>(n.os=s,i))}function R4(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=In();return n.forEach((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function P4(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k4(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Bn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kc(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ti(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function _d(t,e,n){const r=ue(t);let s=ce.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,d){const p=ue(l),g=p._s.get(d);return g!==void 0?L.resolve(p.os.get(g)):p.Ur.getTargetData(h,d)}(r,o,Jt(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:me())).next(c=>(x4(r,Ew(e),c),{documents:c,Ts:i})))}function x4(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class vd{constructor(){this.activeTargetIds=Cw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V4{constructor(){this.so=new vd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xi=null;function Ka(){return Xi===null?Xi=function(){return 268435456+Math.round(2147483648*Math.random())}():Xi++,"0x"+Xi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class L4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=Ka(),l=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${c}:`,l,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,l,h,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${c}: `,d),d),d=>{throw Zr("RestConnection",`RPC '${n}' ${c} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=O4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ka();return new Promise((o,c)=>{const l=new d0;l.setWithCredentials(!0),l.listenOnce(f0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ao.NO_ERROR:const d=l.getResponseJson();Z(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case ao.TIMEOUT:Z(at,`RPC '${e}' ${i} timed out`),c(new ne(U.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:const p=l.getStatus();if(Z(at,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const P=function(O){const $=O.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf($)>=0?$:U.UNKNOWN}(v.status);c(new ne(P,v.message))}else c(new ne(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(U.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Z(at,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Z(at,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Ka(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=g0(),c=m0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(at,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let g=!1,v=!1;const P=new N4({Io:O=>{v?Z(at,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(g||(Z(at,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Z(at,`RPC '${e}' stream ${s} sending:`,O),p.send(O))},To:()=>p.close()}),x=(O,$,B)=>{O.listen($,H=>{try{B(H)}catch(q){setTimeout(()=>{throw q},0)}})};return x(p,Os.EventType.OPEN,()=>{v||(Z(at,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),x(p,Os.EventType.CLOSE,()=>{v||(v=!0,Z(at,`RPC '${e}' stream ${s} transport closed`),P.So())}),x(p,Os.EventType.ERROR,O=>{v||(v=!0,Zr(at,`RPC '${e}' stream ${s} transport errored:`,O),P.So(new ne(U.UNAVAILABLE,"The operation could not be completed")))}),x(p,Os.EventType.MESSAGE,O=>{var $;if(!v){const B=O.data[0];Ce(!!B);const H=B,q=H.error||(($=H[0])===null||$===void 0?void 0:$.error);if(q){Z(at,`RPC '${e}' stream ${s} received error:`,q);const de=q.status;let fe=function(T){const b=je[T];if(b!==void 0)return j0(b)}(de),I=q.message;fe===void 0&&(fe=U.INTERNAL,I="Unknown error status: "+de+" with message "+q.message),v=!0,P.So(new ne(fe,I)),p.close()}else Z(at,`RPC '${e}' stream ${s} received:`,B),P.bo(B)}}),x(c,p0.STAT_EVENT,O=>{O.stat===wc.PROXY?Z(at,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===wc.NOPROXY&&Z(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function Qa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){return new qw(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r,s,i,o,c,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Z0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ne(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M4 extends em{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Qw(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Xt(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pc(this.serializer),n.addTarget=function(i,o){let c;const l=o.target;if(c=bc(l)?{documents:Xw(i,l)}:{query:Zw(i,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=H0(i,o.resumeToken);const h=Ac(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ce.min())>0){c.readTime=No(i,o.snapshotVersion.toTimestamp());const h=Ac(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=t4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pc(this.serializer),n.removeTarget=e,this.a_(n)}}class F4 extends em{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Jw(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yw(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Cc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Cc(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class B4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tn(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Tr(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=ue(l);h.L_.add(4),await Si(h),h.q_.set("Unknown"),h.L_.delete(4),await ha(h)}(this))})}),this.q_=new B4(r,s)}}async function ha(t){if(Tr(t))for(const e of t.B_)await e(!0)}async function Si(t){for(const e of t.B_)await e(!1)}function tm(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ll(n)?Nl(n):ps(n).r_()&&Ol(n,e))}function Dl(t,e){const n=ue(t),r=ps(n);n.N_.delete(e),r.r_()&&nm(n,e),n.N_.size===0&&(r.r_()?r.o_():Tr(n)&&n.q_.set("Unknown"))}function Ol(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ps(t).A_(e)}function nm(t,e){t.Q_.xe(e),ps(t).R_(e)}function Nl(t){t.Q_=new $w({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ps(t).start(),t.q_.v_()}function Ll(t){return Tr(t)&&!ps(t).n_()&&t.N_.size>0}function Tr(t){return ue(t).L_.size===0}function rm(t){t.Q_=void 0}async function $4(t){t.q_.set("Online")}async function z4(t){t.N_.forEach((e,n)=>{Ol(t,e)})}async function H4(t,e){rm(t),Ll(t)?(t.q_.M_(e),Nl(t)):t.q_.set("Unknown")}async function G4(t,e,n){if(t.q_.set("Online"),e instanceof z0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lo(t,r)}else if(e instanceof uo?t.Q_.Ke(e):e instanceof $0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await X0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(h);d&&i.N_.set(h,d.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(nt.EMPTY_BYTE_STRING,d.snapshotVersion)),nm(i,l);const p=new Bn(d.target,l,h,d.sequenceNumber);Ol(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Lo(t,r)}}async function Lo(t,e,n){if(!Ti(e))throw e;t.L_.add(1),await Si(t),t.q_.set("Offline"),n||(n=()=>X0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ha(t)})}function sm(t,e){return e().catch(n=>Lo(t,n,e))}async function da(t){const e=ue(t),n=Kn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;q4(e);)try{const s=await P4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,W4(e,s)}catch(s){await Lo(e,s)}im(e)&&om(e)}function q4(t){return Tr(t)&&t.O_.length<10}function W4(t,e){t.O_.push(e);const n=Kn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function im(t){return Tr(t)&&!Kn(t).n_()&&t.O_.length>0}function om(t){Kn(t).start()}async function K4(t){Kn(t).p_()}async function Q4(t){const e=Kn(t);for(const n of t.O_)e.m_(n.mutations)}async function Y4(t,e,n){const r=t.O_.shift(),s=Cl.from(r,e,n);await sm(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await da(t)}async function J4(t,e){e&&Kn(t).V_&&await async function(r,s){if(function(o){return Uw(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Kn(r).s_(),await sm(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await da(r)}}(t,e),im(t)&&om(t)}async function wd(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Tr(n);n.L_.add(3),await Si(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ha(n)}async function X4(t,e){const n=ue(t);e?(n.L_.delete(2),await ha(n)):e||(n.L_.add(2),await Si(n),n.q_.set("Unknown"))}function ps(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new M4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$4.bind(null,t),Ro:z4.bind(null,t),mo:H4.bind(null,t),d_:G4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ll(t)?Nl(t):t.q_.set("Unknown")):(await t.K_.stop(),rm(t))})),t.K_}function Kn(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new F4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:K4.bind(null,t),mo:J4.bind(null,t),f_:Q4.bind(null,t),g_:Y4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await da(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Ml(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),Ti(t))return new ne(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Ns(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Qr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.W_=new Le(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ss{constructor(e,n,r,s,i,o,c,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new ss(e,n,Qr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eE{constructor(){this.queries=Td(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=Td(),i.forEach((o,c)=>{for(const l of c.j_)l.onError(r)})})(this,new ne(U.ABORTED,"Firestore shutting down"))}}function Td(){return new fs(t=>R0(t),ia)}async function tE(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Z4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Fl(o,`Initialization of query '${Or(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ul(n)}async function nE(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rE(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Ul(n)}function sE(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ul(t){t.Y_.forEach(e=>{e.next()})}var xc,Id;(Id=xc||(xc={})).ea="default",Id.Cache="cache";class iE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.key=e}}class cm{constructor(e){this.key=e}}class oE{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=P0(e),this.Ra=new Qr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ed,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const g=s.get(d),v=oa(this.query,p)?p:null,P=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let O=!1;g&&v?g.data.isEqual(v.data)?P!==x&&(r.track({type:3,doc:v}),O=!0):this.ga(g,v)||(r.track({type:2,doc:v}),O=!0,(l&&this.Aa(v,l)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),O=!0):g&&!v&&(r.track({type:1,doc:g}),O=!0,(l||h)&&(c=!0)),O&&(v?(o=o.add(v),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(v,P){const x=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return x(v)-x(P)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new ss(this.query,e.Ra,i,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ed,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cm(r))}),this.da.forEach(r=>{e.has(r)||n.push(new am(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ss.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class aE{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cE{constructor(e){this.key=e,this.va=!1}}class lE{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fs(c=>R0(c),ia),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(re.comparator),this.Na=new Map,this.La=new kl,this.Ba={},this.ka=new Map,this.qa=rs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uE(t,e,n=!0){const r=pm(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await lm(r,e,n,!0),s}async function hE(t,e){const n=pm(t);await lm(n,e,!0,!1)}async function lm(t,e,n,r){const s=await k4(t.localStore,Jt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await dE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tm(t.remoteStore,s),c}async function dE(t,e,n,r,s){t.Ka=(p,g,v)=>async function(x,O,$,B){let H=O.view.ma($);H.ns&&(H=await _d(x.localStore,O.query,!1).then(({documents:I})=>O.view.ma(I,H)));const q=B&&B.targetChanges.get(O.targetId),de=B&&B.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(H,x.isPrimaryClient,q,de);return Sd(x,O.targetId,fe.wa),fe.snapshot}(t,p,g,v);const i=await _d(t.localStore,e,!0),o=new oE(e,i.Ts),c=o.ma(i.documents),l=bi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,l);Sd(t,n,h.wa);const d=new aE(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function fE(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ia(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dl(r.remoteStore,s.targetId),Vc(r,s.targetId)}).catch(Ei)):(Vc(r,s.targetId),await kc(r.localStore,s.targetId,!0))}async function pE(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(n.remoteStore,r.targetId))}async function mE(t,e,n){const r=TE(t);try{const s=await function(o,c){const l=ue(o),h=qe.now(),d=c.reduce((v,P)=>v.add(P.key),me());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let P=In(),x=me();return l.cs.getEntries(v,d).next(O=>{P=O,P.forEach(($,B)=>{B.isValidDocument()||(x=x.add($))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,P)).next(O=>{p=O;const $=[];for(const B of c){const H=Ow(B,p.get(B.key).overlayedDocument);H!=null&&$.push(new Er(B.key,H,E0(H.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,h,$,c)}).next(O=>{g=O;const $=O.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(v,O.batchId,$)})}).then(()=>({batchId:g.batchId,changes:x0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new Le(Te)),h=h.insert(c,l),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ai(r,s.changes),await da(r.remoteStore)}catch(s){const i=Fl(s,"Failed to persist write");n.reject(i)}}async function um(t,e){const n=ue(t);try{const r=await C4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await Ai(n,r,e)}catch(r){await Ei(r)}}function bd(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const l=ue(o);l.onlineState=c;let h=!1;l.queries.forEach((d,p)=>{for(const g of p.j_)g.Z_(c)&&(h=!0)}),h&&Ul(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gE(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Le(re.comparator);o=o.insert(i,ut.newNoDocument(i,ce.min()));const c=me().add(i),l=new la(ce.min(),new Map,new Le(Te),o,c);await um(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Bl(r)}else await kc(r.localStore,e,!1).then(()=>Vc(r,e,n)).catch(Ei)}async function _E(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await A4(n.localStore,e);dm(n,r,null),hm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ai(n,s)}catch(s){await Ei(s)}}async function vE(t,e,n){const r=ue(t);try{const s=await function(o,c){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,c).next(p=>(Ce(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(h,p))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,e);dm(r,e,n),hm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ai(r,s)}catch(s){await Ei(s)}}function hm(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dm(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Vc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fm(t,r)})}function fm(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dl(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Bl(t))}function Sd(t,e,n){for(const r of n)r instanceof am?(t.La.addReference(r.key,e),yE(t,r)):r instanceof cm?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fm(t,r.key)):ae()}function yE(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),Bl(t))}function Bl(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new cE(n)),t.Oa=t.Oa.insert(n,r),tm(t.remoteStore,new Bn(Jt(Sl(n.path)),r,"TargetPurposeLimboResolution",yl.oe))}}async function Ai(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{o.push(r.Ka(l,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Vl.Wi(l.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,h){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(h,g=>L.forEach(g.$i,v=>d.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>L.forEach(g.Ui,v=>d.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!Ti(p))throw p;Z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const v=d.os.get(g),P=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(P);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function wE(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await J0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(l=>{l.reject(new ne(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ai(n,r.hs)}}function EE(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let s=me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function pm(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gE.bind(null,e),e.Ca.d_=rE.bind(null,e.eventManager),e.Ca.$a=sE.bind(null,e.eventManager),e}function TE(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_E.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vE.bind(null,e),e}class Mo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ua(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return S4(this.persistence,new I4,e.initialUser,this.serializer)}Ga(e){return new w4(xl.Zr,this.serializer)}Wa(e){return new V4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mo.provider={build:()=>new Mo};class Dc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wE.bind(null,this.syncEngine),await X4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eE}()}createDatastore(e){const n=ua(e.databaseInfo.databaseId),r=function(i){return new L4(i)}(e.databaseInfo);return function(i,o,c,l){return new U4(i,o,c,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new j4(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>bd(this.syncEngine,n,0),function(){return yd.D()?new yd:new D4}())}createSyncEngine(e,n){return function(s,i,o,c,l,h,d){const p=new lE(s,i,o,c,l,h);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Si(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dc.provider={build:()=>new Dc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=v0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ya(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ad(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SE(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wd(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wd(e.remoteStore,s)),t._onlineComponents=e}async function SE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ya(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zr("Error using user provided cache. Falling back to memory cache: "+n),await Ya(t,new Mo)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Ya(t,new Mo);return t._offlineComponents}async function mm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Ad(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Ad(t,new Dc))),t._onlineComponents}function AE(t){return mm(t).then(e=>e.syncEngine)}async function CE(t){const e=await mm(t),n=e.eventManager;return n.onListen=uE.bind(null,e.syncEngine),n.onUnlisten=fE.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hE.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pE.bind(null,e.syncEngine),n}function RE(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,l,h){const d=new IE({next:g=>{d.Za(),o.enqueueAndForget(()=>nE(i,p));const v=g.docs.has(c);!v&&g.fromCache?h.reject(new ne(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?h.reject(new ne(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new iE(Sl(c.path),d,{includeMetadataChanges:!0,_a:!0});return tE(i,p)}(await CE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e,n){if(!n)throw new ne(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kE(t,e,n,r){if(e===!0&&r===!0)throw new ne(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rd(t){if(!re.isDocumentKey(t))throw new ne(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jl(t);throw new ne(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gm((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $l{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $3;switch(r.type){case"firstParty":return new q3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cd.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Cd.delete(n),r.terminate())}(this),Promise.resolve()}}function xE(t,e,n,r={}){var s;const i=(t=li(t,$l))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=ct.MOCK_USER;else{c=v_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ne(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ct(h)}t._authCredentials=new z3(new _0(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zl(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class ui extends zl{constructor(e,n,r){super(e,n,Sl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new re(e))}withConverter(e){return new ui(this.firestore,e,this._path)}}function VE(t,e,...n){if(t=en(t),arguments.length===1&&(e=v0.newId()),PE("doc","path",e),t instanceof $l){const r=Fe.fromString(e,...n);return Rd(r),new Ot(t,null,new re(r))}{if(!(t instanceof Ot||t instanceof ui))throw new ne(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Rd(r),new Ot(t.firestore,t instanceof ui?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Z0(this,"async_queue_retry"),this.Vu=()=>{const r=Qa();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qa();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ml.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Hl extends $l{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kd,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kd(e),this._firestoreClient=void 0,await e}}}function DE(t,e){const n=typeof t=="object"?t:xp(),r=typeof t=="string"?t:"(default)",s=ol(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=g_("firestore");i&&xE(s,...i)}return s}function _m(t){if(t._terminated)throw new ne(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OE(t),t._firestoreClient}function OE(t){var e,n,r;const s=t._freezeSettings(),i=function(c,l,h,d){return new iw(c,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gm(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bE(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new is(nt.fromBase64String(e))}catch(n){throw new ne(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new is(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=/^__.*__$/;class LE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ii(e,this.data,n,this.fieldTransforms)}}function ym(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Kl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fo(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ym(this.Cu)&&NE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ME{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ua(e)}Qu(e,n,r,s=!1){return new Kl({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FE(t){const e=t._freezeSettings(),n=ua(t._databaseId);return new ME(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Im("Data must be an object, but it was:",o,r);const c=Em(r,o);let l,h;if(i.merge)l=new Ut(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=BE(e,p,n);if(!o.contains(g))throw new ne(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$E(d,g)||d.push(g)}l=new Ut(d),h=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=o.fieldTransforms;return new LE(new Vt(c),l,h)}function wm(t,e){if(Tm(t=en(t)))return Im("Unsupported field value:",e,t),Em(t,e);if(t instanceof vm)return function(r,s){if(!ym(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let l=wm(c,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:No(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:No(s.serializer,i)}}if(r instanceof ql)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof is)return{bytesValue:H0(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Wl)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Al(c.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${jl(r)}`)}(t,e)}function Em(t,e){const n={};return y0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=wm(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Tm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ql||t instanceof is||t instanceof Ot||t instanceof vm||t instanceof Wl)}function Im(t,e,n){if(!Tm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function BE(t,e,n){if((e=en(e))instanceof Gl)return e._internalPath;if(typeof e=="string")return bm(t,e);throw Fo("Field path arguments must be of type string or ",t,!1,void 0,n)}const jE=new RegExp("[~\\*/\\[\\]]");function bm(t,e,n){if(e.search(jE)>=0)throw Fo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gl(...e.split("."))._internalPath}catch{throw Fo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fo(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(U.INVALID_ARGUMENT,c+t+l)}function $E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zE extends Sm{data(){return super.data()}}function Am(t,e){return typeof e=="string"?bm(t,e):e instanceof Gl?e._internalPath:e._delegate._internalPath}class HE{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new Wl(i)}convertGeoPoint(e){return new ql(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=El(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(si(e));default:return null}}convertTimestamp(e){const n=Wn(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Ce(Y0(r));const s=new ii(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cm extends Sm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new WE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class WE extends Cm{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){t=li(t,Ot);const e=li(t.firestore,Hl);return RE(_m(e),t._key).then(n=>XE(e,t,n))}class QE extends HE{constructor(e){super(),this.firestore=e}convertBytes(e){return new is(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function YE(t,e,n){t=li(t,Ot);const r=li(t.firestore,Hl),s=GE(t.converter,e);return JE(r,[UE(FE(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yn.none())])}function JE(t,e){return function(r,s){const i=new Hn;return r.asyncQueue.enqueueAndForget(async()=>mE(await AE(r),s,i)),i.promise}(_m(t),e)}function XE(t,e,n){const r=n.docs.get(e._key),s=new QE(t);return new Cm(t,s,e._key,r,new qE(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){hs=s})(ls),Jr(new pr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Hl(new H3(r.getProvider("auth-internal")),new K3(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ne(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ii(h.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),zn(Yh,"4.7.3",e),zn(Yh,"4.7.3","esm2017")})();const ZE={apiKey:"AIzaSyC1yRNBfDNJRiBLTlmUvl-pxNrXQrhlCoA",authDomain:"seraphium-5fd68.firebaseapp.com",projectId:"seraphium-5fd68",storageBucket:"seraphium-5fd68.appspot.com",messagingSenderId:"123829673679",appId:"1:123829673679:web:7d1082bf98919a3a1de1ba",measurementId:"G-F0QZBBJ20N"},Rm=kp(ZE),eT=B3(Rm),tT=new dn,nT=DE(Rm),rT=a_({state:{tutorialSkiped:!1,canChoose:!1,playerProfile:{username:"Undefined",chessShards:0,battleShards:0,level:1,characters:[{charName:"Classic Pawn",charLvl:1}]},skills:[{name:"Продвинутая оценка способностей противника",description:["Позволяет узнать скрытые способности противника уровня 14 и ниже.","Способность может быть заблокирована в зависимости от положительных эффектов противника."],icon:"/src/assets/Skills/Bonuses/SearchEnemySkills/radar-sweep-svgrepo-com.svg"}],characters:[{name:"Classic Pawn",rarity:3,type:"B",icon:"/src/assets/pieces/white/pawn.svg",chibiIcon:"/src/assets/pieces/white/pawn.svg",description:"— a hereditary hatter who runs a small shop. Unlike her relatives, Aellen was always drawn to magic and its unpredictable nature.",skills:[{name:"Remove enemy piece",description:"Remove enemy piece",power:1,skillImg:"/src/assets/Skills/burning-passion-svgrepo-com.svg"},{name:"Rewards and experience increased by",description:"Rewards and experience increased by 1%",power:1}]}],insertedElement:null},mutations:{setCanChoose(t,e){t.canChoose=e},updateProvince(t,e){t.playerProfile.province=e},setInsertedElement(t,e){t.insertedElement=e},setTutorialSkiped(t,e){t.tutorialSkiped=e},setPlayerProfile(t,e){t.playerProfile=e},UPDATE_CHARACTER_TYPE(t,{name:e,newType:n}){const r=t.characters.find(s=>s.name===e);r&&(r.type=n)}},actions:{async loginWithGoogle({commit:t}){try{const n=(await Qy(eT,tT)).user,r=VE(nT,"users",n.uid),s=await KE(r);if(s.exists()){const i=s.data();t("setPlayerProfile",{username:i.username,level:i.level,province:i.province,characters:i.characters}),t("setTutorialSkiped",i.tutorialSkiped)}else await YE(r,{username:n.displayName||"Undefined",level:1,province:null,characters:[],tutorialSkiped:!1}),t("setPlayerProfile",{username:n.displayName,level:1,province:null,characters:[]}),t("setTutorialSkiped",!1)}catch(e){console.error("Error during Google sign-in:",e)}},updateInsertedElement({commit:t},e){t("setInsertedElement",e)},updateCanChoose({commit:t},e){t("setCanChoose",e)},setProvince({commit:t},e){t("updateProvince",e)},skipTutorial({commit:t},e){t("setTutorialSkiped",e)}},getters:{canChoose:t=>t.canChoose,province:t=>t.playerProfile.province,provinces:t=>t.provinces,characters:t=>t.characters,insertedElement:t=>t.insertedElement,playerProfile:t=>t.playerProfile,skills:t=>t.skills,tutorialSkiped:t=>t.tutorialSkiped,chessShards:t=>t.playerProfile.chessShards}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Mr=typeof document<"u";function Pm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Pm(t.default)}const Ae=Object.assign;function Ja(t,e){const n={};for(const r in e){const s=e[r];n[r]=$t(s)?s.map(t):t(s)}return n}const Ks=()=>{},$t=Array.isArray,km=/#/g,iT=/&/g,oT=/\//g,aT=/=/g,cT=/\?/g,xm=/\+/g,lT=/%5B/g,uT=/%5D/g,Vm=/%5E/g,hT=/%60/g,Dm=/%7B/g,dT=/%7C/g,Om=/%7D/g,fT=/%20/g;function Ql(t){return encodeURI(""+t).replace(dT,"|").replace(lT,"[").replace(uT,"]")}function pT(t){return Ql(t).replace(Dm,"{").replace(Om,"}").replace(Vm,"^")}function Oc(t){return Ql(t).replace(xm,"%2B").replace(fT,"+").replace(km,"%23").replace(iT,"%26").replace(hT,"`").replace(Dm,"{").replace(Om,"}").replace(Vm,"^")}function mT(t){return Oc(t).replace(aT,"%3D")}function gT(t){return Ql(t).replace(km,"%23").replace(cT,"%3F")}function _T(t){return t==null?"":gT(t).replace(oT,"%2F")}function hi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const vT=/\/$/,yT=t=>t.replace(vT,"");function Xa(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,c>-1?c:e.length),s=t(i)),c>-1&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=IT(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:hi(o)}}function wT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function xd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ET(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&os(e.matched[r],n.matched[s])&&Nm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function os(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Nm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!TT(t[n],e[n]))return!1;return!0}function TT(t,e){return $t(t)?Vd(t,e):$t(e)?Vd(e,t):t===e}function Vd(t,e){return $t(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function IT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Dn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var di;(function(t){t.pop="pop",t.push="push"})(di||(di={}));var Qs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Qs||(Qs={}));function bT(t){if(!t)if(Mr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yT(t)}const ST=/^[^#]+#/;function AT(t,e){return t.replace(ST,"#")+e}function CT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const fa=()=>({left:window.scrollX,top:window.scrollY});function RT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=CT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Dd(t,e){return(history.state?history.state.position-e:-1)+t}const Nc=new Map;function PT(t,e){Nc.set(t,e)}function kT(t){const e=Nc.get(t);return Nc.delete(t),e}let xT=()=>location.protocol+"//"+location.host;function Lm(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let c=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(c);return l[0]!=="/"&&(l="/"+l),xd(l,"")}return xd(n,t)+r+s}function VT(t,e,n,r){let s=[],i=[],o=null;const c=({state:g})=>{const v=Lm(t,location),P=n.value,x=e.value;let O=0;if(g){if(n.value=v,e.value=g,o&&o===P){o=null;return}O=x?g.position-x.position:0}else r(v);s.forEach($=>{$(n.value,P,{delta:O,type:di.pop,direction:O?O>0?Qs.forward:Qs.back:Qs.unknown})})};function l(){o=n.value}function h(g){s.push(g);const v=()=>{const P=s.indexOf(g);P>-1&&s.splice(P,1)};return i.push(v),v}function d(){const{history:g}=window;g.state&&g.replaceState(Ae({},g.state,{scroll:fa()}),"")}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:h,destroy:p}}function Od(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?fa():null}}function DT(t){const{history:e,location:n}=window,r={value:Lm(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,h,d){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:xT()+t+l;try{e[d?"replaceState":"pushState"](h,"",g),s.value=h}catch(v){console.error(v),n[d?"replace":"assign"](g)}}function o(l,h){const d=Ae({},e.state,Od(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});i(l,d,!0),r.value=l}function c(l,h){const d=Ae({},s.value,e.state,{forward:l,scroll:fa()});i(d.current,d,!0);const p=Ae({},Od(r.value,l,null),{position:d.position+1},h);i(l,p,!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function OT(t){t=bT(t);const e=DT(t),n=VT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ae({location:"",base:t,go:r,createHref:AT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function NT(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),OT(t)}function LT(t){return typeof t=="string"||t&&typeof t=="object"}function Mm(t){return typeof t=="string"||typeof t=="symbol"}const Fm=Symbol("");var Nd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Nd||(Nd={}));function as(t,e){return Ae(new Error,{type:t,[Fm]:!0},e)}function ln(t,e){return t instanceof Error&&Fm in t&&(e==null||!!(t.type&e))}const Ld="[^/]+?",MT={sensitive:!1,strict:!1,start:!0,end:!0},FT=/[.+*?^${}()[\]/\\]/g;function UT(t,e){const n=Ae({},MT,e),r=[];let s=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const g=h[p];let v=40+(n.sensitive?.25:0);if(g.type===0)p||(s+="/"),s+=g.value.replace(FT,"\\$&"),v+=40;else if(g.type===1){const{value:P,repeatable:x,optional:O,regexp:$}=g;i.push({name:P,repeatable:x,optional:O});const B=$||Ld;if(B!==Ld){v+=10;try{new RegExp(`(${B})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${P}" (${B}): `+q.message)}}let H=x?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(H=O&&h.length<2?`(?:/${H})`:"/"+H),O&&(H+="?"),s+=H,v+=20,O&&(v+=-8),x&&(v+=-20),B===".*"&&(v+=-50)}d.push(v)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(h){const d=h.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const v=d[g]||"",P=i[g-1];p[P.name]=v&&P.repeatable?v.split("/"):v}return p}function l(h){let d="",p=!1;for(const g of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of g)if(v.type===0)d+=v.value;else if(v.type===1){const{value:P,repeatable:x,optional:O}=v,$=P in h?h[P]:"";if($t($)&&!x)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const B=$t($)?$.join("/"):$;if(!B)if(O)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);d+=B}}return d||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function BT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Um(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=BT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Md(r))return 1;if(Md(s))return-1}return s.length-r.length}function Md(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jT={type:0,value:""},$T=/[a-zA-Z0-9_]/;function zT(t){if(!t)return[[]];if(t==="/")return[[jT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&p(),o()):l===":"?(p(),n=1):g();break;case 4:g(),n=r;break;case 1:l==="("?n=2:$T.test(l)?g():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),s}function HT(t,e,n){const r=UT(zT(t.path),n),s=Ae(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function GT(t,e){const n=[],r=new Map;e=jd({strict:!1,end:!0,sensitive:!1},e);function s(p){return r.get(p)}function i(p,g,v){const P=!v,x=Ud(p);x.aliasOf=v&&v.record;const O=jd(e,p),$=[x];if("alias"in p){const q=typeof p.alias=="string"?[p.alias]:p.alias;for(const de of q)$.push(Ud(Ae({},x,{components:v?v.record.components:x.components,path:de,aliasOf:v?v.record:x})))}let B,H;for(const q of $){const{path:de}=q;if(g&&de[0]!=="/"){const fe=g.record.path,I=fe[fe.length-1]==="/"?"":"/";q.path=g.record.path+(de&&I+de)}if(B=HT(q,g,O),v?v.alias.push(B):(H=H||B,H!==B&&H.alias.push(B),P&&p.name&&!Bd(B)&&o(p.name)),Bm(B)&&l(B),x.children){const fe=x.children;for(let I=0;I<fe.length;I++)i(fe[I],B,v&&v.children[I])}v=v||B}return H?()=>{o(H)}:Ks}function o(p){if(Mm(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const g=KT(p,n);n.splice(g,0,p),p.record.name&&!Bd(p)&&r.set(p.record.name,p)}function h(p,g){let v,P={},x,O;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw as(1,{location:p});O=v.record.name,P=Ae(Fd(g.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&Fd(p.params,v.keys.map(H=>H.name))),x=v.stringify(P)}else if(p.path!=null)x=p.path,v=n.find(H=>H.re.test(x)),v&&(P=v.parse(x),O=v.record.name);else{if(v=g.name?r.get(g.name):n.find(H=>H.re.test(g.path)),!v)throw as(1,{location:p,currentLocation:g});O=v.record.name,P=Ae({},g.params,p.params),x=v.stringify(P)}const $=[];let B=v;for(;B;)$.unshift(B.record),B=B.parent;return{name:O,path:x,params:P,matched:$,meta:WT($)}}t.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:c,getRecordMatcher:s}}function Fd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Ud(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:qT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Bd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function WT(t){return t.reduce((e,n)=>Ae(e,n.meta),{})}function jd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function KT(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Um(t,e[i])<0?r=i:n=i+1}const s=QT(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function QT(t){let e=t;for(;e=e.parent;)if(Bm(e)&&Um(t,e)===0)return e}function Bm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function YT(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(xm," "),o=i.indexOf("="),c=hi(o<0?i:i.slice(0,o)),l=o<0?null:hi(i.slice(o+1));if(c in e){let h=e[c];$t(h)||(h=e[c]=[h]),h.push(l)}else e[c]=l}return e}function $d(t){let e="";for(let n in t){const r=t[n];if(n=mT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}($t(r)?r.map(i=>i&&Oc(i)):[r&&Oc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function JT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=$t(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const XT=Symbol(""),zd=Symbol(""),Yl=Symbol(""),jm=Symbol(""),Lc=Symbol("");function xs(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ln(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const h=g=>{g===!1?l(as(4,{from:n,to:e})):g instanceof Error?l(g):LT(g)?l(as(2,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),c())},d=i(()=>t.call(r&&r.instances[s],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(g=>l(g))})}function Za(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Pm(l)){const d=(l.__vccOpts||l)[e];d&&i.push(Ln(d,n,r,o,c,s))}else{let h=l();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=sT(d)?d.default:d;o.mods[c]=d,o.components[c]=p;const v=(p.__vccOpts||p)[e];return v&&Ln(v,n,r,o,c,s)()}))}}return i}function Hd(t){const e=vn(Yl),n=vn(jm),r=Ft(()=>{const l=$r(t.to);return e.resolve(l)}),s=Ft(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(os.bind(null,d));if(g>-1)return g;const v=Gd(l[h-2]);return h>1&&Gd(d)===v&&p[p.length-1].path!==v?p.findIndex(os.bind(null,l[h-2])):g}),i=Ft(()=>s.value>-1&&n9(n.params,r.value.params)),o=Ft(()=>s.value>-1&&s.value===n.matched.length-1&&Nm(n.params,r.value.params));function c(l={}){return t9(l)?e[$r(t.replace)?"replace":"push"]($r(t.to)).catch(Ks):Promise.resolve()}return{route:r,href:Ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}const ZT=Pf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Hd,setup(t,{slots:e}){const n=fi(Hd(t)),{options:r}=vn(Yl),s=Ft(()=>({[qd(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[qd(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:rp("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),e9=ZT;function t9(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function n9(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!$t(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Gd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const qd=(t,e,n)=>t??e??n,r9=Pf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=vn(Lc),s=Ft(()=>t.route||r.value),i=vn(zd,0),o=Ft(()=>{let h=$r(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),c=Ft(()=>s.value.matched[o.value]);Zi(zd,Ft(()=>o.value+1)),Zi(XT,c),Zi(Lc,s);const l=Wg();return Gr(()=>[l.value,c.value,t.name],([h,d,p],[g,v,P])=>{d&&(d.instances[p]=h,v&&v!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),h&&d&&(!v||!os(d,v)||!g)&&(d.enterCallbacks[p]||[]).forEach(x=>x(h))},{flush:"post"}),()=>{const h=s.value,d=t.name,p=c.value,g=p&&p.components[d];if(!g)return Wd(n.default,{Component:g,route:h});const v=p.props[d],P=v?v===!0?h.params:typeof v=="function"?v(h):v:null,O=rp(g,Ae({},P,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return Wd(n.default,{Component:O,route:h})||O}}});function Wd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const s9=r9;function i9(t){const e=GT(t.routes,t),n=t.parseQuery||YT,r=t.stringifyQuery||$d,s=t.history,i=xs(),o=xs(),c=xs(),l=Kg(Dn);let h=Dn;Mr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ja.bind(null,D=>""+D),p=Ja.bind(null,_T),g=Ja.bind(null,hi);function v(D,Y){let K,J;return Mm(D)?(K=e.getRecordMatcher(D),J=Y):J=D,e.addRoute(J,K)}function P(D){const Y=e.getRecordMatcher(D);Y&&e.removeRoute(Y)}function x(){return e.getRoutes().map(D=>D.record)}function O(D){return!!e.getRecordMatcher(D)}function $(D,Y){if(Y=Ae({},Y||l.value),typeof D=="string"){const w=Xa(n,D,Y.path),R=e.resolve({path:w.path},Y),N=s.createHref(w.fullPath);return Ae(w,R,{params:g(R.params),hash:hi(w.hash),redirectedFrom:void 0,href:N})}let K;if(D.path!=null)K=Ae({},D,{path:Xa(n,D.path,Y.path).path});else{const w=Ae({},D.params);for(const R in w)w[R]==null&&delete w[R];K=Ae({},D,{params:p(w)}),Y.params=p(Y.params)}const J=e.resolve(K,Y),ve=D.hash||"";J.params=d(g(J.params));const Re=wT(r,Ae({},D,{hash:pT(ve),path:J.path})),_=s.createHref(Re);return Ae({fullPath:Re,hash:ve,query:r===$d?JT(D.query):D.query||{}},J,{redirectedFrom:void 0,href:_})}function B(D){return typeof D=="string"?Xa(n,D,l.value.path):Ae({},D)}function H(D,Y){if(h!==D)return as(8,{from:Y,to:D})}function q(D){return I(D)}function de(D){return q(Ae(B(D),{replace:!0}))}function fe(D){const Y=D.matched[D.matched.length-1];if(Y&&Y.redirect){const{redirect:K}=Y;let J=typeof K=="function"?K(D):K;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=B(J):{path:J},J.params={}),Ae({query:D.query,hash:D.hash,params:J.path!=null?{}:D.params},J)}}function I(D,Y){const K=h=$(D),J=l.value,ve=D.state,Re=D.force,_=D.replace===!0,w=fe(K);if(w)return I(Ae(B(w),{state:typeof w=="object"?Ae({},ve,w.state):ve,force:Re,replace:_}),Y||K);const R=K;R.redirectedFrom=Y;let N;return!Re&&ET(r,J,K)&&(N=as(16,{to:R,from:J}),kt(J,J,!0,!1)),(N?Promise.resolve(N):b(R,J)).catch(V=>ln(V)?ln(V,2)?V:Lt(V):pe(V,R,J)).then(V=>{if(V){if(ln(V,2))return I(Ae({replace:_},B(V.to),{state:typeof V.to=="object"?Ae({},ve,V.to.state):ve,force:Re}),Y||R)}else V=A(R,J,!0,_,ve);return S(R,J,V),V})}function y(D,Y){const K=H(D,Y);return K?Promise.reject(K):Promise.resolve()}function T(D){const Y=An.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(D):D()}function b(D,Y){let K;const[J,ve,Re]=o9(D,Y);K=Za(J.reverse(),"beforeRouteLeave",D,Y);for(const w of J)w.leaveGuards.forEach(R=>{K.push(Ln(R,D,Y))});const _=y.bind(null,D,Y);return K.push(_),wt(K).then(()=>{K=[];for(const w of i.list())K.push(Ln(w,D,Y));return K.push(_),wt(K)}).then(()=>{K=Za(ve,"beforeRouteUpdate",D,Y);for(const w of ve)w.updateGuards.forEach(R=>{K.push(Ln(R,D,Y))});return K.push(_),wt(K)}).then(()=>{K=[];for(const w of Re)if(w.beforeEnter)if($t(w.beforeEnter))for(const R of w.beforeEnter)K.push(Ln(R,D,Y));else K.push(Ln(w.beforeEnter,D,Y));return K.push(_),wt(K)}).then(()=>(D.matched.forEach(w=>w.enterCallbacks={}),K=Za(Re,"beforeRouteEnter",D,Y,T),K.push(_),wt(K))).then(()=>{K=[];for(const w of o.list())K.push(Ln(w,D,Y));return K.push(_),wt(K)}).catch(w=>ln(w,8)?w:Promise.reject(w))}function S(D,Y,K){c.list().forEach(J=>T(()=>J(D,Y,K)))}function A(D,Y,K,J,ve){const Re=H(D,Y);if(Re)return Re;const _=Y===Dn,w=Mr?history.state:{};K&&(J||_?s.replace(D.fullPath,Ae({scroll:_&&w&&w.scroll},ve)):s.push(D.fullPath,ve)),l.value=D,kt(D,Y,K,_),Lt()}let E;function mt(){E||(E=s.listen((D,Y,K)=>{if(!Ht.listening)return;const J=$(D),ve=fe(J);if(ve){I(Ae(ve,{replace:!0}),J).catch(Ks);return}h=J;const Re=l.value;Mr&&PT(Dd(Re.fullPath,K.delta),fa()),b(J,Re).catch(_=>ln(_,12)?_:ln(_,2)?(I(_.to,J).then(w=>{ln(w,20)&&!K.delta&&K.type===di.pop&&s.go(-1,!1)}).catch(Ks),Promise.reject()):(K.delta&&s.go(-K.delta,!1),pe(_,J,Re))).then(_=>{_=_||A(J,Re,!1),_&&(K.delta&&!ln(_,8)?s.go(-K.delta,!1):K.type===di.pop&&ln(_,20)&&s.go(-1,!1)),S(J,Re,_)}).catch(Ks)}))}let Pt=xs(),Be=xs(),_e;function pe(D,Y,K){Lt(D);const J=Be.list();return J.length?J.forEach(ve=>ve(D,Y,K)):console.error(D),Promise.reject(D)}function It(){return _e&&l.value!==Dn?Promise.resolve():new Promise((D,Y)=>{Pt.add([D,Y])})}function Lt(D){return _e||(_e=!D,mt(),Pt.list().forEach(([Y,K])=>D?K(D):Y()),Pt.reset()),D}function kt(D,Y,K,J){const{scrollBehavior:ve}=t;if(!Mr||!ve)return Promise.resolve();const Re=!K&&kT(Dd(D.fullPath,0))||(J||!K)&&history.state&&history.state.scroll||null;return bf().then(()=>ve(D,Y,Re)).then(_=>_&&RT(_)).catch(_=>pe(_,D,Y))}const Oe=D=>s.go(D);let Ne;const An=new Set,Ht={currentRoute:l,listening:!0,addRoute:v,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:O,getRoutes:x,resolve:$,options:t,push:q,replace:de,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Be.add,isReady:It,install(D){const Y=this;D.component("RouterLink",e9),D.component("RouterView",s9),D.config.globalProperties.$router=Y,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>$r(l)}),Mr&&!Ne&&l.value===Dn&&(Ne=!0,q(s.location).catch(ve=>{}));const K={};for(const ve in Dn)Object.defineProperty(K,ve,{get:()=>l.value[ve],enumerable:!0});D.provide(Yl,Y),D.provide(jm,yf(K)),D.provide(Lc,l);const J=D.unmount;An.add(D),D.unmount=function(){An.delete(D),An.size<1&&(h=Dn,E&&E(),E=null,l.value=Dn,Ne=!1,_e=!1),J()}}};function wt(D){return D.reduce((Y,K)=>Y.then(()=>T(K)),Promise.resolve())}return Ht}function o9(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(h=>os(h,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(h=>os(h,l))||s.push(l))}return[n,r,s]}const a9={data(){return{iframeSrc:"/Lost-in-the-Tiles/ChessChatGPT/public/index.html",isLoading:!0}},methods:{hideLoadingScreen(){this.isLoading=!1}}},c9={key:0,class:"loading-screen"},l9=["src"];function u9(t,e,n,r,s,i){return $e(),Ke("div",null,[s.isLoading?($e(),Ke("div",c9,e[1]||(e[1]=[Qt('<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-24 h-24"><title>new</title><g id="Layer 1"><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z"></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z"></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z"></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z"></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z"></path></g></svg>',1)]))):Ds("",!0),mo(ie("iframe",{src:s.iframeSrc,class:"w-full h-screen",onLoad:e[0]||(e[0]=(...o)=>i.hideLoadingScreen&&i.hideLoadingScreen(...o))},null,40,l9),[[wo,!s.isLoading]])])}const h9=sn(a9,[["render",u9]]),d9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.5%206.5C9.5%205.11929%2010.6193%204%2012%204C13.3807%204%2014.5%205.11929%2014.5%206.5C14.5%207.88071%2013.3807%209%2012%209C10.6193%209%209.5%207.88071%209.5%206.5ZM12%202C9.51472%202%207.5%204.01472%207.5%206.5C7.5%207.91363%208.15183%209.17502%209.17133%2010H8C7.44772%2010%207%2010.4477%207%2011C7%2011.5523%207.44772%2012%208%2012H9.12533C9.15208%2012.3659%209.16098%2012.833%209.11237%2013.3535C8.99568%2014.6027%208.55656%2016.0909%207.31094%2017.2753C6.86615%2017.6982%206.19221%2018.1531%205.58717%2018.5199C5.29266%2018.6984%205.02896%2018.8475%204.83934%2018.9517C4.74472%2019.0037%204.66905%2019.0442%204.61781%2019.0713L4.56008%2019.1017L4.54633%2019.1088L4.54347%2019.1103L4.54336%2019.1103L4.54322%2019.1104C4.3106%2019.2299%204.13401%2019.4357%204.05132%2019.6838L3.27924%2022H3C2.44772%2022%202%2022.4477%202%2023C2%2023.5523%202.44772%2024%203%2024H4H20H21C21.5523%2024%2022%2023.5523%2022%2023C22%2022.4477%2021.5523%2022%2021%2022H20.7659L20.1559%2019.7395C20.0787%2019.4533%2019.8784%2019.2161%2019.6092%2019.0919L19.609%2019.0918L19.6072%2019.091L19.5951%2019.0853C19.5836%2019.0799%2019.5655%2019.0714%2019.5415%2019.0598C19.4933%2019.0366%2019.4214%2019.0014%2019.3304%2018.9553C19.1482%2018.8629%2018.8918%2018.7279%2018.5996%2018.5595C18.0041%2018.2164%2017.3055%2017.7605%2016.7767%2017.2682C15.5139%2016.0923%2015.054%2014.6022%2014.92%2013.349C14.8647%2012.8316%2014.8667%2012.3662%2014.8878%2012H16C16.5523%2012%2017%2011.5523%2017%2011C17%2010.4477%2016.5523%2010%2016%2010H14.8287C15.8482%209.17502%2016.5%207.91363%2016.5%206.5C16.5%204.01472%2014.4853%202%2012%202ZM11.1037%2013.5395C11.158%2012.9576%2011.1549%2012.4315%2011.1296%2012H12.8852C12.8649%2012.4363%2012.8682%2012.9705%2012.9313%2013.5616C13.0971%2015.112%2013.6847%2017.1218%2015.4138%2018.7319C15.512%2018.8233%2015.6134%2018.9128%2015.717%2019L8.38107%2019C8.48825%2018.9094%208.59149%2018.8175%208.68906%2018.7247C10.3982%2017.0996%2010.9591%2015.0879%2011.1037%2013.5395ZM5.72076%2021L18.4246%2021L18.6944%2022H5.38743L5.72076%2021Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",f9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.2666%209.92826L14.8997%2010.1618C13.5228%2011.0379%2011.6981%2010.6528%2010.7929%209.29487L10%208.10556L9.20712%209.29487C8.30186%2010.6528%206.47719%2011.0379%205.10034%2010.1618L4.73342%209.92826L5.54178%2013H14.4582L15.2666%209.92826ZM3.65358%206.87047C2.88614%206.38209%201.91813%207.08891%202.14963%207.96862L3.80381%2014.2545C3.91942%2014.6938%204.31662%2015%204.77089%2015H15.2291C15.6834%2015%2016.0806%2014.6938%2016.1962%2014.2545L17.8504%207.96862C18.0819%207.08891%2017.1139%206.38209%2016.3464%206.87047L13.8259%208.47443C13.367%208.76649%2012.7587%208.6381%2012.457%208.18547L10.832%205.74808C10.4362%205.15435%209.56377%205.15435%209.16795%205.74808L7.54302%208.18547C7.24127%208.6381%206.63304%208.76649%206.1741%208.47443L3.65358%206.87047Z'%20fill='%23ffffff'/%3e%3cpath%20d='M11%203.5C11%204.05228%2010.5523%204.5%2010%204.5C9.44772%204.5%209%204.05228%209%203.5C9%202.94772%209.44772%202.5%2010%202.5C10.5523%202.5%2011%202.94772%2011%203.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M19%205.5C19%206.05228%2018.5523%206.5%2018%206.5C17.4477%206.5%2017%206.05228%2017%205.5C17%204.94772%2017.4477%204.5%2018%204.5C18.5523%204.5%2019%204.94772%2019%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M3%205.5C3%206.05228%202.55228%206.5%202%206.5C1.44772%206.5%201%206.05228%201%205.5C1%204.94772%201.44772%204.5%202%204.5C2.55228%204.5%203%204.94772%203%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.5%2016.25C4.5%2015.6977%204.94772%2015.25%205.5%2015.25H14.7513C15.3036%2015.25%2015.7513%2015.6977%2015.7513%2016.25C15.7513%2016.8023%2015.3036%2017.25%2014.7513%2017.25H5.5C4.94772%2017.25%204.5%2016.8023%204.5%2016.25Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",p9={data(){return{chessShardsValue:null,battleShardsValue:null}},computed:{characters(){return this.$store.getters.playerProfile}},methods:{chessShards(){this.chessShardsValue=this.$store.getters.playerProfile.chessShards,this.battleShardsValue=this.$store.getters.playerProfile.battleShards}},mounted(){this.chessShards()}},m9={id:"profile",class:"absolute z-50 w-full items-center h-16 justify-between"},g9={class:"bg-gradient-to-r from-[#1d1f20] text-sm to-[#141516] tracking-wider pl-32 w-full h-full flex items-center space-x-4 px-4 drop-shadow-lg"},_9={class:"hidden w-52 h-10 flex space-x-10 font-serif text-xl text-white items-center"},v9={class:"flex justify-center items-center w-auto h-full space-x-4"},y9={class:"flex justify-center items-center w-auto h-full space-x-4"};function w9(t,e,n,r,s,i){return $e(),Ke("div",m9,[ie("div",g9,[e[2]||(e[2]=Qt('<button id="menu-icon" data-v-1bd37cd7><svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-12 h-12" data-v-1bd37cd7><title data-v-1bd37cd7>new</title><g id="Layer 1" data-v-1bd37cd7><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z" data-v-1bd37cd7></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z" data-v-1bd37cd7></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z" data-v-1bd37cd7></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z" data-v-1bd37cd7></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z" data-v-1bd37cd7></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z" data-v-1bd37cd7></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z" data-v-1bd37cd7></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z" data-v-1bd37cd7></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z" data-v-1bd37cd7></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z" data-v-1bd37cd7></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z" data-v-1bd37cd7></path></g></svg></button><button id="inventory-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>INVENTORY</span></button><button class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>BRANCH</span></button><button id="equipment-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>EQUIPMENT</span></button>',4)),ie("div",_9,[ie("div",v9,[e[0]||(e[0]=ie("img",{class:"w-8 h-8 shard",src:d9},null,-1)),ie("span",null,or(s.chessShardsValue),1)]),ie("div",y9,[e[1]||(e[1]=ie("img",{class:"w-8 h-8 shard",src:f9},null,-1)),ie("span",null,or(s.battleShardsValue),1)])])])])}const E9=sn(p9,[["render",w9],["__scopeId","data-v-1bd37cd7"]]),Kd="/Lost-in-the-Tiles/assets/pacifica-art-DRpDkc3U.png",T9="/Lost-in-the-Tiles/assets/dialogue-with-options(2)-CQOmoAwZ.png",I9={data(){return{gameTexts:["Это ваша первая игра. Давайте познакомимся с правилами!","Задача: завоевать как можно больше территорий на карте.","Для этого вам нужно стратегически размещать свои войска.","Нажимайте на регионы, чтобы атаковать соседние области.","Побеждайте в битвах и увеличивайте свою империю!"],secondTrainingPart:["Это ваша первая игра. Давайте познакомимся с правилами!","Задача: завоевать как можно больше территорий на карте.","Для этого вам нужно стратегически размещать свои войска.","Нажимайте на регионы, чтобы атаковать соседние области.","Побеждайте в битвах и увеличивайте свою империю!"],currentTextIndex:0,trainingProgress:[{first:!1},{second:!1},{third:!1}]}},computed:{...Xo(["canChoose"])},methods:{...vp(["updateCanChoose"]),toContinueWelcome(t){const e=document.getElementById("gameText"),n=document.getElementById("pacifica-sprite"),r=document.getElementById("choose-province");t.keyCode==32&&(this.currentTextIndex++,document.getElementById("press-space")&&document.getElementById("press-space").remove(),this.currentTextIndex<this.gameTexts.length?(e.innerText=this.gameTexts[this.currentTextIndex],this.currentTextIndex===2?n.src="/src/assets/Characters/Pacifica/pacifica-surprised2.png":n.src="/src/assets/Characters/Pacifica/pacifica-art.png"):(welcomeBox.style.display="none",r.style.display="flex",welcomeBox.remove(),this.trainingProgress[0].first=!0,this.currentTextIndex=0,document.removeEventListener("keyup",this.toContinueWelcome),this.secondTrainingFunc()))},secondTrainingFunc(){const t=document.getElementById("second-training-part"),e=t.querySelector("p");t.classList.remove("hidden"),setTimeout(()=>{t.classList.add("visible"),document.addEventListener("keyup",n=>{n.keyCode===32&&(this.currentTextIndex++,this.currentTextIndex<this.secondTrainingPart.length?e.innerText=this.secondTrainingPart[this.currentTextIndex]:(this.updateCanChoose(!0),t.style.display="none",t.remove(),this.trainingProgress[1].second=!0))})},1e3)},skipTraining(){this.updateCanChoose(!0),welcomeBox.remove()}},mounted(){const t=document.getElementById("welcomeBox");this.$nextTick(()=>{setTimeout(()=>{this.trainingProgress[0].first?this.trainingProgress[1].second?this.skipTraining():this.secondTrainingFunc():t.classList.add("visible")},500)}),document.addEventListener("keyup",this.toContinueWelcome)}};function b9(t,e,n,r,s,i){return e[0]||(e[0]=Qt('<div id="choose-province" class="font-serif top-0 animate-pulse absolute z-50 justify-center hidden items-center w-full h-16 text-2xl mt-4 text-white" data-v-877b4fed><p data-v-877b4fed>Выбери регион</p></div><div class="welcome-box backdrop-blur-[2px] absolute z-50 w-full h-full flex justify-center items-center cursor-pointer" id="welcomeBox" data-v-877b4fed><span id="press-space" class="absolute top-0 mt-10 text-white animate-pulse font-mono" data-v-877b4fed>Press &quot;Spacebar&quot; to continue</span><div id="pacifica" class="absolute z-40 w-96" data-v-877b4fed><img id="pacifica-sprite" src="'+Kd+'" data-v-877b4fed></div><div class="w-full h-64 z-50 absolute flex justify-center items-center bg-gradient-to-t from-black via-black/70 to-transparent bottom-0" id="nextButton" data-v-877b4fed><div class="flex flex-col w-2/3 h-full items-center justify-center pt-16 space-y-4 pointer-events-none" data-v-877b4fed><p class="text-[#cbb48b] text-2xl tracking-wide" data-v-877b4fed>Pacifica</p><p class="text-white tracking-wide text-center w-full" id="gameText" data-v-877b4fed>Это ваша первая игра. Давайте познакомимся с правилами!</p></div></div></div><div id="second-training-part" class="second-training-part absolute z-50 hidden w-full h-full justify-center items-center" data-v-877b4fed><div id="pacifica" class="absolute z-40 w-[40rem] h-full right-0 flex justify-end" data-v-877b4fed><div class="rounded-3xl shadow-xl relative w-[30rem] h-32 mt-24 mr-48 z-50 flex" data-v-877b4fed><img class="w-full h-full absolute z-40" src="'+T9+'" data-v-877b4fed><p class="w-full h-full absolute px-2 z-50 text-white text-center drop-shadow-lg font-serif flex items-center justify-center" data-v-877b4fed> Это ваша первая игра. Давайте познакомимся с правилами!</p></div><img id="pacifica-sprite" class="w-[20rem] h-[30rem] absolute drop-shadow-xl" src="'+Kd+'" data-v-877b4fed></div></div>',3))}const S9=sn(I9,[["render",b9],["__scopeId","data-v-877b4fed"]]),A9={data(){return{showFirstChar:!0}},computed:{...Xo(["provinces","characters","playerProfile","insertedElement"])},methods:{...vp(["updateInsertedElement"]),showInventory(){const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{const n=document.getElementById("parent-container"),r=this.$refs.shownInventory,s=document.createDocumentFragment();Array.from(r.childNodes).forEach(d=>{s.appendChild(d.cloneNode(!0))});const i=s.getElementById("characters-list");i.innerHTML="";const o=this.$refs.unlockedChar,c=this.$refs.lockedChar;for(let d=0;d<this.playerProfile.characters.length;d++){const p=document.createDocumentFragment();Array.from(o.childNodes).forEach(v=>{p.appendChild(v.cloneNode(!0))});const g=this.characters.find(v=>v.name===this.playerProfile.characters[d].charName);p.querySelector(".char-icon").src=g.icon,p.querySelector(".char-lvl").textContent=`Lvl. ${this.playerProfile.characters[d].charLvl}`,i.appendChild(p)}for(let d=0;d<49;d++){const p=document.createDocumentFragment();Array.from(c.childNodes).forEach(g=>{p.appendChild(g.cloneNode(!0))}),i.appendChild(p)}const l=s.getElementById("selected-char");if(this.showFirstChar){const d='<svg class="w-6 h-6" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>';l.querySelector(".profile-name-slct").textContent=`${this.playerProfile.characters[0].charName} `,l.querySelector(".slct-char-rarity").innerHTML="";for(let p=0;p<this.playerProfile.characters[0].rarity;p++)l.querySelector(".slct-char-rarity").innerHTML+=d;l.querySelector(".slct-char-lvl").textContent=`Level ${this.playerProfile.characters[0].charLvl} / 50`,l.querySelector(".chibi-char-img-slct").src=this.characters.find(p=>p.name===this.playerProfile.characters[0].charName).chibiIcon}n.prepend(s),document.getElementById("hide-inventory").addEventListener("click",this.hideInventory),this.updateInsertedElement(n.firstElementChild)},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},hideInventory(){this.clickSound(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{this.insertedElement.remove(),this.updateInsertedElement(null),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},clickSound(){const t=document.getElementById("click-sound");t.volume=.3,t.play()}},mounted(){document.getElementById("inventory-button").addEventListener("click",this.showInventory)}},C9={id:"shownInventory",ref:"shownInventory",class:"hidden"},R9={id:"unlocked-char",ref:"unlockedChar",class:"hidden"},P9={id:"locked-char",ref:"lockedChar",class:"hidden"};function k9(t,e,n,r,s,i){return $e(),Ke(Et,null,[ie("div",C9,e[0]||(e[0]=[Qt('<div id="inventory" class="w-full h-full absolute z-[400] flex justify-start items-center bg-black/40 backdrop-blur-lg" data-v-b3190f07><div class="w-full h-full flex justify-start items-center px-24" data-v-b3190f07><button id="hide-inventory" class="fixed top-0 left-0 w-24 h-24 flex justify-center items-center z-50" data-v-b3190f07><svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></button><div class="w-1/2 h-[40rem] flex flex-col" data-v-b3190f07><div class="w-[32rem] h-[5rem] text-white flex justify-start items-center text-xl tracking-wider" data-v-b3190f07><span data-v-b3190f07>Characters</span></div><div id="characters-list" class="w-[32rem] justify-between h-[35rem] grid auto-rows-auto grid-cols-5 overflow-y-auto gap-4" data-v-b3190f07></div></div><div id="selected-char" class="w-1/2 h-[40rem] flex justify-end items-center px-10 space-y-4 flex-col" data-v-b3190f07><div class="w-full h-10 flex space-x-4 text-white font-mono justify-center" data-v-b3190f07><p class="w-auto h-full tracking-wider flex justify-center items-center text-xl profile-name-slct" data-v-b3190f07>Mira </p><div class="h-full slct-char-rarity flex justify-start items-center space-x-2" data-v-b3190f07><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></div></div><p class="w-auto h-10 tracking-widest text-white font-light flex items-center slct-char-lvl" data-v-b3190f07>Level 1 / 50</p><img class="w-64 chibi-char-img-slct" data-v-b3190f07><div class="w-64 rounded-full h-1 bg-white" data-v-b3190f07></div><div class="w-full char-skills-invent char-info-block h-24 shadow-lg bg-[#111111] rounded-xl flex text-white font-mono px-8 py-6 justify-center items-center space-x-4" data-v-b3190f07><svg fill="#ffffff" class="w-12 h-12 cursor-pointer" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 505.712 505.712" xml:space="preserve" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><g transform="translate(1 1)" data-v-b3190f07><g data-v-b3190f07><g data-v-b3190f07><path d="M79.842,271.618H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,279.702,89.723,271.618,79.842,271.618z M79.842,307.547H61.877v-17.965 h17.965V307.547z" data-v-b3190f07></path> <path d="M205.596,271.618h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,279.702,215.477,271.618,205.596,271.618z M205.596,307.547h-17.965 v-17.965h17.965V307.547z" data-v-b3190f07></path> <path d="M332.249,73.105c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,12.575-5.389 l12.575-12.575c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575L332.249,73.105z M319.674,110.832 l-12.575-12.575l12.575-12.575l12.575,12.575L319.674,110.832z" data-v-b3190f07></path> <path d="M307.098,212.333c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,11.677-5.389l12.576-12.575 c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575l-12.576-12.575c-3.593-3.593-8.084-5.389-12.575-5.389 s-8.982,1.797-12.575,5.389l-12.575,12.575c-7.186,7.186-7.186,17.965,0,25.151L307.098,212.333z M319.674,174.607l12.575,12.575 l-12.575,12.575l-12.575-12.575L319.674,174.607z" data-v-b3190f07></path> <path d="M332.249,264.432c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-2.695,12.575-5.389 l12.575-12.575c7.186-7.186,7.186-17.965,0-25.151L332.249,264.432z M319.674,301.26l-12.575-12.575l12.575-12.575l12.575,12.575 L319.674,301.26z" data-v-b3190f07></path> <path d="M205.596,397.372h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,405.456,215.477,397.372,205.596,397.372z M205.596,433.302h-17.965 v-17.965h17.965V433.302z" data-v-b3190f07></path> <path d="M79.842,397.372H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,405.456,89.723,397.372,79.842,397.372z M79.842,433.302H61.877v-17.965 h17.965V433.302z" data-v-b3190f07></path> <path d="M142.719,334.495h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965V352.46C160.684,342.579,152.6,334.495,142.719,334.495z M142.719,370.425h-17.965V352.46 h17.965V370.425z" data-v-b3190f07></path> <path d="M496.628,174.607l-158.99-158.99c-9.881-10.779-26.947-10.779-37.726,0L141.821,175.505 c-5.389,4.491-8.084,11.677-8.084,18.863s2.695,13.474,8.084,18.863l13.474,13.474H25.947C10.677,226.705-1,238.382-1,253.653 v215.579c0,15.27,11.677,26.947,26.947,26.947h215.579c15.27,0,26.947-11.677,26.947-26.947V339.563l32.337,31.759 c5.389,5.39,11.677,8.084,18.863,8.084c6.288,0,13.474-2.695,18.863-8.084l158.091-158.989 c5.389-4.491,8.084-11.677,8.084-18.863S502.018,179.997,496.628,174.607z M250.509,469.232c0,5.389-3.593,8.982-8.982,8.982 H25.947c-5.389,0-8.982-3.593-8.982-8.982V253.653c0-5.389,3.593-8.982,8.982-8.982H173.26h68.267 c5.389,0,8.982,3.593,8.982,8.982v68.267V469.232z M484.053,199.758L325.961,358.747c-3.593,3.593-8.982,3.593-12.575,0 l-44.912-44.912v-60.182v0c0-3.34-0.559-6.509-1.592-9.421c-0.738-2.08-1.718-4.029-2.908-5.816 c-0.476-0.715-0.986-1.404-1.528-2.065c-0.542-0.661-1.116-1.294-1.719-1.898s-1.237-1.177-1.898-1.719 c-4.628-3.793-10.621-6.028-17.302-6.028h-60.182l-26.947-26.947c-1.797-1.797-2.695-3.593-2.695-6.288s0.898-4.491,2.695-6.288 l158.99-158.091c3.593-3.593,8.982-3.593,12.575,0l158.091,158.091c1.797,1.796,2.695,3.593,2.695,6.288 S485.849,197.961,484.053,199.758z" data-v-b3190f07></path></g></g></g></g></svg><svg class="w-12 h-12 cursor-pointer" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M7 15.5c0 .049.006.096.007.145a7.3 7.3 0 1 1 8.638-8.638c-.049 0-.096-.007-.145-.007a8.557 8.557 0 0 0-.877.045 6.296 6.296 0 1 0-7.578 7.578A8.557 8.557 0 0 0 7 15.5zm.983-11.27l-.119-.992A5.3 5.3 0 0 0 3.2 8.558c.002.153.01.303.024.45l.995-.093a4.508 4.508 0 0 1-.019-.367A4.3 4.3 0 0 1 7.983 4.23zM22.8 15.5a7.3 7.3 0 1 1-7.3-7.3 7.308 7.308 0 0 1 7.3 7.3zm-1 0a6.3 6.3 0 1 0-6.3 6.3 6.307 6.307 0 0 0 6.3-6.3zm-10.58.415a4.508 4.508 0 0 1-.02-.367 4.3 4.3 0 0 1 3.783-4.318l-.119-.992a5.3 5.3 0 0 0-4.664 5.32c.002.153.01.303.024.45zm8.028-4.163l-.707.707a4.3 4.3 0 1 1-6.082 6.082l-.707.707a5.3 5.3 0 0 0 7.496-7.496z" data-v-b3190f07></path><path fill="none" stroke="none" d="M0 0h24v24H0z" data-v-b3190f07></path></g></svg></div></div></div></div>',1)]),512),ie("div",R9,e[1]||(e[1]=[Qt('<div class="unlocked-char w-24 h-28 rounded-md relative flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><div class="absolute top-0 w-24 h-1 rounded-t-md bg-cyan-200" data-v-b3190f07></div><img class="w-full rounded-md char-icon" data-v-b3190f07><div class="absolute bottom-0 w-24 h-6 rounded-b-md bg-white flex justify-center items-center" data-v-b3190f07><span class="text-[#121212] text-sm font-mono char-lvl" data-v-b3190f07>Lv. 1</span></div></div>',1)]),512),ie("div",P9,e[2]||(e[2]=[Qt('<div class="locked-char w-24 h-28 rounded-md bg-[#121212] flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><svg class="w-16" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="#8f8f8f" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M16,2C9.9,2,5,6.9,5,13v15.1c0,0.4,0.2,0.8,0.6,0.9c0.4,0.2,0.8,0.1,1.1-0.2l0.7-0.6c0.4-0.3,0.9-0.3,1.3,0 c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0 l0.7,0.6c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.3,0,0.4-0.1c0.4-0.2,0.6-0.5,0.6-0.9V13C27,6.9,22.1,2,16,2z M18,13c0-0.6,0.4-1,1-1 s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M12,13c0-0.6,0.4-1,1-1s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M21,20H11 c-0.6,0-1-0.4-1-1s0.4-1,1-1h10c0.6,0,1,0.4,1,1S21.6,20,21,20z" data-v-b3190f07></path></g></svg></div>',1)]),512)],64)}const x9=sn(A9,[["render",k9],["__scopeId","data-v-b3190f07"]]),V9={},D9={class:"bg-black w-full h-full z-50 fixed initial hidden"};function O9(t,e){return $e(),Ke("div",D9)}const N9=sn(V9,[["render",O9]]),L9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M74%20208H64a16%2016%200%200%200-16%2016v16a16%2016%200%200%200%2016%2016h15.94A535.78%20535.78%200%200%201%2064%20384h128a535.78%20535.78%200%200%201-15.94-128H192a16%2016%200%200%200%2016-16v-16a16%2016%200%200%200-16-16h-10l33.89-90.38a16%2016%200%200%200-15-21.62H144V64h24a8%208%200%200%200%208-8V40a8%208%200%200%200-8-8h-24V8a8%208%200%200%200-8-8h-16a8%208%200%200%200-8%208v24H88a8%208%200%200%200-8%208v16a8%208%200%200%200%208%208h24v32H55.09a16%2016%200%200%200-15%2021.62zm173.16%20251.58L224%20448v-16a16%2016%200%200%200-16-16H48a16%2016%200%200%200-16%2016v16L8.85%20459.58A16%2016%200%200%200%200%20473.89V496a16%2016%200%200%200%2016%2016h224a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31zm92.77-157.78l-3.29%2082.2h126.72l-3.29-82.21%2024.6-20.79A32%2032%200%200%200%20496%20256.54V198a6%206%200%200%200-6-6h-26.38a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H373.1a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H310a6%206%200%200%200-6%206v58.6a32%2032%200%200%200%2011.36%2024.4zM384%20304a16%2016%200%200%201%2032%200v32h-32zm119.16%20155.58L480%20448v-16a16%2016%200%200%200-16-16H336a16%2016%200%200%200-16%2016v16l-23.15%2011.58a16%2016%200%200%200-8.85%2014.31V496a16%2016%200%200%200%2016%2016h192a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31z'/%3e%3c/g%3e%3c/svg%3e",M9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M216.923,246.538c3.457-6.556,9.963-22.777-1.666-39.137C200.508,186.65,179.942,125,193.61,83H207V0h-16v17h-16V0h-18v17%20h-16V0h-17v17h-16V0H91v83h14.057c13.668,42-6.98,103.65-21.73,124.401c-11.629,16.359-5.373,32.706-1.916,39.262%20C77.347,247.044,74,250.337,74,254.5v18c0,4.418,3.915,8.5,8.333,8.5H83v17h132v-17h1.333c4.418,0,7.667-4.082,7.667-8.5v-18%20C224,250.338,220.986,246.92,216.923,246.538z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",F9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M210.952,116c14.912,0,27.037-12.088,27.037-27s-10.945-25.013-26.964-30.666c-11.333-4-18.018-10.823-23.009-19.412%20C183.025,30.333,172.025,17,157.525,17c-5.832,0-19.798,0-19.798,0V0c-107,40.03-72.369,184-72.369,184h21.369v14h-6.369%20c-4.418,0-8.631,3.582-8.631,8v1c0,3.289,2.302,6.111,5.14,7.341c-8.77,15.05-1.419,29.775,0.761,33.659h-5.271%20c-4.418,0-8.631,3.582-8.631,8v18c0,4.418,4,8,8,8v16h132v-16.069c4-0.493,7-3.853,7-7.931v-18c0-4.418-2.951-8-7.369-8h-4.27%20c2.181-3.884,8.902-18.609,0.13-33.659c2.838-1.23,4.508-4.052,4.508-7.341v-1c0-4.418-2.951-8-7.369-8h-7.631v-14h24.132%20c-16.501-54-66.334-83-66.334-83h40.182C191.146,109.889,200.351,116,210.952,116z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",U9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.08%20297.08'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M206.873,255.08h-3.41c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.137-39.546-24.448-64.4h3.57%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-4.333v-4.285c13-8.971,20.511-23.502,20.511-39.914%20c0-10.332-7.011-26.11-15.819-41.721l-18.553,18.595c-3.111,3.111-8.182,3.111-11.294,0.001l-0.921-0.933%20c-3.111-3.11-3.106-8.202,0.005-11.313l21.676-21.674c-4.444-7.069-8.869-13.678-12.703-19.224%20c2.881-2.93,4.663-6.944,4.663-11.379C165.106,7.268,157.841,0,148.874,0c-8.967,0-16.234,7.268-16.234,16.233%20c0,4.434,1.781,8.448,4.662,11.379c-14.585,21.101-37.94,57.587-37.94,76.269c0,16.853,8.178,31.724,21.178,40.625v3.574h-4.667%20c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3.571c0.689,24.855-15.547,53.495-24.448,64.4%20c-9.031,11.064-2.926,22.263-0.712,25.6h-3.411c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118v-17.069%20c4-0.493,7-3.853,7-7.931v-9C214.54,258.662,211.291,255.08,206.873,255.08z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",B9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.77%20297.77'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M207.218,255.77h-3.369c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.129-39.546-24.438-64.4h3.519%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-4.626%20c-2.064-21.741,1.078-43.054,5.959-54.666c1.86-4.425,4.118-7.79,6.296-10.334h1.371c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.418-3.249-8-7.667-8h-9.8c-1.803-10.896-8.998-19.966-18.755-24.383c1.783-2.607,2.829-5.757,2.829-9.154%20C165.492,7.267,158.227,0,149.26,0s-16.234,7.267-16.234,16.232c0,3.385,1.037,6.525,2.809,9.127%20c-9.788,4.406-17.01,13.49-18.816,24.41h-10.8c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h2.371%20c2.178,2.544,4.436,5.909,6.296,10.334c4.881,11.612,8.023,32.925,5.959,54.666h-4.626c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h3.602c0.692,24.854-15.536,53.495-24.438,64.4%20c-9.031,11.063-2.926,22.263-0.712,25.6h-3.452c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118V280.7%20c4-0.493,7-3.853,7-7.931v-9C214.885,259.352,211.636,255.77,207.218,255.77z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",j9="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M197.333,256h-1.641c1.878-3.337,7.061-14.536-0.605-25.6c-7.554-10.905-21.491-39.547-20.904-64.401%20c4.409-0.01,7.816-3.587,7.816-7.999v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-3.55%20c-1.006-16.142,1.307-29.861,4.798-40.724c1.121-3.487,2.432-6.186,3.752-8.276h2c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.343-3.463-7.87-7.777-7.988C179.087,52.771,169,42.203,156,39.363V27h12V12h-12V0h-15v12h-12v15h12v12.595%20c-12,3.15-21.803,13.512-23.888,26.405h-0.779c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3%20c1.32,2.091,2.631,4.789,3.752,8.276c3.491,10.862,5.804,24.582,4.798,40.724h-4.55c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h1.053c0.588,24.855-13.183,53.495-20.737,64.4%20c-7.664,11.063-2.482,22.263-0.604,25.6h-1.711c-4.418,0-8.333,3.582-8.333,8v9c0,3.727,3,6.849,6,7.737V298h100v-17.263%20c4-0.889,6-4.011,6-7.737v-9C205,259.582,201.751,256,197.333,256z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",$9={data(){return{isListShown:!1,filteredCharacters:[],selectedTileIndex:null,tilesWithCharacters:[],typeToTileMap:{B:2,R:0,N:1,Q:3,K:4,R1:7,B1:5,N1:6}}},computed:{...Xo(["provinces","characters","playerProfile","insertedElement"]),characters(){const t=this.$store.state.playerProfile.characters.map(e=>e.charName);return this.$store.state.characters.filter(e=>t.includes(e.name))}},methods:{toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},showList(){this.clickSound(),this.isListShown=!this.isListShown},filterCharactersByTypes(t){this.filteredCharacters=this.characters.filter(e=>t.includes(e.type))},createTiles(){let t="url('/src/assets/whiteabove3.png')",e="none",n="none",r="100% 100%",s="100% 100%",i="url('/src/assets/blackabove.png') center center / cover no-repeat, #101010";const o=document.getElementById("tiles");o.innerHTML="";for(let c=0;c<1;c++)for(let l=0;l<8;l++){const h=document.createElement("div");h.classList.add("tile-inv"),(c+l)%2===1&&h.classList.add("black"),["front-inv","back-inv","left-inv","right-inv","top-inv","bottom-inv"].forEach(P=>{const x=document.createElement("div");x.classList.add("face-inv",P),(c+l)%2===1?P==="bottom-inv"?(x.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${i}`,x.style.backgroundSize=s,x.style.animation=n):(x.style.background=`${i}`,x.style.backgroundSize=s,x.style.animation=n):P==="top-inv"||P==="front-inv"?(x.style.background=`${t}`,x.style.backgroundSize=r,x.style.animation=e):P==="bottom-inv"?(x.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${t}`,x.style.backgroundSize=r,x.style.animation=e):(x.style.background=`${t}`,x.style.backgroundSize=r),h.appendChild(x)}),h.style.transform="scaleZ(1)",h.classList.contains("black")?(h.querySelector(".front-inv").style.background=`linear-gradient(180deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) 100%), ${i}`,h.querySelector(".front-inv").style.backgroundSize=s):(h.querySelector(".front-inv").style.background=`${t}`,h.querySelector(".front-inv").style.backgroundSize=r);const p=Math.random()*2,g=2+Math.random(),v=-5-Math.random()*5;h.style.animation=`floatTile ${g}s ease-in-out infinite`,h.style.animationDelay=`${p}s`,h.style.setProperty("--float-height",`${v}px`),o.appendChild(h)}},hideEquipment(){this.clickSound(),this.isListShown&&this.showList(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("flex"),document.getElementById("equipment-container").classList.add("hidden"),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},showEquipment(){this.clickSound();const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("hidden"),document.getElementById("equipment-container").classList.add("flex")},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},selectCharacter(t){const e=this.typeToTileMap[t.type];if(e===void 0){alert("No tile assigned for this character type");return}const n=document.getElementById("tiles").children,r=n[e],s=r.querySelector(".piece-inv");s&&r.removeChild(s);const i=document.createElement("div");i.classList.add("piece-inv"),i.dataset.type=t.type,i.setAttribute("draggable",!0);const o=document.createElement("img");o.src=t.chibiIcon,o.classList.add("character-image"),i.appendChild(o),r.appendChild(i),i.addEventListener("dragstart",c=>this.handleDragStart(c,t));for(let c=0;c<n.length;c++){const l=7-c;n[l].addEventListener("dragover",h=>h.preventDefault()),n[l].addEventListener("drop",h=>this.handleDrop(h,c))}this.showList()},handleDragStart(t,e){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="none",document.body.classList.add("dragging");const n=t.target,r=document.getElementById("tiles").children;let s;for(let c=0;c<r.length;c++)if(r[c].contains(n)){s=c;break}n.classList.add("grabbable"),t.dataTransfer.setData("tileIndex",s),t.dataTransfer.setData("characterName",e.name);const i=7-s;r[i].querySelector(".front-inv").classList.add("hover-equipment"),t.target.addEventListener("dragend",()=>this.handleDragEnd(i))},handleDragEnd(t){document.getElementById("tiles").children[t].querySelector(".front-inv").classList.remove("hover-equipment")},handleDrop(t,e){t.preventDefault(),t.dataTransfer.dropEffect="move",document.body.classList.remove("dragging");const n=document.getElementById("tiles").children,r=7-e;t.dataTransfer.getData("tileIndex");const s=t.dataTransfer.getData("characterName"),i=n[e],o=n[r],c=this.$store.state.characters.find(l=>l.name===s);if(c){const l=i.querySelector(".piece-inv");l&&(i.removeChild(l),o.querySelector(".front-inv").classList.remove("hover-equipment"),r===this.typeToTileMap[c.type.replace("1","")]?this.updateCharacterType(c.name,c.type.replace("1","")):c.type.endsWith("1")||this.updateCharacterType(c.name,c.type+"1"),o.appendChild(l),document.body.style.cursor="url(/src/assets/GUI/pointer_scifi_b.svg), auto")}},updateCharacterType(t,e){this.$store.commit("UPDATE_CHARACTER_TYPE",{name:t,newType:e})},clickSound(){const t=document.getElementById("click-sound");t.volume=.2,t.play()}},mounted(){document.getElementById("equipment-button").addEventListener("click",this.showEquipment),this.createTiles()}},z9={id:"equipment-container",class:"w-full h-full bg-black/50 fixed backdrop-blur-sm z-[51000] justify-center items-center hidden"},H9={class:"fixed top-0 right-0 z-50 mt-6 mr-6"},G9={class:"absolute z-40 w-full h-full flex flex-col items-center space-y-10 backdrop-blur-sm bg-black/50"},q9={class:"w-2/3 h-24 mt-6 flex py-4 justify-center space-x-10"},W9={class:"w-2/3 h-full grid grid-cols-6 auto-rows-auto overflow-y-auto gap-6 text-white pb-10 px-10"},K9=["onClick"],Q9=["src"];function Y9(t,e,n,r,s,i){return $e(),Ke("div",z9,[e[9]||(e[9]=ie("div",{class:"tiles",id:"tiles"},null,-1)),ie("button",H9,[ie("img",{onClick:e[0]||(e[0]=(...o)=>i.showList&&i.showList(...o)),class:"w-12 h-12",src:L9})]),ie("button",{onClick:e[1]||(e[1]=(...o)=>i.hideEquipment&&i.hideEquipment(...o)),id:"hide-equipment",class:"fixed top-0 left-0 w-12 h-12 mt-6 ml-6 flex justify-center items-center z-50"},e[7]||(e[7]=[Qt('<svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>',1)])),mo(ie("div",G9,[ie("div",q9,[ie("img",{onClick:e[2]||(e[2]=o=>i.filterCharactersByTypes(["R","R1"])),class:"w-16 h-16",src:M9}),ie("img",{onClick:e[3]||(e[3]=o=>i.filterCharactersByTypes(["N","N1"])),class:"w-16 h-16",src:F9}),ie("img",{onClick:e[4]||(e[4]=o=>i.filterCharactersByTypes(["B","B1"])),class:"w-16 h-16",src:U9}),ie("img",{onClick:e[5]||(e[5]=o=>i.filterCharactersByTypes(["Q","Q1"])),class:"w-16 h-16",src:B9}),ie("img",{onClick:e[6]||(e[6]=o=>i.filterCharactersByTypes(["K","K1"])),class:"w-16 h-16",src:j9})]),ie("div",W9,[($e(!0),Ke(Et,null,Of(s.filteredCharacters,o=>($e(),Ke("div",{class:"w-28 h-[8.4rem] border flex justify-center items-center relative rounded-md",onClick:c=>i.selectCharacter(o),key:o.name},[ie("img",{class:"absolute drop-shadow-lg",src:o.chibiIcon},null,8,Q9),e[8]||(e[8]=ie("div",{class:"w-full h-full bg-indigo-700 rounded-md"},null,-1))],8,K9))),128))])],512),[[wo,s.isListShown]])])}const J9=sn($9,[["render",Y9]]),X9={};function Z9(t,e){return null}const eI=sn(X9,[["render",Z9]]),tI="/Lost-in-the-Tiles/assets/rain_tree2-B_F-BRPF.png",nI="/Lost-in-the-Tiles/assets/defaultAvatar2-BLsTfbxn.png",rI={components:{ProfileBars:E9,WelcomeMessage:S9,Inventory:x9,BlackScreen:N9,CharacterEquipment:J9,Dashboard:eI},data(){return{isSearchingGame:!1,isFindingMatch:!1}},computed:{...Xo(["canChoose","provinces","characters","playerProfile","insertedElement","tutorialSkiped"])},methods:{findGame(){this.isFindingMatch||(this.isFindingMatch=!0,this.isSearchingGame=!1,setTimeout(()=>{this.$router.push("/scene")},5e3))},chooseBattle(){this.isSearchingGame||(this.isSearchingGame=!0)}},mounted(){document.getElementById("profile").classList.remove("hidden");const t=document.getElementById("background-home-music");function e(){t.volume=.1,t.play()}function n(){document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("mousemove",e,{once:!0})}window.addEventListener("load",n)}},sI={id:"parent-container",class:"w-full h-screen bg-black/60 relative"},iI={class:"fixed z-50"},oI={class:"w-full h-36 fixed top-0 z-40"},aI={class:"fixed w-80 h-full flex flex-col space-y-4 justify-center items-center right-0 bg-gradient-to-l from-[#121212] to-[#1a1a1a]"},cI={class:"w-full h-24 pl-4 pr-4"},lI={class:"fixed w-60 h-12 z-50 bottom-0 right-0 mr-10 mb-10 text-white shadow-lg font-bold tracking-wider"};function uI(t,e,n,r,s,i){const o=Dr("BlackScreen"),c=Dr("Scene"),l=Dr("CharacterEquipment"),h=Dr("Inventory"),d=Dr("ProfileBars");return $e(),Ke(Et,null,[ie("div",sI,[ie("div",iI,[He(o)]),ie("div",{class:"w-full h-full z-40 relative",onClick:e[0]||(e[0]=p=>s.isSearchingGame=!1)},e[3]||(e[3]=[Qt('<div class="w-full h-full z-50 absolute bg-[#111111]"><div class="w-full h-full absolute flex justify-center items-center filter blur-sm"><svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-48 h-48 animate-pulse"><title>new</title><g id="Layer 1"><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z"></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z"></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z"></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z"></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z"></path></g></svg></div></div><img class="w-full h-full" src="'+tI+'">',2)])),ie("div",oI,[He(c,{class:"hidden"}),He(l),He(h),He(d),mo(ie("div",aI,[e[4]||(e[4]=Qt('<div class="w-full h-full flex flex-col space-y-6 justify-end px-4"><div class="w-72 h-auto bg-[#4c4c4c] flex flex-col text-white font-bold tracking-wider"><div class="w-full h-10 border-l-4 pl-4 text-start flex items-center"><span>RANKED</span></div><div class="w-72 h-auto flex flex-col space-y-1 pl-4 pt-2 pb-2 pr-4 overflow-y-auto font-light font-sans"><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="10min" name="10min"><label for="10min">10 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="15min/10" name="15min/10"><label for="15min/10">15/10</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="5min" name="5min"><label for="5min">5 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3min" name="3min"><label for="3min">3 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3/2" name="3/2"><label for="3/2">3/2</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1/1" name="1/1"><label for="1/1">1/1</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1min" name="1min"><label for="1min">1 min</label></div></div></div><div class="w-72 h-auto bg-[#4c4c4c] flex flex-col text-white font-bold tracking-wider"><div class="w-full h-10 border-l-4 pl-4 text-start flex items-center"><span>UNRANKED</span></div><div class="w-72 h-auto flex flex-col space-y-1 pl-4 pt-2 pb-2 pr-4 overflow-y-auto font-light font-sans"><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="10min" name="10min"><label for="10min">10 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="15min/10" name="15min/10"><label for="15min/10">15/10</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="5min" name="5min"><label for="5min">5 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3min" name="3min"><label for="3min">3 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3/2" name="3/2"><label for="3/2">3/2</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1/1" name="1/1"><label for="1/1">1/1</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1min" name="1min"><label for="1min">1 min</label></div></div></div></div>',1)),ie("div",cI,[ie("button",{onClick:e[1]||(e[1]=(...p)=>i.findGame&&i.findGame(...p)),class:"w-full h-14 hover:bg-gradient-to-r hover:from-[#745353] hover:to-[#b69494] bg-[#121212] text-white font-bold tracking-wider"},"FIND OPPONENT")])],512),[[wo,s.isSearchingGame]]),e[5]||(e[5]=Qt('<div class="w-80 h-[80%] fixed mt-24 ml-24 left-0"><div class="w-full h-72 bg-gradient-to-br from-[#282828] to-[#111111] space-y-4 flex flex-col relative"><div class="w-full h-8 bg-black/50 flex items-center px-2"><span class="text-white/80 uppercase text-xs">My profile</span></div><div class="w-full h-16 px-4"><div class="w-full h-full flex space-x-4 text-white items-center pl-4 bg-black/20"><div class="w-12 h-12 rounded-full border"><img class="rounded-full" src="'+nI+'"></div><span>THEFIRSTPLAYER</span></div></div><div class="w-full h-20 px-4 absolute bottom-0 pb-4"><div class="w-full h-full flex space-x-4 text-white/70 justify-between px-10 items-center text-sm bg-gradient-to-br from-[#3e3e3e] to-[#1e1e1e]"><div class="flex flex-col text-center"><span>WINS</span><span>217</span></div><div class="flex flex-col text-center"><span>MATCHES</span><span>529</span></div></div></div></div></div>',1)),mo(ie("div",lI,[ie("button",{class:"hover:bg-gradient-to-r hover:from-[#3e3d3d] hover:to-[#111111] w-60 h-12 bg-gradient-to-r from-[#565e5d] to-[#1a1c1c]",onClick:e[2]||(e[2]=(...p)=>i.chooseBattle&&i.chooseBattle(...p))},"PLAY")],512),[[wo,!s.isSearchingGame]])])]),e[6]||(e[6]=ie("audio",{id:"click-sound",src:"/src/assets/music/souds/Click_2.wav"},null,-1)),e[7]||(e[7]=ie("audio",{id:"background-home-music",src:"/src/assets/music/Sci-Fi1Loop.mp3",loop:"",autoplay:""},null,-1))],64)}const hI=sn(rI,[["render",uI]]),dI=[{name:"Prologue",scenes:[{background:"black",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["There was a time when life seemed endless, and happiness felt like it had finally embraced me.","But emerging from the void, I learned that merely living isn’t enough.","Must  I learn to live the right way, to make choices that matter?","Staying still, lingering too long, invites the void to find me again."],voices:["/src/assets/PlotResources/Prologue/voices/scene1/1.mp3","/src/assets/PlotResources/Prologue/voices/scene1/2.mp3","/src/assets/PlotResources/Prologue/voices/scene1/3.mp3","/src/assets/PlotResources/Prologue/voices/scene1/4.mp3"],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.1.png",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"/src/assets/PlotResources/Prologue/music/wind__artic__cold-6195.mp3",video:"",effectType:"snowstorm",characters:[{name:"...",image:"",lines:["....","I didn't save you, Victor, like you did.","I don’t want to return to the darkness you pulled me from.","But I feel it—nightmares creeping closer, the cold piercing through me.","Should I keep moving forward, or is it already too late?"],voices:["/src/assets/PlotResources/Prologue/music/a_woman_laughing_and.mp3","/src/assets/PlotResources/Prologue/voices/scene2/1.mp3","/src/assets/PlotResources/Prologue/voices/scene2/2.mp3","/src/assets/PlotResources/Prologue/voices/scene2/3.mp3","/src/assets/PlotResources/Prologue/voices/scene2/4.mp3"],position:"center"}],choices:[{text:"Accept Victor's death.",nextEpisodeIndex:0,nextSceneIndex:2,afterSceneIndex:3},{text:"Do not accept.",nextEpisodeIndex:0,nextSceneIndex:3,afterSceneIndex:4}]},{background:"black",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["Choosing to remain, she slowly sank into the snowdrifts, each breath growing heavier.","The darkness of the void crept in, swallowing her inch by inch.","She struggled, but the weight of the cold and shadows pressed her deeper.","Victor never came to her aid this time; his presence was a memory, fading away.","In the end, the nothingness claimed her, and the light she once found was gone. Restart the game, please.","Бу! Испугался?! Ну короче ты проиграл, молодец. Игра 12+ думаю. Щас бы проигрывать в игре 12+.","Ну короче не надо перезагружать и переустанавливать винду, просто кликай дальше."],voices:[],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.3.png",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"/src/assets/PlotResources/Prologue/music/wind__artic__cold-6195.mp3",video:"",effectType:"snowstorm",characters:[{name:"Dykke",image:"",lines:["It’s so cold… and your lifeless body lies here beside me.","I can’t let this place be my end, not while there’s still hope out there.","Even with the pain and the cold, I’ll find the strength to keep moving forward.","I will never leave you alone...."],voices:["/src/assets/PlotResources/Prologue/voices/scene3/1.mp3","/src/assets/PlotResources/Prologue/voices/scene3/2.mp3","/src/assets/PlotResources/Prologue/voices/scene3/3.mp3","/src/assets/PlotResources/Prologue/voices/scene3/4.mp3"],position:"center"}],transition:{text:"After climbing up the slope with the dead body on your back, you move forward and notice footsteps leading to an unknown location.",music:"",effect:"",duration:1e4}},{background:"/src/assets/PlotResources/Prologue/imgs/QKP7RFRCXK564MAW0T8SCFJ350.jpeg",music:"/src/assets/PlotResources/Prologue/music/caves-of-dawn-10376.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["You step inside a devastated castle located deep in the mountains away from human eyes.","Warmed by the walls, which were warm for some reason, you look around."],voices:[],position:"center"},{name:"Dykke",image:"",lines:["What is this place?","Looks like no-one's been here for ages.","Wait… these footprints. They're wet! Who or what made them?","That means I can find someone who can help m-","us","Victor, do you hear me? I'll go check it out."],voices:["/src/assets/PlotResources/Prologue/voices/scene4/1.mp3","/src/assets/PlotResources/Prologue/voices/scene4/2.mp3","/src/assets/PlotResources/Prologue/voices/scene4/3.mp3","/src/assets/PlotResources/Prologue/voices/scene4/4.mp3","/src/assets/PlotResources/Prologue/voices/scene4/5.mp3","/src/assets/PlotResources/Prologue/voices/scene4/6.mp3"],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.4.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["Wandering through countless corridors in search of salvation, you stumble upon a mirror standing in the very depths of this castle."],voices:[],position:"center"},{name:"Dykke",image:"",lines:["I can't see my reflection. That's strange."],voices:["/src/assets/PlotResources/Prologue/voices/scene5/1.mp3"],position:"center"},{name:"...",image:"",lines:["You move closer and hold out your hand as you suddenly hear someone's footsteps behind you."],voices:["/src/assets/PlotResources/Prologue/music/echoing_footsteps.mp3"],position:"center"},{name:"Dykke",image:"",lines:["Human!"],voices:["/src/assets/PlotResources/Prologue/voices/scene5/2.mp3"],position:"center"}],transition:{text:"Joyfully turning back, you slip and fall inside the mirror.",music:"",effect:"",duration:5e3}}]},{name:"Episode 1",scenes:[{background:"/src/assets/Characters/Backgrounds/Episode1/Scene1/MV5BNGIzYTFhMDAtOWRkZC00ZDVmLTk1M2EtMTMyZTRhNmUzYWVhXkEyXkFqcGdeQXVyMTI1NTkwNTUz._V1_.jpg",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/src/assets/Characters/images/Liria/liria-fullbody.png",lines:["Hello!","How are you?","I have more to say!"],voices:[],position:"left"},{name:"Character 2",image:"/src/assets/Characters/images/Morfel/morfel-fullbody.png",lines:["Hi!","I am fine."],voices:[],position:"right"}]},{background:"/src/assets/Characters/Backgrounds/Episode1/Scene1/wallpaper.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/src/assets/Characters/images/Liria/liria-fullbody.png",lines:["Let’s continue our conversation!","Do you like the view?"],voices:[],position:"left"},{name:"Character 2",image:"/src/assets/Characters/images/Morfel/morfel-fullbody.png",lines:["Yes, it’s beautiful!"],voices:[],position:"right"}]}]},{name:"Episode 2",scenes:[{background:"/assets/backgrounds/scene3.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/assets/characters/char1.png",lines:["This is Episode 2!"],voices:[],position:"right"},{name:"Character 2",image:"/assets/characters/char2.png",lines:["Let’s start!"],voices:[],position:"right"}]},{background:"/assets/backgrounds/scene4.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/assets/characters/char1.png",lines:["Let’s continue!","More conversation here."],voices:[],position:"right"},{name:"Character 2",image:"/assets/characters/char2.png",lines:["Absolutely."],voices:[],position:"right"}]}]}],fI={episodes:dI},pI={data(){return{currentEpisodeIndex:0,currentSceneIndex:0,currentCharacterIndex:0,currentLineIndex:0,bgActive1:!0,bgActive2:!1,backgroundStyle1:{},backgroundStyle2:{},showChoices:!1,afterSceneIndex:null,isTransitioning:!1,transitionData:{text:"",music:"",effect:"",duration:4e3},transitionTimeout:null}},computed:{currentEpisode(){return fI.episodes[this.currentEpisodeIndex]},currentScene(){return this.currentEpisode.scenes[this.currentSceneIndex]},currentCharacter(){return this.currentScene.characters[this.currentCharacterIndex]},currentLine(){return{text:this.currentCharacter.lines[this.currentLineIndex]}},currentVoice(){return this.currentCharacter.voices[this.currentLineIndex]||""}},watch:{"currentScene.background":function(t,e){this.transitionBackground(t)}},methods:{startTransition(){this.isTransitioning=!0;const t=this.currentScene.transition;this.transitionData={text:t.text||"",music:t.music||"",effect:t.effect||"",duration:t.duration||4e3},this.$refs.backgroundMusic.pause(),this.$refs.effectSound.pause(),this.transitionData.music&&(this.$refs.transitionMusic.src=this.transitionData.music,this.$refs.transitionMusic.load(),this.$refs.transitionMusic.play()),this.transitionData.effect&&(this.$refs.transitionEffect.src=this.transitionData.effect,this.$refs.transitionEffect.load(),this.$refs.transitionEffect.play());let e="";this.currentSceneIndex<this.currentEpisode.scenes.length-1?e=this.currentEpisode.scenes[this.currentSceneIndex+1].background:e="",this.transitionBackground(e),this.transitionTimeout=setTimeout(()=>{if(this.isTransitioning=!1,this.$refs.transitionMusic.pause(),this.$refs.transitionEffect.pause(),this.currentSceneIndex<this.currentEpisode.scenes.length-1)this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0;else{console.log("End of episode.");try{this.$router.push("/scene")}catch(n){console.error("Ошибка маршрутизации:",n)}return}this.playSceneEffects(),this.playSceneAudio(!0),this.handleEffectType()},this.transitionData.duration)},makeChoice(t,e,n){this.currentEpisodeIndex=t,this.currentSceneIndex=e,this.currentCharacterIndex=0,this.currentLineIndex=0,this.showChoices=!1,this.afterSceneIndex=n,this.transitionBackground(this.currentScene.background),this.playVoice(),this.playSceneAudio(!1),this.playSceneEffects(),this.handleEffectType()},handleEffectType(){const t=document.querySelector(".canvas");t&&t.remove(),this.currentScene.effectType==="snowstorm"&&this.createSnowStorm()},getBackgroundStyle(t){return t==="black"||t==="white"||t==="red"?{backgroundColor:t}:{backgroundImage:`url(${t})`}},transitionBackground(t){this.bgActive1?(this.bgActive1=!1,setTimeout(()=>{this.backgroundStyle2=this.getBackgroundStyle(t),this.bgActive2=!0},500)):(this.bgActive2=!1,setTimeout(()=>{this.backgroundStyle1=this.getBackgroundStyle(t),this.bgActive1=!0},500))},nextLine(){const t=this.currentCharacter;this.currentLineIndex<t.lines.length-1?(this.currentLineIndex++,this.playVoice()):this.currentCharacterIndex<this.currentScene.characters.length-1?(this.currentCharacterIndex++,this.currentLineIndex=0,this.playVoice()):this.currentScene.transition?this.startTransition():this.currentScene.choices&&this.currentScene.choices.length>0?this.showChoices=!0:this.afterSceneIndex!==null?(this.currentSceneIndex=this.afterSceneIndex,this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0,this.afterSceneIndex=null,this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!1),this.handleEffectType()):this.currentSceneIndex<this.currentEpisode.scenes.length-1?(this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0,this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!1),this.handleEffectType()):this.$router.push("/scene")},playSceneAudio(t){const e=this.$refs.backgroundMusic;if(this.currentScene.music){if(!t){const n=e.src.split("/").pop(),r=this.currentScene.music.split("/").pop();if(n===r)return}e.pause(),e.src="",e.src=this.currentScene.music,e.volume=.3,e.load(),setTimeout(()=>{e.play().catch(n=>{console.error("Ошибка при воспроизведении музыки:",n)})},100)}else e.pause()},playSceneEffects(){const t=this.$refs.effectSound;this.currentScene.effects?(t.pause(),t.src="",t.src=this.currentScene.effects,t.volume=.5,t.load(),t.play().catch(e=>{console.error("Ошибка при воспроизведении эффектов:",e)})):t.pause()},playVoice(){const t=this.$refs.voiceLine;this.currentVoice?(t.pause(),t.src="",t.src=this.currentVoice,t.load(),setTimeout(()=>{t.play().catch(e=>{console.error("Ошибка при воспроизведении голоса:",e)})},100)):t.pause()},createSnowStorm(){if(this.currentScene.effectType==="snowstorm"){const t=document.createElement("canvas");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",t.style.opacity="0",t.style.transition="opacity 1.5s ease-in-out",t.classList.add("canvas"),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1"});const e=t.getContext("2d");let n=window.innerWidth,r=window.innerHeight;t.width=n,t.height=r;const s=200,i=[];for(let c=0;c<s;c++)i.push({x:Math.random()*n,y:Math.random()*r,speed:Math.random()*5+3,length:Math.random()*15+5,wind:Math.random()*3-1.5,angle:45*(Math.PI/180)});const o=()=>{e.clearRect(0,0,n,r),i.forEach(c=>{c.y+=c.speed*Math.sin(c.angle),c.x+=c.speed*Math.cos(c.angle)+c.wind,c.y>r&&(c.y=0),c.x>n&&(c.x=0),c.x<0&&(c.x=n),e.beginPath(),e.moveTo(c.x,c.y),e.lineTo(c.x-c.length*Math.cos(c.angle),c.y-c.length*Math.sin(c.angle)),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath()}),requestAnimationFrame(o)};o(),window.addEventListener("resize",()=>{n=window.innerWidth,r=window.innerHeight,t.width=n,t.height=r})}}},mounted(){this.backgroundStyle1=this.getBackgroundStyle(this.currentScene.background),this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!0),this.createSnowStorm(),this.keydownListener=t=>{t.code==="Space"&&!this.showChoices&&this.nextLine()},window.addEventListener("keydown",this.keydownListener)},beforeDestroy(){window.removeEventListener("keydown",this.keydownListener)}},mI={class:"visual-novel w-full h-screen flex flex-col justify-center items-center relative bg-black"},gI={key:0,class:"fixed top-0 mt-10 w-64 h-24 text-white z-50 font-mono animate-pulse"},_I={key:2,class:"transition-overlay"},vI={class:"transition-text font-serif text-center text-xl"},yI=["src"],wI={class:"replies w-full h-36 font-serif bg-gradient-to-t flex-col space-y-2 from-black via-black/80 to-transparent text-xl absolute bottom-0 flex text-white justify-center items-center"},EI={class:"text-lg"},TI={key:1,class:"choices flex w-full h-full"},II=["onClick"],bI={ref:"backgroundMusic",loop:""},SI={ref:"effectSound"},AI={ref:"voiceLine"},CI={ref:"transitionMusic",loop:""},RI={ref:"transitionEffect"};function PI(t,e,n,r,s,i){return $e(),Ke("div",mI,[s.currentEpisodeIndex===0&&s.currentSceneIndex===0&&s.currentLineIndex===0?($e(),Ke("div",gI,'Press "Space" to continue')):Ds("",!0),s.isTransitioning?Ds("",!0):($e(),Ke("div",{key:1,id:"bg1",class:Br(["background",{active:s.bgActive1}]),style:Ys(s.backgroundStyle1)},null,6)),ie("div",{id:"bg2",class:Br(["background",{active:s.bgActive2}]),style:Ys(s.backgroundStyle2)},null,6),s.isTransitioning?($e(),Ke("div",_I,[ie("p",vI,or(s.transitionData.text),1)])):($e(),Ke(Et,{key:3},[i.currentCharacter.image?($e(),Ke("div",{key:0,class:Br(["character",i.currentCharacter.position])},[ie("img",{src:i.currentCharacter.image,alt:"Character Image"},null,8,yI)],2)):Ds("",!0),ie("div",wI,[ie("span",EI,or(i.currentCharacter.name),1),ie("p",null,or(i.currentLine.text),1)]),s.showChoices?($e(),Ke("div",TI,[($e(!0),Ke(Et,null,Of(i.currentScene.choices,(o,c)=>($e(),Ke("button",{key:c,onClick:l=>i.makeChoice(o.nextEpisodeIndex,o.nextSceneIndex,o.afterSceneIndex),class:"choice-button bg-gradient-to-b from-[#121212] to-transparent text-white w-1/2 hover:bg-[#121212]/70"},or(o.text),9,II))),128))])):Ds("",!0)],64)),ie("audio",bI,null,512),ie("audio",SI,null,512),ie("audio",AI,null,512),ie("audio",CI,null,512),ie("audio",RI,null,512)])}const kI=sn(pI,[["render",PI],["__scopeId","data-v-663fae29"]]),xI=i9({history:NT(),routes:[{path:"/",component:hI},{path:"/home",component:kI},{path:"/game",component:op},{path:"/scene",component:h9}]}),Jl=V2(op);Jl.use(rT);Jl.use(xI);Jl.mount("#app");
