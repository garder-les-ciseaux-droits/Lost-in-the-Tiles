(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Dc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ke={},Lr=[],Kt=()=>{},lm=()=>!1,Lo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Oc=t=>t.startsWith("onUpdate:"),et=Object.assign,Nc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},um=Object.prototype.hasOwnProperty,be=(t,e)=>um.call(t,e),ce=Array.isArray,Mr=t=>Mo(t)==="[object Map]",qd=t=>Mo(t)==="[object Set]",ue=t=>typeof t=="function",$e=t=>typeof t=="string",Wn=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",Wd=t=>(De(t)||ue(t))&&ue(t.then)&&ue(t.catch),Kd=Object.prototype.toString,Mo=t=>Kd.call(t),hm=t=>Mo(t).slice(8,-1),Qd=t=>Mo(t)==="[object Object]",Lc=t=>$e(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ls=Dc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},dm=/-(\w)/g,Nt=Fo(t=>t.replace(dm,(e,n)=>n?n.toUpperCase():"")),fm=/\B([A-Z])/g,vr=Fo(t=>t.replace(fm,"-$1").toLowerCase()),Uo=Fo(t=>t.charAt(0).toUpperCase()+t.slice(1)),ba=Fo(t=>t?`on${Uo(t)}`:""),zn=(t,e)=>!Object.is(t,e),Aa=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Yd=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},pm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Bu;const Jd=()=>Bu||(Bu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qs(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=$e(r)?vm(r):Qs(r);if(s)for(const i in s)e[i]=s[i]}return e}else if($e(t)||De(t))return t}const gm=/;(?![^(]*\))/g,mm=/:([^]+)/,_m=/\/\*[^]*?\*\//g;function vm(t){const e={};return t.replace(_m,"").split(gm).forEach(n=>{if(n){const r=n.split(mm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Fr(t){let e="";if($e(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=Fr(t[n]);r&&(e+=r+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ym="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wm=Dc(ym);function Xd(t){return!!t||t===""}const Zd=t=>!!(t&&t.__v_isRef===!0),ir=t=>$e(t)?t:t==null?"":ce(t)||De(t)&&(t.toString===Kd||!ue(t.toString))?Zd(t)?ir(t.value):JSON.stringify(t,ef,2):String(t),ef=(t,e)=>Zd(e)?ef(t,e.value):Mr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Sa(r,i)+" =>"]=s,n),{})}:qd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Sa(n))}:Wn(e)?Sa(e):De(e)&&!ce(e)&&!Qd(e)?String(e):e,Sa=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class Em{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=At;try{return At=this,e()}finally{At=n}}}on(){At=this}off(){At=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Tm(){return At}let xe;const Ca=new WeakSet;class tf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ca.has(this)&&(Ca.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ju(this),sf(this);const e=xe,n=Bt;xe=this,Bt=!0;try{return this.fn()}finally{of(this),xe=e,Bt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Uc(e);this.deps=this.depsTail=void 0,ju(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ca.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ya(this)&&this.run()}get dirty(){return Ya(this)}}let nf=0,Ms,Fs;function rf(t,e=!1){if(t.flags|=8,e){t.next=Fs,Fs=t;return}t.next=Ms,Ms=t}function Mc(){nf++}function Fc(){if(--nf>0)return;if(Fs){let e=Fs;for(Fs=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ms;){let e=Ms;for(Ms=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function sf(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function of(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Uc(r),Im(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Ya(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(af(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function af(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ys))return;t.globalVersion=Ys;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Ya(t)){t.flags&=-3;return}const n=xe,r=Bt;xe=t,Bt=!0;try{sf(t);const s=t.fn(t._value);(e.version===0||zn(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{xe=n,Bt=r,of(t),t.flags&=-3}}function Uc(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Uc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Im(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Bt=!0;const cf=[];function Kn(){cf.push(Bt),Bt=!1}function Qn(){const t=cf.pop();Bt=t===void 0?!0:t}function ju(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xe;xe=void 0;try{e()}finally{xe=n}}}let Ys=0;class bm{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xe||!Bt||xe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xe)n=this.activeLink=new bm(xe,this),xe.deps?(n.prevDep=xe.depsTail,xe.depsTail.nextDep=n,xe.depsTail=n):xe.deps=xe.depsTail=n,lf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xe.depsTail,n.nextDep=void 0,xe.depsTail.nextDep=n,xe.depsTail=n,xe.deps===n&&(xe.deps=r)}return n}trigger(e){this.version++,Ys++,this.notify(e)}notify(e){Mc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Fc()}}}function lf(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)lf(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ja=new WeakMap,cr=Symbol(""),Xa=Symbol(""),Js=Symbol("");function dt(t,e,n){if(Bt&&xe){let r=Ja.get(t);r||Ja.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Bc),s.map=r,s.key=n),s.track()}}function gn(t,e,n,r,s,i){const o=Ja.get(t);if(!o){Ys++;return}const c=l=>{l&&l.trigger()};if(Mc(),e==="clear")o.forEach(c);else{const l=ce(t),h=l&&Lc(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,m)=>{(m==="length"||m===Js||!Wn(m)&&m>=d)&&c(p)})}else switch(n!==void 0&&c(o.get(n)),h&&c(o.get(Js)),e){case"add":l?h&&c(o.get("length")):(c(o.get(cr)),Mr(t)&&c(o.get(Xa)));break;case"delete":l||(c(o.get(cr)),Mr(t)&&c(o.get(Xa)));break;case"set":Mr(t)&&c(o.get(cr));break}}Fc()}function Rr(t){const e=Ae(t);return e===t?e:(dt(e,"iterate",Js),Dt(t)?e:e.map(ct))}function Bo(t){return dt(t=Ae(t),"iterate",Js),t}const Am={__proto__:null,[Symbol.iterator](){return Ra(this,Symbol.iterator,ct)},concat(...t){return Rr(this).concat(...t.map(e=>ce(e)?Rr(e):e))},entries(){return Ra(this,"entries",t=>(t[1]=ct(t[1]),t))},every(t,e){return on(this,"every",t,e,void 0,arguments)},filter(t,e){return on(this,"filter",t,e,n=>n.map(ct),arguments)},find(t,e){return on(this,"find",t,e,ct,arguments)},findIndex(t,e){return on(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return on(this,"findLast",t,e,ct,arguments)},findLastIndex(t,e){return on(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return on(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pa(this,"includes",t)},indexOf(...t){return Pa(this,"indexOf",t)},join(t){return Rr(this).join(t)},lastIndexOf(...t){return Pa(this,"lastIndexOf",t)},map(t,e){return on(this,"map",t,e,void 0,arguments)},pop(){return Ss(this,"pop")},push(...t){return Ss(this,"push",t)},reduce(t,...e){return $u(this,"reduce",t,e)},reduceRight(t,...e){return $u(this,"reduceRight",t,e)},shift(){return Ss(this,"shift")},some(t,e){return on(this,"some",t,e,void 0,arguments)},splice(...t){return Ss(this,"splice",t)},toReversed(){return Rr(this).toReversed()},toSorted(t){return Rr(this).toSorted(t)},toSpliced(...t){return Rr(this).toSpliced(...t)},unshift(...t){return Ss(this,"unshift",t)},values(){return Ra(this,"values",ct)}};function Ra(t,e,n){const r=Bo(t),s=r[e]();return r!==t&&!Dt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Sm=Array.prototype;function on(t,e,n,r,s,i){const o=Bo(t),c=o!==t&&!Dt(t),l=o[e];if(l!==Sm[e]){const p=l.apply(t,i);return c?ct(p):p}let h=n;o!==t&&(c?h=function(p,m){return n.call(this,ct(p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const d=l.call(o,h,r);return c&&s?s(d):d}function $u(t,e,n,r){const s=Bo(t);let i=n;return s!==t&&(Dt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,ct(c),l,t)}),s[e](i,...r)}function Pa(t,e,n){const r=Ae(t);dt(r,"iterate",Js);const s=r[e](...n);return(s===-1||s===!1)&&Hc(n[0])?(n[0]=Ae(n[0]),r[e](...n)):s}function Ss(t,e,n=[]){Kn(),Mc();const r=Ae(t)[e].apply(t,n);return Fc(),Qn(),r}const Cm=Dc("__proto__,__v_isRef,__isVue"),uf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function Rm(t){Wn(t)||(t=String(t));const e=Ae(this);return dt(e,"has",t),e.hasOwnProperty(t)}class hf{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?jm:gf:i?pf:ff).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ce(e);if(!s){let l;if(o&&(l=Am[n]))return l;if(n==="hasOwnProperty")return Rm}const c=Reflect.get(e,n,ht(e)?e:r);return(Wn(n)?uf.has(n):Cm(n))||(s||dt(e,"get",n),i)?c:ht(c)?o&&Lc(n)?c:c.value:De(c)?s?_f(c):di(c):c}}class df extends hf{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=hr(i);if(!Dt(r)&&!hr(r)&&(i=Ae(i),r=Ae(r)),!ce(e)&&ht(i)&&!ht(r))return l?!1:(i.value=r,!0)}const o=ce(e)&&Lc(n)?Number(n)<e.length:be(e,n),c=Reflect.set(e,n,r,ht(e)?e:s);return e===Ae(s)&&(o?zn(r,i)&&gn(e,"set",n,r):gn(e,"add",n,r)),c}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&gn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Wn(n)||!uf.has(n))&&dt(e,"has",n),r}ownKeys(e){return dt(e,"iterate",ce(e)?"length":cr),Reflect.ownKeys(e)}}class Pm extends hf{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const km=new df,xm=new Pm,Vm=new df(!0);const jc=t=>t,jo=t=>Reflect.getPrototypeOf(t);function ji(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ae(t),i=Ae(e);n||(zn(e,i)&&dt(s,"get",e),dt(s,"get",i));const{has:o}=jo(s),c=r?jc:n?Gc:ct;if(o.call(s,e))return c(t.get(e));if(o.call(s,i))return c(t.get(i));t!==s&&t.get(e)}function $i(t,e=!1){const n=this.__v_raw,r=Ae(n),s=Ae(t);return e||(zn(t,s)&&dt(r,"has",t),dt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function zi(t,e=!1){return t=t.__v_raw,!e&&dt(Ae(t),"iterate",cr),Reflect.get(t,"size",t)}function zu(t,e=!1){!e&&!Dt(t)&&!hr(t)&&(t=Ae(t));const n=Ae(this);return jo(n).has.call(n,t)||(n.add(t),gn(n,"add",t,t)),this}function Hu(t,e,n=!1){!n&&!Dt(e)&&!hr(e)&&(e=Ae(e));const r=Ae(this),{has:s,get:i}=jo(r);let o=s.call(r,t);o||(t=Ae(t),o=s.call(r,t));const c=i.call(r,t);return r.set(t,e),o?zn(e,c)&&gn(r,"set",t,e):gn(r,"add",t,e),this}function Gu(t){const e=Ae(this),{has:n,get:r}=jo(e);let s=n.call(e,t);s||(t=Ae(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&gn(e,"delete",t,void 0),i}function qu(){const t=Ae(this),e=t.size!==0,n=t.clear();return e&&gn(t,"clear",void 0,void 0),n}function Hi(t,e){return function(r,s){const i=this,o=i.__v_raw,c=Ae(o),l=e?jc:t?Gc:ct;return!t&&dt(c,"iterate",cr),o.forEach((h,d)=>r.call(s,l(h),l(d),i))}}function Gi(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=Mr(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=s[t](...r),d=n?jc:e?Gc:ct;return!e&&dt(i,"iterate",l?Xa:cr),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:c?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function Pn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Dm(){const t={get(i){return ji(this,i)},get size(){return zi(this)},has:$i,add:zu,set:Hu,delete:Gu,clear:qu,forEach:Hi(!1,!1)},e={get(i){return ji(this,i,!1,!0)},get size(){return zi(this)},has:$i,add(i){return zu.call(this,i,!0)},set(i,o){return Hu.call(this,i,o,!0)},delete:Gu,clear:qu,forEach:Hi(!1,!0)},n={get(i){return ji(this,i,!0)},get size(){return zi(this,!0)},has(i){return $i.call(this,i,!0)},add:Pn("add"),set:Pn("set"),delete:Pn("delete"),clear:Pn("clear"),forEach:Hi(!0,!1)},r={get(i){return ji(this,i,!0,!0)},get size(){return zi(this,!0)},has(i){return $i.call(this,i,!0)},add:Pn("add"),set:Pn("set"),delete:Pn("delete"),clear:Pn("clear"),forEach:Hi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Gi(i,!1,!1),n[i]=Gi(i,!0,!1),e[i]=Gi(i,!1,!0),r[i]=Gi(i,!0,!0)}),[t,n,e,r]}const[Om,Nm,Lm,Mm]=Dm();function $c(t,e){const n=e?t?Mm:Lm:t?Nm:Om;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const Fm={get:$c(!1,!1)},Um={get:$c(!1,!0)},Bm={get:$c(!0,!1)};const ff=new WeakMap,pf=new WeakMap,gf=new WeakMap,jm=new WeakMap;function $m(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zm(t){return t.__v_skip||!Object.isExtensible(t)?0:$m(hm(t))}function di(t){return hr(t)?t:zc(t,!1,km,Fm,ff)}function mf(t){return zc(t,!1,Vm,Um,pf)}function _f(t){return zc(t,!0,xm,Bm,gf)}function zc(t,e,n,r,s){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=zm(t);if(o===0)return t;const c=new Proxy(t,o===2?r:n);return s.set(t,c),c}function Ur(t){return hr(t)?Ur(t.__v_raw):!!(t&&t.__v_isReactive)}function hr(t){return!!(t&&t.__v_isReadonly)}function Dt(t){return!!(t&&t.__v_isShallow)}function Hc(t){return t?!!t.__v_raw:!1}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function Hm(t){return!be(t,"__v_skip")&&Object.isExtensible(t)&&Yd(t,"__v_skip",!0),t}const ct=t=>De(t)?di(t):t,Gc=t=>De(t)?_f(t):t;function ht(t){return t?t.__v_isRef===!0:!1}function Gm(t){return vf(t,!1)}function qm(t){return vf(t,!0)}function vf(t,e){return ht(t)?t:new Wm(t,e)}class Wm{constructor(e,n){this.dep=new Bc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ae(e),this._value=n?e:ct(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Dt(e)||hr(e);e=r?e:Ae(e),zn(e,n)&&(this._rawValue=e,this._value=r?e:ct(e),this.dep.trigger())}}function Br(t){return ht(t)?t.value:t}const Km={get:(t,e,n)=>e==="__v_raw"?t:Br(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ht(s)&&!ht(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function yf(t){return Ur(t)?t:new Proxy(t,Km)}class Qm{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Bc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ys-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xe!==this)return rf(this,!0),!0}get value(){const e=this.dep.track();return af(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ym(t,e,n=!1){let r,s;return ue(t)?r=t:(r=t.get,s=t.set),new Qm(r,s,n)}const qi={},uo=new WeakMap;let rr;function Jm(t,e=!1,n=rr){if(n){let r=uo.get(n);r||uo.set(n,r=[]),r.push(t)}}function Xm(t,e,n=ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,h=q=>s?q:Dt(q)||s===!1||s===0?ln(q,1):ln(q);let d,p,m,v,P=!1,x=!1;if(ht(t)?(p=()=>t.value,P=Dt(t)):Ur(t)?(p=()=>h(t),P=!0):ce(t)?(x=!0,P=t.some(q=>Ur(q)||Dt(q)),p=()=>t.map(q=>{if(ht(q))return q.value;if(Ur(q))return h(q);if(ue(q))return l?l(q,2):q()})):ue(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){Kn();try{m()}finally{Qn()}}const q=rr;rr=d;try{return l?l(t,3,[v]):t(v)}finally{rr=q}}:p=Kt,e&&s){const q=p,he=s===!0?1/0:s;p=()=>ln(q(),he)}const O=Tm(),$=()=>{d.stop(),O&&Nc(O.effects,d)};if(i&&e){const q=e;e=(...he)=>{q(...he),$()}}let B=x?new Array(t.length).fill(qi):qi;const H=q=>{if(!(!(d.flags&1)||!d.dirty&&!q))if(e){const he=d.run();if(s||P||(x?he.some((fe,I)=>zn(fe,B[I])):zn(he,B))){m&&m();const fe=rr;rr=d;try{const I=[he,B===qi?void 0:x&&B[0]===qi?[]:B,v];l?l(e,3,I):e(...I),B=he}finally{rr=fe}}}else d.run()};return c&&c(H),d=new tf(p),d.scheduler=o?()=>o(H,!1):H,v=q=>Jm(q,!1,d),m=d.onStop=()=>{const q=uo.get(d);if(q){if(l)l(q,4);else for(const he of q)he();uo.delete(d)}},e?r?H(!0):B=d.run():o?o(H.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function ln(t,e=1/0,n){if(e<=0||!De(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ht(t))ln(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)ln(t[r],e,n);else if(qd(t)||Mr(t))t.forEach(r=>{ln(r,e,n)});else if(Qd(t)){for(const r in t)ln(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ln(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fi(t,e,n,r){try{return r?t(...r):t()}catch(s){$o(s,e,n)}}function Xt(t,e,n,r){if(ue(t)){const s=fi(t,e,n,r);return s&&Wd(s)&&s.catch(i=>{$o(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Xt(t[i],e,n,r));return s}}function $o(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ke;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const d=c.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,h)===!1)return}c=c.parent}if(i){Kn(),fi(i,null,10,[t,l,h]),Qn();return}}Zm(t,n,s,r,o)}function Zm(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const vt=[];let qt=-1;const jr=[];let Vn=null,xr=0;const wf=Promise.resolve();let ho=null;function Ef(t){const e=ho||wf;return t?e.then(this?t.bind(this):t):e}function e1(t){let e=qt+1,n=vt.length;for(;e<n;){const r=e+n>>>1,s=vt[r],i=Xs(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function qc(t){if(!(t.flags&1)){const e=Xs(t),n=vt[vt.length-1];!n||!(t.flags&2)&&e>=Xs(n)?vt.push(t):vt.splice(e1(e),0,t),t.flags|=1,Tf()}}function Tf(){ho||(ho=wf.then(bf))}function t1(t){ce(t)?jr.push(...t):Vn&&t.id===-1?Vn.splice(xr+1,0,t):t.flags&1||(jr.push(t),t.flags|=1),Tf()}function Wu(t,e,n=qt+1){for(;n<vt.length;n++){const r=vt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function If(t){if(jr.length){const e=[...new Set(jr)].sort((n,r)=>Xs(n)-Xs(r));if(jr.length=0,Vn){Vn.push(...e);return}for(Vn=e,xr=0;xr<Vn.length;xr++){const n=Vn[xr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Vn=null,xr=0}}const Xs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function bf(t){try{for(qt=0;qt<vt.length;qt++){const e=vt[qt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;qt<vt.length;qt++){const e=vt[qt];e&&(e.flags&=-2)}qt=-1,vt.length=0,If(),ho=null,(vt.length||jr.length)&&bf()}}let Ct=null,Af=null;function fo(t){const e=Ct;return Ct=t,Af=t&&t.type.__scopeId||null,e}function n1(t,e=Ct,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&nh(-1);const i=fo(e);let o;try{o=t(...s)}finally{fo(i),r._d&&nh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Sf(t,e){if(Ct===null)return t;const n=Wo(Ct),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=ke]=e[s];i&&(ue(i)&&(i={mounted:i,updated:i}),i.deep&&ln(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function tr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Kn(),Xt(l,n,8,[t.el,c,t,e]),Qn())}}const r1=Symbol("_vte"),s1=t=>t.__isTeleport;function Wc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Wc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Cf(t,e){return ue(t)?et({name:t.name},e,{setup:t}):t}function Rf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Za(t,e,n,r,s=!1){if(ce(t)){t.forEach((P,x)=>Za(P,e&&(ce(e)?e[x]:e),n,r,s));return}if(Us(r)&&!s)return;const i=r.shapeFlag&4?Wo(r.component):r.el,o=s?null:i,{i:c,r:l}=t,h=e&&e.r,d=c.refs===ke?c.refs={}:c.refs,p=c.setupState,m=Ae(p),v=p===ke?()=>!1:P=>be(m,P);if(h!=null&&h!==l&&($e(h)?(d[h]=null,v(h)&&(p[h]=null)):ht(h)&&(h.value=null)),ue(l))fi(l,c,12,[o,d]);else{const P=$e(l),x=ht(l);if(P||x){const O=()=>{if(t.f){const $=P?v(l)?p[l]:d[l]:l.value;s?ce($)&&Nc($,i):ce($)?$.includes(i)||$.push(i):P?(d[l]=[i],v(l)&&(p[l]=d[l])):(l.value=[i],t.k&&(d[t.k]=l.value))}else P?(d[l]=o,v(l)&&(p[l]=o)):x&&(l.value=o,t.k&&(d[t.k]=o))};o?(O.id=-1,bt(O,n)):O()}}}const Us=t=>!!t.type.__asyncLoader,Pf=t=>t.type.__isKeepAlive;function i1(t,e){kf(t,"a",e)}function o1(t,e){kf(t,"da",e)}function kf(t,e,n=ut){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(zo(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Pf(s.parent.vnode)&&a1(r,e,n,s),s=s.parent}}function a1(t,e,n,r){const s=zo(e,t,r,!0);xf(()=>{Nc(r[e],s)},n)}function zo(t,e,n=ut,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Kn();const c=pi(n),l=Xt(e,n,t,o);return c(),Qn(),l});return r?s.unshift(i):s.push(i),i}}const Tn=t=>(e,n=ut)=>{(!qo||t==="sp")&&zo(t,(...r)=>e(...r),n)},c1=Tn("bm"),l1=Tn("m"),u1=Tn("bu"),h1=Tn("u"),d1=Tn("bum"),xf=Tn("um"),f1=Tn("sp"),p1=Tn("rtg"),g1=Tn("rtc");function m1(t,e=ut){zo("ec",t,e)}const _1="components";function v1(t,e){return w1(_1,t,!0,e)||t}const y1=Symbol.for("v-ndc");function w1(t,e,n=!0,r=!1){const s=Ct||ut;if(s){const i=s.type;{const c=a_(i,!1);if(c&&(c===e||c===Nt(e)||c===Uo(Nt(e))))return i}const o=Ku(s[t]||i[t],e)||Ku(s.appContext[t],e);return!o&&r?i:o}}function Ku(t,e){return t&&(t[e]||t[Nt(e)]||t[Uo(Nt(e))])}function Vf(t,e,n,r){let s;const i=n,o=ce(t);if(o||$e(t)){const c=o&&Ur(t);let l=!1;c&&(l=!Dt(t),t=Bo(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?ct(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(De(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const d=c[l];s[l]=e(t[d],d,l,i)}}else s=[];return s}const ec=t=>t?Zf(t)?Wo(t):ec(t.parent):null,Bs=et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ec(t.parent),$root:t=>ec(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Kc(t),$forceUpdate:t=>t.f||(t.f=()=>{qc(t.update)}),$nextTick:t=>t.n||(t.n=Ef.bind(t.proxy)),$watch:t=>j1.bind(t)}),ka=(t,e)=>t!==ke&&!t.__isScriptSetup&&be(t,e),E1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let h;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(ka(r,e))return o[e]=1,r[e];if(s!==ke&&be(s,e))return o[e]=2,s[e];if((h=t.propsOptions[0])&&be(h,e))return o[e]=3,i[e];if(n!==ke&&be(n,e))return o[e]=4,n[e];tc&&(o[e]=0)}}const d=Bs[e];let p,m;if(d)return e==="$attrs"&&dt(t.attrs,"get",""),d(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==ke&&be(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,be(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return ka(s,e)?(s[e]=n,!0):r!==ke&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let c;return!!n[o]||t!==ke&&be(t,o)||ka(e,o)||(c=i[0])&&be(c,o)||be(r,o)||be(Bs,o)||be(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Qu(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let tc=!0;function T1(t){const e=Kc(t),n=t.proxy,r=t.ctx;tc=!1,e.beforeCreate&&Yu(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:h,created:d,beforeMount:p,mounted:m,beforeUpdate:v,updated:P,activated:x,deactivated:O,beforeDestroy:$,beforeUnmount:B,destroyed:H,unmounted:q,render:he,renderTracked:fe,renderTriggered:I,errorCaptured:y,serverPrefetch:T,expose:b,inheritAttrs:A,components:S,directives:E,filters:pt}=e;if(h&&I1(h,r,null),o)for(const _e in o){const pe=o[_e];ue(pe)&&(r[_e]=pe.bind(n))}if(s){const _e=s.call(n,n);De(_e)&&(t.data=di(_e))}if(tc=!0,i)for(const _e in i){const pe=i[_e],Tt=ue(pe)?pe.bind(n,n):ue(pe.get)?pe.get.bind(n,n):Kt,Lt=!ue(pe)&&ue(pe.set)?pe.set.bind(n):Kt,kt=Ft({get:Tt,set:Lt});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>kt.value,set:Oe=>kt.value=Oe})}if(c)for(const _e in c)Df(c[_e],r,n,_e);if(l){const _e=ue(l)?l.call(n):l;Reflect.ownKeys(_e).forEach(pe=>{Xi(pe,_e[pe])})}d&&Yu(d,t,"c");function Be(_e,pe){ce(pe)?pe.forEach(Tt=>_e(Tt.bind(n))):pe&&_e(pe.bind(n))}if(Be(c1,p),Be(l1,m),Be(u1,v),Be(h1,P),Be(i1,x),Be(o1,O),Be(m1,y),Be(g1,fe),Be(p1,I),Be(d1,B),Be(xf,q),Be(f1,T),ce(b))if(b.length){const _e=t.exposed||(t.exposed={});b.forEach(pe=>{Object.defineProperty(_e,pe,{get:()=>n[pe],set:Tt=>n[pe]=Tt})})}else t.exposed||(t.exposed={});he&&t.render===Kt&&(t.render=he),A!=null&&(t.inheritAttrs=A),S&&(t.components=S),E&&(t.directives=E),T&&Rf(t)}function I1(t,e,n=Kt){ce(t)&&(t=nc(t));for(const r in t){const s=t[r];let i;De(s)?"default"in s?i=mn(s.from||r,s.default,!0):i=mn(s.from||r):i=mn(s),ht(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Yu(t,e,n){Xt(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Df(t,e,n,r){let s=r.includes(".")?Wf(n,r):()=>n[r];if($e(t)){const i=e[t];ue(i)&&zr(s,i)}else if(ue(t))zr(s,t.bind(n));else if(De(t))if(ce(t))t.forEach(i=>Df(i,e,n,r));else{const i=ue(t.handler)?t.handler.bind(n):e[t.handler];ue(i)&&zr(s,i,t)}}function Kc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(h=>po(l,h,o,!0)),po(l,e,o)),De(e)&&i.set(e,l),l}function po(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&po(t,i,n,!0),s&&s.forEach(o=>po(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=b1[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const b1={data:Ju,props:Xu,emits:Xu,methods:xs,computed:xs,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:xs,directives:xs,watch:S1,provide:Ju,inject:A1};function Ju(t,e){return e?t?function(){return et(ue(t)?t.call(this,this):t,ue(e)?e.call(this,this):e)}:e:t}function A1(t,e){return xs(nc(t),nc(e))}function nc(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function xs(t,e){return t?et(Object.create(null),t,e):e}function Xu(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:et(Object.create(null),Qu(t),Qu(e??{})):e}function S1(t,e){if(!t)return e;if(!e)return t;const n=et(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function Of(){return{app:null,config:{isNativeTag:lm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let C1=0;function R1(t,e){return function(r,s=null){ue(r)||(r=et({},r)),s!=null&&!De(s)&&(s=null);const i=Of(),o=new WeakSet,c=[];let l=!1;const h=i.app={_uid:C1++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:l_,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&ue(d.install)?(o.add(d),d.install(h,...p)):ue(d)&&(o.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,m){if(!l){const v=h._ceVNode||wt(r,s);return v.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),p&&e?e(v,d):t(v,d,m),l=!0,h._container=d,d.__vue_app__=h,Wo(v.component)}},onUnmount(d){c.push(d)},unmount(){l&&(Xt(c,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=$r;$r=h;try{return d()}finally{$r=p}}};return h}}let $r=null;function Xi(t,e){if(ut){let n=ut.provides;const r=ut.parent&&ut.parent.provides;r===n&&(n=ut.provides=Object.create(r)),n[t]=e}}function mn(t,e,n=!1){const r=ut||Ct;if(r||$r){const s=$r?$r._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ue(e)?e.call(r&&r.proxy):e}}const Nf={},Lf=()=>Object.create(Nf),Mf=t=>Object.getPrototypeOf(t)===Nf;function P1(t,e,n,r=!1){const s={},i=Lf();t.propsDefaults=Object.create(null),Ff(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:mf(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function k1(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Ae(s),[l]=t.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(Ho(t.emitsOptions,m))continue;const v=e[m];if(l)if(be(i,m))v!==i[m]&&(i[m]=v,h=!0);else{const P=Nt(m);s[P]=rc(l,c,P,v,t,!1)}else v!==i[m]&&(i[m]=v,h=!0)}}}else{Ff(t,e,s,i)&&(h=!0);let d;for(const p in c)(!e||!be(e,p)&&((d=vr(p))===p||!be(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=rc(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!be(e,p))&&(delete i[p],h=!0)}h&&gn(t.attrs,"set","")}function Ff(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Ls(l))continue;const h=e[l];let d;s&&be(s,d=Nt(l))?!i||!i.includes(d)?n[d]=h:(c||(c={}))[d]=h:Ho(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,o=!0)}if(i){const l=Ae(n),h=c||ke;for(let d=0;d<i.length;d++){const p=i[d];n[p]=rc(s,l,p,h[p],t,!be(h,p))}}return o}function rc(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=be(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ue(l)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=pi(s);r=h[n]=l.call(null,e),d()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===vr(n))&&(r=!0))}return r}const x1=new WeakMap;function Uf(t,e,n=!1){const r=n?x1:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!ue(t)){const d=p=>{l=!0;const[m,v]=Uf(p,e,!0);et(o,m),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!l)return De(t)&&r.set(t,Lr),Lr;if(ce(i))for(let d=0;d<i.length;d++){const p=Nt(i[d]);Zu(p)&&(o[p]=ke)}else if(i)for(const d in i){const p=Nt(d);if(Zu(p)){const m=i[d],v=o[p]=ce(m)||ue(m)?{type:m}:et({},m),P=v.type;let x=!1,O=!0;if(ce(P))for(let $=0;$<P.length;++$){const B=P[$],H=ue(B)&&B.name;if(H==="Boolean"){x=!0;break}else H==="String"&&(O=!1)}else x=ue(P)&&P.name==="Boolean";v[0]=x,v[1]=O,(x||be(v,"default"))&&c.push(p)}}const h=[o,c];return De(t)&&r.set(t,h),h}function Zu(t){return t[0]!=="$"&&!Ls(t)}const Bf=t=>t[0]==="_"||t==="$stable",Qc=t=>ce(t)?t.map(Wt):[Wt(t)],V1=(t,e,n)=>{if(e._n)return e;const r=n1((...s)=>Qc(e(...s)),n);return r._c=!1,r},jf=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Bf(s))continue;const i=t[s];if(ue(i))e[s]=V1(s,i,r);else if(i!=null){const o=Qc(i);e[s]=()=>o}}},$f=(t,e)=>{const n=Qc(e);t.slots.default=()=>n},zf=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},D1=(t,e,n)=>{const r=t.slots=Lf();if(t.vnode.shapeFlag&32){const s=e._;s?(zf(r,e,n),n&&Yd(r,"_",s,!0)):jf(e,r)}else e&&$f(t,e)},O1=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ke;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:zf(s,e,n):(i=!e.$stable,jf(e,s)),o=e}else e&&($f(t,e),o={default:1});if(i)for(const c in s)!Bf(c)&&o[c]==null&&delete s[c]},bt=K1;function N1(t){return L1(t)}function L1(t,e){const n=Jd();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:m,setScopeId:v=Kt,insertStaticContent:P}=t,x=(_,w,R,N=null,V=null,M=null,W=void 0,z=null,j=!!w.dynamicChildren)=>{if(_===w)return;_&&!Cs(_,w)&&(N=D(_),Oe(_,V,M,!0),_=null),w.patchFlag===-2&&(j=!1,w.dynamicChildren=null);const{type:F,ref:te,shapeFlag:Q}=w;switch(F){case Go:O(_,w,R,N);break;case dr:$(_,w,R,N);break;case Zi:_==null&&B(w,R,N,W);break;case St:S(_,w,R,N,V,M,W,z,j);break;default:Q&1?he(_,w,R,N,V,M,W,z,j):Q&6?E(_,w,R,N,V,M,W,z,j):(Q&64||Q&128)&&F.process(_,w,R,N,V,M,W,z,j,J)}te!=null&&V&&Za(te,_&&_.ref,M,w||_,!w)},O=(_,w,R,N)=>{if(_==null)r(w.el=c(w.children),R,N);else{const V=w.el=_.el;w.children!==_.children&&h(V,w.children)}},$=(_,w,R,N)=>{_==null?r(w.el=l(w.children||""),R,N):w.el=_.el},B=(_,w,R,N)=>{[_.el,_.anchor]=P(_.children,w,R,N,_.el,_.anchor)},H=({el:_,anchor:w},R,N)=>{let V;for(;_&&_!==w;)V=m(_),r(_,R,N),_=V;r(w,R,N)},q=({el:_,anchor:w})=>{let R;for(;_&&_!==w;)R=m(_),s(_),_=R;s(w)},he=(_,w,R,N,V,M,W,z,j)=>{w.type==="svg"?W="svg":w.type==="math"&&(W="mathml"),_==null?fe(w,R,N,V,M,W,z,j):T(_,w,V,M,W,z,j)},fe=(_,w,R,N,V,M,W,z)=>{let j,F;const{props:te,shapeFlag:Q,transition:ee,dirs:X}=_;if(j=_.el=o(_.type,M,te&&te.is,te),Q&8?d(j,_.children):Q&16&&y(_.children,j,null,N,V,xa(_,M),W,z),X&&tr(_,null,N,"created"),I(j,_,_.scopeId,W,N),te){for(const Ie in te)Ie!=="value"&&!Ls(Ie)&&i(j,Ie,null,te[Ie],M,N);"value"in te&&i(j,"value",null,te.value,M),(F=te.onVnodeBeforeMount)&&Gt(F,N,_)}X&&tr(_,null,N,"beforeMount");const se=M1(V,ee);se&&ee.beforeEnter(j),r(j,w,R),((F=te&&te.onVnodeMounted)||se||X)&&bt(()=>{F&&Gt(F,N,_),se&&ee.enter(j),X&&tr(_,null,N,"mounted")},V)},I=(_,w,R,N,V)=>{if(R&&v(_,R),N)for(let M=0;M<N.length;M++)v(_,N[M]);if(V){let M=V.subTree;if(w===M||Qf(M.type)&&(M.ssContent===w||M.ssFallback===w)){const W=V.vnode;I(_,W,W.scopeId,W.slotScopeIds,V.parent)}}},y=(_,w,R,N,V,M,W,z,j=0)=>{for(let F=j;F<_.length;F++){const te=_[F]=z?Dn(_[F]):Wt(_[F]);x(null,te,w,R,N,V,M,W,z)}},T=(_,w,R,N,V,M,W)=>{const z=w.el=_.el;let{patchFlag:j,dynamicChildren:F,dirs:te}=w;j|=_.patchFlag&16;const Q=_.props||ke,ee=w.props||ke;let X;if(R&&nr(R,!1),(X=ee.onVnodeBeforeUpdate)&&Gt(X,R,w,_),te&&tr(w,_,R,"beforeUpdate"),R&&nr(R,!0),(Q.innerHTML&&ee.innerHTML==null||Q.textContent&&ee.textContent==null)&&d(z,""),F?b(_.dynamicChildren,F,z,R,N,xa(w,V),M):W||pe(_,w,z,null,R,N,xa(w,V),M,!1),j>0){if(j&16)A(z,Q,ee,R,V);else if(j&2&&Q.class!==ee.class&&i(z,"class",null,ee.class,V),j&4&&i(z,"style",Q.style,ee.style,V),j&8){const se=w.dynamicProps;for(let Ie=0;Ie<se.length;Ie++){const we=se[Ie],nt=Q[we],qe=ee[we];(qe!==nt||we==="value")&&i(z,we,nt,qe,V,R)}}j&1&&_.children!==w.children&&d(z,w.children)}else!W&&F==null&&A(z,Q,ee,R,V);((X=ee.onVnodeUpdated)||te)&&bt(()=>{X&&Gt(X,R,w,_),te&&tr(w,_,R,"updated")},N)},b=(_,w,R,N,V,M,W)=>{for(let z=0;z<w.length;z++){const j=_[z],F=w[z],te=j.el&&(j.type===St||!Cs(j,F)||j.shapeFlag&70)?p(j.el):R;x(j,F,te,null,N,V,M,W,!0)}},A=(_,w,R,N,V)=>{if(w!==R){if(w!==ke)for(const M in w)!Ls(M)&&!(M in R)&&i(_,M,w[M],null,V,N);for(const M in R){if(Ls(M))continue;const W=R[M],z=w[M];W!==z&&M!=="value"&&i(_,M,z,W,V,N)}"value"in R&&i(_,"value",w.value,R.value,V)}},S=(_,w,R,N,V,M,W,z,j)=>{const F=w.el=_?_.el:c(""),te=w.anchor=_?_.anchor:c("");let{patchFlag:Q,dynamicChildren:ee,slotScopeIds:X}=w;X&&(z=z?z.concat(X):X),_==null?(r(F,R,N),r(te,R,N),y(w.children||[],R,te,V,M,W,z,j)):Q>0&&Q&64&&ee&&_.dynamicChildren?(b(_.dynamicChildren,ee,R,V,M,W,z),(w.key!=null||V&&w===V.subTree)&&Hf(_,w,!0)):pe(_,w,R,te,V,M,W,z,j)},E=(_,w,R,N,V,M,W,z,j)=>{w.slotScopeIds=z,_==null?w.shapeFlag&512?V.ctx.activate(w,R,N,W,j):pt(w,R,N,V,M,W,j):Pt(_,w,j)},pt=(_,w,R,N,V,M,W)=>{const z=_.component=n_(_,N,V);if(Pf(_)&&(z.ctx.renderer=J),r_(z,!1,W),z.asyncDep){if(V&&V.registerDep(z,Be,W),!_.el){const j=z.subTree=wt(dr);$(null,j,w,R)}}else Be(z,_,w,R,V,M,W)},Pt=(_,w,R)=>{const N=w.component=_.component;if(q1(_,w,R))if(N.asyncDep&&!N.asyncResolved){_e(N,w,R);return}else N.next=w,N.update();else w.el=_.el,N.vnode=w},Be=(_,w,R,N,V,M,W)=>{const z=()=>{if(_.isMounted){let{next:Q,bu:ee,u:X,parent:se,vnode:Ie}=_;{const rt=Gf(_);if(rt){Q&&(Q.el=Ie.el,_e(_,Q,W)),rt.asyncDep.then(()=>{_.isUnmounted||z()});return}}let we=Q,nt;nr(_,!1),Q?(Q.el=Ie.el,_e(_,Q,W)):Q=Ie,ee&&Aa(ee),(nt=Q.props&&Q.props.onVnodeBeforeUpdate)&&Gt(nt,se,Q,Ie),nr(_,!0);const qe=Va(_),Ke=_.subTree;_.subTree=qe,x(Ke,qe,p(Ke.el),D(Ke),_,V,M),Q.el=qe.el,we===null&&W1(_,qe.el),X&&bt(X,V),(nt=Q.props&&Q.props.onVnodeUpdated)&&bt(()=>Gt(nt,se,Q,Ie),V)}else{let Q;const{el:ee,props:X}=w,{bm:se,m:Ie,parent:we,root:nt,type:qe}=_,Ke=Us(w);if(nr(_,!1),se&&Aa(se),!Ke&&(Q=X&&X.onVnodeBeforeMount)&&Gt(Q,we,w),nr(_,!0),ee&&Re){const rt=()=>{_.subTree=Va(_),Re(ee,_.subTree,_,V,null)};Ke&&qe.__asyncHydrate?qe.__asyncHydrate(ee,_,rt):rt()}else{nt.ce&&nt.ce._injectChildStyle(qe);const rt=_.subTree=Va(_);x(null,rt,R,N,_,V,M),w.el=rt.el}if(Ie&&bt(Ie,V),!Ke&&(Q=X&&X.onVnodeMounted)){const rt=w;bt(()=>Gt(Q,we,rt),V)}(w.shapeFlag&256||we&&Us(we.vnode)&&we.vnode.shapeFlag&256)&&_.a&&bt(_.a,V),_.isMounted=!0,w=R=N=null}};_.scope.on();const j=_.effect=new tf(z);_.scope.off();const F=_.update=j.run.bind(j),te=_.job=j.runIfDirty.bind(j);te.i=_,te.id=_.uid,j.scheduler=()=>qc(te),nr(_,!0),F()},_e=(_,w,R)=>{w.component=_;const N=_.vnode.props;_.vnode=w,_.next=null,k1(_,w.props,N,R),O1(_,w.children,R),Kn(),Wu(_),Qn()},pe=(_,w,R,N,V,M,W,z,j=!1)=>{const F=_&&_.children,te=_?_.shapeFlag:0,Q=w.children,{patchFlag:ee,shapeFlag:X}=w;if(ee>0){if(ee&128){Lt(F,Q,R,N,V,M,W,z,j);return}else if(ee&256){Tt(F,Q,R,N,V,M,W,z,j);return}}X&8?(te&16&&yt(F,V,M),Q!==F&&d(R,Q)):te&16?X&16?Lt(F,Q,R,N,V,M,W,z,j):yt(F,V,M,!0):(te&8&&d(R,""),X&16&&y(Q,R,N,V,M,W,z,j))},Tt=(_,w,R,N,V,M,W,z,j)=>{_=_||Lr,w=w||Lr;const F=_.length,te=w.length,Q=Math.min(F,te);let ee;for(ee=0;ee<Q;ee++){const X=w[ee]=j?Dn(w[ee]):Wt(w[ee]);x(_[ee],X,R,null,V,M,W,z,j)}F>te?yt(_,V,M,!0,!1,Q):y(w,R,N,V,M,W,z,j,Q)},Lt=(_,w,R,N,V,M,W,z,j)=>{let F=0;const te=w.length;let Q=_.length-1,ee=te-1;for(;F<=Q&&F<=ee;){const X=_[F],se=w[F]=j?Dn(w[F]):Wt(w[F]);if(Cs(X,se))x(X,se,R,null,V,M,W,z,j);else break;F++}for(;F<=Q&&F<=ee;){const X=_[Q],se=w[ee]=j?Dn(w[ee]):Wt(w[ee]);if(Cs(X,se))x(X,se,R,null,V,M,W,z,j);else break;Q--,ee--}if(F>Q){if(F<=ee){const X=ee+1,se=X<te?w[X].el:N;for(;F<=ee;)x(null,w[F]=j?Dn(w[F]):Wt(w[F]),R,se,V,M,W,z,j),F++}}else if(F>ee)for(;F<=Q;)Oe(_[F],V,M,!0),F++;else{const X=F,se=F,Ie=new Map;for(F=se;F<=ee;F++){const gt=w[F]=j?Dn(w[F]):Wt(w[F]);gt.key!=null&&Ie.set(gt.key,F)}let we,nt=0;const qe=ee-se+1;let Ke=!1,rt=0;const An=new Array(qe);for(F=0;F<qe;F++)An[F]=0;for(F=X;F<=Q;F++){const gt=_[F];if(nt>=qe){Oe(gt,V,M,!0);continue}let xt;if(gt.key!=null)xt=Ie.get(gt.key);else for(we=se;we<=ee;we++)if(An[we-se]===0&&Cs(gt,w[we])){xt=we;break}xt===void 0?Oe(gt,V,M,!0):(An[xt-se]=F+1,xt>=rt?rt=xt:Ke=!0,x(gt,w[xt],R,null,V,M,W,z,j),nt++)}const Tr=Ke?F1(An):Lr;for(we=Tr.length-1,F=qe-1;F>=0;F--){const gt=se+F,xt=w[gt],Ir=gt+1<te?w[gt+1].el:N;An[F]===0?x(null,xt,R,Ir,V,M,W,z,j):Ke&&(we<0||F!==Tr[we]?kt(xt,R,Ir,2):we--)}}},kt=(_,w,R,N,V=null)=>{const{el:M,type:W,transition:z,children:j,shapeFlag:F}=_;if(F&6){kt(_.component.subTree,w,R,N);return}if(F&128){_.suspense.move(w,R,N);return}if(F&64){W.move(_,w,R,J);return}if(W===St){r(M,w,R);for(let Q=0;Q<j.length;Q++)kt(j[Q],w,R,N);r(_.anchor,w,R);return}if(W===Zi){H(_,w,R);return}if(N!==2&&F&1&&z)if(N===0)z.beforeEnter(M),r(M,w,R),bt(()=>z.enter(M),V);else{const{leave:Q,delayLeave:ee,afterLeave:X}=z,se=()=>r(M,w,R),Ie=()=>{Q(M,()=>{se(),X&&X()})};ee?ee(M,se,Ie):Ie()}else r(M,w,R)},Oe=(_,w,R,N=!1,V=!1)=>{const{type:M,props:W,ref:z,children:j,dynamicChildren:F,shapeFlag:te,patchFlag:Q,dirs:ee,cacheIndex:X}=_;if(Q===-2&&(V=!1),z!=null&&Za(z,null,R,_,!0),X!=null&&(w.renderCache[X]=void 0),te&256){w.ctx.deactivate(_);return}const se=te&1&&ee,Ie=!Us(_);let we;if(Ie&&(we=W&&W.onVnodeBeforeUnmount)&&Gt(we,w,_),te&6)Ht(_.component,R,N);else{if(te&128){_.suspense.unmount(R,N);return}se&&tr(_,null,w,"beforeUnmount"),te&64?_.type.remove(_,w,R,J,N):F&&!F.hasOnce&&(M!==St||Q>0&&Q&64)?yt(F,w,R,!1,!0):(M===St&&Q&384||!V&&te&16)&&yt(j,w,R),N&&Ne(_)}(Ie&&(we=W&&W.onVnodeUnmounted)||se)&&bt(()=>{we&&Gt(we,w,_),se&&tr(_,null,w,"unmounted")},R)},Ne=_=>{const{type:w,el:R,anchor:N,transition:V}=_;if(w===St){bn(R,N);return}if(w===Zi){q(_);return}const M=()=>{s(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(_.shapeFlag&1&&V&&!V.persisted){const{leave:W,delayLeave:z}=V,j=()=>W(R,M);z?z(_.el,M,j):j()}else M()},bn=(_,w)=>{let R;for(;_!==w;)R=m(_),s(_),_=R;s(w)},Ht=(_,w,R)=>{const{bum:N,scope:V,job:M,subTree:W,um:z,m:j,a:F}=_;eh(j),eh(F),N&&Aa(N),V.stop(),M&&(M.flags|=8,Oe(W,_,w,R)),z&&bt(z,w),bt(()=>{_.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},yt=(_,w,R,N=!1,V=!1,M=0)=>{for(let W=M;W<_.length;W++)Oe(_[W],w,R,N,V)},D=_=>{if(_.shapeFlag&6)return D(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=m(_.anchor||_.el),R=w&&w[r1];return R?m(R):w};let Y=!1;const K=(_,w,R)=>{_==null?w._vnode&&Oe(w._vnode,null,null,!0):x(w._vnode||null,_,w,null,null,null,R),w._vnode=_,Y||(Y=!0,Wu(),If(),Y=!1)},J={p:x,um:Oe,m:kt,r:Ne,mt:pt,mc:y,pc:pe,pbc:b,n:D,o:t};let ve,Re;return{render:K,hydrate:ve,createApp:R1(K,ve)}}function xa({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function nr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function M1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Hf(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=Dn(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Hf(o,c)),c.type===Go&&(c.el=o.el)}}function F1(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(s=n[n.length-1],t[s]<h){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<h?i=c+1:o=c;h<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Gf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gf(e)}function eh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const U1=Symbol.for("v-scx"),B1=()=>mn(U1);function zr(t,e,n){return qf(t,e,n)}function qf(t,e,n=ke){const{immediate:r,deep:s,flush:i,once:o}=n,c=et({},n);let l;if(qo)if(i==="sync"){const m=B1();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!e||r)c.once=!0;else{const m=()=>{};return m.stop=Kt,m.resume=Kt,m.pause=Kt,m}const h=ut;c.call=(m,v,P)=>Xt(m,h,v,P);let d=!1;i==="post"?c.scheduler=m=>{bt(m,h&&h.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(m,v)=>{v?m():qc(m)}),c.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Xm(t,e,c);return l&&l.push(p),p}function j1(t,e,n){const r=this.proxy,s=$e(t)?t.includes(".")?Wf(r,t):()=>r[t]:t.bind(r,r);let i;ue(e)?i=e:(i=e.handler,n=e);const o=pi(this),c=qf(s,i.bind(r),n);return o(),c}function Wf(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const $1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Nt(e)}Modifiers`]||t[`${vr(e)}Modifiers`];function z1(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ke;let s=n;const i=e.startsWith("update:"),o=i&&$1(r,e.slice(7));o&&(o.trim&&(s=n.map(d=>$e(d)?d.trim():d)),o.number&&(s=n.map(pm)));let c,l=r[c=ba(e)]||r[c=ba(Nt(e))];!l&&i&&(l=r[c=ba(vr(e))]),l&&Xt(l,t,6,s);const h=r[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Xt(h,t,6,s)}}function Kf(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!ue(t)){const l=h=>{const d=Kf(h,e,!0);d&&(c=!0,et(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(De(t)&&r.set(t,null),null):(ce(i)?i.forEach(l=>o[l]=null):et(o,i),De(t)&&r.set(t,o),o)}function Ho(t,e){return!t||!Lo(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,vr(e))||be(t,e))}function Va(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:h,renderCache:d,props:p,data:m,setupState:v,ctx:P,inheritAttrs:x}=t,O=fo(t);let $,B;try{if(n.shapeFlag&4){const q=s||r,he=q;$=Wt(h.call(he,q,d,p,v,m,P)),B=c}else{const q=e;$=Wt(q.length>1?q(p,{attrs:c,slots:o,emit:l}):q(p,null)),B=e.props?c:H1(c)}}catch(q){js.length=0,$o(q,t,1),$=wt(dr)}let H=$;if(B&&x!==!1){const q=Object.keys(B),{shapeFlag:he}=H;q.length&&he&7&&(i&&q.some(Oc)&&(B=G1(B,i)),H=Qr(H,B,!1,!0))}return n.dirs&&(H=Qr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Wc(H,n.transition),$=H,fo(O),$}const H1=t=>{let e;for(const n in t)(n==="class"||n==="style"||Lo(n))&&((e||(e={}))[n]=t[n]);return e},G1=(t,e)=>{const n={};for(const r in t)(!Oc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function q1(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?th(r,o,h):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(o[m]!==r[m]&&!Ho(h,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?th(r,o,h):!0:!!o;return!1}function th(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ho(n,i))return!0}return!1}function W1({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Qf=t=>t.__isSuspense;function K1(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):t1(t)}const St=Symbol.for("v-fgt"),Go=Symbol.for("v-txt"),dr=Symbol.for("v-cmt"),Zi=Symbol.for("v-stc"),js=[];let Rt=null;function ze(t=!1){js.push(Rt=t?null:[])}function Q1(){js.pop(),Rt=js[js.length-1]||null}let Zs=1;function nh(t){Zs+=t,t<0&&Rt&&(Rt.hasOnce=!0)}function Yf(t){return t.dynamicChildren=Zs>0?Rt||Lr:null,Q1(),Zs>0&&Rt&&Rt.push(t),t}function Ye(t,e,n,r,s,i){return Yf(de(t,e,n,r,s,i,!0))}function Jf(t,e,n,r,s){return Yf(wt(t,e,n,r,s,!0))}function go(t){return t?t.__v_isVNode===!0:!1}function Cs(t,e){return t.type===e.type&&t.key===e.key}const Xf=({key:t})=>t??null,eo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?$e(t)||ht(t)||ue(t)?{i:Ct,r:t,k:e,f:!!n}:t:null);function de(t,e=null,n=null,r=0,s=null,i=t===St?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xf(e),ref:e&&eo(e),scopeId:Af,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ct};return c?(Yc(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=$e(n)?8:16),Zs>0&&!o&&Rt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Rt.push(l),l}const wt=Y1;function Y1(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===y1)&&(t=dr),go(t)){const c=Qr(t,e,!0);return n&&Yc(c,n),Zs>0&&!i&&Rt&&(c.shapeFlag&6?Rt[Rt.indexOf(t)]=c:Rt.push(c)),c.patchFlag=-2,c}if(c_(t)&&(t=t.__vccOpts),e){e=J1(e);let{class:c,style:l}=e;c&&!$e(c)&&(e.class=Fr(c)),De(l)&&(Hc(l)&&!ce(l)&&(l=et({},l)),e.style=Qs(l))}const o=$e(t)?1:Qf(t)?128:s1(t)?64:De(t)?4:ue(t)?2:0;return de(t,e,n,r,s,o,i,!0)}function J1(t){return t?Hc(t)||Mf(t)?et({},t):t:null}function Qr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,h=e?Z1(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Xf(h),ref:e&&e.ref?n&&i?ce(i)?i.concat(eo(e)):[i,eo(e)]:eo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==St?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qr(t.ssContent),ssFallback:t.ssFallback&&Qr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Wc(d,l.clone(d)),d}function X1(t=" ",e=0){return wt(Go,null,t,e)}function Hr(t,e){const n=wt(Zi,null,t);return n.staticCount=e,n}function Vs(t="",e=!1){return e?(ze(),Jf(dr,null,t)):wt(dr,null,t)}function Wt(t){return t==null||typeof t=="boolean"?wt(dr):ce(t)?wt(St,null,t.slice()):go(t)?Dn(t):wt(Go,null,String(t))}function Dn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qr(t)}function Yc(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Yc(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Mf(e)?e._ctx=Ct:s===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),r&64?(n=16,e=[X1(e)]):n=8);t.children=e,t.shapeFlag|=n}function Z1(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Fr([e.class,r.class]));else if(s==="style")e.style=Qs([e.style,r.style]);else if(Lo(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Gt(t,e,n,r=null){Xt(t,e,7,[n,r])}const e_=Of();let t_=0;function n_(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||e_,i={uid:t_++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Em(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Uf(r,s),emitsOptions:Kf(r,s),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=z1.bind(null,i),t.ce&&t.ce(i),i}let ut=null,mo,sc;{const t=Jd(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};mo=e("__VUE_INSTANCE_SETTERS__",n=>ut=n),sc=e("__VUE_SSR_SETTERS__",n=>qo=n)}const pi=t=>{const e=ut;return mo(t),t.scope.on(),()=>{t.scope.off(),mo(e)}},rh=()=>{ut&&ut.scope.off(),mo(null)};function Zf(t){return t.vnode.shapeFlag&4}let qo=!1;function r_(t,e=!1,n=!1){e&&sc(e);const{props:r,children:s}=t.vnode,i=Zf(t);P1(t,r,i,e),D1(t,s,n);const o=i?s_(t,e):void 0;return e&&sc(!1),o}function s_(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,E1);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?o_(t):null,i=pi(t);Kn();const o=fi(r,t,0,[t.props,s]);if(Qn(),i(),Wd(o)){if(Us(t)||Rf(t),o.then(rh,rh),e)return o.then(c=>{sh(t,c,e)}).catch(c=>{$o(c,t,0)});t.asyncDep=o}else sh(t,o,e)}else ep(t,e)}function sh(t,e,n){ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=yf(e)),ep(t,n)}let ih;function ep(t,e,n){const r=t.type;if(!t.render){if(!e&&ih&&!r.render){const s=r.template||Kc(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:c,compilerOptions:l}=r,h=et(et({isCustomElement:i,delimiters:c},o),l);r.render=ih(s,h)}}t.render=r.render||Kt}{const s=pi(t);Kn();try{T1(t)}finally{Qn(),s()}}}const i_={get(t,e){return dt(t,"get",""),t[e]}};function o_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,i_),slots:t.slots,emit:t.emit,expose:e}}function Wo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(yf(Hm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Bs)return Bs[n](t)},has(e,n){return n in e||n in Bs}})):t.proxy}function a_(t,e=!0){return ue(t)?t.displayName||t.name:t.name||e&&t.__name}function c_(t){return ue(t)&&"__vccOpts"in t}const Ft=(t,e)=>Ym(t,e,qo);function tp(t,e,n){const r=arguments.length;return r===2?De(e)&&!ce(e)?go(e)?wt(t,null,[e]):wt(t,e):wt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&go(n)&&(n=[n]),wt(t,e,n))}const l_="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ic;const oh=typeof window<"u"&&window.trustedTypes;if(oh)try{ic=oh.createPolicy("vue",{createHTML:t=>t})}catch{}const np=ic?t=>ic.createHTML(t):t=>t,u_="http://www.w3.org/2000/svg",h_="http://www.w3.org/1998/Math/MathML",cn=typeof document<"u"?document:null,ah=cn&&cn.createElement("template"),d_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?cn.createElementNS(u_,t):e==="mathml"?cn.createElementNS(h_,t):n?cn.createElement(t,{is:n}):cn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>cn.createTextNode(t),createComment:t=>cn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>cn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ah.innerHTML=np(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=ah.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},f_=Symbol("_vtc");function p_(t,e,n){const r=t[f_];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _o=Symbol("_vod"),rp=Symbol("_vsh"),sp={beforeMount(t,{value:e},{transition:n}){t[_o]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Rs(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Rs(t,!0),r.enter(t)):r.leave(t,()=>{Rs(t,!1)}):Rs(t,e))},beforeUnmount(t,{value:e}){Rs(t,e)}};function Rs(t,e){t.style.display=e?t[_o]:"none",t[rp]=!e}const g_=Symbol(""),m_=/(^|;)\s*display\s*:/;function __(t,e,n){const r=t.style,s=$e(n);let i=!1;if(n&&!s){if(e)if($e(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&to(r,c,"")}else for(const o in e)n[o]==null&&to(r,o,"");for(const o in n)o==="display"&&(i=!0),to(r,o,n[o])}else if(s){if(e!==n){const o=r[g_];o&&(n+=";"+o),r.cssText=n,i=m_.test(n)}}else e&&t.removeAttribute("style");_o in t&&(t[_o]=i?r.display:"",t[rp]&&(r.display="none"))}const ch=/\s*!important$/;function to(t,e,n){if(ce(n))n.forEach(r=>to(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=v_(t,e);ch.test(n)?t.setProperty(vr(r),n.replace(ch,""),"important"):t[r]=n}}const lh=["Webkit","Moz","ms"],Da={};function v_(t,e){const n=Da[e];if(n)return n;let r=Nt(e);if(r!=="filter"&&r in t)return Da[e]=r;r=Uo(r);for(let s=0;s<lh.length;s++){const i=lh[s]+r;if(i in t)return Da[e]=i}return e}const uh="http://www.w3.org/1999/xlink";function hh(t,e,n,r,s,i=wm(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(uh,e.slice(6,e.length)):t.setAttributeNS(uh,e,n):n==null||i&&!Xd(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function dh(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?np(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(o!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=Xd(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function y_(t,e,n,r){t.addEventListener(e,n,r)}function w_(t,e,n,r){t.removeEventListener(e,n,r)}const fh=Symbol("_vei");function E_(t,e,n,r,s=null){const i=t[fh]||(t[fh]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=T_(e);if(r){const h=i[e]=A_(r,s);y_(t,c,h,l)}else o&&(w_(t,c,o,l),i[e]=void 0)}}const ph=/(?:Once|Passive|Capture)$/;function T_(t){let e;if(ph.test(t)){e={};let r;for(;r=t.match(ph);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vr(t.slice(2)),e]}let Oa=0;const I_=Promise.resolve(),b_=()=>Oa||(I_.then(()=>Oa=0),Oa=Date.now());function A_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Xt(S_(r,n.value),e,5,[r])};return n.value=t,n.attached=b_(),n}function S_(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const gh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,C_=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?p_(t,r,o):e==="style"?__(t,n,r):Lo(e)?Oc(e)||E_(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):R_(t,e,r,o))?(dh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hh(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!$e(r))?dh(t,Nt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hh(t,e,r,o))};function R_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&gh(e)&&ue(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gh(e)&&$e(n)?!1:e in t}const P_=et({patchProp:C_},d_);let mh;function k_(){return mh||(mh=N1(P_))}const x_=(...t)=>{const e=k_().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=D_(r);if(!s)return;const i=e._component;!ue(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,V_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function V_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function D_(t){return $e(t)?document.querySelector(t):t}const Yn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},O_={};function N_(t,e){const n=v1("router-view");return ze(),Jf(n)}const ip=Yn(O_,[["render",N_]]);function L_(){return op().__VUE_DEVTOOLS_GLOBAL_HOOK__}function op(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const M_=typeof Proxy=="function",F_="devtools-plugin:setup",U_="plugin:settings:set";let Pr,oc;function B_(){var t;return Pr!==void 0||(typeof window<"u"&&window.performance?(Pr=!0,oc=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Pr=!0,oc=globalThis.perf_hooks.performance):Pr=!1),Pr}function j_(){return B_()?oc.now():Date.now()}class $_{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const c=e.settings[o];r[o]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),c=JSON.parse(o);Object.assign(i,c)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return j_()}},n&&n.on(U_,(o,c)=>{o===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(o,c)=>this.target?this.target.on[c]:(...l)=>{this.onQueue.push({method:c,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...l)=>(this.targetQueue.push({method:c,args:l,resolve:()=>{}}),this.fallbacks[c](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:c,args:l,resolve:h})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function z_(t,e){const n=t,r=op(),s=L_(),i=M_&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(F_,t,e);else{const o=i?new $_(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var H_="store";function as(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function ap(t){return t!==null&&typeof t=="object"}function G_(t){return t&&typeof t.then=="function"}function q_(t,e){return function(){return t(e)}}function cp(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function lp(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Ko(t,n,[],t._modules.root,!0),Jc(t,n,e)}function Jc(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,i={};as(s,function(o,c){i[c]=q_(o,t),Object.defineProperty(t.getters,c,{get:function(){return i[c]()},enumerable:!0})}),t._state=di({data:e}),t.strict&&J_(t),r&&n&&t._withCommit(function(){r.data=null})}function Ko(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var c=Xc(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){c[l]=r.state})}var h=r.context=W_(t,o,n);r.forEachMutation(function(d,p){var m=o+p;K_(t,m,d,h)}),r.forEachAction(function(d,p){var m=d.root?p:o+p,v=d.handler||d;Q_(t,m,v,h)}),r.forEachGetter(function(d,p){var m=o+p;Y_(t,m,d,h)}),r.forEachChild(function(d,p){Ko(t,e,n.concat(p),d,s)})}function W_(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,c){var l=vo(i,o,c),h=l.payload,d=l.options,p=l.type;return(!d||!d.root)&&(p=e+p),t.dispatch(p,h)},commit:r?t.commit:function(i,o,c){var l=vo(i,o,c),h=l.payload,d=l.options,p=l.type;(!d||!d.root)&&(p=e+p),t.commit(p,h,d)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return up(t,e)}},state:{get:function(){return Xc(t.state,n)}}}),s}function up(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function K_(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function Q_(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var c=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return G_(c)||(c=Promise.resolve(c)),t._devtoolHook?c.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):c})}function Y_(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function J_(t){zr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Xc(t,e){return e.reduce(function(n,r){return n[r]},t)}function vo(t,e,n){return ap(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var X_="vuex bindings",_h="vuex:mutations",Na="vuex:actions",kr="vuex",Z_=0;function e2(t,e){z_({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[X_]},function(n){n.addTimelineLayer({id:_h,label:"Vuex Mutations",color:vh}),n.addTimelineLayer({id:Na,label:"Vuex Actions",color:vh}),n.addInspector({id:kr,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===kr)if(r.filter){var s=[];pp(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[fp(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===kr){var s=r.nodeId;up(e,s),r.state=r2(i2(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===kr){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(kr),n.sendInspectorState(kr),n.addTimelineEvent({layerId:_h,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=Z_++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Na,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Na,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var vh=8702998,t2=6710886,n2=16777215,hp={label:"namespaced",textColor:n2,backgroundColor:t2};function dp(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function fp(t,e){return{id:e||"root",label:dp(e),tags:t.namespaced?[hp]:[],children:Object.keys(t._children).map(function(n){return fp(t._children[n],e+n+"/")})}}function pp(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[hp]:[]}),Object.keys(e._children).forEach(function(s){pp(t,e._children[s],n,r+s+"/")})}function r2(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=s2(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?dp(o):o,editable:!1,value:ac(function(){return i[o]})}})}return s}function s2(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=ac(function(){return t[n]})}else e[n]=ac(function(){return t[n]})}),e}function i2(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function ac(t){try{return t()}catch(e){return e}}var zt=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},gp={namespaced:{configurable:!0}};gp.namespaced.get=function(){return!!this._rawModule.namespaced};zt.prototype.addChild=function(e,n){this._children[e]=n};zt.prototype.removeChild=function(e){delete this._children[e]};zt.prototype.getChild=function(e){return this._children[e]};zt.prototype.hasChild=function(e){return e in this._children};zt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};zt.prototype.forEachChild=function(e){as(this._children,e)};zt.prototype.forEachGetter=function(e){this._rawModule.getters&&as(this._rawModule.getters,e)};zt.prototype.forEachAction=function(e){this._rawModule.actions&&as(this._rawModule.actions,e)};zt.prototype.forEachMutation=function(e){this._rawModule.mutations&&as(this._rawModule.mutations,e)};Object.defineProperties(zt.prototype,gp);var yr=function(e){this.register([],e,!1)};yr.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};yr.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};yr.prototype.update=function(e){mp([],this.root,e)};yr.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new zt(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&as(n.modules,function(c,l){s.register(e.concat(l),c,r)})};yr.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};yr.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function mp(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;mp(t.concat(r),e.getChild(r),n.modules[r])}}function o2(t){return new Et(t)}var Et=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new yr(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var o=this,c=this,l=c.dispatch,h=c.commit;this.dispatch=function(m,v){return l.call(o,m,v)},this.commit=function(m,v,P){return h.call(o,m,v,P)},this.strict=s;var d=this._modules.root.state;Ko(this,d,[],this._modules.root),Jc(this,d),r.forEach(function(p){return p(n)})},Zc={state:{configurable:!0}};Et.prototype.install=function(e,n){e.provide(n||H_,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&e2(e,this)};Zc.state.get=function(){return this._state.data};Zc.state.set=function(t){};Et.prototype.commit=function(e,n,r){var s=this,i=vo(e,n,r),o=i.type,c=i.payload,l={type:o,payload:c},h=this._mutations[o];h&&(this._withCommit(function(){h.forEach(function(p){p(c)})}),this._subscribers.slice().forEach(function(d){return d(l,s.state)}))};Et.prototype.dispatch=function(e,n){var r=this,s=vo(e,n),i=s.type,o=s.payload,c={type:i,payload:o},l=this._actions[i];if(l){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(c,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(d){return d(o)})):l[0](o);return new Promise(function(d,p){h.then(function(m){try{r._actionSubscribers.filter(function(v){return v.after}).forEach(function(v){return v.after(c,r.state)})}catch{}d(m)},function(m){try{r._actionSubscribers.filter(function(v){return v.error}).forEach(function(v){return v.error(c,r.state,m)})}catch{}p(m)})})}};Et.prototype.subscribe=function(e,n){return cp(e,this._subscribers,n)};Et.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return cp(r,this._actionSubscribers,n)};Et.prototype.watch=function(e,n,r){var s=this;return zr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Et.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Et.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Ko(this,this.state,e,this._modules.get(e),r.preserveState),Jc(this,this.state)};Et.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Xc(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),lp(this)};Et.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Et.prototype.hotUpdate=function(e){this._modules.update(e),lp(this,!0)};Et.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Et.prototype,Zc);var el=vp(function(t,e){var n={};return _p(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!yp(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),a2=vp(function(t,e){var n={};return _p(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var c=[],l=arguments.length;l--;)c[l]=arguments[l];var h=this.$store.dispatch;if(t){var d=yp(this.$store,"mapActions",t);if(!d)return;h=d.context.dispatch}return typeof i=="function"?i.apply(this,[h].concat(c)):h.apply(this.$store,[i].concat(c))}}),n});function _p(t){return c2(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function c2(t){return Array.isArray(t)||ap(t)}function vp(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function yp(t,e,n){var r=t._modulesNamespaceMap[n];return r}var yh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},l2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ep={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,h=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|h>>6,v=h&63;l||(v=64,o||(m=64)),r.push(n[d],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||p==null)throw new u2;const m=i<<2|c>>4;if(r.push(m),h!==64){const v=c<<4&240|h>>2;if(r.push(v),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h2=function(t){const e=wp(t);return Ep.encodeByteArray(e,!0)},yo=function(t){return h2(t).replace(/\./g,"")},Tp=function(t){try{return Ep.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=()=>d2().__FIREBASE_DEFAULTS__,p2=()=>{if(typeof process>"u"||typeof yh>"u")return;const t=yh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tp(t[1]);return e&&JSON.parse(e)},Qo=()=>{try{return f2()||p2()||g2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ip=t=>{var e,n;return(n=(e=Qo())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},m2=t=>{const e=Ip(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bp=()=>{var t;return(t=Qo())===null||t===void 0?void 0:t.config},Ap=t=>{var e;return(e=Qo())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yo(JSON.stringify(n)),yo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function w2(){var t;const e=(t=Qo())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A2(){return!w2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S2(){try{return typeof indexedDB=="object"}catch{return!1}}function C2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="FirebaseError";class In extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=R2,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gi.prototype.create)}}class gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P2(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new In(s,c,r)}}function P2(t,e){return t.replace(k2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k2=/\{\$([^}]+)}/g;function x2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wh(i)&&wh(o)){if(!wo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V2(t,e){const n=new D2(t,e);return n.subscribe.bind(n)}class D2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");O2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=La),s.error===void 0&&(s.error=La),s.complete===void 0&&(s.complete=La);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function La(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){return t&&t._delegate?t._delegate:t}class fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M2(e))try{this.getOrInitializeService({instanceIdentifier:sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sr){return this.instances.has(e)}getOptions(e=sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sr){return this.component?this.component.multipleInstances?e:sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L2(t){return t===sr?void 0:t}function M2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new N2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const U2={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},B2=me.INFO,j2={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},$2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=j2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tl{constructor(e){this.name=e,this._logLevel=B2,this._logHandler=$2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const z2=(t,e)=>e.some(n=>t instanceof n);let Eh,Th;function H2(){return Eh||(Eh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return Th||(Th=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sp=new WeakMap,cc=new WeakMap,Cp=new WeakMap,Ma=new WeakMap,nl=new WeakMap;function q2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Un(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sp.set(n,t)}).catch(()=>{}),nl.set(e,t),e}function W2(t){if(cc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cc.set(t,e)}let lc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K2(t){lc=t(lc)}function Q2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fa(this),e,...n);return Cp.set(r,e.sort?e.sort():[e]),Un(r)}:G2().includes(t)?function(...e){return t.apply(Fa(this),e),Un(Sp.get(this))}:function(...e){return Un(t.apply(Fa(this),e))}}function Y2(t){return typeof t=="function"?Q2(t):(t instanceof IDBTransaction&&W2(t),z2(t,H2())?new Proxy(t,lc):t)}function Un(t){if(t instanceof IDBRequest)return q2(t);if(Ma.has(t))return Ma.get(t);const e=Y2(t);return e!==t&&(Ma.set(t,e),nl.set(e,t)),e}const Fa=t=>nl.get(t);function J2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Un(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Un(o.result),l.oldVersion,l.newVersion,Un(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const X2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],Ua=new Map;function Ih(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ua.get(e))return Ua.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X2.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&l.done]))[0]};return Ua.set(e,i),i}K2(t=>({...t,get:(e,n,r)=>Ih(e,n)||t.get(e,n,r),has:(e,n)=>!!Ih(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uc="@firebase/app",bh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new tl("@firebase/app"),nv="@firebase/app-compat",rv="@firebase/analytics-compat",sv="@firebase/analytics",iv="@firebase/app-check-compat",ov="@firebase/app-check",av="@firebase/auth",cv="@firebase/auth-compat",lv="@firebase/database",uv="@firebase/data-connect",hv="@firebase/database-compat",dv="@firebase/functions",fv="@firebase/functions-compat",pv="@firebase/installations",gv="@firebase/installations-compat",mv="@firebase/messaging",_v="@firebase/messaging-compat",vv="@firebase/performance",yv="@firebase/performance-compat",wv="@firebase/remote-config",Ev="@firebase/remote-config-compat",Tv="@firebase/storage",Iv="@firebase/storage-compat",bv="@firebase/firestore",Av="@firebase/vertexai-preview",Sv="@firebase/firestore-compat",Cv="firebase",Rv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="[DEFAULT]",Pv={[uc]:"fire-core",[nv]:"fire-core-compat",[sv]:"fire-analytics",[rv]:"fire-analytics-compat",[ov]:"fire-app-check",[iv]:"fire-app-check-compat",[av]:"fire-auth",[cv]:"fire-auth-compat",[lv]:"fire-rtdb",[uv]:"fire-data-connect",[hv]:"fire-rtdb-compat",[dv]:"fire-fn",[fv]:"fire-fn-compat",[pv]:"fire-iid",[gv]:"fire-iid-compat",[mv]:"fire-fcm",[_v]:"fire-fcm-compat",[vv]:"fire-perf",[yv]:"fire-perf-compat",[wv]:"fire-rc",[Ev]:"fire-rc-compat",[Tv]:"fire-gcs",[Iv]:"fire-gcs-compat",[bv]:"fire-fst",[Sv]:"fire-fst-compat",[Av]:"fire-vertex","fire-js":"fire-js",[Cv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Map,kv=new Map,dc=new Map;function Ah(t,e){try{t.container.addComponent(e)}catch(n){vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yr(t){const e=t.name;if(dc.has(e))return vn.debug(`There were multiple attempts to register component ${e}.`),!1;dc.set(e,t);for(const n of Eo.values())Ah(n,t);for(const n of kv.values())Ah(n,t);return!0}function rl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bn=new gi("app","Firebase",xv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=Rv;function Rp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Bn.create("bad-app-name",{appName:String(s)});if(n||(n=bp()),!n)throw Bn.create("no-options");const i=Eo.get(s);if(i){if(wo(n,i.options)&&wo(r,i.config))return i;throw Bn.create("duplicate-app",{appName:s})}const o=new F2(s);for(const l of dc.values())o.addComponent(l);const c=new Vv(n,r,o);return Eo.set(s,c),c}function Pp(t=hc){const e=Eo.get(t);if(!e&&t===hc&&bp())return Rp();if(!e)throw Bn.create("no-app",{appName:t});return e}function jn(t,e,n){var r;let s=(r=Pv[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vn.warn(c.join(" "));return}Yr(new fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="firebase-heartbeat-database",Ov=1,ei="firebase-heartbeat-store";let Ba=null;function kp(){return Ba||(Ba=J2(Dv,Ov,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ei)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bn.create("idb-open",{originalErrorMessage:t.message})})),Ba}async function Nv(t){try{const n=(await kp()).transaction(ei),r=await n.objectStore(ei).get(xp(t));return await n.done,r}catch(e){if(e instanceof In)vn.warn(e.message);else{const n=Bn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vn.warn(n.message)}}}async function Sh(t,e){try{const r=(await kp()).transaction(ei,"readwrite");await r.objectStore(ei).put(e,xp(t)),await r.done}catch(n){if(n instanceof In)vn.warn(n.message);else{const r=Bn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vn.warn(r.message)}}}function xp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=1024,Mv=30*24*60*60*1e3;class Fv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ch();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Mv}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ch(),{heartbeatsToSend:r,unsentEntries:s}=Uv(this._heartbeatsCache.heartbeats),i=yo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return vn.warn(n),""}}}function Ch(){return new Date().toISOString().substring(0,10)}function Uv(t,e=Lv){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S2()?C2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rh(t){return yo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){Yr(new fr("platform-logger",e=>new ev(e),"PRIVATE")),Yr(new fr("heartbeat",e=>new Fv(e),"PRIVATE")),jn(uc,bh,t),jn(uc,bh,"esm2017"),jn("fire-js","")}jv("");var $v="firebase",zv="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn($v,zv,"app");function sl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hv=Vp,Dp=new gi("auth","Firebase",Vp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new tl("@firebase/auth");function Gv(t,...e){To.logLevel<=me.WARN&&To.warn(`Auth (${cs}): ${t}`,...e)}function no(t,...e){To.logLevel<=me.ERROR&&To.error(`Auth (${cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw ol(t,...e)}function jt(t,...e){return ol(t,...e)}function il(t,e,n){const r=Object.assign(Object.assign({},Hv()),{[e]:n});return new gi("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return il(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),il(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ol(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dp.create(t,...e)}function ie(t,e,...n){if(!t)throw ol(e,...n)}function dn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw no(e),new Error(e)}function yn(t,e){t||dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wv(){return Ph()==="http:"||Ph()==="https:"}function Ph(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wv()||T2()||"connection"in navigator)?navigator.onLine:!0}function Qv(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.shortDelay=e,this.longDelay=n,yn(n>e,"Short delay should be less than long delay!"),this.isMobile=y2()||I2()}get(){return Kv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e){yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new _i(3e4,6e4);function cl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ls(t,e,n,r,s={}){return Np(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=mi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},i);return E2()||(h.referrerPolicy="no-referrer"),Op.fetch()(Lp(t,t.config.apiHost,n,c),h)})}async function Np(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yv),e);try{const s=new Zv(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wi(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wi(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wi(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wi(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw il(t,d,h);en(t,d)}}catch(s){if(s instanceof In)throw s;en(t,"network-request-failed",{message:String(s)})}}async function Xv(t,e,n,r,s={}){const i=await ls(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Lp(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?al(t.config,s):`${t.config.apiScheme}://${s}`}class Zv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),Jv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wi(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(t,e){return ls(t,"POST","/v1/accounts:delete",e)}async function Mp(t,e){return ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ty(t,e=!1){const n=Zt(t),r=await n.getIdToken(e),s=ll(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$s(ja(s.auth_time)),issuedAtTime:$s(ja(s.iat)),expirationTime:$s(ja(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ja(t){return Number(t)*1e3}function ll(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return no("JWT malformed, contained fewer than 3 sections"),null;try{const s=Tp(n);return s?JSON.parse(s):(no("Failed to decode base64 JWT payload"),null)}catch(s){return no("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kh(t){const e=ll(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof In&&ny(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ny({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$s(this.lastLoginAt),this.creationTime=$s(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ti(t,Mp(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Fp(i.providerUserInfo):[],c=iy(t.providerData,o),l=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),d=l?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function sy(t){const e=Zt(t);await Io(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iy(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Fp(t){return t.map(e=>{var{providerId:n}=e,r=sl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oy(t,e){const n=await Np(t,{},async()=>{const r=mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Lp(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Op.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ay(t,e){return ls(t,"POST","/v2/accounts:revokeToken",cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=kh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oy(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Gr;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gr,this.toJSON())}_performRefresh(){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=sl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ry(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ti(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ty(this,e)}reload(){return sy(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Io(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await ti(this,ey(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,l,h,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,$=(h=n.createdAt)!==null&&h!==void 0?h:void 0,B=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:q,isAnonymous:he,providerData:fe,stsTokenManager:I}=n;ie(H&&I,e,"internal-error");const y=Gr.fromJSON(this.name,I);ie(typeof H=="string",e,"internal-error"),kn(p,e.name),kn(m,e.name),ie(typeof q=="boolean",e,"internal-error"),ie(typeof he=="boolean",e,"internal-error"),kn(v,e.name),kn(P,e.name),kn(x,e.name),kn(O,e.name),kn($,e.name),kn(B,e.name);const T=new fn({uid:H,auth:e,email:m,emailVerified:q,displayName:p,isAnonymous:he,photoURL:P,phoneNumber:v,tenantId:x,stsTokenManager:y,createdAt:$,lastLoginAt:B});return fe&&Array.isArray(fe)&&(T.providerData=fe.map(b=>Object.assign({},b))),O&&(T._redirectEventId=O),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gr;s.updateFromServerResponse(n);const i=new fn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Io(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Fp(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Gr;c.updateFromIdToken(r);const l=new fn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new pc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map;function pn(t){yn(t instanceof Function,"Expected a class definition");let e=xh.get(t);return e?(yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Up.type="NONE";const Vh=Up;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e,n){return`firebase:${t}:${e}:${n}`}class qr{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ro(this.userKey,s.apiKey,i),this.fullPersistenceKey=ro("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qr(pn(Vh),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||pn(Vh);const o=ro(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const d=await h._get(o);if(d){const p=fn._fromJSON(e,d);h!==i&&(c=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new qr(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new qr(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gp(e))return"Blackberry";if(qp(e))return"Webos";if(jp(e))return"Safari";if((e.includes("chrome/")||$p(e))&&!e.includes("edge/"))return"Chrome";if(Hp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Bp(t=ft()){return/firefox\//i.test(t)}function jp(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $p(t=ft()){return/crios\//i.test(t)}function zp(t=ft()){return/iemobile/i.test(t)}function Hp(t=ft()){return/android/i.test(t)}function Gp(t=ft()){return/blackberry/i.test(t)}function qp(t=ft()){return/webos/i.test(t)}function ul(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cy(t=ft()){var e;return ul(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ly(){return b2()&&document.documentMode===10}function Wp(t=ft()){return ul(t)||Hp(t)||qp(t)||Gp(t)||/windows phone/i.test(t)||zp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e=[]){let n;switch(t){case"Browser":n=Dh(ft());break;case"Worker":n=`${Dh(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hy(t,e={}){return ls(t,"GET","/v2/passwordPolicy",cl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=6;class fy{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dy,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oh(this),this.idTokenSubscription=new Oh(this),this.beforeStateQueue=new uy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mp(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===c)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Io(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qv()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(lr(this));const n=e?Zt(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hy(this),n=new fy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ay(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pn(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await qr.create(this,[pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Gv(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yo(t){return Zt(t)}class Oh{constructor(e){this.auth=e,this.observer=null,this.addObserver=V2(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gy(t){hl=t}function my(t){return hl.loadJS(t)}function _y(){return hl.gapiScript}function vy(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){const n=rl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(wo(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function wy(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ey(t,e,n){const r=Yo(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Qp(e),{host:o,port:c}=Ty(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Iy()}function Qp(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ty(t){const e=Qp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Nh(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Nh(o)}}}function Nh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Iy(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,n){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wr(t,e){return Xv(t,"POST","/v1/accounts:signInWithIdp",cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="http://localhost";class pr extends Yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=sl(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new pr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wr(e,n)}buildRequest(){const e={requestUri:by,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends dl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends vi{constructor(){super("facebook.com")}static credential(e){return pr._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nn.credential(e.oauthAccessToken)}catch{return null}}}Nn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends vi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pr._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return un.credentialFromTaggedObject(e)}static credentialFromError(e){return un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return un.credential(n,r)}catch{return null}}}un.GOOGLE_SIGN_IN_METHOD="google.com";un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends vi{constructor(){super("github.com")}static credential(e){return pr._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ln.credential(e.oauthAccessToken)}catch{return null}}}Ln.GITHUB_SIGN_IN_METHOD="github.com";Ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends vi{constructor(){super("twitter.com")}static credential(e,n){return pr._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mn.credential(n,r)}catch{return null}}}Mn.TWITTER_SIGN_IN_METHOD="twitter.com";Mn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await fn._fromIdTokenResponse(e,r,s),o=Lh(r);return new Jr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Lh(r);return new Jr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Lh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends In{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bo(e,n,r,s)}}function Jp(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bo._fromErrorAndOperation(t,i,e,r):i})}async function Ay(t,e,n=!1){const r=await ti(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t,e,n=!1){const{auth:r}=t;if(hn(r.app))return Promise.reject(lr(r));const s="reauthenticate";try{const i=await ti(t,Jp(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=ll(i.idToken);ie(o,r,"internal-error");const{sub:c}=o;return ie(t.uid===c,r,"user-mismatch"),Jr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(t,e,n=!1){if(hn(t.app))return Promise.reject(lr(t));const r="signIn",s=await Jp(t,r,e),i=await Jr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Ry(t,e,n,r){return Zt(t).onIdTokenChanged(e,n,r)}function Py(t,e,n){return Zt(t).beforeAuthStateChanged(e,n)}const Ao="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ao,"1"),this.storage.removeItem(Ao),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=1e3,xy=10;class Zp extends Xp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ly()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xy):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ky)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zp.type="LOCAL";const Vy=Zp;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends Xp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}e0.type="SESSION";const t0=e0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Jo(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),l=await Dy(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const h=fl("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return window}function Ny(t){Qt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){return typeof Qt().WorkerGlobalScope<"u"&&typeof Qt().importScripts=="function"}async function Ly(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function My(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Fy(){return n0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="firebaseLocalStorageDb",Uy=1,So="firebaseLocalStorage",s0="fbase_key";class yi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xo(t,e){return t.transaction([So],e?"readwrite":"readonly").objectStore(So)}function By(){const t=indexedDB.deleteDatabase(r0);return new yi(t).toPromise()}function gc(){const t=indexedDB.open(r0,Uy);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(So,{keyPath:s0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(So)?e(r):(r.close(),await By(),e(await gc()))})})}async function Mh(t,e,n){const r=Xo(t,!0).put({[s0]:e,value:n});return new yi(r).toPromise()}async function jy(t,e){const n=Xo(t,!1).get(e),r=await new yi(n).toPromise();return r===void 0?null:r.value}function Fh(t,e){const n=Xo(t,!0).delete(e);return new yi(n).toPromise()}const $y=800,zy=3;class i0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zy)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jo._getInstance(Fy()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ly(),!this.activeServiceWorker)return;this.sender=new Oy(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||My()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gc();return await Mh(e,Ao,"1"),await Fh(e,Ao),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mh(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jy(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Xo(s,!1).getAll();return new yi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$y)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i0.type="LOCAL";const Hy=i0;new _i(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t,e){return e?pn(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Yp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gy(t){return Cy(t.auth,new pl(t),t.bypassAuthState)}function qy(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),Sy(n,new pl(t),t.bypassAuthState)}async function Wy(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),Ay(n,new pl(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gy;case"linkViaPopup":case"linkViaRedirect":return Wy;case"reauthViaPopup":case"reauthViaRedirect":return qy;default:en(this.auth,"internal-error")}}resolve(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new _i(2e3,1e4);async function Qy(t,e,n){if(hn(t.app))return Promise.reject(jt(t,"operation-not-supported-in-this-environment"));const r=Yo(t);qv(t,e,dl);const s=o0(r,n);return new or(r,"signInViaPopup",e,s).executeNotNull()}class or extends a0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,or.currentPopupAction&&or.currentPopupAction.cancel(),or.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){yn(this.filter.length===1,"Popup operations only handle one event");const e=fl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,or.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ky.get())};e()}}or.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="pendingRedirect",so=new Map;class Jy extends a0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=so.get(this.auth._key());if(!e){try{const r=await Xy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}so.set(this.auth._key(),e)}return this.bypassAuthState||so.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xy(t,e){const n=tw(e),r=ew(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Zy(t,e){so.set(t._key(),e)}function ew(t){return pn(t._redirectPersistence)}function tw(t){return ro(Yy,t.config.apiKey,t.name)}async function nw(t,e,n=!1){if(hn(t.app))return Promise.reject(lr(t));const r=Yo(t),s=o0(r,e),o=await new Jy(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=10*60*1e3;class sw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!c0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uh(e))}saveEventToCache(e){this.cachedEventUids.add(Uh(e)),this.lastProcessedEventTime=Date.now()}}function Uh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function c0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iw(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(t,e={}){return ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cw=/^https?/;async function lw(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ow(t);for(const n of e)try{if(uw(n))return}catch{}en(t,"unauthorized-domain")}function uw(t){const e=fc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cw.test(n))return!1;if(aw.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new _i(3e4,6e4);function Bh(){const t=Qt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dw(t){return new Promise((e,n)=>{var r,s,i;function o(){Bh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bh(),n(jt(t,"network-request-failed"))},timeout:hw.get()})}if(!((s=(r=Qt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Qt().gapi)===null||i===void 0)&&i.load)o();else{const c=vy("iframefcb");return Qt()[c]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},my(`${_y()}?onload=${c}`).catch(l=>n(l))}}).catch(e=>{throw io=null,e})}let io=null;function fw(t){return io=io||dw(t),io}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new _i(5e3,15e3),gw="__/auth/iframe",mw="emulator/auth/iframe",_w={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yw(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?al(e,mw):`https://${t.config.authDomain}/${gw}`,r={apiKey:e.apiKey,appName:t.name,v:cs},s=vw.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${mi(r).slice(1)}`}async function ww(t){const e=await fw(t),n=Qt().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:yw(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_w,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),c=Qt().setTimeout(()=>{i(o)},pw.get());function l(){Qt().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tw=500,Iw=600,bw="_blank",Aw="http://localhost";class jh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sw(t,e,n,r=Tw,s=Iw){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Ew),{width:r.toString(),height:s.toString(),top:i,left:o}),h=ft().toLowerCase();n&&(c=$p(h)?bw:n),Bp(h)&&(e=e||Aw,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[v,P])=>`${m}${v}=${P},`,"");if(cy(h)&&c!=="_self")return Cw(e||"",c),new jh(null);const p=window.open(e||"",c,d);ie(p,t,"popup-blocked");try{p.focus()}catch{}return new jh(p)}function Cw(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__/auth/handler",Pw="emulator/auth/handler",kw=encodeURIComponent("fac");async function $h(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cs,eventId:s};if(e instanceof dl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",x2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof vi){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const d of Object.keys(c))c[d]===void 0&&delete c[d];const l=await t._getAppCheckToken(),h=l?`#${kw}=${encodeURIComponent(l)}`:"";return`${xw(t)}?${mi(c).slice(1)}${h}`}function xw({config:t}){return t.emulator?al(t,Pw):`https://${t.authDomain}/${Rw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="webStorageSupport";class Vw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t0,this._completeRedirectFn=nw,this._overrideRedirectResult=Zy}async _openPopup(e,n,r,s){var i;yn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await $h(e,n,r,fc(),s);return Sw(e,o,fl())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await $h(e,n,r,fc(),s);return Ny(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ww(e),r=new sw(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($a,{type:$a},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[$a];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wp()||jp()||ul()}}const Dw=Vw;var zh="@firebase/auth",Hh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lw(t){Yr(new fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kp(t)},h=new py(r,s,i,l);return wy(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yr(new fr("auth-internal",e=>{const n=Yo(e.getProvider("auth").getImmediate());return(r=>new Ow(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(zh,Hh,Nw(t)),jn(zh,Hh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=5*60,Fw=Ap("authIdTokenMaxAge")||Mw;let Gh=null;const Uw=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fw)return;const s=n==null?void 0:n.token;Gh!==s&&(Gh=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bw(t=Pp()){const e=rl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yy(t,{popupRedirectResolver:Dw,persistence:[Hy,Vy,t0]}),r=Ap("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Uw(i.toString());Py(n,o,()=>o(n.currentUser)),Ry(n,c=>o(c))}}const s=Ip("auth");return s&&Ey(n,`http://${s}`),n}function jw(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gy({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",jw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lw("Browser");var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,l0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function T(){}T.prototype=y.prototype,I.D=y.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(b,A,S){for(var E=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)E[pt-2]=arguments[pt];return y.prototype[A].apply(b,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,T){T||(T=0);var b=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)b[A]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(A=0;16>A;++A)b[A]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=I.g[0],T=I.g[1],A=I.g[2];var S=I.g[3],E=y+(S^T&(A^S))+b[0]+3614090360&4294967295;y=T+(E<<7&4294967295|E>>>25),E=S+(A^y&(T^A))+b[1]+3905402710&4294967295,S=y+(E<<12&4294967295|E>>>20),E=A+(T^S&(y^T))+b[2]+606105819&4294967295,A=S+(E<<17&4294967295|E>>>15),E=T+(y^A&(S^y))+b[3]+3250441966&4294967295,T=A+(E<<22&4294967295|E>>>10),E=y+(S^T&(A^S))+b[4]+4118548399&4294967295,y=T+(E<<7&4294967295|E>>>25),E=S+(A^y&(T^A))+b[5]+1200080426&4294967295,S=y+(E<<12&4294967295|E>>>20),E=A+(T^S&(y^T))+b[6]+2821735955&4294967295,A=S+(E<<17&4294967295|E>>>15),E=T+(y^A&(S^y))+b[7]+4249261313&4294967295,T=A+(E<<22&4294967295|E>>>10),E=y+(S^T&(A^S))+b[8]+1770035416&4294967295,y=T+(E<<7&4294967295|E>>>25),E=S+(A^y&(T^A))+b[9]+2336552879&4294967295,S=y+(E<<12&4294967295|E>>>20),E=A+(T^S&(y^T))+b[10]+4294925233&4294967295,A=S+(E<<17&4294967295|E>>>15),E=T+(y^A&(S^y))+b[11]+2304563134&4294967295,T=A+(E<<22&4294967295|E>>>10),E=y+(S^T&(A^S))+b[12]+1804603682&4294967295,y=T+(E<<7&4294967295|E>>>25),E=S+(A^y&(T^A))+b[13]+4254626195&4294967295,S=y+(E<<12&4294967295|E>>>20),E=A+(T^S&(y^T))+b[14]+2792965006&4294967295,A=S+(E<<17&4294967295|E>>>15),E=T+(y^A&(S^y))+b[15]+1236535329&4294967295,T=A+(E<<22&4294967295|E>>>10),E=y+(A^S&(T^A))+b[1]+4129170786&4294967295,y=T+(E<<5&4294967295|E>>>27),E=S+(T^A&(y^T))+b[6]+3225465664&4294967295,S=y+(E<<9&4294967295|E>>>23),E=A+(y^T&(S^y))+b[11]+643717713&4294967295,A=S+(E<<14&4294967295|E>>>18),E=T+(S^y&(A^S))+b[0]+3921069994&4294967295,T=A+(E<<20&4294967295|E>>>12),E=y+(A^S&(T^A))+b[5]+3593408605&4294967295,y=T+(E<<5&4294967295|E>>>27),E=S+(T^A&(y^T))+b[10]+38016083&4294967295,S=y+(E<<9&4294967295|E>>>23),E=A+(y^T&(S^y))+b[15]+3634488961&4294967295,A=S+(E<<14&4294967295|E>>>18),E=T+(S^y&(A^S))+b[4]+3889429448&4294967295,T=A+(E<<20&4294967295|E>>>12),E=y+(A^S&(T^A))+b[9]+568446438&4294967295,y=T+(E<<5&4294967295|E>>>27),E=S+(T^A&(y^T))+b[14]+3275163606&4294967295,S=y+(E<<9&4294967295|E>>>23),E=A+(y^T&(S^y))+b[3]+4107603335&4294967295,A=S+(E<<14&4294967295|E>>>18),E=T+(S^y&(A^S))+b[8]+1163531501&4294967295,T=A+(E<<20&4294967295|E>>>12),E=y+(A^S&(T^A))+b[13]+2850285829&4294967295,y=T+(E<<5&4294967295|E>>>27),E=S+(T^A&(y^T))+b[2]+4243563512&4294967295,S=y+(E<<9&4294967295|E>>>23),E=A+(y^T&(S^y))+b[7]+1735328473&4294967295,A=S+(E<<14&4294967295|E>>>18),E=T+(S^y&(A^S))+b[12]+2368359562&4294967295,T=A+(E<<20&4294967295|E>>>12),E=y+(T^A^S)+b[5]+4294588738&4294967295,y=T+(E<<4&4294967295|E>>>28),E=S+(y^T^A)+b[8]+2272392833&4294967295,S=y+(E<<11&4294967295|E>>>21),E=A+(S^y^T)+b[11]+1839030562&4294967295,A=S+(E<<16&4294967295|E>>>16),E=T+(A^S^y)+b[14]+4259657740&4294967295,T=A+(E<<23&4294967295|E>>>9),E=y+(T^A^S)+b[1]+2763975236&4294967295,y=T+(E<<4&4294967295|E>>>28),E=S+(y^T^A)+b[4]+1272893353&4294967295,S=y+(E<<11&4294967295|E>>>21),E=A+(S^y^T)+b[7]+4139469664&4294967295,A=S+(E<<16&4294967295|E>>>16),E=T+(A^S^y)+b[10]+3200236656&4294967295,T=A+(E<<23&4294967295|E>>>9),E=y+(T^A^S)+b[13]+681279174&4294967295,y=T+(E<<4&4294967295|E>>>28),E=S+(y^T^A)+b[0]+3936430074&4294967295,S=y+(E<<11&4294967295|E>>>21),E=A+(S^y^T)+b[3]+3572445317&4294967295,A=S+(E<<16&4294967295|E>>>16),E=T+(A^S^y)+b[6]+76029189&4294967295,T=A+(E<<23&4294967295|E>>>9),E=y+(T^A^S)+b[9]+3654602809&4294967295,y=T+(E<<4&4294967295|E>>>28),E=S+(y^T^A)+b[12]+3873151461&4294967295,S=y+(E<<11&4294967295|E>>>21),E=A+(S^y^T)+b[15]+530742520&4294967295,A=S+(E<<16&4294967295|E>>>16),E=T+(A^S^y)+b[2]+3299628645&4294967295,T=A+(E<<23&4294967295|E>>>9),E=y+(A^(T|~S))+b[0]+4096336452&4294967295,y=T+(E<<6&4294967295|E>>>26),E=S+(T^(y|~A))+b[7]+1126891415&4294967295,S=y+(E<<10&4294967295|E>>>22),E=A+(y^(S|~T))+b[14]+2878612391&4294967295,A=S+(E<<15&4294967295|E>>>17),E=T+(S^(A|~y))+b[5]+4237533241&4294967295,T=A+(E<<21&4294967295|E>>>11),E=y+(A^(T|~S))+b[12]+1700485571&4294967295,y=T+(E<<6&4294967295|E>>>26),E=S+(T^(y|~A))+b[3]+2399980690&4294967295,S=y+(E<<10&4294967295|E>>>22),E=A+(y^(S|~T))+b[10]+4293915773&4294967295,A=S+(E<<15&4294967295|E>>>17),E=T+(S^(A|~y))+b[1]+2240044497&4294967295,T=A+(E<<21&4294967295|E>>>11),E=y+(A^(T|~S))+b[8]+1873313359&4294967295,y=T+(E<<6&4294967295|E>>>26),E=S+(T^(y|~A))+b[15]+4264355552&4294967295,S=y+(E<<10&4294967295|E>>>22),E=A+(y^(S|~T))+b[6]+2734768916&4294967295,A=S+(E<<15&4294967295|E>>>17),E=T+(S^(A|~y))+b[13]+1309151649&4294967295,T=A+(E<<21&4294967295|E>>>11),E=y+(A^(T|~S))+b[4]+4149444226&4294967295,y=T+(E<<6&4294967295|E>>>26),E=S+(T^(y|~A))+b[11]+3174756917&4294967295,S=y+(E<<10&4294967295|E>>>22),E=A+(y^(S|~T))+b[2]+718787259&4294967295,A=S+(E<<15&4294967295|E>>>17),E=T+(S^(A|~y))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var T=y-this.blockSize,b=this.B,A=this.h,S=0;S<y;){if(A==0)for(;S<=T;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<y;)if(b[A++]=I.charCodeAt(S++),A==this.blockSize){s(this,b),A=0;break}}else for(;S<y;)if(b[A++]=I[S++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var T=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=T&255,T/=256;for(this.u(I),I=Array(16),y=T=0;4>y;++y)for(var b=0;32>b;b+=8)I[T++]=this.g[y]>>>b&255;return I};function i(I,y){var T=c;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=y(I)}function o(I,y){this.h=y;for(var T=[],b=!0,A=I.length-1;0<=A;A--){var S=I[A]|0;b&&S==y||(T[A]=S,b=!1)}this.g=T}var c={};function l(I){return-128<=I&&128>I?i(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return O(h(-I));for(var y=[],T=1,b=0;I>=T;b++)y[b]=I/T|0,T*=4294967296;return new o(y,0)}function d(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return O(d(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),b=p,A=0;A<I.length;A+=8){var S=Math.min(8,I.length-A),E=parseInt(I.substring(A,A+S),y);8>S?(S=h(Math.pow(y,S)),b=b.j(S).add(h(E))):(b=b.j(T),b=b.add(h(E)))}return b}var p=l(0),m=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-O(this).m();for(var I=0,y=1,T=0;T<this.g.length;T++){var b=this.i(T);I+=(0<=b?b:4294967296+b)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(x(this))return"-"+O(this).toString(I);for(var y=h(Math.pow(I,6)),T=this,b="";;){var A=q(T,y).g;T=$(T,A.j(y));var S=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=A,P(T))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=$(this,I),x(I)?-1:P(I)?0:1};function O(I){for(var y=I.g.length,T=[],b=0;b<y;b++)T[b]=~I.g[b];return new o(T,~I.h).add(m)}t.abs=function(){return x(this)?O(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0,A=0;A<=y;A++){var S=b+(this.i(A)&65535)+(I.i(A)&65535),E=(S>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);b=E>>>16,S&=65535,E&=65535,T[A]=E<<16|S}return new o(T,T[T.length-1]&-2147483648?-1:0)};function $(I,y){return I.add(O(y))}t.j=function(I){if(P(this)||P(I))return p;if(x(this))return x(I)?O(this).j(O(I)):O(O(this).j(I));if(x(I))return O(this.j(O(I)));if(0>this.l(v)&&0>I.l(v))return h(this.m()*I.m());for(var y=this.g.length+I.g.length,T=[],b=0;b<2*y;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(var A=0;A<I.g.length;A++){var S=this.i(b)>>>16,E=this.i(b)&65535,pt=I.i(A)>>>16,Pt=I.i(A)&65535;T[2*b+2*A]+=E*Pt,B(T,2*b+2*A),T[2*b+2*A+1]+=S*Pt,B(T,2*b+2*A+1),T[2*b+2*A+1]+=E*pt,B(T,2*b+2*A+1),T[2*b+2*A+2]+=S*pt,B(T,2*b+2*A+2)}for(b=0;b<y;b++)T[b]=T[2*b+1]<<16|T[2*b];for(b=y;b<2*y;b++)T[b]=0;return new o(T,0)};function B(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function H(I,y){this.g=I,this.h=y}function q(I,y){if(P(y))throw Error("division by zero");if(P(I))return new H(p,p);if(x(I))return y=q(O(I),y),new H(O(y.g),O(y.h));if(x(y))return y=q(I,O(y)),new H(O(y.g),y.h);if(30<I.g.length){if(x(I)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,b=y;0>=b.l(I);)T=he(T),b=he(b);var A=fe(T,1),S=fe(b,1);for(b=fe(b,2),T=fe(T,2);!P(b);){var E=S.add(b);0>=E.l(I)&&(A=A.add(T),S=E),b=fe(b,1),T=fe(T,1)}return y=$(I,A.j(y)),new H(A,y)}for(A=p;0<=I.l(y);){for(T=Math.max(1,Math.floor(I.m()/y.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=h(T),E=S.j(y);x(E)||0<E.l(I);)T-=b,S=h(T),E=S.j(y);P(S)&&(S=m),A=A.add(S),I=$(I,E)}return new H(A,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)&I.i(b);return new o(T,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)|I.i(b);return new o(T,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],b=0;b<y;b++)T[b]=this.i(b)^I.i(b);return new o(T,this.h^I.h)};function he(I){for(var y=I.g.length+1,T=[],b=0;b<y;b++)T[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(T,I.h)}function fe(I,y){var T=y>>5;y%=32;for(var b=I.g.length-T,A=[],S=0;S<b;S++)A[S]=0<y?I.i(S+T)>>>y|I.i(S+T+1)<<32-y:I.i(S+T);return new o(A,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,ur=o}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u0,Ds,h0,oo,mc,d0,f0,p0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,f){return a==Array.prototype||a==Object.prototype||(a[u]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ki=="object"&&Ki];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,u){if(u)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],u=u(g),u!=g&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}function i(a,u){a instanceof String&&(a+="");var f=0,g=!1,C={next:function(){if(!g&&f<a.length){var k=f++;return{value:u(k,a[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function d(a,u,f){return a.call.apply(a.bind,arguments)}function p(a,u,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(u,C)}}return function(){return a.apply(u,arguments)}}function m(a,u,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function v(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,u){function f(){}f.prototype=u.prototype,a.aa=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,C,k){for(var G=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)G[Pe-2]=arguments[Pe];return u.prototype[C].apply(g,G)}}function x(a){const u=a.length;if(0<u){const f=Array(u);for(let g=0;g<u;g++)f[g]=a[g];return f}return[]}function O(a,u){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(l(g)){const C=a.length||0,k=g.length||0;a.length=C+k;for(let G=0;G<k;G++)a[C+G]=g[G]}else a.push(g)}}class ${constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return q[" "](a),a}q[" "]=function(){};var he=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function fe(a,u,f){for(const g in a)u.call(f,a[g],g,a)}function I(a,u){for(const f in a)u.call(void 0,a[f],f,a)}function y(a){const u={};for(const f in a)u[f]=a[f];return u}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,u){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let k=0;k<T.length;k++)f=T[k],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function A(a){var u=1;a=a.split(":");const f=[];for(;0<u&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function S(a){c.setTimeout(()=>{throw a},0)}function E(){var a=Tt;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class pt{constructor(){this.h=this.g=null}add(u,f){const g=Pt.get();g.set(u,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Pt=new $(()=>new Be,a=>a.reset());class Be{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,pe=!1,Tt=new pt,Lt=()=>{const a=c.Promise.resolve(void 0);_e=()=>{a.then(kt)}};var kt=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(f){S(f)}var u=Pt;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}pe=!1};function Oe(){this.s=this.s,this.C=this.C}Oe.prototype.s=!1,Oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var bn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,u),c.removeEventListener("test",f,u)}catch{}return a}();function Ht(a,u){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(he){e:{try{q(u.nodeName);var C=!0;break e}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:yt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ht.aa.h.call(this)}}P(Ht,Ne);var yt={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var D="closure_listenable_"+(1e6*Math.random()|0),Y=0;function K(a,u,f,g,C){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!g,this.ha=C,this.key=++Y,this.da=this.fa=!1}function J(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ve(a){this.src=a,this.g={},this.h=0}ve.prototype.add=function(a,u,f,g,C){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var G=_(a,u,g,C);return-1<G?(u=a[G],f||(u.fa=!1)):(u=new K(u,this.src,k,!!g,C),u.fa=f,a.push(u)),u};function Re(a,u){var f=u.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,u,void 0),k;(k=0<=C)&&Array.prototype.splice.call(g,C,1),k&&(J(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _(a,u,f,g){for(var C=0;C<a.length;++C){var k=a[C];if(!k.da&&k.listener==u&&k.capture==!!f&&k.ha==g)return C}return-1}var w="closure_lm_"+(1e6*Math.random()|0),R={};function N(a,u,f,g,C){if(Array.isArray(u)){for(var k=0;k<u.length;k++)N(a,u[k],f,g,C);return null}return f=ee(f),a&&a[D]?a.K(u,f,h(g)?!!g.capture:!!g,C):V(a,u,f,!1,g,C)}function V(a,u,f,g,C,k){if(!u)throw Error("Invalid event type");var G=h(C)?!!C.capture:!!C,Pe=te(a);if(Pe||(a[w]=Pe=new ve(a)),f=Pe.add(u,f,g,G,k),f.proxy)return f;if(g=M(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)bn||(C=G),C===void 0&&(C=!1),a.addEventListener(u.toString(),g,C);else if(a.attachEvent)a.attachEvent(j(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M(){function a(f){return u.call(a.src,a.listener,f)}const u=F;return a}function W(a,u,f,g,C){if(Array.isArray(u))for(var k=0;k<u.length;k++)W(a,u[k],f,g,C);else g=h(g)?!!g.capture:!!g,f=ee(f),a&&a[D]?(a=a.i,u=String(u).toString(),u in a.g&&(k=a.g[u],f=_(k,f,g,C),-1<f&&(J(k[f]),Array.prototype.splice.call(k,f,1),k.length==0&&(delete a.g[u],a.h--)))):a&&(a=te(a))&&(u=a.g[u.toString()],a=-1,u&&(a=_(u,f,g,C)),(f=-1<a?u[a]:null)&&z(f))}function z(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[D])Re(u.i,a);else{var f=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(f,g,a.capture):u.detachEvent?u.detachEvent(j(f),g):u.addListener&&u.removeListener&&u.removeListener(g),(f=te(u))?(Re(f,a),f.h==0&&(f.src=null,u[w]=null)):J(a)}}}function j(a){return a in R?R[a]:R[a]="on"+a}function F(a,u){if(a.da)a=!0;else{u=new Ht(u,this);var f=a.listener,g=a.ha||a.src;a.fa&&z(a),a=f.call(g,u)}return a}function te(a){return a=a[w],a instanceof ve?a:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(a){return typeof a=="function"?a:(a[Q]||(a[Q]=function(u){return a.handleEvent(u)}),a[Q])}function X(){Oe.call(this),this.i=new ve(this),this.M=this,this.F=null}P(X,Oe),X.prototype[D]=!0,X.prototype.removeEventListener=function(a,u,f,g){W(this,a,u,f,g)};function se(a,u){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new Ne(u,a);else if(u instanceof Ne)u.target=u.target||a;else{var C=u;u=new Ne(g,a),b(u,C)}if(C=!0,f)for(var k=f.length-1;0<=k;k--){var G=u.g=f[k];C=Ie(G,g,!0,u)&&C}if(G=u.g=a,C=Ie(G,g,!0,u)&&C,C=Ie(G,g,!1,u)&&C,f)for(k=0;k<f.length;k++)G=u.g=f[k],C=Ie(G,g,!1,u)&&C}X.prototype.N=function(){if(X.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var f=a.g[u],g=0;g<f.length;g++)J(f[g]);delete a.g[u],a.h--}}this.F=null},X.prototype.K=function(a,u,f,g){return this.i.add(String(a),u,!1,f,g)},X.prototype.L=function(a,u,f,g){return this.i.add(String(a),u,!0,f,g)};function Ie(a,u,f,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,k=0;k<u.length;++k){var G=u[k];if(G&&!G.da&&G.capture==f){var Pe=G.listener,Qe=G.ha||G.src;G.fa&&Re(a.i,G),C=Pe.call(Qe,g)!==!1&&C}}return C&&!g.defaultPrevented}function we(a,u,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function nt(a){a.g=we(()=>{a.g=null,a.i&&(a.i=!1,nt(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class qe extends Oe{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(a){Oe.call(this),this.h=a,this.g={}}P(Ke,Oe);var rt=[];function An(a){fe(a.g,function(u,f){this.g.hasOwnProperty(f)&&z(u)},a),a.g={}}Ke.prototype.N=function(){Ke.aa.N.call(this),An(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=c.JSON.stringify,gt=c.JSON.parse,xt=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ir(){}Ir.prototype.h=null;function Ql(a){return a.h||(a.h=a.i())}function Yl(){}var ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ua(){Ne.call(this,"d")}P(ua,Ne);function ha(){Ne.call(this,"c")}P(ha,Ne);var Jn={},Jl=null;function Si(){return Jl=Jl||new X}Jn.La="serverreachability";function Xl(a){Ne.call(this,Jn.La,a)}P(Xl,Ne);function gs(a){const u=Si();se(u,new Xl(u))}Jn.STAT_EVENT="statevent";function Zl(a,u){Ne.call(this,Jn.STAT_EVENT,a),this.stat=u}P(Zl,Ne);function mt(a){const u=Si();se(u,new Zl(u,a))}Jn.Ma="timingevent";function eu(a,u){Ne.call(this,Jn.Ma,a),this.size=u}P(eu,Ne);function ms(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function Bg(a,u,f,g,C,k){a.info(function(){if(a.g)if(k)for(var G="",Pe=k.split("&"),Qe=0;Qe<Pe.length;Qe++){var Ee=Pe[Qe].split("=");if(1<Ee.length){var st=Ee[0];Ee=Ee[1];var it=st.split("_");G=2<=it.length&&it[1]=="type"?G+(st+"="+Ee+"&"):G+(st+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+u+`
`+f+`
`+G})}function jg(a,u,f,g,C,k,G){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+u+`
`+f+`
`+k+" "+G})}function br(a,u,f,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+zg(a,f)+(g?" "+g:"")})}function $g(a,u){a.info(function(){return"TIMEOUT: "+u})}_s.prototype.info=function(){};function zg(a,u){if(!a.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var k=C[0];if(k!="noop"&&k!="stop"&&k!="close")for(var G=1;G<C.length;G++)C[G]=""}}}}return Tr(f)}catch{return u}}var Ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},da;function Ri(){}P(Ri,Ir),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},da=new Ri;function Sn(a,u,f,g){this.j=a,this.i=u,this.l=f,this.R=g||1,this.U=new Ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var ru={},fa={};function pa(a,u,f){a.L=1,a.v=Vi(rn(u)),a.m=f,a.P=!0,su(a,null)}function su(a,u){a.F=Date.now(),Pi(a),a.A=rn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),vu(f.i,"t",g),a.C=0,f=a.j.J,a.h=new nu,a.g=Lu(a.j,f?u:null,!a.m),0<a.O&&(a.M=new qe(m(a.Y,a,a.g),a.O)),u=a.U,f=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(rt[0]=C.toString()),C=rt);for(var k=0;k<C.length;k++){var G=N(f,C[k],g||u.handleEvent,!1,u.h||u);if(!G)break;u.g[G.key]=G}u=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),gs(),Bg(a.i,a.u,a.A,a.l,a.R,a.m)}Sn.prototype.ca=function(a){a=a.target;const u=this.M;u&&sn(a)==3?u.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{const it=sn(this.g);var u=this.g.Ba();const Cr=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||it!=4||u==7||(u==8||0>=Cr?gs(3):gs(2)),ga(this);var f=this.g.Z();this.X=f;t:if(iu(this)){var g=Au(this.g);a="";var C=g.length,k=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),vs(this);var G="";break t}this.h.i=new c.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,a+=this.h.i.decode(g[u],{stream:!(k&&u==C-1)});g.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,jg(this.i,this.u,this.A,this.l,this.R,it,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Qe=this.g;if((Pe=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Pe)){var Ee=Pe;break t}}Ee=null}if(f=Ee)br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,f);else{this.o=!1,this.s=3,mt(12),Xn(this),vs(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<G.length;)if(Mt=Hg(this,G),Mt==fa){it==4&&(this.s=4,mt(14),f=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==ru){this.s=4,mt(15),br(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else br(this.i,this.l,Mt,null),ma(this,Mt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||G.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)br(this.i,this.l,G,"[Invalid Chunked Response]"),Xn(this),vs(this);else if(0<G.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Ta(st),st.M=!0,mt(11))}}else br(this.i,this.l,G,null),ma(this,G);it==4&&Xn(this),this.o&&!this.J&&(it==4?Vu(this.j,this):(this.o=!1,Pi(this)))}else am(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Xn(this),vs(this)}}}catch{}finally{}};function iu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Hg(a,u){var f=a.C,g=u.indexOf(`
`,f);return g==-1?fa:(f=Number(u.substring(f,g)),isNaN(f)?ru:(g+=1,g+f>u.length?fa:(u=u.slice(g,g+f),a.C=g+f,u)))}Sn.prototype.cancel=function(){this.J=!0,Xn(this)};function Pi(a){a.S=Date.now()+a.I,ou(a,a.I)}function ou(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ms(m(a.ba,a),u)}function ga(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Sn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?($g(this.i,this.A),this.L!=2&&(gs(),mt(17)),Xn(this),this.s=2,vs(this)):ou(this,this.S-a)};function vs(a){a.j.G==0||a.J||Vu(a.j,a)}function Xn(a){ga(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,An(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function ma(a,u){try{var f=a.j;if(f.G!=0&&(f.g==a||_a(f.h,a))){if(!a.K&&_a(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Fi(f),Li(f);else break e;Ea(f),mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ms(m(f.Za,f),6e3));if(1>=lu(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else er(f,11)}else if((a.K||f.g==a)&&Fi(f),!B(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let Ee=C[u];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];const st=Ee[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));const it=Ee[4];it!=null&&(f.Aa=it,f.j.info("SVER="+f.Aa));const Cr=Ee[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(g=1.5*Cr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Mt=a.g;if(Mt){const Bi=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var k=g.h;k.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(va(k,k.h),k.h=null))}if(g.D){const Ia=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(g.ya=Ia,Ve(g.I,g.D,Ia))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var G=a;if(g.qa=Nu(g,g.J?g.ia:null,g.W),G.K){uu(g.h,G);var Pe=G,Qe=g.L;Qe&&(Pe.I=Qe),Pe.B&&(ga(Pe),Pi(Pe)),g.g=G}else ku(g);0<f.i.length&&Mi(f)}else Ee[0]!="stop"&&Ee[0]!="close"||er(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?er(f,7):wa(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}gs(4)}catch{}}var Gg=class{constructor(a,u){this.g=a,this.map=u}};function au(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lu(a){return a.h?1:a.g?a.g.size:0}function _a(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function va(a,u){a.g?a.g.add(u):a.h=u}function uu(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}au.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const f of a.g.values())u=u.concat(f.D);return u}return x(a.i)}function qg(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],f=a.length,g=0;g<f;g++)u.push(a[g]);return u}u=[],f=0;for(g in a)u[f++]=a[g];return u}function Wg(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var f=0;f<a;f++)u.push(f);return u}u=[],f=0;for(const g in a)u[f++]=g;return u}}}function du(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var f=Wg(a),g=qg(a),C=g.length,k=0;k<C;k++)u.call(void 0,g[k],f&&f[k],a)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kg(a,u){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),C=null;if(0<=g){var k=a[f].substring(0,g);C=a[f].substring(g+1)}else k=a[f];u(k,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zn){this.h=a.h,ki(this,a.j),this.o=a.o,this.g=a.g,xi(this,a.s),this.l=a.l;var u=a.i,f=new Es;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),pu(this,f),this.m=a.m}else a&&(u=String(a).match(fu))?(this.h=!1,ki(this,u[1]||"",!0),this.o=ys(u[2]||""),this.g=ys(u[3]||"",!0),xi(this,u[4]),this.l=ys(u[5]||"",!0),pu(this,u[6]||"",!0),this.m=ys(u[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}Zn.prototype.toString=function(){var a=[],u=this.j;u&&a.push(ws(u,gu,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(ws(u,gu,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ws(f,f.charAt(0)=="/"?Jg:Yg,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ws(f,Zg)),a.join("")};function rn(a){return new Zn(a)}function ki(a,u,f){a.j=f?ys(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function xi(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function pu(a,u,f){u instanceof Es?(a.i=u,em(a.i,a.h)):(f||(u=ws(u,Xg)),a.i=new Es(u,a.h))}function Ve(a,u,f){a.i.set(u,f)}function Vi(a){return Ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ys(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ws(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,Qg),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qg(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gu=/[#\/\?@]/g,Yg=/[#\?:]/g,Jg=/[#\?]/g,Xg=/[#\?@]/g,Zg=/#/g;function Es(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Cn(a){a.g||(a.g=new Map,a.h=0,a.i&&Kg(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=Es.prototype,t.add=function(a,u){Cn(this),this.i=null,a=Ar(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function mu(a,u){Cn(a),u=Ar(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function _u(a,u){return Cn(a),u=Ar(a,u),a.g.has(u)}t.forEach=function(a,u){Cn(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(u,C,g,this)},this)},this)},t.na=function(){Cn(this);const a=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let g=0;g<u.length;g++){const C=a[g];for(let k=0;k<C.length;k++)f.push(u[g])}return f},t.V=function(a){Cn(this);let u=[];if(typeof a=="string")_u(this,a)&&(u=u.concat(this.g.get(Ar(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)u=u.concat(a[f])}return u},t.set=function(a,u){return Cn(this),this.i=null,a=Ar(this,a),_u(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function vu(a,u,f){mu(a,u),0<f.length&&(a.i=null,a.g.set(Ar(a,u),x(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var g=u[f];const k=encodeURIComponent(String(g)),G=this.V(g);for(g=0;g<G.length;g++){var C=k;G[g]!==""&&(C+="="+encodeURIComponent(String(G[g]))),a.push(C)}}return this.i=a.join("&")};function Ar(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function em(a,u){u&&!a.j&&(Cn(a),a.i=null,a.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(mu(this,g),vu(this,C,f))},a)),a.j=u}function tm(a,u){const f=new _s;if(c.Image){const g=new Image;g.onload=v(Rn,f,"TestLoadImage: loaded",!0,u,g),g.onerror=v(Rn,f,"TestLoadImage: error",!1,u,g),g.onabort=v(Rn,f,"TestLoadImage: abort",!1,u,g),g.ontimeout=v(Rn,f,"TestLoadImage: timeout",!1,u,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function nm(a,u){const f=new _s,g=new AbortController,C=setTimeout(()=>{g.abort(),Rn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(k=>{clearTimeout(C),k.ok?Rn(f,"TestPingServer: ok",!0,u):Rn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Rn(f,"TestPingServer: error",!1,u)})}function Rn(a,u,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function rm(){this.g=new xt}function sm(a,u,f){const g=f||"";try{du(a,function(C,k){let G=C;h(C)&&(G=Tr(C)),u.push(g+k+"="+encodeURIComponent(G))})}catch(C){throw u.push(g+"type="+encodeURIComponent("_badmap")),C}}function Di(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Di,Ir),Di.prototype.g=function(){return new Oi(this.l,this.j)},Di.prototype.i=function(a){return function(){return a}}({});function Oi(a,u){X.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Oi,X),t=Oi.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Is(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function yu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Ts(this):Is(this),this.readyState==3&&yu(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ts(this))},t.Qa=function(a){this.g&&(this.response=a,Ts(this))},t.ga=function(){this.g&&Ts(this)};function Ts(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Is(a)}t.setRequestHeader=function(a,u){this.u.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function Is(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wu(a){let u="";return fe(a,function(f,g){u+=g,u+=":",u+=f,u+=`\r
`}),u}function ya(a,u,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=wu(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ve(a,u,f))}function Me(a){X.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Me,X);var im=/^https?$/i,om=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,u,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():da.g(),this.v=this.o?Ql(this.o):Ql(da),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(k){Eu(this,k);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const k of g.keys())f.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(k=>k.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(om,u,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of f)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){Eu(this,k)}};function Eu(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Tu(a),Ni(a)}function Tu(a){a.A||(a.A=!0,se(a,"complete"),se(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,se(this,"complete"),se(this,"abort"),Ni(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Iu(this):this.bb())},t.bb=function(){Iu(this)};function Iu(a){if(a.h&&typeof o<"u"&&(!a.v[1]||sn(a)!=4||a.Z()!=2)){if(a.u&&sn(a)==4)we(a.Ea,0,a);else if(se(a,"readystatechange"),sn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var g;if(g=G===0){var C=String(a.D).match(fu)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!im.test(C?C.toLowerCase():"")}f=g}if(f)se(a,"complete"),se(a,"success");else{a.m=6;try{var k=2<sn(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",Tu(a)}}finally{Ni(a)}}}}function Ni(a,u){if(a.g){bu(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||se(a,"ready");try{f.onreadystatechange=g}catch{}}}function bu(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function sn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),gt(u)}};function Au(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function am(a){const u={};a=(a.g&&2<=sn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(B(a[g]))continue;var f=A(a[g]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const k=u[C]||[];u[C]=k,k.push(f)}I(u,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function Su(a){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,a),this.cb=bs("retryDelaySeedMs",1e4,a),this.Wa=bs("forwardChannelMaxRetries",2,a),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new au(a&&a.concurrentRequestLimit),this.Da=new rm,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(a,u,f,g){mt(0),this.W=a,this.H=u||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Nu(this,null,this.W),Mi(this)};function wa(a){if(Cu(a),a.G==3){var u=a.U++,f=rn(a.I);if(Ve(f,"SID",a.K),Ve(f,"RID",u),Ve(f,"TYPE","terminate"),As(a,f),u=new Sn(a,a.j,u),u.L=2,u.v=Vi(rn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=u.v,f=!0),f||(u.g=Lu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Pi(u)}Ou(a)}function Li(a){a.g&&(Ta(a),a.g.cancel(),a.g=null)}function Cu(a){Li(a),a.u&&(c.clearTimeout(a.u),a.u=null),Fi(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Mi(a){if(!cu(a.h)&&!a.s){a.s=!0;var u=a.Ga;_e||Lt(),pe||(_e(),pe=!0),Tt.add(u,a),a.B=0}}function cm(a,u){return lu(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ms(m(a.Ga,a,u),Du(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Sn(this,this.j,a);let k=this.o;if(this.S&&(k?(k=y(k),b(k,this.S)):k=this.S),this.m!==null||this.O||(C.H=k,k=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Pu(this,C,u),f=rn(this.I),Ve(f,"RID",a),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),As(this,f),k&&(this.O?u="headers="+encodeURIComponent(String(wu(k)))+"&"+u:this.m&&ya(f,this.m,k)),va(this.h,C),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",u),Ve(f,"SID","null"),C.T=!0,pa(C,f,null)):pa(C,f,u),this.G=2}}else this.G==3&&(a?Ru(this,a):this.i.length==0||cu(this.h)||Ru(this))};function Ru(a,u){var f;u?f=u.l:f=a.U++;const g=rn(a.I);Ve(g,"SID",a.K),Ve(g,"RID",f),Ve(g,"AID",a.T),As(a,g),a.m&&a.o&&ya(g,a.m,a.o),f=new Sn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Pu(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),va(a.h,f),pa(f,g,u)}function As(a,u){a.H&&fe(a.H,function(f,g){Ve(u,g,f)}),a.l&&du({},function(f,g){Ve(u,g,f)})}function Pu(a,u,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var C=a.i;let k=-1;for(;;){const G=["count="+f];k==-1?0<f?(k=C[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Pe=!0;for(let Qe=0;Qe<f;Qe++){let Ee=C[Qe].g;const st=C[Qe].map;if(Ee-=k,0>Ee)k=Math.max(0,C[Qe].g-100),Pe=!1;else try{sm(st,G,"req"+Ee+"_")}catch{g&&g(st)}}if(Pe){g=G.join("&");break e}}}return a=a.i.splice(0,f),u.D=a,g}function ku(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;_e||Lt(),pe||(_e(),pe=!0),Tt.add(u,a),a.v=0}}function Ea(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ms(m(a.Fa,a),Du(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ms(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Li(this),xu(this))};function Ta(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function xu(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=rn(a.qa);Ve(u,"RID","rpc"),Ve(u,"SID",a.K),Ve(u,"AID",a.T),Ve(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ve(u,"TO",a.ja),Ve(u,"TYPE","xmlhttp"),As(a,u),a.m&&a.o&&ya(u,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Vi(rn(u)),f.m=null,f.P=!0,su(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Li(this),Ea(this),mt(19))};function Fi(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Vu(a,u){var f=null;if(a.g==u){Fi(a),Ta(a),a.g=null;var g=2}else if(_a(a.h,u))f=u.D,uu(a.h,u),g=1;else return;if(a.G!=0){if(u.o)if(g==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=a.B;g=Si(),se(g,new eu(g,f)),Mi(a)}else ku(a);else if(C=u.s,C==3||C==0&&0<u.X||!(g==1&&cm(a,u)||g==2&&Ea(a)))switch(f&&0<f.length&&(u=a.h,u.i=u.i.concat(f)),C){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function Du(a,u){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*u}function er(a,u){if(a.j.info("Error code "+u),u==2){var f=m(a.fb,a),g=a.Xa;const C=!g;g=new Zn(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ki(g,"https"),Vi(g),C?tm(g.toString(),f):nm(g.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(u),Ou(a),Cu(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Ou(a){if(a.G=0,a.ka=[],a.l){const u=hu(a.h);(u.length!=0||a.i.length!=0)&&(O(a.ka,u),O(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Nu(a,u,f){var g=f instanceof Zn?rn(f):new Zn(f);if(g.g!="")u&&(g.g=u+"."+g.g),xi(g,g.s);else{var C=c.location;g=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var k=new Zn(null);g&&ki(k,g),u&&(k.g=u),C&&xi(k,C),f&&(k.l=f),g=k}return f=a.D,u=a.ya,f&&u&&Ve(g,f,u),Ve(g,"VER",a.la),As(a,g),g}function Lu(a,u,f){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Me(new Di({eb:f})):new Me(a.pa),u.Ha(a.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}t=Mu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ui(){}Ui.prototype.g=function(a,u){return new It(a,u)};function It(a,u){X.call(this),this.g=new Su(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!B(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!B(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Sr(this)}P(It,X),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){wa(this.g)},It.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Tr(a),a=f);u.i.push(new Gg(u.Ya++,a)),u.G==3&&Mi(u)},It.prototype.N=function(){this.g.l=null,delete this.j,wa(this.g),delete this.g,It.aa.N.call(this)};function Fu(a){ua.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}P(Fu,ua);function Uu(){ha.call(this),this.status=1}P(Uu,ha);function Sr(a){this.g=a}P(Sr,Mu),Sr.prototype.ua=function(){se(this.g,"a")},Sr.prototype.ta=function(a){se(this.g,new Fu(a))},Sr.prototype.sa=function(a){se(this.g,new Uu)},Sr.prototype.ra=function(){se(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,p0=function(){return new Ui},f0=function(){return Si()},d0=Jn,mc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,oo=Ci,tu.COMPLETE="complete",h0=tu,Yl.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",X.prototype.listen=X.prototype.K,Ds=Yl,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,u0=Me}).apply(typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{});const Wh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new tl("@firebase/firestore");function Ps(){return gr.logLevel}function Z(t,...e){if(gr.logLevel<=me.DEBUG){const n=e.map(gl);gr.debug(`Firestore (${us}): ${t}`,...n)}}function wn(t,...e){if(gr.logLevel<=me.ERROR){const n=e.map(gl);gr.error(`Firestore (${us}): ${t}`,...n)}}function Xr(t,...e){if(gr.logLevel<=me.WARN){const n=e.map(gl);gr.warn(`Firestore (${us}): ${t}`,...n)}}function gl(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${us}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function Ce(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $w{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class zw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hw{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new g0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new at(e)}}class Gw{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qw{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Gw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ww{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Ww(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Qw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Zr(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ge(0,0))}static max(){return new ae(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ni{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const Yw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends ni{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return Yw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ne(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ne(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Fe.fromString(e))}static fromName(e){return new re(Fe.fromString(e).popFirst(5))}static empty(){return new re(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Fe(e.slice()))}}function Jw(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Hn(s,re.empty(),e)}function Xw(t){return new Hn(t.readTime,t.key,-1)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(ae.min(),re.empty(),-1)}static max(){return new Hn(ae.max(),re.empty(),-1)}}function Zw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==eE)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;n(e[h]).next(d=>{o[h]=d,++c,c===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function nE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ei(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ml.oe=-1;function Zo(t){return t==null}function Co(t){return t===0&&1/t==-1/0}function rE(t){return typeof t=="number"&&Number.isInteger(t)&&!Co(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qi(this.root,e,this.comparator,!0)}}class Qi{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qh(this.data.getIterator())}getIteratorFrom(e){return new Qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Qh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new v0("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const sE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gn(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=sE.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vl(t){const e=t.mapValue.fields.__previous_value__;return _l(e)?vl(e):e}function ri(t){const e=Gn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,s,i,o,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}}class si{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new si("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof si&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_l(t)?4:aE(t)?9007199254740991:oE(t)?10:11:oe()}function tn(t,e){if(t===e)return!0;const n=_r(t);if(n!==_r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ri(t).isEqual(ri(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gn(s.timestampValue),c=Gn(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mr(s.bytesValue).isEqual(mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),c=Ue(i.doubleValue);return o===c?Co(o)===Co(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Kh(o)!==Kh(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!tn(o[l],c[l])))return!1;return!0}(t,e);default:return oe()}}function ii(t,e){return(t.values||[]).find(n=>tn(n,e))!==void 0}function es(t,e){if(t===e)return 0;const n=_r(t),r=_r(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ue(i.integerValue||i.doubleValue),l=Ue(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return Yh(t.timestampValue,e.timestampValue);case 4:return Yh(ri(t),ri(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const c=mr(i),l=mr(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){const d=Te(c[h],l[h]);if(d!==0)return d}return Te(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Te(Ue(i.latitude),Ue(o.latitude));return c!==0?c:Te(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jh(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,l,h,d;const p=i.fields||{},m=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,P=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Te(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((d=P==null?void 0:P.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Jh(v,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Yi.mapValue&&o===Yi.mapValue)return 0;if(i===Yi.mapValue)return 1;if(o===Yi.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=o.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Te(l[p],d[p]);if(m!==0)return m;const v=es(c[l[p]],h[d[p]]);if(v!==0)return v}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw oe()}}function Yh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Gn(t),r=Gn(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function Jh(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=es(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function ts(t){return _c(t)}function _c(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_c(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_c(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function vc(t){return!!t&&"integerValue"in t}function yl(t){return!!t&&"arrayValue"in t}function Xh(t){return!!t&&"nullValue"in t}function Zh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ao(t){return!!t&&"mapValue"in t}function oE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ao(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zs(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=zs(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ao(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ao(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(zs(this.value))}}function y0(t){const e=[];return hs(t.fields,(n,r)=>{const s=new Xe([n]);if(ao(r)){const i=y0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new lt(e,0,ae.min(),ae.min(),ae.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new lt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new lt(e,2,n,ae.min(),ae.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,ae.min(),ae.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.position=e,this.inclusive=n}}function ed(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=es(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function td(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n="asc"){this.field=e,this.dir=n}}function cE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{}class He extends w0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uE(e,n,r):n==="array-contains"?new fE(e,r):n==="in"?new pE(e,r):n==="not-in"?new gE(e,r):n==="array-contains-any"?new mE(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hE(e,r):new dE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(es(n,this.value)):n!==null&&_r(this.value)===_r(n)&&this.matchesComparison(es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends w0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nn(e,n)}matches(e){return E0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function E0(t){return t.op==="and"}function T0(t){return lE(t)&&E0(t)}function lE(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function yc(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+ts(t.value);if(T0(t))return t.filters.map(e=>yc(e)).join(",");{const e=t.filters.map(n=>yc(n)).join(",");return`${t.op}(${e})`}}function I0(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&tn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&I0(o,s.filters[c]),!0):!1}(t,e):void oe()}function b0(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${ts(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(b0).join(" ,")+"}"}(t):"Filter"}class uE extends He{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class hE extends He{constructor(e,n){super(e,"in",n),this.keys=A0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dE extends He{constructor(e,n){super(e,"not-in",n),this.keys=A0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class fE extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yl(n)&&ii(n.arrayValue,this.value)}}class pE extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ii(this.value.arrayValue,n)}}class gE extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ii(this.value.arrayValue,n)}}class mE extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ii(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function nd(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _E(t,e,n,r,s,i,o)}function wl(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ts(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ts(r)).join(",")),e.ue=n}return e.ue}function El(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!td(t.startAt,e.startAt)&&td(t.endAt,e.endAt)}function wc(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vE(t,e,n,r,s,i,o,c){return new ea(t,e,n,r,s,i,o,c)}function Tl(t){return new ea(t)}function rd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yE(t){return t.collectionGroup!==null}function Hs(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ze(Xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Po(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new Po(Xe.keyField(),r))}return e.ce}function Yt(t){const e=le(t);return e.le||(e.le=wE(e,Hs(t))),e.le}function wE(t,e){if(t.limitType==="F")return nd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Po(s.field,i)});const n=t.endAt?new Ro(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ro(t.startAt.position,t.startAt.inclusive):null;return nd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ec(t,e,n){return new ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ta(t,e){return El(Yt(t),Yt(e))&&t.limitType===e.limitType}function S0(t){return`${wl(Yt(t))}|lt:${t.limitType}`}function Vr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>b0(s)).join(", ")}]`),Zo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ts(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ts(s)).join(",")),`Target(${r})`}(Yt(t))}; limitType=${t.limitType})`}function na(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,l){const h=ed(o,c,l);return o.inclusive?h<=0:h<0}(r.startAt,Hs(r),s)||r.endAt&&!function(o,c,l){const h=ed(o,c,l);return o.inclusive?h>=0:h>0}(r.endAt,Hs(r),s))}(t,e)}function EE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C0(t){return(e,n)=>{let r=!1;for(const s of Hs(t)){const i=TE(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TE(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,c){const l=o.data.field(i),h=c.data.field(i);return l!==null&&h!==null?es(l,h):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return _0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Le(re.comparator);function En(){return IE}const R0=new Le(re.comparator);function Os(...t){let e=R0;for(const n of t)e=e.insert(n.key,n);return e}function P0(t){let e=R0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ar(){return Gs()}function k0(){return Gs()}function Gs(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const bE=new Le(re.comparator),AE=new Ze(re.comparator);function ge(...t){let e=AE;for(const n of t)e=e.add(n);return e}const SE=new Ze(Te);function CE(){return SE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Co(e)?"-0":e}}function x0(t){return{integerValue:""+t}}function RE(t,e){return rE(e)?x0(e):Il(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this._=void 0}}function PE(t,e,n){return t instanceof ko?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_l(i)&&(i=vl(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof oi?D0(t,e):t instanceof ai?O0(t,e):function(s,i){const o=V0(s,i),c=sd(o)+sd(s.Pe);return vc(o)&&vc(s.Pe)?x0(c):Il(s.serializer,c)}(t,e)}function kE(t,e,n){return t instanceof oi?D0(t,e):t instanceof ai?O0(t,e):n}function V0(t,e){return t instanceof xo?function(r){return vc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ko extends ra{}class oi extends ra{constructor(e){super(),this.elements=e}}function D0(t,e){const n=N0(e);for(const r of t.elements)n.some(s=>tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ai extends ra{constructor(e){super(),this.elements=e}}function O0(t,e){let n=N0(e);for(const r of t.elements)n=n.filter(s=>!tn(s,r));return{arrayValue:{values:n}}}class xo extends ra{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sd(t){return Ue(t.integerValue||t.doubleValue)}function N0(t){return yl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof oi&&s instanceof oi||r instanceof ai&&s instanceof ai?Zr(r.elements,s.elements,tn):r instanceof xo&&s instanceof xo?tn(r.Pe,s.Pe):r instanceof ko&&s instanceof ko}(t.transform,e.transform)}class VE{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function co(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sa{}function L0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new F0(t.key,_n.none()):new Ti(t.key,t.data,_n.none());{const n=t.data,r=Vt.empty();let s=new Ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wr(t.key,r,new Ut(s.toArray()),_n.none())}}function DE(t,e,n){t instanceof Ti?function(s,i,o){const c=s.value.clone(),l=od(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof wr?function(s,i,o){if(!co(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=od(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(M0(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qs(t,e,n,r){return t instanceof Ti?function(i,o,c,l){if(!co(i.precondition,o))return c;const h=i.value.clone(),d=ad(i.fieldTransforms,l,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof wr?function(i,o,c,l){if(!co(i.precondition,o))return c;const h=ad(i.fieldTransforms,l,o),d=o.data;return d.setAll(M0(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return co(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function OE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=V0(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function id(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zr(r,s,(i,o)=>xE(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ti extends sa{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends sa{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function M0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function od(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,kE(o,c,n[s]))}return r}function ad(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PE(i,o,e))}return r}class F0 extends sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NE extends sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&DE(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=k0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=L0(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,(n,r)=>id(n,r))&&Zr(this.baseMutations,e.baseMutations,(n,r)=>id(n,r))}}class bl{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return bE}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new bl(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ye;function UE(t){switch(t){default:return oe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function U0(t){if(t===void 0)return wn("GRPC error has no .code"),U.UNKNOWN;switch(t){case je.OK:return U.OK;case je.CANCELLED:return U.CANCELLED;case je.UNKNOWN:return U.UNKNOWN;case je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case je.INTERNAL:return U.INTERNAL;case je.UNAVAILABLE:return U.UNAVAILABLE;case je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case je.NOT_FOUND:return U.NOT_FOUND;case je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case je.ABORTED:return U.ABORTED;case je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case je.DATA_LOSS:return U.DATA_LOSS;default:return oe()}}(ye=je||(je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new ur([4294967295,4294967295],0);function cd(t){const e=BE().encode(t),n=new l0;return n.update(e),new Uint8Array(n.digest())}function ld(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ur([n,r],0),new ur([s,i],0)]}class Al{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ns(`Invalid padding: ${n}`);if(r<0)throw new Ns(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ns(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ns(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ur.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ur.fromNumber(r)));return s.compare(jE)===1&&(s=new ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cd(e),[r,s]=ld(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Al(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=cd(e),[r,s]=ld(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ns extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ii.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ia(ae.min(),s,new Le(Te),En(),ge())}}class Ii{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ii(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class B0{constructor(e,n){this.targetId=e,this.me=n}}class j0{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ud{constructor(){this.fe=0,this.ge=dd(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Ii(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dd()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $E{constructor(e){this.Le=e,this.Be=new Map,this.ke=En(),this.qe=hd(),this.Qe=new Le(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(wc(i))if(r===0){const o=new re(i.path);this.Ue(n,o,lt.newNoDocument(o,ae.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=mr(r).toUint8Array()}catch(l){if(l instanceof v0)return Xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Al(o,s,i)}catch(l){return Xr(l instanceof Ns?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&wc(c.target)){const l=new re(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,lt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ge();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(l=>{const h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ia(e,n,this.Qe,this.ke,r);return this.ke=En(),this.qe=hd(),this.Qe=new Le(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ud,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ud),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hd(){return new Le(re.comparator)}function dd(){return new Le(re.comparator)}const zE={asc:"ASCENDING",desc:"DESCENDING"},HE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GE={and:"AND",or:"OR"};class qE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tc(t,e){return t.useProto3Json||Zo(e)?e:{value:e}}function Vo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WE(t,e){return Vo(t,e.toTimestamp())}function Jt(t){return Ce(!!t),ae.fromTimestamp(function(n){const r=Gn(n);return new Ge(r.seconds,r.nanos)}(t))}function Sl(t,e){return Ic(t,e).canonicalString()}function Ic(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function z0(t){const e=Fe.fromString(t);return Ce(K0(e)),e}function bc(t,e){return Sl(t.databaseId,e.path)}function za(t,e){const n=z0(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(G0(n))}function H0(t,e){return Sl(t.databaseId,e)}function KE(t){const e=z0(t);return e.length===4?Fe.emptyPath():G0(e)}function Ac(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G0(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fd(t,e,n){return{name:bc(t,e),fields:n.value.mapValue.fields}}function QE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Ce(d===void 0||typeof d=="string"),tt.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const d=h.code===void 0?U.UNKNOWN:U0(h.code);return new ne(d,h.message||"")}(o);n=new j0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=za(t,r.document.name),i=Jt(r.document.updateTime),o=r.document.createTime?Jt(r.document.createTime):ae.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=lt.newFoundDocument(s,i,o,c),h=r.targetIds||[],d=r.removedTargetIds||[];n=new lo(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=za(t,r.document),i=r.readTime?Jt(r.readTime):ae.min(),o=lt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new lo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=za(t,r.document),i=r.removedTargetIds||[];n=new lo([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new FE(s,i),c=r.targetId;n=new B0(c,o)}}return n}function YE(t,e){let n;if(e instanceof Ti)n={update:fd(t,e.key,e.value)};else if(e instanceof F0)n={delete:bc(t,e.key)};else if(e instanceof wr)n={update:fd(t,e.key,e.data),updateMask:iT(e.fieldMask)};else{if(!(e instanceof NE))return oe();n={verify:bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof ko)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ai)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xo)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:WE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function JE(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Jt(s.updateTime):Jt(i);return o.isEqual(ae.min())&&(o=Jt(i)),new VE(o,s.transformResults||[])}(n,e))):[]}function XE(t,e){return{documents:[H0(t,e.path)]}}function ZE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H0(t,s);const i=function(h){if(h.length!==0)return W0(nn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Dr(m.field),direction:nT(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Tc(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function eT(t){let e=KE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=q0(p);return m instanceof nn&&T0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(P){return new Po(Or(P.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Zo(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,v=p.values||[];return new Ro(v,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,v=p.values||[];return new Ro(v,m)}(n.endAt)),vE(e,s,o,i,c,"F",l,h)}function tT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function q0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Or(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Or(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Or(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Or(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Or(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>q0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function nT(t){return zE[t]}function rT(t){return HE[t]}function sT(t){return GE[t]}function Dr(t){return{fieldPath:t.canonicalString()}}function Or(t){return Xe.fromServerFormat(t.fieldPath)}function W0(t){return t instanceof He?function(n){if(n.op==="=="){if(Zh(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NAN"}};if(Xh(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zh(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NOT_NAN"}};if(Xh(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dr(n.field),op:rT(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>W0(s));return r.length===1?r[0]:{compositeFilter:{op:sT(n.op),filters:r}}}(t):oe()}function iT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function K0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,i=ae.min(),o=ae.min(),c=tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.ct=e}}function aT(t){const e=eT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ec(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.un=new lT}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class lT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ns(0)}static kn(){return new ns(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qs(r.mutation,s,Ut.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=ar();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Os();return i.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=En();const o=Gs(),c=function(){return Gs()}();return n.forEach((l,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof wr)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),qs(d.mutation,h,d.mutation.getFieldMask(),Ge.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var p;return c.set(h,new hT(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Gs();let s=new Le((o,c)=>o-c),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let d=r.get(l)||Ut.empty();d=c.applyToLocalView(h,d),r.set(l,d);const p=(s.get(c.batchId)||ge()).add(l);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,d=l.value,p=k0();d.forEach(m=>{if(!i.has(m)){const v=L0(n.get(m),r.get(m));v!==null&&p.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(ar());let c=-1,l=i;return o.next(h=>L.forEach(h,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,l,h,ge())).next(d=>({batchId:c,changes:P0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Os();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Os();return this.indexManager.getCollectionParents(e,i).next(c=>L.forEach(c,l=>{const h=function(p,m){return new ea(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,lt.newInvalidDocument(d)))});let c=Os();return o.forEach((l,h)=>{const d=i.get(l);d!==void 0&&qs(d.mutation,h,Ut.empty(),Ge.now()),na(n,h)&&(c=c.insert(l,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:aT(s.bundledQuery),readTime:Jt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.overlays=new Le(re.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ar();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=ar(),i=n.length+1,o=new re(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=ar(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const c=ar(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>c.set(h,d)),!(c.size()>=s)););return L.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ME(n,r));let i=this.Ir.get(n);i===void 0&&(i=ge(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.Tr=new Ze(We.Er),this.dr=new Ze(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Fe([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Fe([])),r=new We(n,e),s=new We(n,e+1);let i=ge();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze(We.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LE(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new We(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(Te);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new We(new re(i),0);let c=new Ze(Te);return this.br.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.wr)),!0)},o),L.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.Mr=e,this.docs=function(){return new Le(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():lt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=En();const o=n.path,c=new re(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Zw(Xw(d),r)<=0||(s.has(d.key)||na(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vT(this)}getSize(e){return L.resolve(this.size)}}class vT extends uT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.persistence=e,this.Nr=new ds(n=>wl(n),El),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cl,this.targetCount=0,this.kr=ns.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ns(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ml(0),this.Kr=!1,this.Kr=!0,this.$r=new gT,this.referenceDelegate=e(this),this.Ur=new yT(this),this.indexManager=new cT,this.remoteDocumentCache=function(s){return new _T(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new oT(n),this.Gr=new fT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new mT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new ET(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ET extends tE{constructor(e){super(),this.currentSequenceNumber=e}}class Rl{constructor(e){this.persistence=e,this.Jr=new Cl,this.Yr=null}static Zr(e){return new Rl(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Pl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return A2()?8:nE(ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new TT;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ps()<=me.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Vr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Ps()<=me.DEBUG&&Z("QueryEngine","Query:",Vr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ps()<=me.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Vr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(n))):L.resolve())}Yi(e,n){if(rd(n))return L.resolve(null);let r=Yt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ec(n,null,"F"),r=Yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.ts(n,c);return this.ns(n,h,o,l.readTime)?this.Yi(e,Ec(n,null,"F")):this.rs(e,h,n,l)}))})))}Zi(e,n,r,s){return rd(n)||s.isEqual(ae.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Ps()<=me.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vr(n)),this.rs(e,o,n,Jw(s,-1)).next(c=>c))})}ts(e,n){let r=new Ze(C0(e));return n.forEach((s,i)=>{na(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ps()<=me.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Vr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Le(Te),this._s=new ds(i=>wl(i),El),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function AT(t,e,n,r){return new bT(t,e,n,r)}async function Q0(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let l=ge();for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of i){c.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function ST(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,d){const p=h.batch,m=p.keys();let v=L.resolve();return m.forEach(P=>{v=v.next(()=>d.getEntry(l,P)).next(x=>{const O=h.docVersions.get(P);Ce(O!==null),x.version.compareTo(O)<0&&(p.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),d.addEntry(x)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ge();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Y0(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CT(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;c.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(tt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(p,v),function(x,O,$){return x.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(m,v,d)&&c.push(n.Ur.updateTargetData(i,v))});let l=En(),h=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),c.push(RT(i,o,e.documentUpdates).next(d=>{l=d.Ps,h=d.Is})),!r.isEqual(ae.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(d)}return L.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,h)).next(()=>l)}).then(i=>(n.os=s,i))}function RT(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=En();return n.forEach((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function PT(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kT(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Fn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Sc(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ei(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function pd(t,e,n){const r=le(t);let s=ae.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,d){const p=le(l),m=p._s.get(d);return m!==void 0?L.resolve(p.os.get(m)):p.Ur.getTargetData(h,d)}(r,o,Yt(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:ge())).next(c=>(xT(r,EE(e),c),{documents:c,Ts:i})))}function xT(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class gd{constructor(){this.activeTargetIds=CE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VT{constructor(){this.so=new gd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji=null;function Ha(){return Ji===null?Ji=function(){return 268435456+Math.round(2147483648*Math.random())}():Ji++,"0x"+Ji.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class LT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=Ha(),l=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${c}:`,l,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,l,h,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${c}: `,d),d),d=>{throw Xr("RestConnection",`RPC '${n}' ${c} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=OT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ha();return new Promise((o,c)=>{const l=new u0;l.setWithCredentials(!0),l.listenOnce(h0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case oo.NO_ERROR:const d=l.getResponseJson();Z(ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case oo.TIMEOUT:Z(ot,`RPC '${e}' ${i} timed out`),c(new ne(U.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:const p=l.getStatus();if(Z(ot,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const P=function(O){const $=O.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf($)>=0?$:U.UNKNOWN}(v.status);c(new ne(P,v.message))}else c(new ne(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(U.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{Z(ot,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Z(ot,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Ha(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p0(),c=f0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(ot,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,v=!1;const P=new NT({Io:O=>{v?Z(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(m||(Z(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),Z(ot,`RPC '${e}' stream ${s} sending:`,O),p.send(O))},To:()=>p.close()}),x=(O,$,B)=>{O.listen($,H=>{try{B(H)}catch(q){setTimeout(()=>{throw q},0)}})};return x(p,Ds.EventType.OPEN,()=>{v||(Z(ot,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),x(p,Ds.EventType.CLOSE,()=>{v||(v=!0,Z(ot,`RPC '${e}' stream ${s} transport closed`),P.So())}),x(p,Ds.EventType.ERROR,O=>{v||(v=!0,Xr(ot,`RPC '${e}' stream ${s} transport errored:`,O),P.So(new ne(U.UNAVAILABLE,"The operation could not be completed")))}),x(p,Ds.EventType.MESSAGE,O=>{var $;if(!v){const B=O.data[0];Ce(!!B);const H=B,q=H.error||(($=H[0])===null||$===void 0?void 0:$.error);if(q){Z(ot,`RPC '${e}' stream ${s} received error:`,q);const he=q.status;let fe=function(T){const b=je[T];if(b!==void 0)return U0(b)}(he),I=q.message;fe===void 0&&(fe=U.INTERNAL,I="Unknown error status: "+he+" with message "+q.message),v=!0,P.So(new ne(fe,I)),p.close()}else Z(ot,`RPC '${e}' stream ${s} received:`,B),P.bo(B)}}),x(c,d0.STAT_EVENT,O=>{O.stat===mc.PROXY?Z(ot,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===mc.NOPROXY&&Z(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function Ga(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){return new qE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,r,s,i,o,c,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new J0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ne(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MT extends X0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=QE(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Jt(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ac(this.serializer),n.addTarget=function(i,o){let c;const l=o.target;if(c=wc(l)?{documents:XE(i,l)}:{query:ZE(i,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=$0(i,o.resumeToken);const h=Tc(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ae.min())>0){c.readTime=Vo(i,o.snapshotVersion.toTimestamp());const h=Tc(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=tT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ac(this.serializer),n.removeTarget=e,this.a_(n)}}class FT extends X0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=JE(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ac(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ic(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ic(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wn(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Er(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=le(l);h.L_.add(4),await bi(h),h.q_.set("Unknown"),h.L_.delete(4),await aa(h)}(this))})}),this.q_=new BT(r,s)}}async function aa(t){if(Er(t))for(const e of t.B_)await e(!0)}async function bi(t){for(const e of t.B_)await e(!1)}function Z0(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dl(n)?Vl(n):fs(n).r_()&&xl(n,e))}function kl(t,e){const n=le(t),r=fs(n);n.N_.delete(e),r.r_()&&eg(n,e),n.N_.size===0&&(r.r_()?r.o_():Er(n)&&n.q_.set("Unknown"))}function xl(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fs(t).A_(e)}function eg(t,e){t.Q_.xe(e),fs(t).R_(e)}function Vl(t){t.Q_=new $E({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fs(t).start(),t.q_.v_()}function Dl(t){return Er(t)&&!fs(t).n_()&&t.N_.size>0}function Er(t){return le(t).L_.size===0}function tg(t){t.Q_=void 0}async function $T(t){t.q_.set("Online")}async function zT(t){t.N_.forEach((e,n)=>{xl(t,e)})}async function HT(t,e){tg(t),Dl(t)?(t.q_.M_(e),Vl(t)):t.q_.set("Unknown")}async function GT(t,e,n){if(t.q_.set("Online"),e instanceof j0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Do(t,r)}else if(e instanceof lo?t.Q_.Ke(e):e instanceof B0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await Y0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(h);d&&i.N_.set(h,d.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(tt.EMPTY_BYTE_STRING,d.snapshotVersion)),eg(i,l);const p=new Fn(d.target,l,h,d.sequenceNumber);xl(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Do(t,r)}}async function Do(t,e,n){if(!Ei(e))throw e;t.L_.add(1),await bi(t),t.q_.set("Offline"),n||(n=()=>Y0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await aa(t)})}function ng(t,e){return e().catch(n=>Do(t,n,e))}async function ca(t){const e=le(t),n=qn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qT(e);)try{const s=await PT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,WT(e,s)}catch(s){await Do(e,s)}rg(e)&&sg(e)}function qT(t){return Er(t)&&t.O_.length<10}function WT(t,e){t.O_.push(e);const n=qn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function rg(t){return Er(t)&&!qn(t).n_()&&t.O_.length>0}function sg(t){qn(t).start()}async function KT(t){qn(t).p_()}async function QT(t){const e=qn(t);for(const n of t.O_)e.m_(n.mutations)}async function YT(t,e,n){const r=t.O_.shift(),s=bl.from(r,e,n);await ng(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ca(t)}async function JT(t,e){e&&qn(t).V_&&await async function(r,s){if(function(o){return UE(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();qn(r).s_(),await ng(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ca(r)}}(t,e),rg(t)&&sg(t)}async function _d(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Er(n);n.L_.add(3),await bi(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await aa(n)}async function XT(t,e){const n=le(t);e?(n.L_.delete(2),await aa(n)):e||(n.L_.add(2),await bi(n),n.q_.set("Unknown"))}function fs(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new MT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$T.bind(null,t),Ro:zT.bind(null,t),mo:HT.bind(null,t),d_:GT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dl(t)?Vl(t):t.q_.set("Unknown")):(await t.K_.stop(),tg(t))})),t.K_}function qn(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new FT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KT.bind(null,t),mo:JT.bind(null,t),f_:QT.bind(null,t),g_:YT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ca(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Ol(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nl(t,e){if(wn("AsyncQueue",`${e}: ${t}`),Ei(t))return new ne(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Os(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Kr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.W_=new Le(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class rs{constructor(e,n,r,s,i,o,c,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new rs(e,n,Kr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class e3{constructor(){this.queries=yd(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=yd(),i.forEach((o,c)=>{for(const l of c.j_)l.onError(r)})})(this,new ne(U.ABORTED,"Firestore shutting down"))}}function yd(){return new ds(t=>S0(t),ta)}async function t3(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new ZT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Nl(o,`Initialization of query '${Vr(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ll(n)}async function n3(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function r3(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Ll(n)}function s3(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ll(t){t.Y_.forEach(e=>{e.next()})}var Cc,wd;(wd=Cc||(Cc={})).ea="default",wd.Cache="cache";class i3{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.key=e}}class og{constructor(e){this.key=e}}class o3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=C0(e),this.Ra=new Kr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new vd,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),v=na(this.query,p)?p:null,P=!!m&&this.mutatedKeys.has(m.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let O=!1;m&&v?m.data.isEqual(v.data)?P!==x&&(r.track({type:3,doc:v}),O=!0):this.ga(m,v)||(r.track({type:2,doc:v}),O=!0,(l&&this.Aa(v,l)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!m&&v?(r.track({type:0,doc:v}),O=!0):m&&!v&&(r.track({type:1,doc:m}),O=!0,(l||h)&&(c=!0)),O&&(v?(o=o.add(v),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(v,P){const x=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return x(v)-x(P)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new rs(this.query,e.Ra,i,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new og(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ig(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class a3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class c3{constructor(e){this.key=e,this.va=!1}}class l3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ds(c=>S0(c),ta),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(re.comparator),this.Na=new Map,this.La=new Cl,this.Ba={},this.ka=new Map,this.qa=ns.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function u3(t,e,n=!0){const r=dg(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ag(r,e,n,!0),s}async function h3(t,e){const n=dg(t);await ag(n,e,!0,!1)}async function ag(t,e,n,r){const s=await kT(t.localStore,Yt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await d3(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Z0(t.remoteStore,s),c}async function d3(t,e,n,r,s){t.Ka=(p,m,v)=>async function(x,O,$,B){let H=O.view.ma($);H.ns&&(H=await pd(x.localStore,O.query,!1).then(({documents:I})=>O.view.ma(I,H)));const q=B&&B.targetChanges.get(O.targetId),he=B&&B.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(H,x.isPrimaryClient,q,he);return Td(x,O.targetId,fe.wa),fe.snapshot}(t,p,m,v);const i=await pd(t.localStore,e,!0),o=new o3(e,i.Ts),c=o.ma(i.documents),l=Ii.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,l);Td(t,n,h.wa);const d=new a3(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function f3(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ta(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kl(r.remoteStore,s.targetId),Rc(r,s.targetId)}).catch(wi)):(Rc(r,s.targetId),await Sc(r.localStore,s.targetId,!0))}async function p3(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kl(n.remoteStore,r.targetId))}async function g3(t,e,n){const r=T3(t);try{const s=await function(o,c){const l=le(o),h=Ge.now(),d=c.reduce((v,P)=>v.add(P.key),ge());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let P=En(),x=ge();return l.cs.getEntries(v,d).next(O=>{P=O,P.forEach(($,B)=>{B.isValidDocument()||(x=x.add($))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,P)).next(O=>{p=O;const $=[];for(const B of c){const H=OE(B,p.get(B.key).overlayedDocument);H!=null&&$.push(new wr(B.key,H,y0(H.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(v,h,$,c)}).next(O=>{m=O;const $=O.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(v,O.batchId,$)})}).then(()=>({batchId:m.batchId,changes:P0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new Le(Te)),h=h.insert(c,l),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ai(r,s.changes),await ca(r.remoteStore)}catch(s){const i=Nl(s,"Failed to persist write");n.reject(i)}}async function cg(t,e){const n=le(t);try{const r=await CT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await Ai(n,r,e)}catch(r){await wi(r)}}function Ed(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const l=le(o);l.onlineState=c;let h=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(c)&&(h=!0)}),h&&Ll(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m3(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Le(re.comparator);o=o.insert(i,lt.newNoDocument(i,ae.min()));const c=ge().add(i),l=new ia(ae.min(),new Map,new Le(Te),o,c);await cg(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ml(r)}else await Sc(r.localStore,e,!1).then(()=>Rc(r,e,n)).catch(wi)}async function _3(t,e){const n=le(t),r=e.batch.batchId;try{const s=await ST(n.localStore,e);ug(n,r,null),lg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ai(n,s)}catch(s){await wi(s)}}async function v3(t,e,n){const r=le(t);try{const s=await function(o,c){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,c).next(p=>(Ce(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(h,p))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,e);ug(r,e,n),lg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ai(r,s)}catch(s){await wi(s)}}function lg(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ug(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Rc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hg(t,r)})}function hg(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(kl(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ml(t))}function Td(t,e,n){for(const r of n)r instanceof ig?(t.La.addReference(r.key,e),y3(t,r)):r instanceof og?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hg(t,r.key)):oe()}function y3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ml(t))}function Ml(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new c3(n)),t.Oa=t.Oa.insert(n,r),Z0(t.remoteStore,new Fn(Yt(Tl(n.path)),r,"TargetPurposeLimboResolution",ml.oe))}}async function Ai(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{o.push(r.Ka(l,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Pl.Wi(l.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,h){const d=le(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(h,m=>L.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>L.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Ei(p))throw p;Z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const v=d.os.get(m),P=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(P);d.os=d.os.insert(m,x)}}}(r.localStore,i))}async function w3(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await Q0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(l=>{l.reject(new ne(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ai(n,r.hs)}}function E3(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function dg(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m3.bind(null,e),e.Ca.d_=r3.bind(null,e.eventManager),e.Ca.$a=s3.bind(null,e.eventManager),e}function T3(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v3.bind(null,e),e}class Oo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oa(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AT(this.persistence,new IT,e.initialUser,this.serializer)}Ga(e){return new wT(Rl.Zr,this.serializer)}Wa(e){return new VT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oo.provider={build:()=>new Oo};class Pc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ed(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=w3.bind(null,this.syncEngine),await XT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new e3}()}createDatastore(e){const n=oa(e.databaseInfo.databaseId),r=function(i){return new LT(i)}(e.databaseInfo);return function(i,o,c,l){return new UT(i,o,c,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new jT(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Ed(this.syncEngine,n,0),function(){return md.D()?new md:new DT}())}createSyncEngine(e,n){return function(s,i,o,c,l,h,d){const p=new l3(s,i,o,c,l,h);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await bi(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pc.provider={build:()=>new Pc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=m0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qa(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Q0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Id(t,e){t.asyncQueue.verifyOperationInProgress();const n=await A3(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_d(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_d(e.remoteStore,s)),t._onlineComponents=e}async function A3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await qa(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xr("Error using user provided cache. Falling back to memory cache: "+n),await qa(t,new Oo)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await qa(t,new Oo);return t._offlineComponents}async function fg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Id(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Id(t,new Pc))),t._onlineComponents}function S3(t){return fg(t).then(e=>e.syncEngine)}async function C3(t){const e=await fg(t),n=e.eventManager;return n.onListen=u3.bind(null,e.syncEngine),n.onUnlisten=f3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p3.bind(null,e.syncEngine),n}function R3(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,l,h){const d=new I3({next:m=>{d.Za(),o.enqueueAndForget(()=>n3(i,p));const v=m.docs.has(c);!v&&m.fromCache?h.reject(new ne(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?h.reject(new ne(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new i3(Tl(c.path),d,{includeMetadataChanges:!0,_a:!0});return t3(i,p)}(await C3(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t,e,n){if(!n)throw new ne(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k3(t,e,n,r){if(e===!0&&r===!0)throw new ne(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ad(t){if(!re.isDocumentKey(t))throw new ne(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new ne(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ul{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $w;switch(r.type){case"firstParty":return new qw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bd.get(n);r&&(Z("ComponentProvider","Removing Datastore"),bd.delete(n),r.terminate())}(this),Promise.resolve()}}function x3(t,e,n,r={}){var s;const i=(t=ci(t,Ul))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=at.MOCK_USER;else{c=v2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ne(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new at(h)}t._authCredentials=new zw(new g0(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bl(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class li extends Bl{constructor(e,n,r){super(e,n,Tl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new re(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function V3(t,e,...n){if(t=Zt(t),arguments.length===1&&(e=m0.newId()),P3("doc","path",e),t instanceof Ul){const r=Fe.fromString(e,...n);return Ad(r),new Ot(t,null,new re(r))}{if(!(t instanceof Ot||t instanceof li))throw new ne(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Ad(r),new Ot(t.firestore,t instanceof li?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new J0(this,"async_queue_retry"),this.Vu=()=>{const r=Ga();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ga();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ga();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ei(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ol.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class jl extends Ul{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cd,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cd(e),this._firestoreClient=void 0,await e}}}function D3(t,e){const n=typeof t=="object"?t:Pp(),r=typeof t=="string"?t:"(default)",s=rl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=m2("firestore");i&&x3(s,...i)}return s}function gg(t){if(t._terminated)throw new ne(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O3(t),t._firestoreClient}function O3(t){var e,n,r;const s=t._freezeSettings(),i=function(c,l,h,d){return new iE(c,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pg(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new b3(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ss(tt.fromBase64String(e))}catch(n){throw new ne(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ss(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=/^__.*__$/;class L3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ti(e,this.data,n,this.fieldTransforms)}}function _g(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Gl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return No(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_g(this.Cu)&&N3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class M3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||oa(e)}Qu(e,n,r,s=!1){return new Gl({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F3(t){const e=t._freezeSettings(),n=oa(t._databaseId);return new M3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U3(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Eg("Data must be an object, but it was:",o,r);const c=yg(r,o);let l,h;if(i.merge)l=new Ut(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=B3(e,p,n);if(!o.contains(m))throw new ne(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$3(d,m)||d.push(m)}l=new Ut(d),h=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=o.fieldTransforms;return new L3(new Vt(c),l,h)}function vg(t,e){if(wg(t=Zt(t)))return Eg("Unsupported field value:",e,t),yg(t,e);if(t instanceof mg)return function(r,s){if(!_g(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let l=vg(c,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ge.fromDate(r);return{timestampValue:Vo(s.serializer,i)}}if(r instanceof Ge){const i=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vo(s.serializer,i)}}if(r instanceof zl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ss)return{bytesValue:$0(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hl)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Il(c.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Fl(r)}`)}(t,e)}function yg(t,e){const n={};return _0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(t,(r,s)=>{const i=vg(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function wg(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof zl||t instanceof ss||t instanceof Ot||t instanceof mg||t instanceof Hl)}function Eg(t,e,n){if(!wg(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Fl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function B3(t,e,n){if((e=Zt(e))instanceof $l)return e._internalPath;if(typeof e=="string")return Tg(t,e);throw No("Field path arguments must be of type string or ",t,!1,void 0,n)}const j3=new RegExp("[~\\*/\\[\\]]");function Tg(t,e,n){if(e.search(j3)>=0)throw No(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $l(...e.split("."))._internalPath}catch{throw No(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function No(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(U.INVALID_ARGUMENT,c+t+l)}function $3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z3 extends Ig{data(){return super.data()}}function bg(t,e){return typeof e=="string"?Tg(t,e):e instanceof $l?e._internalPath:e._delegate._internalPath}class H3{convertValue(e,n="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new Hl(i)}convertGeoPoint(e){return new zl(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ri(e));default:return null}}convertTimestamp(e){const n=Gn(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Ce(K0(r));const s=new si(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ag extends Ig{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new W3(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class W3 extends Ag{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){t=ci(t,Ot);const e=ci(t.firestore,jl);return R3(gg(e),t._key).then(n=>X3(e,t,n))}class Q3 extends H3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Y3(t,e,n){t=ci(t,Ot);const r=ci(t.firestore,jl),s=G3(t.converter,e);return J3(r,[U3(F3(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function J3(t,e){return function(r,s){const i=new $n;return r.asyncQueue.enqueueAndForget(async()=>g3(await S3(r),s,i)),i.promise}(gg(t),e)}function X3(t,e,n){const r=n.docs.get(e._key),s=new Q3(t);return new Ag(t,s,e._key,r,new q3(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){us=s})(cs),Yr(new fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new jl(new Hw(r.getProvider("auth-internal")),new Kw(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ne(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new si(h.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),jn(Wh,"4.7.3",e),jn(Wh,"4.7.3","esm2017")})();const Z3={apiKey:"AIzaSyC1yRNBfDNJRiBLTlmUvl-pxNrXQrhlCoA",authDomain:"seraphium-5fd68.firebaseapp.com",projectId:"seraphium-5fd68",storageBucket:"seraphium-5fd68.appspot.com",messagingSenderId:"123829673679",appId:"1:123829673679:web:7d1082bf98919a3a1de1ba",measurementId:"G-F0QZBBJ20N"},Sg=Rp(Z3),eI=Bw(Sg),tI=new un,nI=D3(Sg),rI=o2({state:{tutorialSkiped:!1,canChoose:!1,playerProfile:{username:"Undefined",chessShards:0,battleShards:0,level:1,characters:[{charName:"Classic Pawn",charLvl:1}]},skills:[{name:"   ",description:["      14  .","         ."],icon:"/src/assets/Skills/Bonuses/SearchEnemySkills/radar-sweep-svgrepo-com.svg"}],characters:[{name:"Classic Pawn",rarity:3,type:"B",icon:"/src/assets/pieces/white/pawn.svg",chibiIcon:"/src/assets/pieces/white/pawn.svg",description:" a hereditary hatter who runs a small shop. Unlike her relatives, Aellen was always drawn to magic and its unpredictable nature.",skills:[{name:"Remove enemy piece",description:"Remove enemy piece",power:1,skillImg:"/src/assets/Skills/burning-passion-svgrepo-com.svg"},{name:"Rewards and experience increased by",description:"Rewards and experience increased by 1%",power:1}]}],insertedElement:null},mutations:{setCanChoose(t,e){t.canChoose=e},updateProvince(t,e){t.playerProfile.province=e},setInsertedElement(t,e){t.insertedElement=e},setTutorialSkiped(t,e){t.tutorialSkiped=e},setPlayerProfile(t,e){t.playerProfile=e},UPDATE_CHARACTER_TYPE(t,{name:e,newType:n}){const r=t.characters.find(s=>s.name===e);r&&(r.type=n)}},actions:{async loginWithGoogle({commit:t}){try{const n=(await Qy(eI,tI)).user,r=V3(nI,"users",n.uid),s=await K3(r);if(s.exists()){const i=s.data();t("setPlayerProfile",{username:i.username,level:i.level,province:i.province,characters:i.characters}),t("setTutorialSkiped",i.tutorialSkiped)}else await Y3(r,{username:n.displayName||"Undefined",level:1,province:null,characters:[],tutorialSkiped:!1}),t("setPlayerProfile",{username:n.displayName,level:1,province:null,characters:[]}),t("setTutorialSkiped",!1)}catch(e){console.error("Error during Google sign-in:",e)}},updateInsertedElement({commit:t},e){t("setInsertedElement",e)},updateCanChoose({commit:t},e){t("setCanChoose",e)},setProvince({commit:t},e){t("updateProvince",e)},skipTutorial({commit:t},e){t("setTutorialSkiped",e)}},getters:{canChoose:t=>t.canChoose,province:t=>t.playerProfile.province,provinces:t=>t.provinces,characters:t=>t.characters,insertedElement:t=>t.insertedElement,playerProfile:t=>t.playerProfile,skills:t=>t.skills,tutorialSkiped:t=>t.tutorialSkiped,chessShards:t=>t.playerProfile.chessShards}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Nr=typeof document<"u";function Cg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Cg(t.default)}const Se=Object.assign;function Wa(t,e){const n={};for(const r in e){const s=e[r];n[r]=$t(s)?s.map(t):t(s)}return n}const Ws=()=>{},$t=Array.isArray,Rg=/#/g,iI=/&/g,oI=/\//g,aI=/=/g,cI=/\?/g,Pg=/\+/g,lI=/%5B/g,uI=/%5D/g,kg=/%5E/g,hI=/%60/g,xg=/%7B/g,dI=/%7C/g,Vg=/%7D/g,fI=/%20/g;function ql(t){return encodeURI(""+t).replace(dI,"|").replace(lI,"[").replace(uI,"]")}function pI(t){return ql(t).replace(xg,"{").replace(Vg,"}").replace(kg,"^")}function kc(t){return ql(t).replace(Pg,"%2B").replace(fI,"+").replace(Rg,"%23").replace(iI,"%26").replace(hI,"`").replace(xg,"{").replace(Vg,"}").replace(kg,"^")}function gI(t){return kc(t).replace(aI,"%3D")}function mI(t){return ql(t).replace(Rg,"%23").replace(cI,"%3F")}function _I(t){return t==null?"":mI(t).replace(oI,"%2F")}function ui(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const vI=/\/$/,yI=t=>t.replace(vI,"");function Ka(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,c>-1?c:e.length),s=t(i)),c>-1&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=II(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:ui(o)}}function wI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Rd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function EI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&is(e.matched[r],n.matched[s])&&Dg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function is(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Dg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!TI(t[n],e[n]))return!1;return!0}function TI(t,e){return $t(t)?Pd(t,e):$t(e)?Pd(e,t):t===e}function Pd(t,e){return $t(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function II(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var hi;(function(t){t.pop="pop",t.push="push"})(hi||(hi={}));var Ks;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ks||(Ks={}));function bI(t){if(!t)if(Nr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yI(t)}const AI=/^[^#]+#/;function SI(t,e){return t.replace(AI,"#")+e}function CI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const la=()=>({left:window.scrollX,top:window.scrollY});function RI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=CI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function kd(t,e){return(history.state?history.state.position-e:-1)+t}const xc=new Map;function PI(t,e){xc.set(t,e)}function kI(t){const e=xc.get(t);return xc.delete(t),e}let xI=()=>location.protocol+"//"+location.host;function Og(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let c=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(c);return l[0]!=="/"&&(l="/"+l),Rd(l,"")}return Rd(n,t)+r+s}function VI(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const v=Og(t,location),P=n.value,x=e.value;let O=0;if(m){if(n.value=v,e.value=m,o&&o===P){o=null;return}O=x?m.position-x.position:0}else r(v);s.forEach($=>{$(n.value,P,{delta:O,type:hi.pop,direction:O?O>0?Ks.forward:Ks.back:Ks.unknown})})};function l(){o=n.value}function h(m){s.push(m);const v=()=>{const P=s.indexOf(m);P>-1&&s.splice(P,1)};return i.push(v),v}function d(){const{history:m}=window;m.state&&m.replaceState(Se({},m.state,{scroll:la()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:h,destroy:p}}function xd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?la():null}}function DI(t){const{history:e,location:n}=window,r={value:Og(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,h,d){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:xI()+t+l;try{e[d?"replaceState":"pushState"](h,"",m),s.value=h}catch(v){console.error(v),n[d?"replace":"assign"](m)}}function o(l,h){const d=Se({},e.state,xd(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});i(l,d,!0),r.value=l}function c(l,h){const d=Se({},s.value,e.state,{forward:l,scroll:la()});i(d.current,d,!0);const p=Se({},xd(r.value,l,null),{position:d.position+1},h);i(l,p,!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function OI(t){t=bI(t);const e=DI(t),n=VI(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Se({location:"",base:t,go:r,createHref:SI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function NI(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),OI(t)}function LI(t){return typeof t=="string"||t&&typeof t=="object"}function Ng(t){return typeof t=="string"||typeof t=="symbol"}const Lg=Symbol("");var Vd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vd||(Vd={}));function os(t,e){return Se(new Error,{type:t,[Lg]:!0},e)}function an(t,e){return t instanceof Error&&Lg in t&&(e==null||!!(t.type&e))}const Dd="[^/]+?",MI={sensitive:!1,strict:!1,start:!0,end:!0},FI=/[.+*?^${}()[\]/\\]/g;function UI(t,e){const n=Se({},MI,e),r=[];let s=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const m=h[p];let v=40+(n.sensitive?.25:0);if(m.type===0)p||(s+="/"),s+=m.value.replace(FI,"\\$&"),v+=40;else if(m.type===1){const{value:P,repeatable:x,optional:O,regexp:$}=m;i.push({name:P,repeatable:x,optional:O});const B=$||Dd;if(B!==Dd){v+=10;try{new RegExp(`(${B})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${P}" (${B}): `+q.message)}}let H=x?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(H=O&&h.length<2?`(?:/${H})`:"/"+H),O&&(H+="?"),s+=H,v+=20,O&&(v+=-8),x&&(v+=-20),B===".*"&&(v+=-50)}d.push(v)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(h){const d=h.match(o),p={};if(!d)return null;for(let m=1;m<d.length;m++){const v=d[m]||"",P=i[m-1];p[P.name]=v&&P.repeatable?v.split("/"):v}return p}function l(h){let d="",p=!1;for(const m of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of m)if(v.type===0)d+=v.value;else if(v.type===1){const{value:P,repeatable:x,optional:O}=v,$=P in h?h[P]:"";if($t($)&&!x)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const B=$t($)?$.join("/"):$;if(!B)if(O)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);d+=B}}return d||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function BI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Mg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=BI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Od(r))return 1;if(Od(s))return-1}return s.length-r.length}function Od(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jI={type:0,value:""},$I=/[a-zA-Z0-9_]/;function zI(t){if(!t)return[[]];if(t==="/")return[[jI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&p(),o()):l===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:$I.test(l)?m():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),s}function HI(t,e,n){const r=UI(zI(t.path),n),s=Se(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function GI(t,e){const n=[],r=new Map;e=Fd({strict:!1,end:!0,sensitive:!1},e);function s(p){return r.get(p)}function i(p,m,v){const P=!v,x=Ld(p);x.aliasOf=v&&v.record;const O=Fd(e,p),$=[x];if("alias"in p){const q=typeof p.alias=="string"?[p.alias]:p.alias;for(const he of q)$.push(Ld(Se({},x,{components:v?v.record.components:x.components,path:he,aliasOf:v?v.record:x})))}let B,H;for(const q of $){const{path:he}=q;if(m&&he[0]!=="/"){const fe=m.record.path,I=fe[fe.length-1]==="/"?"":"/";q.path=m.record.path+(he&&I+he)}if(B=HI(q,m,O),v?v.alias.push(B):(H=H||B,H!==B&&H.alias.push(B),P&&p.name&&!Md(B)&&o(p.name)),Fg(B)&&l(B),x.children){const fe=x.children;for(let I=0;I<fe.length;I++)i(fe[I],B,v&&v.children[I])}v=v||B}return H?()=>{o(H)}:Ws}function o(p){if(Ng(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=KI(p,n);n.splice(m,0,p),p.record.name&&!Md(p)&&r.set(p.record.name,p)}function h(p,m){let v,P={},x,O;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw os(1,{location:p});O=v.record.name,P=Se(Nd(m.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&Nd(p.params,v.keys.map(H=>H.name))),x=v.stringify(P)}else if(p.path!=null)x=p.path,v=n.find(H=>H.re.test(x)),v&&(P=v.parse(x),O=v.record.name);else{if(v=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!v)throw os(1,{location:p,currentLocation:m});O=v.record.name,P=Se({},m.params,p.params),x=v.stringify(P)}const $=[];let B=v;for(;B;)$.unshift(B.record),B=B.parent;return{name:O,path:x,params:P,matched:$,meta:WI($)}}t.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:c,getRecordMatcher:s}}function Nd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Ld(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:qI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Md(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function WI(t){return t.reduce((e,n)=>Se(e,n.meta),{})}function Fd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function KI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Mg(t,e[i])<0?r=i:n=i+1}const s=QI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function QI(t){let e=t;for(;e=e.parent;)if(Fg(e)&&Mg(t,e)===0)return e}function Fg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function YI(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Pg," "),o=i.indexOf("="),c=ui(o<0?i:i.slice(0,o)),l=o<0?null:ui(i.slice(o+1));if(c in e){let h=e[c];$t(h)||(h=e[c]=[h]),h.push(l)}else e[c]=l}return e}function Ud(t){let e="";for(let n in t){const r=t[n];if(n=gI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}($t(r)?r.map(i=>i&&kc(i)):[r&&kc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function JI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=$t(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const XI=Symbol(""),Bd=Symbol(""),Wl=Symbol(""),Ug=Symbol(""),Vc=Symbol("");function ks(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function On(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const h=m=>{m===!1?l(os(4,{from:n,to:e})):m instanceof Error?l(m):LI(m)?l(os(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},d=i(()=>t.call(r&&r.instances[s],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(m=>l(m))})}function Qa(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Cg(l)){const d=(l.__vccOpts||l)[e];d&&i.push(On(d,n,r,o,c,s))}else{let h=l();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=sI(d)?d.default:d;o.mods[c]=d,o.components[c]=p;const v=(p.__vccOpts||p)[e];return v&&On(v,n,r,o,c,s)()}))}}return i}function jd(t){const e=mn(Wl),n=mn(Ug),r=Ft(()=>{const l=Br(t.to);return e.resolve(l)}),s=Ft(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],p=n.matched;if(!d||!p.length)return-1;const m=p.findIndex(is.bind(null,d));if(m>-1)return m;const v=$d(l[h-2]);return h>1&&$d(d)===v&&p[p.length-1].path!==v?p.findIndex(is.bind(null,l[h-2])):m}),i=Ft(()=>s.value>-1&&n4(n.params,r.value.params)),o=Ft(()=>s.value>-1&&s.value===n.matched.length-1&&Dg(n.params,r.value.params));function c(l={}){return t4(l)?e[Br(t.replace)?"replace":"push"](Br(t.to)).catch(Ws):Promise.resolve()}return{route:r,href:Ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}const ZI=Cf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:jd,setup(t,{slots:e}){const n=di(jd(t)),{options:r}=mn(Wl),s=Ft(()=>({[zd(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[zd(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:tp("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),e4=ZI;function t4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function n4(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!$t(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function $d(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const zd=(t,e,n)=>t??e??n,r4=Cf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=mn(Vc),s=Ft(()=>t.route||r.value),i=mn(Bd,0),o=Ft(()=>{let h=Br(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),c=Ft(()=>s.value.matched[o.value]);Xi(Bd,Ft(()=>o.value+1)),Xi(XI,c),Xi(Vc,s);const l=Gm();return zr(()=>[l.value,c.value,t.name],([h,d,p],[m,v,P])=>{d&&(d.instances[p]=h,v&&v!==d&&h&&h===m&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),h&&d&&(!v||!is(d,v)||!m)&&(d.enterCallbacks[p]||[]).forEach(x=>x(h))},{flush:"post"}),()=>{const h=s.value,d=t.name,p=c.value,m=p&&p.components[d];if(!m)return Hd(n.default,{Component:m,route:h});const v=p.props[d],P=v?v===!0?h.params:typeof v=="function"?v(h):v:null,O=tp(m,Se({},P,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return Hd(n.default,{Component:O,route:h})||O}}});function Hd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const s4=r4;function i4(t){const e=GI(t.routes,t),n=t.parseQuery||YI,r=t.stringifyQuery||Ud,s=t.history,i=ks(),o=ks(),c=ks(),l=qm(xn);let h=xn;Nr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Wa.bind(null,D=>""+D),p=Wa.bind(null,_I),m=Wa.bind(null,ui);function v(D,Y){let K,J;return Ng(D)?(K=e.getRecordMatcher(D),J=Y):J=D,e.addRoute(J,K)}function P(D){const Y=e.getRecordMatcher(D);Y&&e.removeRoute(Y)}function x(){return e.getRoutes().map(D=>D.record)}function O(D){return!!e.getRecordMatcher(D)}function $(D,Y){if(Y=Se({},Y||l.value),typeof D=="string"){const w=Ka(n,D,Y.path),R=e.resolve({path:w.path},Y),N=s.createHref(w.fullPath);return Se(w,R,{params:m(R.params),hash:ui(w.hash),redirectedFrom:void 0,href:N})}let K;if(D.path!=null)K=Se({},D,{path:Ka(n,D.path,Y.path).path});else{const w=Se({},D.params);for(const R in w)w[R]==null&&delete w[R];K=Se({},D,{params:p(w)}),Y.params=p(Y.params)}const J=e.resolve(K,Y),ve=D.hash||"";J.params=d(m(J.params));const Re=wI(r,Se({},D,{hash:pI(ve),path:J.path})),_=s.createHref(Re);return Se({fullPath:Re,hash:ve,query:r===Ud?JI(D.query):D.query||{}},J,{redirectedFrom:void 0,href:_})}function B(D){return typeof D=="string"?Ka(n,D,l.value.path):Se({},D)}function H(D,Y){if(h!==D)return os(8,{from:Y,to:D})}function q(D){return I(D)}function he(D){return q(Se(B(D),{replace:!0}))}function fe(D){const Y=D.matched[D.matched.length-1];if(Y&&Y.redirect){const{redirect:K}=Y;let J=typeof K=="function"?K(D):K;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=B(J):{path:J},J.params={}),Se({query:D.query,hash:D.hash,params:J.path!=null?{}:D.params},J)}}function I(D,Y){const K=h=$(D),J=l.value,ve=D.state,Re=D.force,_=D.replace===!0,w=fe(K);if(w)return I(Se(B(w),{state:typeof w=="object"?Se({},ve,w.state):ve,force:Re,replace:_}),Y||K);const R=K;R.redirectedFrom=Y;let N;return!Re&&EI(r,J,K)&&(N=os(16,{to:R,from:J}),kt(J,J,!0,!1)),(N?Promise.resolve(N):b(R,J)).catch(V=>an(V)?an(V,2)?V:Lt(V):pe(V,R,J)).then(V=>{if(V){if(an(V,2))return I(Se({replace:_},B(V.to),{state:typeof V.to=="object"?Se({},ve,V.to.state):ve,force:Re}),Y||R)}else V=S(R,J,!0,_,ve);return A(R,J,V),V})}function y(D,Y){const K=H(D,Y);return K?Promise.reject(K):Promise.resolve()}function T(D){const Y=bn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(D):D()}function b(D,Y){let K;const[J,ve,Re]=o4(D,Y);K=Qa(J.reverse(),"beforeRouteLeave",D,Y);for(const w of J)w.leaveGuards.forEach(R=>{K.push(On(R,D,Y))});const _=y.bind(null,D,Y);return K.push(_),yt(K).then(()=>{K=[];for(const w of i.list())K.push(On(w,D,Y));return K.push(_),yt(K)}).then(()=>{K=Qa(ve,"beforeRouteUpdate",D,Y);for(const w of ve)w.updateGuards.forEach(R=>{K.push(On(R,D,Y))});return K.push(_),yt(K)}).then(()=>{K=[];for(const w of Re)if(w.beforeEnter)if($t(w.beforeEnter))for(const R of w.beforeEnter)K.push(On(R,D,Y));else K.push(On(w.beforeEnter,D,Y));return K.push(_),yt(K)}).then(()=>(D.matched.forEach(w=>w.enterCallbacks={}),K=Qa(Re,"beforeRouteEnter",D,Y,T),K.push(_),yt(K))).then(()=>{K=[];for(const w of o.list())K.push(On(w,D,Y));return K.push(_),yt(K)}).catch(w=>an(w,8)?w:Promise.reject(w))}function A(D,Y,K){c.list().forEach(J=>T(()=>J(D,Y,K)))}function S(D,Y,K,J,ve){const Re=H(D,Y);if(Re)return Re;const _=Y===xn,w=Nr?history.state:{};K&&(J||_?s.replace(D.fullPath,Se({scroll:_&&w&&w.scroll},ve)):s.push(D.fullPath,ve)),l.value=D,kt(D,Y,K,_),Lt()}let E;function pt(){E||(E=s.listen((D,Y,K)=>{if(!Ht.listening)return;const J=$(D),ve=fe(J);if(ve){I(Se(ve,{replace:!0}),J).catch(Ws);return}h=J;const Re=l.value;Nr&&PI(kd(Re.fullPath,K.delta),la()),b(J,Re).catch(_=>an(_,12)?_:an(_,2)?(I(_.to,J).then(w=>{an(w,20)&&!K.delta&&K.type===hi.pop&&s.go(-1,!1)}).catch(Ws),Promise.reject()):(K.delta&&s.go(-K.delta,!1),pe(_,J,Re))).then(_=>{_=_||S(J,Re,!1),_&&(K.delta&&!an(_,8)?s.go(-K.delta,!1):K.type===hi.pop&&an(_,20)&&s.go(-1,!1)),A(J,Re,_)}).catch(Ws)}))}let Pt=ks(),Be=ks(),_e;function pe(D,Y,K){Lt(D);const J=Be.list();return J.length?J.forEach(ve=>ve(D,Y,K)):console.error(D),Promise.reject(D)}function Tt(){return _e&&l.value!==xn?Promise.resolve():new Promise((D,Y)=>{Pt.add([D,Y])})}function Lt(D){return _e||(_e=!D,pt(),Pt.list().forEach(([Y,K])=>D?K(D):Y()),Pt.reset()),D}function kt(D,Y,K,J){const{scrollBehavior:ve}=t;if(!Nr||!ve)return Promise.resolve();const Re=!K&&kI(kd(D.fullPath,0))||(J||!K)&&history.state&&history.state.scroll||null;return Ef().then(()=>ve(D,Y,Re)).then(_=>_&&RI(_)).catch(_=>pe(_,D,Y))}const Oe=D=>s.go(D);let Ne;const bn=new Set,Ht={currentRoute:l,listening:!0,addRoute:v,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:O,getRoutes:x,resolve:$,options:t,push:q,replace:he,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Be.add,isReady:Tt,install(D){const Y=this;D.component("RouterLink",e4),D.component("RouterView",s4),D.config.globalProperties.$router=Y,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Br(l)}),Nr&&!Ne&&l.value===xn&&(Ne=!0,q(s.location).catch(ve=>{}));const K={};for(const ve in xn)Object.defineProperty(K,ve,{get:()=>l.value[ve],enumerable:!0});D.provide(Wl,Y),D.provide(Ug,mf(K)),D.provide(Vc,l);const J=D.unmount;bn.add(D),D.unmount=function(){bn.delete(D),bn.size<1&&(h=xn,E&&E(),E=null,l.value=xn,Ne=!1,_e=!1),J()}}};function yt(D){return D.reduce((Y,K)=>Y.then(()=>T(K)),Promise.resolve())}return Ht}function o4(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(h=>is(h,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(h=>is(h,l))||s.push(l))}return[n,r,s]}const a4={data(){return{iframeSrc:"./src/public/index.html",isLoading:!0}},methods:{hideLoadingScreen(){this.isLoading=!1}}},c4={key:0,class:"loading-screen"},l4=["src"];function u4(t,e,n,r,s,i){return ze(),Ye("div",null,[e[2]||(e[2]=de("div",{class:"fixed z-50 w-16 h-16"},"HEELo",-1)),s.isLoading?(ze(),Ye("div",c4,e[1]||(e[1]=[Hr('<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-24 h-24"><title>new</title><g id="Layer 1"><path id=" 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z"></path><path id=" 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z"></path><path id=" 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z"></path><path id=" 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z"></path><path id=" 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z"></path><path id=" 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z"></path><path id=" 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z"></path><path id=" 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z"></path><path id=" 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z"></path><path id=" 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z"></path><path id=" 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z"></path><path id=" 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z"></path><path id=" 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z"></path><path id=" 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z"></path><path id=" 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z"></path><path id=" 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z"></path></g></svg>',1)]))):Vs("",!0),Sf(de("iframe",{src:s.iframeSrc,class:"w-full h-screen",onLoad:e[0]||(e[0]=(...o)=>i.hideLoadingScreen&&i.hideLoadingScreen(...o))},null,40,l4),[[sp,!s.isLoading]])])}const Gd=Yn(a4,[["render",u4]]),h4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.5%206.5C9.5%205.11929%2010.6193%204%2012%204C13.3807%204%2014.5%205.11929%2014.5%206.5C14.5%207.88071%2013.3807%209%2012%209C10.6193%209%209.5%207.88071%209.5%206.5ZM12%202C9.51472%202%207.5%204.01472%207.5%206.5C7.5%207.91363%208.15183%209.17502%209.17133%2010H8C7.44772%2010%207%2010.4477%207%2011C7%2011.5523%207.44772%2012%208%2012H9.12533C9.15208%2012.3659%209.16098%2012.833%209.11237%2013.3535C8.99568%2014.6027%208.55656%2016.0909%207.31094%2017.2753C6.86615%2017.6982%206.19221%2018.1531%205.58717%2018.5199C5.29266%2018.6984%205.02896%2018.8475%204.83934%2018.9517C4.74472%2019.0037%204.66905%2019.0442%204.61781%2019.0713L4.56008%2019.1017L4.54633%2019.1088L4.54347%2019.1103L4.54336%2019.1103L4.54322%2019.1104C4.3106%2019.2299%204.13401%2019.4357%204.05132%2019.6838L3.27924%2022H3C2.44772%2022%202%2022.4477%202%2023C2%2023.5523%202.44772%2024%203%2024H4H20H21C21.5523%2024%2022%2023.5523%2022%2023C22%2022.4477%2021.5523%2022%2021%2022H20.7659L20.1559%2019.7395C20.0787%2019.4533%2019.8784%2019.2161%2019.6092%2019.0919L19.609%2019.0918L19.6072%2019.091L19.5951%2019.0853C19.5836%2019.0799%2019.5655%2019.0714%2019.5415%2019.0598C19.4933%2019.0366%2019.4214%2019.0014%2019.3304%2018.9553C19.1482%2018.8629%2018.8918%2018.7279%2018.5996%2018.5595C18.0041%2018.2164%2017.3055%2017.7605%2016.7767%2017.2682C15.5139%2016.0923%2015.054%2014.6022%2014.92%2013.349C14.8647%2012.8316%2014.8667%2012.3662%2014.8878%2012H16C16.5523%2012%2017%2011.5523%2017%2011C17%2010.4477%2016.5523%2010%2016%2010H14.8287C15.8482%209.17502%2016.5%207.91363%2016.5%206.5C16.5%204.01472%2014.4853%202%2012%202ZM11.1037%2013.5395C11.158%2012.9576%2011.1549%2012.4315%2011.1296%2012H12.8852C12.8649%2012.4363%2012.8682%2012.9705%2012.9313%2013.5616C13.0971%2015.112%2013.6847%2017.1218%2015.4138%2018.7319C15.512%2018.8233%2015.6134%2018.9128%2015.717%2019L8.38107%2019C8.48825%2018.9094%208.59149%2018.8175%208.68906%2018.7247C10.3982%2017.0996%2010.9591%2015.0879%2011.1037%2013.5395ZM5.72076%2021L18.4246%2021L18.6944%2022H5.38743L5.72076%2021Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",d4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.2666%209.92826L14.8997%2010.1618C13.5228%2011.0379%2011.6981%2010.6528%2010.7929%209.29487L10%208.10556L9.20712%209.29487C8.30186%2010.6528%206.47719%2011.0379%205.10034%2010.1618L4.73342%209.92826L5.54178%2013H14.4582L15.2666%209.92826ZM3.65358%206.87047C2.88614%206.38209%201.91813%207.08891%202.14963%207.96862L3.80381%2014.2545C3.91942%2014.6938%204.31662%2015%204.77089%2015H15.2291C15.6834%2015%2016.0806%2014.6938%2016.1962%2014.2545L17.8504%207.96862C18.0819%207.08891%2017.1139%206.38209%2016.3464%206.87047L13.8259%208.47443C13.367%208.76649%2012.7587%208.6381%2012.457%208.18547L10.832%205.74808C10.4362%205.15435%209.56377%205.15435%209.16795%205.74808L7.54302%208.18547C7.24127%208.6381%206.63304%208.76649%206.1741%208.47443L3.65358%206.87047Z'%20fill='%23ffffff'/%3e%3cpath%20d='M11%203.5C11%204.05228%2010.5523%204.5%2010%204.5C9.44772%204.5%209%204.05228%209%203.5C9%202.94772%209.44772%202.5%2010%202.5C10.5523%202.5%2011%202.94772%2011%203.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M19%205.5C19%206.05228%2018.5523%206.5%2018%206.5C17.4477%206.5%2017%206.05228%2017%205.5C17%204.94772%2017.4477%204.5%2018%204.5C18.5523%204.5%2019%204.94772%2019%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M3%205.5C3%206.05228%202.55228%206.5%202%206.5C1.44772%206.5%201%206.05228%201%205.5C1%204.94772%201.44772%204.5%202%204.5C2.55228%204.5%203%204.94772%203%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.5%2016.25C4.5%2015.6977%204.94772%2015.25%205.5%2015.25H14.7513C15.3036%2015.25%2015.7513%2015.6977%2015.7513%2016.25C15.7513%2016.8023%2015.3036%2017.25%2014.7513%2017.25H5.5C4.94772%2017.25%204.5%2016.8023%204.5%2016.25Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",f4={data(){return{chessShardsValue:null,battleShardsValue:null}},computed:{characters(){return this.$store.getters.playerProfile}},methods:{chessShards(){this.chessShardsValue=this.$store.getters.playerProfile.chessShards,this.battleShardsValue=this.$store.getters.playerProfile.battleShards}},mounted(){this.chessShards()}},p4={id:"profile",class:"absolute z-50 w-full items-center h-16 justify-between"},g4={class:"bg-gradient-to-r from-[#1d1f20] text-sm to-[#141516] tracking-wider pl-32 w-full h-full flex items-center space-x-4 px-4 drop-shadow-lg"},m4={class:"hidden w-52 h-10 flex space-x-10 font-serif text-xl text-white items-center"},_4={class:"flex justify-center items-center w-auto h-full space-x-4"},v4={class:"flex justify-center items-center w-auto h-full space-x-4"};function y4(t,e,n,r,s,i){return ze(),Ye("div",p4,[de("div",g4,[e[2]||(e[2]=Hr('<button id="menu-icon" data-v-1bd37cd7><svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-12 h-12" data-v-1bd37cd7><title data-v-1bd37cd7>new</title><g id="Layer 1" data-v-1bd37cd7><path id=" 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z" data-v-1bd37cd7></path><path id=" 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z" data-v-1bd37cd7></path><path id=" 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z" data-v-1bd37cd7></path><path id=" 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z" data-v-1bd37cd7></path><path id=" 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z" data-v-1bd37cd7></path><path id=" 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z" data-v-1bd37cd7></path><path id=" 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z" data-v-1bd37cd7></path><path id=" 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z" data-v-1bd37cd7></path><path id=" 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z" data-v-1bd37cd7></path><path id=" 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z" data-v-1bd37cd7></path><path id=" 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z" data-v-1bd37cd7></path><path id=" 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z" data-v-1bd37cd7></path><path id=" 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z" data-v-1bd37cd7></path><path id=" 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z" data-v-1bd37cd7></path><path id=" 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z" data-v-1bd37cd7></path><path id=" 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z" data-v-1bd37cd7></path></g></svg></button><button id="inventory-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>INVENTORY</span></button><button class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>BRANCH</span></button><button id="equipment-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>EQUIPMENT</span></button>',4)),de("div",m4,[de("div",_4,[e[0]||(e[0]=de("img",{class:"w-8 h-8 shard",src:h4},null,-1)),de("span",null,ir(s.chessShardsValue),1)]),de("div",v4,[e[1]||(e[1]=de("img",{class:"w-8 h-8 shard",src:d4},null,-1)),de("span",null,ir(s.battleShardsValue),1)])])])])}const w4=Yn(f4,[["render",y4],["__scopeId","data-v-1bd37cd7"]]),E4={data(){return{showFirstChar:!0}},computed:{...el(["provinces","characters","playerProfile","insertedElement"])},methods:{...a2(["updateInsertedElement"]),showInventory(){const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{const n=document.getElementById("parent-container"),r=this.$refs.shownInventory,s=document.createDocumentFragment();Array.from(r.childNodes).forEach(d=>{s.appendChild(d.cloneNode(!0))});const i=s.getElementById("characters-list");i.innerHTML="";const o=this.$refs.unlockedChar,c=this.$refs.lockedChar;for(let d=0;d<this.playerProfile.characters.length;d++){const p=document.createDocumentFragment();Array.from(o.childNodes).forEach(v=>{p.appendChild(v.cloneNode(!0))});const m=this.characters.find(v=>v.name===this.playerProfile.characters[d].charName);p.querySelector(".char-icon").src=m.icon,p.querySelector(".char-lvl").textContent=`Lvl. ${this.playerProfile.characters[d].charLvl}`,i.appendChild(p)}for(let d=0;d<49;d++){const p=document.createDocumentFragment();Array.from(c.childNodes).forEach(m=>{p.appendChild(m.cloneNode(!0))}),i.appendChild(p)}const l=s.getElementById("selected-char");if(this.showFirstChar){const d='<svg class="w-6 h-6" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>';l.querySelector(".profile-name-slct").textContent=`${this.playerProfile.characters[0].charName} `,l.querySelector(".slct-char-rarity").innerHTML="";for(let p=0;p<this.playerProfile.characters[0].rarity;p++)l.querySelector(".slct-char-rarity").innerHTML+=d;l.querySelector(".slct-char-lvl").textContent=`Level ${this.playerProfile.characters[0].charLvl} / 50`,l.querySelector(".chibi-char-img-slct").src=this.characters.find(p=>p.name===this.playerProfile.characters[0].charName).chibiIcon}n.prepend(s),document.getElementById("hide-inventory").addEventListener("click",this.hideInventory),this.updateInsertedElement(n.firstElementChild)},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},hideInventory(){this.clickSound(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{this.insertedElement.remove(),this.updateInsertedElement(null),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},clickSound(){const t=document.getElementById("click-sound");t.volume=.3,t.play()}},mounted(){document.getElementById("inventory-button").addEventListener("click",this.showInventory)}},T4={id:"shownInventory",ref:"shownInventory",class:"hidden"},I4={id:"unlocked-char",ref:"unlockedChar",class:"hidden"},b4={id:"locked-char",ref:"lockedChar",class:"hidden"};function A4(t,e,n,r,s,i){return ze(),Ye(St,null,[de("div",T4,e[0]||(e[0]=[Hr('<div id="inventory" class="w-full h-full absolute z-[400] flex justify-start items-center bg-black/40 backdrop-blur-lg" data-v-b3190f07><div class="w-full h-full flex justify-start items-center px-24" data-v-b3190f07><button id="hide-inventory" class="fixed top-0 left-0 w-24 h-24 flex justify-center items-center z-50" data-v-b3190f07><svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></button><div class="w-1/2 h-[40rem] flex flex-col" data-v-b3190f07><div class="w-[32rem] h-[5rem] text-white flex justify-start items-center text-xl tracking-wider" data-v-b3190f07><span data-v-b3190f07>Characters</span></div><div id="characters-list" class="w-[32rem] justify-between h-[35rem] grid auto-rows-auto grid-cols-5 overflow-y-auto gap-4" data-v-b3190f07></div></div><div id="selected-char" class="w-1/2 h-[40rem] flex justify-end items-center px-10 space-y-4 flex-col" data-v-b3190f07><div class="w-full h-10 flex space-x-4 text-white font-mono justify-center" data-v-b3190f07><p class="w-auto h-full tracking-wider flex justify-center items-center text-xl profile-name-slct" data-v-b3190f07>Mira </p><div class="h-full slct-char-rarity flex justify-start items-center space-x-2" data-v-b3190f07><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></div></div><p class="w-auto h-10 tracking-widest text-white font-light flex items-center slct-char-lvl" data-v-b3190f07>Level 1 / 50</p><img class="w-64 chibi-char-img-slct" data-v-b3190f07><div class="w-64 rounded-full h-1 bg-white" data-v-b3190f07></div><div class="w-full char-skills-invent char-info-block h-24 shadow-lg bg-[#111111] rounded-xl flex text-white font-mono px-8 py-6 justify-center items-center space-x-4" data-v-b3190f07><svg fill="#ffffff" class="w-12 h-12 cursor-pointer" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 505.712 505.712" xml:space="preserve" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><g transform="translate(1 1)" data-v-b3190f07><g data-v-b3190f07><g data-v-b3190f07><path d="M79.842,271.618H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,279.702,89.723,271.618,79.842,271.618z M79.842,307.547H61.877v-17.965 h17.965V307.547z" data-v-b3190f07></path> <path d="M205.596,271.618h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,279.702,215.477,271.618,205.596,271.618z M205.596,307.547h-17.965 v-17.965h17.965V307.547z" data-v-b3190f07></path> <path d="M332.249,73.105c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,12.575-5.389 l12.575-12.575c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575L332.249,73.105z M319.674,110.832 l-12.575-12.575l12.575-12.575l12.575,12.575L319.674,110.832z" data-v-b3190f07></path> <path d="M307.098,212.333c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,11.677-5.389l12.576-12.575 c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575l-12.576-12.575c-3.593-3.593-8.084-5.389-12.575-5.389 s-8.982,1.797-12.575,5.389l-12.575,12.575c-7.186,7.186-7.186,17.965,0,25.151L307.098,212.333z M319.674,174.607l12.575,12.575 l-12.575,12.575l-12.575-12.575L319.674,174.607z" data-v-b3190f07></path> <path d="M332.249,264.432c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-2.695,12.575-5.389 l12.575-12.575c7.186-7.186,7.186-17.965,0-25.151L332.249,264.432z M319.674,301.26l-12.575-12.575l12.575-12.575l12.575,12.575 L319.674,301.26z" data-v-b3190f07></path> <path d="M205.596,397.372h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,405.456,215.477,397.372,205.596,397.372z M205.596,433.302h-17.965 v-17.965h17.965V433.302z" data-v-b3190f07></path> <path d="M79.842,397.372H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,405.456,89.723,397.372,79.842,397.372z M79.842,433.302H61.877v-17.965 h17.965V433.302z" data-v-b3190f07></path> <path d="M142.719,334.495h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965V352.46C160.684,342.579,152.6,334.495,142.719,334.495z M142.719,370.425h-17.965V352.46 h17.965V370.425z" data-v-b3190f07></path> <path d="M496.628,174.607l-158.99-158.99c-9.881-10.779-26.947-10.779-37.726,0L141.821,175.505 c-5.389,4.491-8.084,11.677-8.084,18.863s2.695,13.474,8.084,18.863l13.474,13.474H25.947C10.677,226.705-1,238.382-1,253.653 v215.579c0,15.27,11.677,26.947,26.947,26.947h215.579c15.27,0,26.947-11.677,26.947-26.947V339.563l32.337,31.759 c5.389,5.39,11.677,8.084,18.863,8.084c6.288,0,13.474-2.695,18.863-8.084l158.091-158.989 c5.389-4.491,8.084-11.677,8.084-18.863S502.018,179.997,496.628,174.607z M250.509,469.232c0,5.389-3.593,8.982-8.982,8.982 H25.947c-5.389,0-8.982-3.593-8.982-8.982V253.653c0-5.389,3.593-8.982,8.982-8.982H173.26h68.267 c5.389,0,8.982,3.593,8.982,8.982v68.267V469.232z M484.053,199.758L325.961,358.747c-3.593,3.593-8.982,3.593-12.575,0 l-44.912-44.912v-60.182v0c0-3.34-0.559-6.509-1.592-9.421c-0.738-2.08-1.718-4.029-2.908-5.816 c-0.476-0.715-0.986-1.404-1.528-2.065c-0.542-0.661-1.116-1.294-1.719-1.898s-1.237-1.177-1.898-1.719 c-4.628-3.793-10.621-6.028-17.302-6.028h-60.182l-26.947-26.947c-1.797-1.797-2.695-3.593-2.695-6.288s0.898-4.491,2.695-6.288 l158.99-158.091c3.593-3.593,8.982-3.593,12.575,0l158.091,158.091c1.797,1.796,2.695,3.593,2.695,6.288 S485.849,197.961,484.053,199.758z" data-v-b3190f07></path></g></g></g></g></svg><svg class="w-12 h-12 cursor-pointer" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M7 15.5c0 .049.006.096.007.145a7.3 7.3 0 1 1 8.638-8.638c-.049 0-.096-.007-.145-.007a8.557 8.557 0 0 0-.877.045 6.296 6.296 0 1 0-7.578 7.578A8.557 8.557 0 0 0 7 15.5zm.983-11.27l-.119-.992A5.3 5.3 0 0 0 3.2 8.558c.002.153.01.303.024.45l.995-.093a4.508 4.508 0 0 1-.019-.367A4.3 4.3 0 0 1 7.983 4.23zM22.8 15.5a7.3 7.3 0 1 1-7.3-7.3 7.308 7.308 0 0 1 7.3 7.3zm-1 0a6.3 6.3 0 1 0-6.3 6.3 6.307 6.307 0 0 0 6.3-6.3zm-10.58.415a4.508 4.508 0 0 1-.02-.367 4.3 4.3 0 0 1 3.783-4.318l-.119-.992a5.3 5.3 0 0 0-4.664 5.32c.002.153.01.303.024.45zm8.028-4.163l-.707.707a4.3 4.3 0 1 1-6.082 6.082l-.707.707a5.3 5.3 0 0 0 7.496-7.496z" data-v-b3190f07></path><path fill="none" stroke="none" d="M0 0h24v24H0z" data-v-b3190f07></path></g></svg></div></div></div></div>',1)]),512),de("div",I4,e[1]||(e[1]=[Hr('<div class="unlocked-char w-24 h-28 rounded-md relative flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><div class="absolute top-0 w-24 h-1 rounded-t-md bg-cyan-200" data-v-b3190f07></div><img class="w-full rounded-md char-icon" data-v-b3190f07><div class="absolute bottom-0 w-24 h-6 rounded-b-md bg-white flex justify-center items-center" data-v-b3190f07><span class="text-[#121212] text-sm font-mono char-lvl" data-v-b3190f07>Lv. 1</span></div></div>',1)]),512),de("div",b4,e[2]||(e[2]=[Hr('<div class="locked-char w-24 h-28 rounded-md bg-[#121212] flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><svg class="w-16" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="#8f8f8f" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M16,2C9.9,2,5,6.9,5,13v15.1c0,0.4,0.2,0.8,0.6,0.9c0.4,0.2,0.8,0.1,1.1-0.2l0.7-0.6c0.4-0.3,0.9-0.3,1.3,0 c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0 l0.7,0.6c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.3,0,0.4-0.1c0.4-0.2,0.6-0.5,0.6-0.9V13C27,6.9,22.1,2,16,2z M18,13c0-0.6,0.4-1,1-1 s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M12,13c0-0.6,0.4-1,1-1s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M21,20H11 c-0.6,0-1-0.4-1-1s0.4-1,1-1h10c0.6,0,1,0.4,1,1S21.6,20,21,20z" data-v-b3190f07></path></g></svg></div>',1)]),512)],64)}const S4=Yn(E4,[["render",A4],["__scopeId","data-v-b3190f07"]]),C4={},R4={class:"bg-black w-full h-full z-50 fixed initial hidden"};function P4(t,e){return ze(),Ye("div",R4)}const k4=Yn(C4,[["render",P4]]),x4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M74%20208H64a16%2016%200%200%200-16%2016v16a16%2016%200%200%200%2016%2016h15.94A535.78%20535.78%200%200%201%2064%20384h128a535.78%20535.78%200%200%201-15.94-128H192a16%2016%200%200%200%2016-16v-16a16%2016%200%200%200-16-16h-10l33.89-90.38a16%2016%200%200%200-15-21.62H144V64h24a8%208%200%200%200%208-8V40a8%208%200%200%200-8-8h-24V8a8%208%200%200%200-8-8h-16a8%208%200%200%200-8%208v24H88a8%208%200%200%200-8%208v16a8%208%200%200%200%208%208h24v32H55.09a16%2016%200%200%200-15%2021.62zm173.16%20251.58L224%20448v-16a16%2016%200%200%200-16-16H48a16%2016%200%200%200-16%2016v16L8.85%20459.58A16%2016%200%200%200%200%20473.89V496a16%2016%200%200%200%2016%2016h224a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31zm92.77-157.78l-3.29%2082.2h126.72l-3.29-82.21%2024.6-20.79A32%2032%200%200%200%20496%20256.54V198a6%206%200%200%200-6-6h-26.38a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H373.1a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H310a6%206%200%200%200-6%206v58.6a32%2032%200%200%200%2011.36%2024.4zM384%20304a16%2016%200%200%201%2032%200v32h-32zm119.16%20155.58L480%20448v-16a16%2016%200%200%200-16-16H336a16%2016%200%200%200-16%2016v16l-23.15%2011.58a16%2016%200%200%200-8.85%2014.31V496a16%2016%200%200%200%2016%2016h192a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31z'/%3e%3c/g%3e%3c/svg%3e",V4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M216.923,246.538c3.457-6.556,9.963-22.777-1.666-39.137C200.508,186.65,179.942,125,193.61,83H207V0h-16v17h-16V0h-18v17%20h-16V0h-17v17h-16V0H91v83h14.057c13.668,42-6.98,103.65-21.73,124.401c-11.629,16.359-5.373,32.706-1.916,39.262%20C77.347,247.044,74,250.337,74,254.5v18c0,4.418,3.915,8.5,8.333,8.5H83v17h132v-17h1.333c4.418,0,7.667-4.082,7.667-8.5v-18%20C224,250.338,220.986,246.92,216.923,246.538z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",D4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M210.952,116c14.912,0,27.037-12.088,27.037-27s-10.945-25.013-26.964-30.666c-11.333-4-18.018-10.823-23.009-19.412%20C183.025,30.333,172.025,17,157.525,17c-5.832,0-19.798,0-19.798,0V0c-107,40.03-72.369,184-72.369,184h21.369v14h-6.369%20c-4.418,0-8.631,3.582-8.631,8v1c0,3.289,2.302,6.111,5.14,7.341c-8.77,15.05-1.419,29.775,0.761,33.659h-5.271%20c-4.418,0-8.631,3.582-8.631,8v18c0,4.418,4,8,8,8v16h132v-16.069c4-0.493,7-3.853,7-7.931v-18c0-4.418-2.951-8-7.369-8h-4.27%20c2.181-3.884,8.902-18.609,0.13-33.659c2.838-1.23,4.508-4.052,4.508-7.341v-1c0-4.418-2.951-8-7.369-8h-7.631v-14h24.132%20c-16.501-54-66.334-83-66.334-83h40.182C191.146,109.889,200.351,116,210.952,116z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",O4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.08%20297.08'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M206.873,255.08h-3.41c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.137-39.546-24.448-64.4h3.57%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-4.333v-4.285c13-8.971,20.511-23.502,20.511-39.914%20c0-10.332-7.011-26.11-15.819-41.721l-18.553,18.595c-3.111,3.111-8.182,3.111-11.294,0.001l-0.921-0.933%20c-3.111-3.11-3.106-8.202,0.005-11.313l21.676-21.674c-4.444-7.069-8.869-13.678-12.703-19.224%20c2.881-2.93,4.663-6.944,4.663-11.379C165.106,7.268,157.841,0,148.874,0c-8.967,0-16.234,7.268-16.234,16.233%20c0,4.434,1.781,8.448,4.662,11.379c-14.585,21.101-37.94,57.587-37.94,76.269c0,16.853,8.178,31.724,21.178,40.625v3.574h-4.667%20c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3.571c0.689,24.855-15.547,53.495-24.448,64.4%20c-9.031,11.064-2.926,22.263-0.712,25.6h-3.411c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118v-17.069%20c4-0.493,7-3.853,7-7.931v-9C214.54,258.662,211.291,255.08,206.873,255.08z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",N4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.77%20297.77'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M207.218,255.77h-3.369c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.129-39.546-24.438-64.4h3.519%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-4.626%20c-2.064-21.741,1.078-43.054,5.959-54.666c1.86-4.425,4.118-7.79,6.296-10.334h1.371c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.418-3.249-8-7.667-8h-9.8c-1.803-10.896-8.998-19.966-18.755-24.383c1.783-2.607,2.829-5.757,2.829-9.154%20C165.492,7.267,158.227,0,149.26,0s-16.234,7.267-16.234,16.232c0,3.385,1.037,6.525,2.809,9.127%20c-9.788,4.406-17.01,13.49-18.816,24.41h-10.8c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h2.371%20c2.178,2.544,4.436,5.909,6.296,10.334c4.881,11.612,8.023,32.925,5.959,54.666h-4.626c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h3.602c0.692,24.854-15.536,53.495-24.438,64.4%20c-9.031,11.063-2.926,22.263-0.712,25.6h-3.452c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118V280.7%20c4-0.493,7-3.853,7-7.931v-9C214.885,259.352,211.636,255.77,207.218,255.77z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",L4="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M197.333,256h-1.641c1.878-3.337,7.061-14.536-0.605-25.6c-7.554-10.905-21.491-39.547-20.904-64.401%20c4.409-0.01,7.816-3.587,7.816-7.999v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-3.55%20c-1.006-16.142,1.307-29.861,4.798-40.724c1.121-3.487,2.432-6.186,3.752-8.276h2c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.343-3.463-7.87-7.777-7.988C179.087,52.771,169,42.203,156,39.363V27h12V12h-12V0h-15v12h-12v15h12v12.595%20c-12,3.15-21.803,13.512-23.888,26.405h-0.779c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3%20c1.32,2.091,2.631,4.789,3.752,8.276c3.491,10.862,5.804,24.582,4.798,40.724h-4.55c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h1.053c0.588,24.855-13.183,53.495-20.737,64.4%20c-7.664,11.063-2.482,22.263-0.604,25.6h-1.711c-4.418,0-8.333,3.582-8.333,8v9c0,3.727,3,6.849,6,7.737V298h100v-17.263%20c4-0.889,6-4.011,6-7.737v-9C205,259.582,201.751,256,197.333,256z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",M4={data(){return{isListShown:!1,filteredCharacters:[],selectedTileIndex:null,tilesWithCharacters:[],typeToTileMap:{B:2,R:0,N:1,Q:3,K:4,R1:7,B1:5,N1:6}}},computed:{...el(["provinces","characters","playerProfile","insertedElement"]),characters(){const t=this.$store.state.playerProfile.characters.map(e=>e.charName);return this.$store.state.characters.filter(e=>t.includes(e.name))}},methods:{toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},showList(){this.clickSound(),this.isListShown=!this.isListShown},filterCharactersByTypes(t){this.filteredCharacters=this.characters.filter(e=>t.includes(e.type))},createTiles(){let t="url('/src/assets/whiteabove3.png')",e="none",n="none",r="100% 100%",s="100% 100%",i="url('/src/assets/blackabove.png') center center / cover no-repeat, #101010";const o=document.getElementById("tiles");o.innerHTML="";for(let c=0;c<1;c++)for(let l=0;l<8;l++){const h=document.createElement("div");h.classList.add("tile-inv"),(c+l)%2===1&&h.classList.add("black"),["front-inv","back-inv","left-inv","right-inv","top-inv","bottom-inv"].forEach(P=>{const x=document.createElement("div");x.classList.add("face-inv",P),(c+l)%2===1?P==="bottom-inv"?(x.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${i}`,x.style.backgroundSize=s,x.style.animation=n):(x.style.background=`${i}`,x.style.backgroundSize=s,x.style.animation=n):P==="top-inv"||P==="front-inv"?(x.style.background=`${t}`,x.style.backgroundSize=r,x.style.animation=e):P==="bottom-inv"?(x.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${t}`,x.style.backgroundSize=r,x.style.animation=e):(x.style.background=`${t}`,x.style.backgroundSize=r),h.appendChild(x)}),h.style.transform="scaleZ(1)",h.classList.contains("black")?(h.querySelector(".front-inv").style.background=`linear-gradient(180deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) 100%), ${i}`,h.querySelector(".front-inv").style.backgroundSize=s):(h.querySelector(".front-inv").style.background=`${t}`,h.querySelector(".front-inv").style.backgroundSize=r);const p=Math.random()*2,m=2+Math.random(),v=-5-Math.random()*5;h.style.animation=`floatTile ${m}s ease-in-out infinite`,h.style.animationDelay=`${p}s`,h.style.setProperty("--float-height",`${v}px`),o.appendChild(h)}},hideEquipment(){this.clickSound(),this.isListShown&&this.showList(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("flex"),document.getElementById("equipment-container").classList.add("hidden"),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},showEquipment(){this.clickSound();const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("hidden"),document.getElementById("equipment-container").classList.add("flex")},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},selectCharacter(t){const e=this.typeToTileMap[t.type];if(e===void 0){alert("No tile assigned for this character type");return}const n=document.getElementById("tiles").children,r=n[e],s=r.querySelector(".piece-inv");s&&r.removeChild(s);const i=document.createElement("div");i.classList.add("piece-inv"),i.dataset.type=t.type,i.setAttribute("draggable",!0);const o=document.createElement("img");o.src=t.chibiIcon,o.classList.add("character-image"),i.appendChild(o),r.appendChild(i),i.addEventListener("dragstart",c=>this.handleDragStart(c,t));for(let c=0;c<n.length;c++){const l=7-c;n[l].addEventListener("dragover",h=>h.preventDefault()),n[l].addEventListener("drop",h=>this.handleDrop(h,c))}this.showList()},handleDragStart(t,e){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="none",document.body.classList.add("dragging");const n=t.target,r=document.getElementById("tiles").children;let s;for(let c=0;c<r.length;c++)if(r[c].contains(n)){s=c;break}n.classList.add("grabbable"),t.dataTransfer.setData("tileIndex",s),t.dataTransfer.setData("characterName",e.name);const i=7-s;r[i].querySelector(".front-inv").classList.add("hover-equipment"),t.target.addEventListener("dragend",()=>this.handleDragEnd(i))},handleDragEnd(t){document.getElementById("tiles").children[t].querySelector(".front-inv").classList.remove("hover-equipment")},handleDrop(t,e){t.preventDefault(),t.dataTransfer.dropEffect="move",document.body.classList.remove("dragging");const n=document.getElementById("tiles").children,r=7-e;t.dataTransfer.getData("tileIndex");const s=t.dataTransfer.getData("characterName"),i=n[e],o=n[r],c=this.$store.state.characters.find(l=>l.name===s);if(c){const l=i.querySelector(".piece-inv");l&&(i.removeChild(l),o.querySelector(".front-inv").classList.remove("hover-equipment"),r===this.typeToTileMap[c.type.replace("1","")]?this.updateCharacterType(c.name,c.type.replace("1","")):c.type.endsWith("1")||this.updateCharacterType(c.name,c.type+"1"),o.appendChild(l),document.body.style.cursor="url(/src/assets/GUI/pointer_scifi_b.svg), auto")}},updateCharacterType(t,e){this.$store.commit("UPDATE_CHARACTER_TYPE",{name:t,newType:e})},clickSound(){const t=document.getElementById("click-sound");t.volume=.2,t.play()}},mounted(){document.getElementById("equipment-button").addEventListener("click",this.showEquipment),this.createTiles()}},F4={id:"equipment-container",class:"w-full h-full bg-black/50 fixed backdrop-blur-sm z-[51000] justify-center items-center hidden"},U4={class:"fixed top-0 right-0 z-50 mt-6 mr-6"},B4={class:"absolute z-40 w-full h-full flex flex-col items-center space-y-10 backdrop-blur-sm bg-black/50"},j4={class:"w-2/3 h-24 mt-6 flex py-4 justify-center space-x-10"},$4={class:"w-2/3 h-full grid grid-cols-6 auto-rows-auto overflow-y-auto gap-6 text-white pb-10 px-10"},z4=["onClick"],H4=["src"];function G4(t,e,n,r,s,i){return ze(),Ye("div",F4,[e[9]||(e[9]=de("div",{class:"tiles",id:"tiles"},null,-1)),de("button",U4,[de("img",{onClick:e[0]||(e[0]=(...o)=>i.showList&&i.showList(...o)),class:"w-12 h-12",src:x4})]),de("button",{onClick:e[1]||(e[1]=(...o)=>i.hideEquipment&&i.hideEquipment(...o)),id:"hide-equipment",class:"fixed top-0 left-0 w-12 h-12 mt-6 ml-6 flex justify-center items-center z-50"},e[7]||(e[7]=[Hr('<svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>',1)])),Sf(de("div",B4,[de("div",j4,[de("img",{onClick:e[2]||(e[2]=o=>i.filterCharactersByTypes(["R","R1"])),class:"w-16 h-16",src:V4}),de("img",{onClick:e[3]||(e[3]=o=>i.filterCharactersByTypes(["N","N1"])),class:"w-16 h-16",src:D4}),de("img",{onClick:e[4]||(e[4]=o=>i.filterCharactersByTypes(["B","B1"])),class:"w-16 h-16",src:O4}),de("img",{onClick:e[5]||(e[5]=o=>i.filterCharactersByTypes(["Q","Q1"])),class:"w-16 h-16",src:N4}),de("img",{onClick:e[6]||(e[6]=o=>i.filterCharactersByTypes(["K","K1"])),class:"w-16 h-16",src:L4})]),de("div",$4,[(ze(!0),Ye(St,null,Vf(s.filteredCharacters,o=>(ze(),Ye("div",{class:"w-28 h-[8.4rem] border flex justify-center items-center relative rounded-md",onClick:c=>i.selectCharacter(o),key:o.name},[de("img",{class:"absolute drop-shadow-lg",src:o.chibiIcon},null,8,H4),e[8]||(e[8]=de("div",{class:"w-full h-full bg-indigo-700 rounded-md"},null,-1))],8,z4))),128))])],512),[[sp,s.isListShown]])])}const q4=Yn(M4,[["render",G4]]),W4={};function K4(t,e){return null}const Q4=Yn(W4,[["render",K4]]);({...el(["canChoose","provinces","characters","playerProfile","insertedElement","tutorialSkiped"])});const Y4=[{name:"Prologue",scenes:[{background:"black",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["There was a time when life seemed endless, and happiness felt like it had finally embraced me.","But emerging from the void, I learned that merely living isnt enough.","Must  I learn to live the right way, to make choices that matter?","Staying still, lingering too long, invites the void to find me again."],voices:["/src/assets/PlotResources/Prologue/voices/scene1/1.mp3","/src/assets/PlotResources/Prologue/voices/scene1/2.mp3","/src/assets/PlotResources/Prologue/voices/scene1/3.mp3","/src/assets/PlotResources/Prologue/voices/scene1/4.mp3"],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.1.png",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"/src/assets/PlotResources/Prologue/music/wind__artic__cold-6195.mp3",video:"",effectType:"snowstorm",characters:[{name:"...",image:"",lines:["....","I didn't save you, Victor, like you did.","I dont want to return to the darkness you pulled me from.","But I feel itnightmares creeping closer, the cold piercing through me.","Should I keep moving forward, or is it already too late?"],voices:["/src/assets/PlotResources/Prologue/music/a_woman_laughing_and.mp3","/src/assets/PlotResources/Prologue/voices/scene2/1.mp3","/src/assets/PlotResources/Prologue/voices/scene2/2.mp3","/src/assets/PlotResources/Prologue/voices/scene2/3.mp3","/src/assets/PlotResources/Prologue/voices/scene2/4.mp3"],position:"center"}],choices:[{text:"Accept Victor's death.",nextEpisodeIndex:0,nextSceneIndex:2,afterSceneIndex:3},{text:"Do not accept.",nextEpisodeIndex:0,nextSceneIndex:3,afterSceneIndex:4}]},{background:"black",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["Choosing to remain, she slowly sank into the snowdrifts, each breath growing heavier.","The darkness of the void crept in, swallowing her inch by inch.","She struggled, but the weight of the cold and shadows pressed her deeper.","Victor never came to her aid this time; his presence was a memory, fading away.","In the end, the nothingness claimed her, and the light she once found was gone. Restart the game, please.","! ?!    , .  12+ .      12+.","       ,   ."],voices:[],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.3.png",music:"/src/assets/PlotResources/Prologue/music/dark-piano-ambient-background-music-concrete-forest-208256.mp3",effects:"/src/assets/PlotResources/Prologue/music/wind__artic__cold-6195.mp3",video:"",effectType:"snowstorm",characters:[{name:"Dykke",image:"",lines:["Its so cold and your lifeless body lies here beside me.","I cant let this place be my end, not while theres still hope out there.","Even with the pain and the cold, Ill find the strength to keep moving forward.","I will never leave you alone...."],voices:["/src/assets/PlotResources/Prologue/voices/scene3/1.mp3","/src/assets/PlotResources/Prologue/voices/scene3/2.mp3","/src/assets/PlotResources/Prologue/voices/scene3/3.mp3","/src/assets/PlotResources/Prologue/voices/scene3/4.mp3"],position:"center"}],transition:{text:"After climbing up the slope with the dead body on your back, you move forward and notice footsteps leading to an unknown location.",music:"",effect:"",duration:1e4}},{background:"/src/assets/PlotResources/Prologue/imgs/QKP7RFRCXK564MAW0T8SCFJ350.jpeg",music:"/src/assets/PlotResources/Prologue/music/caves-of-dawn-10376.mp3",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["You step inside a devastated castle located deep in the mountains away from human eyes.","Warmed by the walls, which were warm for some reason, you look around."],voices:[],position:"center"},{name:"Dykke",image:"",lines:["What is this place?","Looks like no-one's been here for ages.","Wait these footprints. They're wet! Who or what made them?","That means I can find someone who can help m-","us","Victor, do you hear me? I'll go check it out."],voices:["/src/assets/PlotResources/Prologue/voices/scene4/1.mp3","/src/assets/PlotResources/Prologue/voices/scene4/2.mp3","/src/assets/PlotResources/Prologue/voices/scene4/3.mp3","/src/assets/PlotResources/Prologue/voices/scene4/4.mp3","/src/assets/PlotResources/Prologue/voices/scene4/5.mp3","/src/assets/PlotResources/Prologue/voices/scene4/6.mp3"],position:"center"}]},{background:"/src/assets/PlotResources/Prologue/imgs/prologue0.4.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"...",image:"",lines:["Wandering through countless corridors in search of salvation, you stumble upon a mirror standing in the very depths of this castle."],voices:[],position:"center"},{name:"Dykke",image:"",lines:["I can't see my reflection. That's strange."],voices:["/src/assets/PlotResources/Prologue/voices/scene5/1.mp3"],position:"center"},{name:"...",image:"",lines:["You move closer and hold out your hand as you suddenly hear someone's footsteps behind you."],voices:["/src/assets/PlotResources/Prologue/music/echoing_footsteps.mp3"],position:"center"},{name:"Dykke",image:"",lines:["Human!"],voices:["/src/assets/PlotResources/Prologue/voices/scene5/2.mp3"],position:"center"}],transition:{text:"Joyfully turning back, you slip and fall inside the mirror.",music:"",effect:"",duration:5e3}}]},{name:"Episode 1",scenes:[{background:"/src/assets/Characters/Backgrounds/Episode1/Scene1/MV5BNGIzYTFhMDAtOWRkZC00ZDVmLTk1M2EtMTMyZTRhNmUzYWVhXkEyXkFqcGdeQXVyMTI1NTkwNTUz._V1_.jpg",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/src/assets/Characters/images/Liria/liria-fullbody.png",lines:["Hello!","How are you?","I have more to say!"],voices:[],position:"left"},{name:"Character 2",image:"/src/assets/Characters/images/Morfel/morfel-fullbody.png",lines:["Hi!","I am fine."],voices:[],position:"right"}]},{background:"/src/assets/Characters/Backgrounds/Episode1/Scene1/wallpaper.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/src/assets/Characters/images/Liria/liria-fullbody.png",lines:["Lets continue our conversation!","Do you like the view?"],voices:[],position:"left"},{name:"Character 2",image:"/src/assets/Characters/images/Morfel/morfel-fullbody.png",lines:["Yes, its beautiful!"],voices:[],position:"right"}]}]},{name:"Episode 2",scenes:[{background:"/assets/backgrounds/scene3.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/assets/characters/char1.png",lines:["This is Episode 2!"],voices:[],position:"right"},{name:"Character 2",image:"/assets/characters/char2.png",lines:["Lets start!"],voices:[],position:"right"}]},{background:"/assets/backgrounds/scene4.png",music:"",effects:"",video:"",effectType:"",characters:[{name:"Character 1",image:"/assets/characters/char1.png",lines:["Lets continue!","More conversation here."],voices:[],position:"right"},{name:"Character 2",image:"/assets/characters/char2.png",lines:["Absolutely."],voices:[],position:"right"}]}]}],J4={episodes:Y4},X4={data(){return{currentEpisodeIndex:0,currentSceneIndex:0,currentCharacterIndex:0,currentLineIndex:0,bgActive1:!0,bgActive2:!1,backgroundStyle1:{},backgroundStyle2:{},showChoices:!1,afterSceneIndex:null,isTransitioning:!1,transitionData:{text:"",music:"",effect:"",duration:4e3},transitionTimeout:null}},computed:{currentEpisode(){return J4.episodes[this.currentEpisodeIndex]},currentScene(){return this.currentEpisode.scenes[this.currentSceneIndex]},currentCharacter(){return this.currentScene.characters[this.currentCharacterIndex]},currentLine(){return{text:this.currentCharacter.lines[this.currentLineIndex]}},currentVoice(){return this.currentCharacter.voices[this.currentLineIndex]||""}},watch:{"currentScene.background":function(t,e){this.transitionBackground(t)}},methods:{startTransition(){this.isTransitioning=!0;const t=this.currentScene.transition;this.transitionData={text:t.text||"",music:t.music||"",effect:t.effect||"",duration:t.duration||4e3},this.$refs.backgroundMusic.pause(),this.$refs.effectSound.pause(),this.transitionData.music&&(this.$refs.transitionMusic.src=this.transitionData.music,this.$refs.transitionMusic.load(),this.$refs.transitionMusic.play()),this.transitionData.effect&&(this.$refs.transitionEffect.src=this.transitionData.effect,this.$refs.transitionEffect.load(),this.$refs.transitionEffect.play());let e="";this.currentSceneIndex<this.currentEpisode.scenes.length-1?e=this.currentEpisode.scenes[this.currentSceneIndex+1].background:e="",this.transitionBackground(e),this.transitionTimeout=setTimeout(()=>{if(this.isTransitioning=!1,this.$refs.transitionMusic.pause(),this.$refs.transitionEffect.pause(),this.currentSceneIndex<this.currentEpisode.scenes.length-1)this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0;else{console.log("End of episode.");try{this.$router.push("/scene")}catch(n){console.error(" :",n)}return}this.playSceneEffects(),this.playSceneAudio(!0),this.handleEffectType()},this.transitionData.duration)},makeChoice(t,e,n){this.currentEpisodeIndex=t,this.currentSceneIndex=e,this.currentCharacterIndex=0,this.currentLineIndex=0,this.showChoices=!1,this.afterSceneIndex=n,this.transitionBackground(this.currentScene.background),this.playVoice(),this.playSceneAudio(!1),this.playSceneEffects(),this.handleEffectType()},handleEffectType(){const t=document.querySelector(".canvas");t&&t.remove(),this.currentScene.effectType==="snowstorm"&&this.createSnowStorm()},getBackgroundStyle(t){return t==="black"||t==="white"||t==="red"?{backgroundColor:t}:{backgroundImage:`url(${t})`}},transitionBackground(t){this.bgActive1?(this.bgActive1=!1,setTimeout(()=>{this.backgroundStyle2=this.getBackgroundStyle(t),this.bgActive2=!0},500)):(this.bgActive2=!1,setTimeout(()=>{this.backgroundStyle1=this.getBackgroundStyle(t),this.bgActive1=!0},500))},nextLine(){const t=this.currentCharacter;this.currentLineIndex<t.lines.length-1?(this.currentLineIndex++,this.playVoice()):this.currentCharacterIndex<this.currentScene.characters.length-1?(this.currentCharacterIndex++,this.currentLineIndex=0,this.playVoice()):this.currentScene.transition?this.startTransition():this.currentScene.choices&&this.currentScene.choices.length>0?this.showChoices=!0:this.afterSceneIndex!==null?(this.currentSceneIndex=this.afterSceneIndex,this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0,this.afterSceneIndex=null,this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!1),this.handleEffectType()):this.currentSceneIndex<this.currentEpisode.scenes.length-1?(this.currentSceneIndex++,this.currentCharacterIndex=0,this.currentLineIndex=0,this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!1),this.handleEffectType()):this.$router.push("/scene")},playSceneAudio(t){const e=this.$refs.backgroundMusic;if(this.currentScene.music){if(!t){const n=e.src.split("/").pop(),r=this.currentScene.music.split("/").pop();if(n===r)return}e.pause(),e.src="",e.src=this.currentScene.music,e.volume=.3,e.load(),setTimeout(()=>{e.play().catch(n=>{console.error("   :",n)})},100)}else e.pause()},playSceneEffects(){const t=this.$refs.effectSound;this.currentScene.effects?(t.pause(),t.src="",t.src=this.currentScene.effects,t.volume=.5,t.load(),t.play().catch(e=>{console.error("   :",e)})):t.pause()},playVoice(){const t=this.$refs.voiceLine;this.currentVoice?(t.pause(),t.src="",t.src=this.currentVoice,t.load(),setTimeout(()=>{t.play().catch(e=>{console.error("   :",e)})},100)):t.pause()},createSnowStorm(){if(this.currentScene.effectType==="snowstorm"){const t=document.createElement("canvas");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1000",t.style.opacity="0",t.style.transition="opacity 1.5s ease-in-out",t.classList.add("canvas"),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1"});const e=t.getContext("2d");let n=window.innerWidth,r=window.innerHeight;t.width=n,t.height=r;const s=200,i=[];for(let c=0;c<s;c++)i.push({x:Math.random()*n,y:Math.random()*r,speed:Math.random()*5+3,length:Math.random()*15+5,wind:Math.random()*3-1.5,angle:45*(Math.PI/180)});const o=()=>{e.clearRect(0,0,n,r),i.forEach(c=>{c.y+=c.speed*Math.sin(c.angle),c.x+=c.speed*Math.cos(c.angle)+c.wind,c.y>r&&(c.y=0),c.x>n&&(c.x=0),c.x<0&&(c.x=n),e.beginPath(),e.moveTo(c.x,c.y),e.lineTo(c.x-c.length*Math.cos(c.angle),c.y-c.length*Math.sin(c.angle)),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath()}),requestAnimationFrame(o)};o(),window.addEventListener("resize",()=>{n=window.innerWidth,r=window.innerHeight,t.width=n,t.height=r})}}},mounted(){this.backgroundStyle1=this.getBackgroundStyle(this.currentScene.background),this.playVoice(),this.playSceneEffects(),this.playSceneAudio(!0),this.createSnowStorm(),this.keydownListener=t=>{t.code==="Space"&&!this.showChoices&&this.nextLine()},window.addEventListener("keydown",this.keydownListener)},beforeDestroy(){window.removeEventListener("keydown",this.keydownListener)}},Z4={class:"visual-novel w-full h-screen flex flex-col justify-center items-center relative bg-black"},e9={key:0,class:"fixed top-0 mt-10 w-64 h-24 text-white z-50 font-mono animate-pulse"},t9={key:2,class:"transition-overlay"},n9={class:"transition-text font-serif text-center text-xl"},r9=["src"],s9={class:"replies w-full h-36 font-serif bg-gradient-to-t flex-col space-y-2 from-black via-black/80 to-transparent text-xl absolute bottom-0 flex text-white justify-center items-center"},i9={class:"text-lg"},o9={key:1,class:"choices flex w-full h-full"},a9=["onClick"],c9={ref:"backgroundMusic",loop:""},l9={ref:"effectSound"},u9={ref:"voiceLine"},h9={ref:"transitionMusic",loop:""},d9={ref:"transitionEffect"};function f9(t,e,n,r,s,i){return ze(),Ye("div",Z4,[s.currentEpisodeIndex===0&&s.currentSceneIndex===0&&s.currentLineIndex===0?(ze(),Ye("div",e9,'Press "Space" to continue')):Vs("",!0),s.isTransitioning?Vs("",!0):(ze(),Ye("div",{key:1,id:"bg1",class:Fr(["background",{active:s.bgActive1}]),style:Qs(s.backgroundStyle1)},null,6)),de("div",{id:"bg2",class:Fr(["background",{active:s.bgActive2}]),style:Qs(s.backgroundStyle2)},null,6),s.isTransitioning?(ze(),Ye("div",t9,[de("p",n9,ir(s.transitionData.text),1)])):(ze(),Ye(St,{key:3},[i.currentCharacter.image?(ze(),Ye("div",{key:0,class:Fr(["character",i.currentCharacter.position])},[de("img",{src:i.currentCharacter.image,alt:"Character Image"},null,8,r9)],2)):Vs("",!0),de("div",s9,[de("span",i9,ir(i.currentCharacter.name),1),de("p",null,ir(i.currentLine.text),1)]),s.showChoices?(ze(),Ye("div",o9,[(ze(!0),Ye(St,null,Vf(i.currentScene.choices,(o,c)=>(ze(),Ye("button",{key:c,onClick:l=>i.makeChoice(o.nextEpisodeIndex,o.nextSceneIndex,o.afterSceneIndex),class:"choice-button bg-gradient-to-b from-[#121212] to-transparent text-white w-1/2 hover:bg-[#121212]/70"},ir(o.text),9,a9))),128))])):Vs("",!0)],64)),de("audio",c9,null,512),de("audio",l9,null,512),de("audio",u9,null,512),de("audio",h9,null,512),de("audio",d9,null,512)])}const p9=Yn(X4,[["render",f9],["__scopeId","data-v-663fae29"]]),g9=i4({history:NI(),routes:[{path:"/",component:Gd},{path:"/home",component:p9},{path:"/game",component:ip},{path:"/scene",component:Gd}]}),Kl=x_(ip);Kl.use(rI);Kl.use(g9);Kl.mount("#app");
