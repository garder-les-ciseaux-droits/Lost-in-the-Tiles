(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ze={},Zr=[],hn=()=>{},am=()=>!1,Qo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Gc=t=>t.startsWith("onUpdate:"),Tt=Object.assign,Hc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},cm=Object.prototype.hasOwnProperty,Oe=(t,e)=>cm.call(t,e),_e=Array.isArray,es=t=>Yo(t)==="[object Map]",Jd=t=>Yo(t)==="[object Set]",ye=t=>typeof t=="function",ot=t=>typeof t=="string",pr=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",Xd=t=>(Je(t)||ye(t))&&ye(t.then)&&ye(t.catch),Zd=Object.prototype.toString,Yo=t=>Zd.call(t),lm=t=>Yo(t).slice(8,-1),ef=t=>Yo(t)==="[object Object]",Kc=t=>ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qs=zc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},um=/-(\w)/g,Yt=Jo(t=>t.replace(um,(e,n)=>n?n.toUpperCase():"")),hm=/\B([A-Z])/g,Nr=Jo(t=>t.replace(hm,"-$1").toLowerCase()),Xo=Jo(t=>t.charAt(0).toUpperCase()+t.slice(1)),La=Jo(t=>t?`on${Xo(t)}`:""),ur=(t,e)=>!Object.is(t,e),Oa=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},tf=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},dm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Hu;const nf=()=>Hu||(Hu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wc(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ot(r)?mm(r):Wc(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ot(t)||Je(t))return t}const fm=/;(?![^(]*\))/g,pm=/:([^]+)/,gm=/\/\*[^]*?\*\//g;function mm(t){const e={};return t.replace(gm,"").split(fm).forEach(n=>{if(n){const r=n.split(pm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qc(t){let e="";if(ot(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const r=Qc(t[n]);r&&(e+=r+" ")}else if(Je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _m="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vm=zc(_m);function rf(t){return!!t||t===""}const sf=t=>!!(t&&t.__v_isRef===!0),oc=t=>ot(t)?t:t==null?"":_e(t)||Je(t)&&(t.toString===Zd||!ye(t.toString))?sf(t)?oc(t.value):JSON.stringify(t,of,2):String(t),of=(t,e)=>sf(e)?of(t,e.value):es(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Na(r,i)+" =>"]=s,n),{})}:Jd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Na(n))}:pr(e)?Na(e):Je(e)&&!_e(e)&&!ef(e)?String(e):e,Na=(t,e="")=>{var n;return pr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jt;class ym{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){jt=this}off(){jt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function wm(){return jt}let He;const Ma=new WeakSet;class af{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ma.has(this)&&(Ma.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ku(this),uf(this);const e=He,n=en;He=this,en=!0;try{return this.fn()}finally{hf(this),He=e,en=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Xc(e);this.deps=this.depsTail=void 0,Ku(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ma.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ac(this)&&this.run()}get dirty(){return ac(this)}}let cf=0,Ys,Js;function lf(t,e=!1){if(t.flags|=8,e){t.next=Js,Js=t;return}t.next=Ys,Ys=t}function Yc(){cf++}function Jc(){if(--cf>0)return;if(Js){let e=Js;for(Js=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ys;){let e=Ys;for(Ys=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function uf(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function hf(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Xc(r),Em(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function ac(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(df(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function df(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ci))return;t.globalVersion=ci;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!ac(t)){t.flags&=-3;return}const n=He,r=en;He=t,en=!0;try{uf(t);const s=t.fn(t._value);(e.version===0||ur(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{He=n,en=r,hf(t),t.flags&=-3}}function Xc(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Xc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Em(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let en=!0;const ff=[];function gr(){ff.push(en),en=!1}function mr(){const t=ff.pop();en=t===void 0?!0:t}function Ku(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let ci=0;class Tm{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!He||!en||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new Tm(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,pf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=r)}return n}trigger(e){this.version++,ci++,this.notify(e)}notify(e){Yc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jc()}}}function pf(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)pf(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const cc=new WeakMap,Ar=Symbol(""),lc=Symbol(""),li=Symbol("");function Vt(t,e,n){if(en&&He){let r=cc.get(t);r||cc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Zc),s.map=r,s.key=n),s.track()}}function On(t,e,n,r,s,i){const a=cc.get(t);if(!a){ci++;return}const c=l=>{l&&l.trigger()};if(Yc(),e==="clear")a.forEach(c);else{const l=_e(t),h=l&&Kc(n);if(l&&n==="length"){const d=Number(r);a.forEach((p,m)=>{(m==="length"||m===li||!pr(m)&&m>=d)&&c(p)})}else switch(n!==void 0&&c(a.get(n)),h&&c(a.get(li)),e){case"add":l?h&&c(a.get("length")):(c(a.get(Ar)),es(t)&&c(a.get(lc)));break;case"delete":l||(c(a.get(Ar)),es(t)&&c(a.get(lc)));break;case"set":es(t)&&c(a.get(Ar));break}}Jc()}function zr(t){const e=Ne(t);return e===t?e:(Vt(e,"iterate",li),Kt(t)?e:e.map(Rt))}function Zo(t){return Vt(t=Ne(t),"iterate",li),t}const bm={__proto__:null,[Symbol.iterator](){return Fa(this,Symbol.iterator,Rt)},concat(...t){return zr(this).concat(...t.map(e=>_e(e)?zr(e):e))},entries(){return Fa(this,"entries",t=>(t[1]=Rt(t[1]),t))},every(t,e){return An(this,"every",t,e,void 0,arguments)},filter(t,e){return An(this,"filter",t,e,n=>n.map(Rt),arguments)},find(t,e){return An(this,"find",t,e,Rt,arguments)},findIndex(t,e){return An(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return An(this,"findLast",t,e,Rt,arguments)},findLastIndex(t,e){return An(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return An(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ua(this,"includes",t)},indexOf(...t){return Ua(this,"indexOf",t)},join(t){return zr(this).join(t)},lastIndexOf(...t){return Ua(this,"lastIndexOf",t)},map(t,e){return An(this,"map",t,e,void 0,arguments)},pop(){return Bs(this,"pop")},push(...t){return Bs(this,"push",t)},reduce(t,...e){return Wu(this,"reduce",t,e)},reduceRight(t,...e){return Wu(this,"reduceRight",t,e)},shift(){return Bs(this,"shift")},some(t,e){return An(this,"some",t,e,void 0,arguments)},splice(...t){return Bs(this,"splice",t)},toReversed(){return zr(this).toReversed()},toSorted(t){return zr(this).toSorted(t)},toSpliced(...t){return zr(this).toSpliced(...t)},unshift(...t){return Bs(this,"unshift",t)},values(){return Fa(this,"values",Rt)}};function Fa(t,e,n){const r=Zo(t),s=r[e]();return r!==t&&!Kt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Im=Array.prototype;function An(t,e,n,r,s,i){const a=Zo(t),c=a!==t&&!Kt(t),l=a[e];if(l!==Im[e]){const p=l.apply(t,i);return c?Rt(p):p}let h=n;a!==t&&(c?h=function(p,m){return n.call(this,Rt(p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const d=l.call(a,h,r);return c&&s?s(d):d}function Wu(t,e,n,r){const s=Zo(t);let i=n;return s!==t&&(Kt(t)?n.length>3&&(i=function(a,c,l){return n.call(this,a,c,l,t)}):i=function(a,c,l){return n.call(this,a,Rt(c),l,t)}),s[e](i,...r)}function Ua(t,e,n){const r=Ne(t);Vt(r,"iterate",li);const s=r[e](...n);return(s===-1||s===!1)&&rl(n[0])?(n[0]=Ne(n[0]),r[e](...n)):s}function Bs(t,e,n=[]){gr(),Yc();const r=Ne(t)[e].apply(t,n);return Jc(),mr(),r}const Sm=zc("__proto__,__v_isRef,__isVue"),gf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pr));function Am(t){pr(t)||(t=String(t));const e=Ne(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class mf{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Um:wf:i?yf:vf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=_e(e);if(!s){let l;if(a&&(l=bm[n]))return l;if(n==="hasOwnProperty")return Am}const c=Reflect.get(e,n,xt(e)?e:r);return(pr(n)?gf.has(n):Sm(n))||(s||Vt(e,"get",n),i)?c:xt(c)?a&&Kc(n)?c:c.value:Je(c)?s?Tf(c):Ii(c):c}}class _f extends mf{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Pr(i);if(!Kt(r)&&!Pr(r)&&(i=Ne(i),r=Ne(r)),!_e(e)&&xt(i)&&!xt(r))return l?!1:(i.value=r,!0)}const a=_e(e)&&Kc(n)?Number(n)<e.length:Oe(e,n),c=Reflect.set(e,n,r,xt(e)?e:s);return e===Ne(s)&&(a?ur(r,i)&&On(e,"set",n,r):On(e,"add",n,r)),c}deleteProperty(e,n){const r=Oe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&On(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!pr(n)||!gf.has(n))&&Vt(e,"has",n),r}ownKeys(e){return Vt(e,"iterate",_e(e)?"length":Ar),Reflect.ownKeys(e)}}class Cm extends mf{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Rm=new _f,Pm=new Cm,km=new _f(!0);const el=t=>t,ea=t=>Reflect.getPrototypeOf(t);function Xi(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ne(t),i=Ne(e);n||(ur(e,i)&&Vt(s,"get",e),Vt(s,"get",i));const{has:a}=ea(s),c=r?el:n?sl:Rt;if(a.call(s,e))return c(t.get(e));if(a.call(s,i))return c(t.get(i));t!==s&&t.get(e)}function Zi(t,e=!1){const n=this.__v_raw,r=Ne(n),s=Ne(t);return e||(ur(t,s)&&Vt(r,"has",t),Vt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function eo(t,e=!1){return t=t.__v_raw,!e&&Vt(Ne(t),"iterate",Ar),Reflect.get(t,"size",t)}function Qu(t,e=!1){!e&&!Kt(t)&&!Pr(t)&&(t=Ne(t));const n=Ne(this);return ea(n).has.call(n,t)||(n.add(t),On(n,"add",t,t)),this}function Yu(t,e,n=!1){!n&&!Kt(e)&&!Pr(e)&&(e=Ne(e));const r=Ne(this),{has:s,get:i}=ea(r);let a=s.call(r,t);a||(t=Ne(t),a=s.call(r,t));const c=i.call(r,t);return r.set(t,e),a?ur(e,c)&&On(r,"set",t,e):On(r,"add",t,e),this}function Ju(t){const e=Ne(this),{has:n,get:r}=ea(e);let s=n.call(e,t);s||(t=Ne(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&On(e,"delete",t,void 0),i}function Xu(){const t=Ne(this),e=t.size!==0,n=t.clear();return e&&On(t,"clear",void 0,void 0),n}function to(t,e){return function(r,s){const i=this,a=i.__v_raw,c=Ne(a),l=e?el:t?sl:Rt;return!t&&Vt(c,"iterate",Ar),a.forEach((h,d)=>r.call(s,l(h),l(d),i))}}function no(t,e,n){return function(...r){const s=this.__v_raw,i=Ne(s),a=es(i),c=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,h=s[t](...r),d=n?el:e?sl:Rt;return!e&&Vt(i,"iterate",l?lc:Ar),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:c?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function Yn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xm(){const t={get(i){return Xi(this,i)},get size(){return eo(this)},has:Zi,add:Qu,set:Yu,delete:Ju,clear:Xu,forEach:to(!1,!1)},e={get(i){return Xi(this,i,!1,!0)},get size(){return eo(this)},has:Zi,add(i){return Qu.call(this,i,!0)},set(i,a){return Yu.call(this,i,a,!0)},delete:Ju,clear:Xu,forEach:to(!1,!0)},n={get(i){return Xi(this,i,!0)},get size(){return eo(this,!0)},has(i){return Zi.call(this,i,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:to(!0,!1)},r={get(i){return Xi(this,i,!0,!0)},get size(){return eo(this,!0)},has(i){return Zi.call(this,i,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:to(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=no(i,!1,!1),n[i]=no(i,!0,!1),e[i]=no(i,!1,!0),r[i]=no(i,!0,!0)}),[t,n,e,r]}const[Vm,Dm,Lm,Om]=xm();function tl(t,e){const n=e?t?Om:Lm:t?Dm:Vm;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Oe(n,s)&&s in r?n:r,s,i)}const Nm={get:tl(!1,!1)},Mm={get:tl(!1,!0)},Fm={get:tl(!0,!1)};const vf=new WeakMap,yf=new WeakMap,wf=new WeakMap,Um=new WeakMap;function Bm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $m(t){return t.__v_skip||!Object.isExtensible(t)?0:Bm(lm(t))}function Ii(t){return Pr(t)?t:nl(t,!1,Rm,Nm,vf)}function Ef(t){return nl(t,!1,km,Mm,yf)}function Tf(t){return nl(t,!0,Pm,Fm,wf)}function nl(t,e,n,r,s){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const a=$m(t);if(a===0)return t;const c=new Proxy(t,a===2?r:n);return s.set(t,c),c}function ts(t){return Pr(t)?ts(t.__v_raw):!!(t&&t.__v_isReactive)}function Pr(t){return!!(t&&t.__v_isReadonly)}function Kt(t){return!!(t&&t.__v_isShallow)}function rl(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function jm(t){return!Oe(t,"__v_skip")&&Object.isExtensible(t)&&tf(t,"__v_skip",!0),t}const Rt=t=>Je(t)?Ii(t):t,sl=t=>Je(t)?Tf(t):t;function xt(t){return t?t.__v_isRef===!0:!1}function qm(t){return bf(t,!1)}function zm(t){return bf(t,!0)}function bf(t,e){return xt(t)?t:new Gm(t,e)}class Gm{constructor(e,n){this.dep=new Zc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:Rt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Kt(e)||Pr(e);e=r?e:Ne(e),ur(e,n)&&(this._rawValue=e,this._value=r?e:Rt(e),this.dep.trigger())}}function ns(t){return xt(t)?t.value:t}const Hm={get:(t,e,n)=>e==="__v_raw"?t:ns(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return xt(s)&&!xt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function If(t){return ts(t)?t:new Proxy(t,Hm)}class Km{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Zc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ci-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return lf(this,!0),!0}get value(){const e=this.dep.track();return df(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Wm(t,e,n=!1){let r,s;return ye(t)?r=t:(r=t.get,s=t.set),new Km(r,s,n)}const ro={},To=new WeakMap;let Tr;function Qm(t,e=!1,n=Tr){if(n){let r=To.get(n);r||To.set(n,r=[]),r.push(t)}}function Ym(t,e,n=ze){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:c,call:l}=n,h=Q=>s?Q:Kt(Q)||s===!1||s===0?Pn(Q,1):Pn(Q);let d,p,m,y,L=!1,O=!1;if(xt(t)?(p=()=>t.value,L=Kt(t)):ts(t)?(p=()=>h(t),L=!0):_e(t)?(O=!0,L=t.some(Q=>ts(Q)||Kt(Q)),p=()=>t.map(Q=>{if(xt(Q))return Q.value;if(ts(Q))return h(Q);if(ye(Q))return l?l(Q,2):Q()})):ye(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){gr();try{m()}finally{mr()}}const Q=Tr;Tr=d;try{return l?l(t,3,[y]):t(y)}finally{Tr=Q}}:p=hn,e&&s){const Q=p,we=s===!0?1/0:s;p=()=>Pn(Q(),we)}const M=wm(),G=()=>{d.stop(),M&&Hc(M.effects,d)};if(i&&e){const Q=e;e=(...we)=>{Q(...we),G()}}let H=O?new Array(t.length).fill(ro):ro;const W=Q=>{if(!(!(d.flags&1)||!d.dirty&&!Q))if(e){const we=d.run();if(s||L||(O?we.some((ge,S)=>ur(ge,H[S])):ur(we,H))){m&&m();const ge=Tr;Tr=d;try{const S=[we,H===ro?void 0:O&&H[0]===ro?[]:H,y];l?l(e,3,S):e(...S),H=we}finally{Tr=ge}}}else d.run()};return c&&c(W),d=new af(p),d.scheduler=a?()=>a(W,!1):W,y=Q=>Qm(Q,!1,d),m=d.onStop=()=>{const Q=To.get(d);if(Q){if(l)l(Q,4);else for(const we of Q)we();To.delete(d)}},e?r?W(!0):H=d.run():a?a(W.bind(null,!0),!0):d.run(),G.pause=d.pause.bind(d),G.resume=d.resume.bind(d),G.stop=G,G}function Pn(t,e=1/0,n){if(e<=0||!Je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,xt(t))Pn(t.value,e,n);else if(_e(t))for(let r=0;r<t.length;r++)Pn(t[r],e,n);else if(Jd(t)||es(t))t.forEach(r=>{Pn(r,e,n)});else if(ef(t)){for(const r in t)Pn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Si(t,e,n,r){try{return r?t(...r):t()}catch(s){ta(s,e,n)}}function _n(t,e,n,r){if(ye(t)){const s=Si(t,e,n,r);return s&&Xd(s)&&s.catch(i=>{ta(i,e,n)}),s}if(_e(t)){const s=[];for(let i=0;i<t.length;i++)s.push(_n(t[i],e,n,r));return s}}function ta(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||ze;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const d=c.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,h)===!1)return}c=c.parent}if(i){gr(),Si(i,null,10,[t,l,h]),mr();return}}Jm(t,n,s,r,a)}function Jm(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Mt=[];let ln=-1;const rs=[];let Zn=null,Kr=0;const Sf=Promise.resolve();let bo=null;function Af(t){const e=bo||Sf;return t?e.then(this?t.bind(this):t):e}function Xm(t){let e=ln+1,n=Mt.length;for(;e<n;){const r=e+n>>>1,s=Mt[r],i=ui(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function il(t){if(!(t.flags&1)){const e=ui(t),n=Mt[Mt.length-1];!n||!(t.flags&2)&&e>=ui(n)?Mt.push(t):Mt.splice(Xm(e),0,t),t.flags|=1,Cf()}}function Cf(){bo||(bo=Sf.then(Pf))}function Zm(t){_e(t)?rs.push(...t):Zn&&t.id===-1?Zn.splice(Kr+1,0,t):t.flags&1||(rs.push(t),t.flags|=1),Cf()}function Zu(t,e,n=ln+1){for(;n<Mt.length;n++){const r=Mt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Mt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Rf(t){if(rs.length){const e=[...new Set(rs)].sort((n,r)=>ui(n)-ui(r));if(rs.length=0,Zn){Zn.push(...e);return}for(Zn=e,Kr=0;Kr<Zn.length;Kr++){const n=Zn[Kr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Zn=null,Kr=0}}const ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Pf(t){try{for(ln=0;ln<Mt.length;ln++){const e=Mt[ln];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Si(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ln<Mt.length;ln++){const e=Mt[ln];e&&(e.flags&=-2)}ln=-1,Mt.length=0,Rf(),bo=null,(Mt.length||rs.length)&&Pf()}}let qt=null,kf=null;function Io(t){const e=qt;return qt=t,kf=t&&t.type.__scopeId||null,e}function e1(t,e=qt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ch(-1);const i=Io(e);let a;try{a=t(...s)}finally{Io(i),r._d&&ch(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function So(t,e){if(qt===null)return t;const n=oa(qt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,c,l=ze]=e[s];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&Pn(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function wr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const c=s[a];i&&(c.oldValue=i[a].value);let l=c.dir[r];l&&(gr(),_n(l,n,8,[t.el,c,t,e]),mr())}}const t1=Symbol("_vte"),n1=t=>t.__isTeleport;function ol(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ol(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function xf(t,e){return ye(t)?Tt({name:t.name},e,{setup:t}):t}function Vf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function uc(t,e,n,r,s=!1){if(_e(t)){t.forEach((L,O)=>uc(L,e&&(_e(e)?e[O]:e),n,r,s));return}if(Xs(r)&&!s)return;const i=r.shapeFlag&4?oa(r.component):r.el,a=s?null:i,{i:c,r:l}=t,h=e&&e.r,d=c.refs===ze?c.refs={}:c.refs,p=c.setupState,m=Ne(p),y=p===ze?()=>!1:L=>Oe(m,L);if(h!=null&&h!==l&&(ot(h)?(d[h]=null,y(h)&&(p[h]=null)):xt(h)&&(h.value=null)),ye(l))Si(l,c,12,[a,d]);else{const L=ot(l),O=xt(l);if(L||O){const M=()=>{if(t.f){const G=L?y(l)?p[l]:d[l]:l.value;s?_e(G)&&Hc(G,i):_e(G)?G.includes(i)||G.push(i):L?(d[l]=[i],y(l)&&(p[l]=d[l])):(l.value=[i],t.k&&(d[t.k]=l.value))}else L?(d[l]=a,y(l)&&(p[l]=a)):O&&(l.value=a,t.k&&(d[t.k]=a))};a?(M.id=-1,$t(M,n)):M()}}}const Xs=t=>!!t.type.__asyncLoader,Df=t=>t.type.__isKeepAlive;function r1(t,e){Lf(t,"a",e)}function s1(t,e){Lf(t,"da",e)}function Lf(t,e,n=kt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(na(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Df(s.parent.vnode)&&i1(r,e,n,s),s=s.parent}}function i1(t,e,n,r){const s=na(e,t,r,!0);Of(()=>{Hc(r[e],s)},n)}function na(t,e,n=kt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...a)=>{gr();const c=Ai(n),l=_n(e,n,t,a);return c(),mr(),l});return r?s.unshift(i):s.push(i),i}}const jn=t=>(e,n=kt)=>{(!ia||t==="sp")&&na(t,(...r)=>e(...r),n)},o1=jn("bm"),a1=jn("m"),c1=jn("bu"),l1=jn("u"),u1=jn("bum"),Of=jn("um"),h1=jn("sp"),d1=jn("rtg"),f1=jn("rtc");function p1(t,e=kt){na("ec",t,e)}const g1="components";function Wr(t,e){return _1(g1,t,!0,e)||t}const m1=Symbol.for("v-ndc");function _1(t,e,n=!0,r=!1){const s=qt||kt;if(s){const i=s.type;{const c=o2(i,!1);if(c&&(c===e||c===Yt(e)||c===Xo(Yt(e))))return i}const a=eh(s[t]||i[t],e)||eh(s.appContext[t],e);return!a&&r?i:a}}function eh(t,e){return t&&(t[e]||t[Yt(e)]||t[Xo(Yt(e))])}function v1(t,e,n,r){let s;const i=n,a=_e(t);if(a||ot(t)){const c=a&&ts(t);let l=!1;c&&(l=!Kt(t),t=Zo(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?Rt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Je(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const d=c[l];s[l]=e(t[d],d,l,i)}}else s=[];return s}const hc=t=>t?np(t)?oa(t):hc(t.parent):null,Zs=Tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>hc(t.parent),$root:t=>hc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>al(t),$forceUpdate:t=>t.f||(t.f=()=>{il(t.update)}),$nextTick:t=>t.n||(t.n=Af.bind(t.proxy)),$watch:t=>U1.bind(t)}),Ba=(t,e)=>t!==ze&&!t.__isScriptSetup&&Oe(t,e),y1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:c,appContext:l}=t;let h;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Ba(r,e))return a[e]=1,r[e];if(s!==ze&&Oe(s,e))return a[e]=2,s[e];if((h=t.propsOptions[0])&&Oe(h,e))return a[e]=3,i[e];if(n!==ze&&Oe(n,e))return a[e]=4,n[e];dc&&(a[e]=0)}}const d=Zs[e];let p,m;if(d)return e==="$attrs"&&Vt(t.attrs,"get",""),d(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==ze&&Oe(n,e))return a[e]=4,n[e];if(m=l.config.globalProperties,Oe(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Ba(s,e)?(s[e]=n,!0):r!==ze&&Oe(r,e)?(r[e]=n,!0):Oe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let c;return!!n[a]||t!==ze&&Oe(t,a)||Ba(e,a)||(c=i[0])&&Oe(c,a)||Oe(r,a)||Oe(Zs,a)||Oe(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Oe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function th(t){return _e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let dc=!0;function w1(t){const e=al(t),n=t.proxy,r=t.ctx;dc=!1,e.beforeCreate&&nh(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:c,provide:l,inject:h,created:d,beforeMount:p,mounted:m,beforeUpdate:y,updated:L,activated:O,deactivated:M,beforeDestroy:G,beforeUnmount:H,destroyed:W,unmounted:Q,render:we,renderTracked:ge,renderTriggered:S,errorCaptured:w,serverPrefetch:T,expose:A,inheritAttrs:R,components:k,directives:_,filters:pt}=e;if(h&&E1(h,r,null),a)for(const Ae in a){const Ie=a[Ae];ye(Ie)&&(r[Ae]=Ie.bind(n))}if(s){const Ae=s.call(n,n);Je(Ae)&&(t.data=Ii(Ae))}if(dc=!0,i)for(const Ae in i){const Ie=i[Ae],ht=ye(Ie)?Ie.bind(n,n):ye(Ie.get)?Ie.get.bind(n,n):hn,Ut=!ye(Ie)&&ye(Ie.set)?Ie.set.bind(n):hn,gt=Xt({get:ht,set:Ut});Object.defineProperty(r,Ae,{enumerable:!0,configurable:!0,get:()=>gt.value,set:Ge=>gt.value=Ge})}if(c)for(const Ae in c)Nf(c[Ae],r,n,Ae);if(l){const Ae=ye(l)?l.call(n):l;Reflect.ownKeys(Ae).forEach(Ie=>{lo(Ie,Ae[Ie])})}d&&nh(d,t,"c");function Ke(Ae,Ie){_e(Ie)?Ie.forEach(ht=>Ae(ht.bind(n))):Ie&&Ae(Ie.bind(n))}if(Ke(o1,p),Ke(a1,m),Ke(c1,y),Ke(l1,L),Ke(r1,O),Ke(s1,M),Ke(p1,w),Ke(f1,ge),Ke(d1,S),Ke(u1,H),Ke(Of,Q),Ke(h1,T),_e(A))if(A.length){const Ae=t.exposed||(t.exposed={});A.forEach(Ie=>{Object.defineProperty(Ae,Ie,{get:()=>n[Ie],set:ht=>n[Ie]=ht})})}else t.exposed||(t.exposed={});we&&t.render===hn&&(t.render=we),R!=null&&(t.inheritAttrs=R),k&&(t.components=k),_&&(t.directives=_),T&&Vf(t)}function E1(t,e,n=hn){_e(t)&&(t=fc(t));for(const r in t){const s=t[r];let i;Je(s)?"default"in s?i=Nn(s.from||r,s.default,!0):i=Nn(s.from||r):i=Nn(s),xt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function nh(t,e,n){_n(_e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Nf(t,e,n,r){let s=r.includes(".")?Yf(n,r):()=>n[r];if(ot(t)){const i=e[t];ye(i)&&is(s,i)}else if(ye(t))is(s,t.bind(n));else if(Je(t))if(_e(t))t.forEach(i=>Nf(i,e,n,r));else{const i=ye(t.handler)?t.handler.bind(n):e[t.handler];ye(i)&&is(s,i,t)}}function al(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(h=>Ao(l,h,a,!0)),Ao(l,e,a)),Je(e)&&i.set(e,l),l}function Ao(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ao(t,i,n,!0),s&&s.forEach(a=>Ao(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const c=T1[a]||n&&n[a];t[a]=c?c(t[a],e[a]):e[a]}return t}const T1={data:rh,props:sh,emits:sh,methods:Gs,computed:Gs,beforeCreate:Nt,created:Nt,beforeMount:Nt,mounted:Nt,beforeUpdate:Nt,updated:Nt,beforeDestroy:Nt,beforeUnmount:Nt,destroyed:Nt,unmounted:Nt,activated:Nt,deactivated:Nt,errorCaptured:Nt,serverPrefetch:Nt,components:Gs,directives:Gs,watch:I1,provide:rh,inject:b1};function rh(t,e){return e?t?function(){return Tt(ye(t)?t.call(this,this):t,ye(e)?e.call(this,this):e)}:e:t}function b1(t,e){return Gs(fc(t),fc(e))}function fc(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nt(t,e){return t?[...new Set([].concat(t,e))]:e}function Gs(t,e){return t?Tt(Object.create(null),t,e):e}function sh(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:Tt(Object.create(null),th(t),th(e??{})):e}function I1(t,e){if(!t)return e;if(!e)return t;const n=Tt(Object.create(null),t);for(const r in e)n[r]=Nt(t[r],e[r]);return n}function Mf(){return{app:null,config:{isNativeTag:am,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let S1=0;function A1(t,e){return function(r,s=null){ye(r)||(r=Tt({},r)),s!=null&&!Je(s)&&(s=null);const i=Mf(),a=new WeakSet,c=[];let l=!1;const h=i.app={_uid:S1++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:c2,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ye(d.install)?(a.add(d),d.install(h,...p)):ye(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,m){if(!l){const y=h._ceVNode||ct(r,s);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),p&&e?e(y,d):t(y,d,m),l=!0,h._container=d,d.__vue_app__=h,oa(y.component)}},onUnmount(d){c.push(d)},unmount(){l&&(_n(c,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=ss;ss=h;try{return d()}finally{ss=p}}};return h}}let ss=null;function lo(t,e){if(kt){let n=kt.provides;const r=kt.parent&&kt.parent.provides;r===n&&(n=kt.provides=Object.create(r)),n[t]=e}}function Nn(t,e,n=!1){const r=kt||qt;if(r||ss){const s=ss?ss._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ye(e)?e.call(r&&r.proxy):e}}const Ff={},Uf=()=>Object.create(Ff),Bf=t=>Object.getPrototypeOf(t)===Ff;function C1(t,e,n,r=!1){const s={},i=Uf();t.propsDefaults=Object.create(null),$f(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=r?s:Ef(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function R1(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,c=Ne(s),[l]=t.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(ra(t.emitsOptions,m))continue;const y=e[m];if(l)if(Oe(i,m))y!==i[m]&&(i[m]=y,h=!0);else{const L=Yt(m);s[L]=pc(l,c,L,y,t,!1)}else y!==i[m]&&(i[m]=y,h=!0)}}}else{$f(t,e,s,i)&&(h=!0);let d;for(const p in c)(!e||!Oe(e,p)&&((d=Nr(p))===p||!Oe(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=pc(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!Oe(e,p))&&(delete i[p],h=!0)}h&&On(t.attrs,"set","")}function $f(t,e,n,r){const[s,i]=t.propsOptions;let a=!1,c;if(e)for(let l in e){if(Qs(l))continue;const h=e[l];let d;s&&Oe(s,d=Yt(l))?!i||!i.includes(d)?n[d]=h:(c||(c={}))[d]=h:ra(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(i){const l=Ne(n),h=c||ze;for(let d=0;d<i.length;d++){const p=i[d];n[p]=pc(s,l,p,h[p],t,!Oe(h,p))}}return a}function pc(t,e,n,r,s,i){const a=t[n];if(a!=null){const c=Oe(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ye(l)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=Ai(s);r=h[n]=l.call(null,e),d()}}else r=l;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!c?r=!1:a[1]&&(r===""||r===Nr(n))&&(r=!0))}return r}const P1=new WeakMap;function jf(t,e,n=!1){const r=n?P1:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,a={},c=[];let l=!1;if(!ye(t)){const d=p=>{l=!0;const[m,y]=jf(p,e,!0);Tt(a,m),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!l)return Je(t)&&r.set(t,Zr),Zr;if(_e(i))for(let d=0;d<i.length;d++){const p=Yt(i[d]);ih(p)&&(a[p]=ze)}else if(i)for(const d in i){const p=Yt(d);if(ih(p)){const m=i[d],y=a[p]=_e(m)||ye(m)?{type:m}:Tt({},m),L=y.type;let O=!1,M=!0;if(_e(L))for(let G=0;G<L.length;++G){const H=L[G],W=ye(H)&&H.name;if(W==="Boolean"){O=!0;break}else W==="String"&&(M=!1)}else O=ye(L)&&L.name==="Boolean";y[0]=O,y[1]=M,(O||Oe(y,"default"))&&c.push(p)}}const h=[a,c];return Je(t)&&r.set(t,h),h}function ih(t){return t[0]!=="$"&&!Qs(t)}const qf=t=>t[0]==="_"||t==="$stable",cl=t=>_e(t)?t.map(un):[un(t)],k1=(t,e,n)=>{if(e._n)return e;const r=e1((...s)=>cl(e(...s)),n);return r._c=!1,r},zf=(t,e,n)=>{const r=t._ctx;for(const s in t){if(qf(s))continue;const i=t[s];if(ye(i))e[s]=k1(s,i,r);else if(i!=null){const a=cl(i);e[s]=()=>a}}},Gf=(t,e)=>{const n=cl(e);t.slots.default=()=>n},Hf=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},x1=(t,e,n)=>{const r=t.slots=Uf();if(t.vnode.shapeFlag&32){const s=e._;s?(Hf(r,e,n),n&&tf(r,"_",s,!0)):zf(e,r)}else e&&Gf(t,e)},V1=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,a=ze;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:Hf(s,e,n):(i=!e.$stable,zf(e,s)),a=e}else e&&(Gf(t,e),a={default:1});if(i)for(const c in s)!qf(c)&&a[c]==null&&delete s[c]},$t=H1;function D1(t){return L1(t)}function L1(t,e){const n=nf();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:c,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:m,setScopeId:y=hn,insertStaticContent:L}=t,O=(v,E,D,B=null,U=null,j=null,Z=void 0,J=null,Y=!!E.dynamicChildren)=>{if(v===E)return;v&&!$s(v,E)&&(B=F(v),Ge(v,U,j,!0),v=null),E.patchFlag===-2&&(Y=!1,E.dynamicChildren=null);const{type:z,ref:le,shapeFlag:ee}=E;switch(z){case sa:M(v,E,D,B);break;case kr:G(v,E,D,B);break;case uo:v==null&&H(E,D,B,Z);break;case Gt:k(v,E,D,B,U,j,Z,J,Y);break;default:ee&1?we(v,E,D,B,U,j,Z,J,Y):ee&6?_(v,E,D,B,U,j,Z,J,Y):(ee&64||ee&128)&&z.process(v,E,D,B,U,j,Z,J,Y,oe)}le!=null&&U&&uc(le,v&&v.ref,j,E||v,!E)},M=(v,E,D,B)=>{if(v==null)r(E.el=c(E.children),D,B);else{const U=E.el=v.el;E.children!==v.children&&h(U,E.children)}},G=(v,E,D,B)=>{v==null?r(E.el=l(E.children||""),D,B):E.el=v.el},H=(v,E,D,B)=>{[v.el,v.anchor]=L(v.children,E,D,B,v.el,v.anchor)},W=({el:v,anchor:E},D,B)=>{let U;for(;v&&v!==E;)U=m(v),r(v,D,B),v=U;r(E,D,B)},Q=({el:v,anchor:E})=>{let D;for(;v&&v!==E;)D=m(v),s(v),v=D;s(E)},we=(v,E,D,B,U,j,Z,J,Y)=>{E.type==="svg"?Z="svg":E.type==="math"&&(Z="mathml"),v==null?ge(E,D,B,U,j,Z,J,Y):T(v,E,U,j,Z,J,Y)},ge=(v,E,D,B,U,j,Z,J)=>{let Y,z;const{props:le,shapeFlag:ee,transition:ce,dirs:ie}=v;if(Y=v.el=a(v.type,j,le&&le.is,le),ee&8?d(Y,v.children):ee&16&&w(v.children,Y,null,B,U,$a(v,j),Z,J),ie&&wr(v,null,B,"created"),S(Y,v,v.scopeId,Z,B),le){for(const Ve in le)Ve!=="value"&&!Qs(Ve)&&i(Y,Ve,null,le[Ve],j,B);"value"in le&&i(Y,"value",null,le.value,j),(z=le.onVnodeBeforeMount)&&cn(z,B,v)}ie&&wr(v,null,B,"beforeMount");const ue=O1(U,ce);ue&&ce.beforeEnter(Y),r(Y,E,D),((z=le&&le.onVnodeMounted)||ue||ie)&&$t(()=>{z&&cn(z,B,v),ue&&ce.enter(Y),ie&&wr(v,null,B,"mounted")},U)},S=(v,E,D,B,U)=>{if(D&&y(v,D),B)for(let j=0;j<B.length;j++)y(v,B[j]);if(U){let j=U.subTree;if(E===j||Xf(j.type)&&(j.ssContent===E||j.ssFallback===E)){const Z=U.vnode;S(v,Z,Z.scopeId,Z.slotScopeIds,U.parent)}}},w=(v,E,D,B,U,j,Z,J,Y=0)=>{for(let z=Y;z<v.length;z++){const le=v[z]=J?er(v[z]):un(v[z]);O(null,le,E,D,B,U,j,Z,J)}},T=(v,E,D,B,U,j,Z)=>{const J=E.el=v.el;let{patchFlag:Y,dynamicChildren:z,dirs:le}=E;Y|=v.patchFlag&16;const ee=v.props||ze,ce=E.props||ze;let ie;if(D&&Er(D,!1),(ie=ce.onVnodeBeforeUpdate)&&cn(ie,D,E,v),le&&wr(E,v,D,"beforeUpdate"),D&&Er(D,!0),(ee.innerHTML&&ce.innerHTML==null||ee.textContent&&ce.textContent==null)&&d(J,""),z?A(v.dynamicChildren,z,J,D,B,$a(E,U),j):Z||Ie(v,E,J,null,D,B,$a(E,U),j,!1),Y>0){if(Y&16)R(J,ee,ce,D,U);else if(Y&2&&ee.class!==ce.class&&i(J,"class",null,ce.class,U),Y&4&&i(J,"style",ee.style,ce.style,U),Y&8){const ue=E.dynamicProps;for(let Ve=0;Ve<ue.length;Ve++){const ke=ue[Ve],dt=ee[ke],nt=ce[ke];(nt!==dt||ke==="value")&&i(J,ke,dt,nt,U,D)}}Y&1&&v.children!==E.children&&d(J,E.children)}else!Z&&z==null&&R(J,ee,ce,D,U);((ie=ce.onVnodeUpdated)||le)&&$t(()=>{ie&&cn(ie,D,E,v),le&&wr(E,v,D,"updated")},B)},A=(v,E,D,B,U,j,Z)=>{for(let J=0;J<E.length;J++){const Y=v[J],z=E[J],le=Y.el&&(Y.type===Gt||!$s(Y,z)||Y.shapeFlag&70)?p(Y.el):D;O(Y,z,le,null,B,U,j,Z,!0)}},R=(v,E,D,B,U)=>{if(E!==D){if(E!==ze)for(const j in E)!Qs(j)&&!(j in D)&&i(v,j,E[j],null,U,B);for(const j in D){if(Qs(j))continue;const Z=D[j],J=E[j];Z!==J&&j!=="value"&&i(v,j,J,Z,U,B)}"value"in D&&i(v,"value",E.value,D.value,U)}},k=(v,E,D,B,U,j,Z,J,Y)=>{const z=E.el=v?v.el:c(""),le=E.anchor=v?v.anchor:c("");let{patchFlag:ee,dynamicChildren:ce,slotScopeIds:ie}=E;ie&&(J=J?J.concat(ie):ie),v==null?(r(z,D,B),r(le,D,B),w(E.children||[],D,le,U,j,Z,J,Y)):ee>0&&ee&64&&ce&&v.dynamicChildren?(A(v.dynamicChildren,ce,D,U,j,Z,J),(E.key!=null||U&&E===U.subTree)&&Kf(v,E,!0)):Ie(v,E,D,le,U,j,Z,J,Y)},_=(v,E,D,B,U,j,Z,J,Y)=>{E.slotScopeIds=J,v==null?E.shapeFlag&512?U.ctx.activate(E,D,B,Z,Y):pt(E,D,B,U,j,Z,Y):Lt(v,E,Y)},pt=(v,E,D,B,U,j,Z)=>{const J=v.component=t2(v,B,U);if(Df(v)&&(J.ctx.renderer=oe),n2(J,!1,Z),J.asyncDep){if(U&&U.registerDep(J,Ke,Z),!v.el){const Y=J.subTree=ct(kr);G(null,Y,E,D)}}else Ke(J,v,E,D,U,j,Z)},Lt=(v,E,D)=>{const B=E.component=v.component;if(z1(v,E,D))if(B.asyncDep&&!B.asyncResolved){Ae(B,E,D);return}else B.next=E,B.update();else E.el=v.el,B.vnode=E},Ke=(v,E,D,B,U,j,Z)=>{const J=()=>{if(v.isMounted){let{next:ee,bu:ce,u:ie,parent:ue,vnode:Ve}=v;{const Ye=Wf(v);if(Ye){ee&&(ee.el=Ve.el,Ae(v,ee,Z)),Ye.asyncDep.then(()=>{v.isUnmounted||J()});return}}let ke=ee,dt;Er(v,!1),ee?(ee.el=Ve.el,Ae(v,ee,Z)):ee=Ve,ce&&Oa(ce),(dt=ee.props&&ee.props.onVnodeBeforeUpdate)&&cn(dt,ue,ee,Ve),Er(v,!0);const nt=ja(v),rt=v.subTree;v.subTree=nt,O(rt,nt,p(rt.el),F(rt),v,U,j),ee.el=nt.el,ke===null&&G1(v,nt.el),ie&&$t(ie,U),(dt=ee.props&&ee.props.onVnodeUpdated)&&$t(()=>cn(dt,ue,ee,Ve),U)}else{let ee;const{el:ce,props:ie}=E,{bm:ue,m:Ve,parent:ke,root:dt,type:nt}=v,rt=Xs(E);if(Er(v,!1),ue&&Oa(ue),!rt&&(ee=ie&&ie.onVnodeBeforeMount)&&cn(ee,ke,E),Er(v,!0),ce&&Me){const Ye=()=>{v.subTree=ja(v),Me(ce,v.subTree,v,U,null)};rt&&nt.__asyncHydrate?nt.__asyncHydrate(ce,v,Ye):Ye()}else{dt.ce&&dt.ce._injectChildStyle(nt);const Ye=v.subTree=ja(v);O(null,Ye,D,B,v,U,j),E.el=Ye.el}if(Ve&&$t(Ve,U),!rt&&(ee=ie&&ie.onVnodeMounted)){const Ye=E;$t(()=>cn(ee,ke,Ye),U)}(E.shapeFlag&256||ke&&Xs(ke.vnode)&&ke.vnode.shapeFlag&256)&&v.a&&$t(v.a,U),v.isMounted=!0,E=D=B=null}};v.scope.on();const Y=v.effect=new af(J);v.scope.off();const z=v.update=Y.run.bind(Y),le=v.job=Y.runIfDirty.bind(Y);le.i=v,le.id=v.uid,Y.scheduler=()=>il(le),Er(v,!0),z()},Ae=(v,E,D)=>{E.component=v;const B=v.vnode.props;v.vnode=E,v.next=null,R1(v,E.props,B,D),V1(v,E.children,D),gr(),Zu(v),mr()},Ie=(v,E,D,B,U,j,Z,J,Y=!1)=>{const z=v&&v.children,le=v?v.shapeFlag:0,ee=E.children,{patchFlag:ce,shapeFlag:ie}=E;if(ce>0){if(ce&128){Ut(z,ee,D,B,U,j,Z,J,Y);return}else if(ce&256){ht(z,ee,D,B,U,j,Z,J,Y);return}}ie&8?(le&16&&mt(z,U,j),ee!==z&&d(D,ee)):le&16?ie&16?Ut(z,ee,D,B,U,j,Z,J,Y):mt(z,U,j,!0):(le&8&&d(D,""),ie&16&&w(ee,D,B,U,j,Z,J,Y))},ht=(v,E,D,B,U,j,Z,J,Y)=>{v=v||Zr,E=E||Zr;const z=v.length,le=E.length,ee=Math.min(z,le);let ce;for(ce=0;ce<ee;ce++){const ie=E[ce]=Y?er(E[ce]):un(E[ce]);O(v[ce],ie,D,null,U,j,Z,J,Y)}z>le?mt(v,U,j,!0,!1,ee):w(E,D,B,U,j,Z,J,Y,ee)},Ut=(v,E,D,B,U,j,Z,J,Y)=>{let z=0;const le=E.length;let ee=v.length-1,ce=le-1;for(;z<=ee&&z<=ce;){const ie=v[z],ue=E[z]=Y?er(E[z]):un(E[z]);if($s(ie,ue))O(ie,ue,D,null,U,j,Z,J,Y);else break;z++}for(;z<=ee&&z<=ce;){const ie=v[ee],ue=E[ce]=Y?er(E[ce]):un(E[ce]);if($s(ie,ue))O(ie,ue,D,null,U,j,Z,J,Y);else break;ee--,ce--}if(z>ee){if(z<=ce){const ie=ce+1,ue=ie<le?E[ie].el:B;for(;z<=ce;)O(null,E[z]=Y?er(E[z]):un(E[z]),D,ue,U,j,Z,J,Y),z++}}else if(z>ce)for(;z<=ee;)Ge(v[z],U,j,!0),z++;else{const ie=z,ue=z,Ve=new Map;for(z=ue;z<=ce;z++){const st=E[z]=Y?er(E[z]):un(E[z]);st.key!=null&&Ve.set(st.key,z)}let ke,dt=0;const nt=ce-ue+1;let rt=!1,Ye=0;const on=new Array(nt);for(z=0;z<nt;z++)on[z]=0;for(z=ie;z<=ee;z++){const st=v[z];if(dt>=nt){Ge(st,U,j,!0);continue}let _t;if(st.key!=null)_t=Ve.get(st.key);else for(ke=ue;ke<=ce;ke++)if(on[ke-ue]===0&&$s(st,E[ke])){_t=ke;break}_t===void 0?Ge(st,U,j,!0):(on[_t-ue]=z+1,_t>=Ye?Ye=_t:rt=!0,O(st,E[_t],D,null,U,j,Z,J,Y),dt++)}const Gn=rt?N1(on):Zr;for(ke=Gn.length-1,z=nt-1;z>=0;z--){const st=ue+z,_t=E[st],Hn=st+1<le?E[st+1].el:B;on[z]===0?O(null,_t,D,Hn,U,j,Z,J,Y):rt&&(ke<0||z!==Gn[ke]?gt(_t,D,Hn,2):ke--)}}},gt=(v,E,D,B,U=null)=>{const{el:j,type:Z,transition:J,children:Y,shapeFlag:z}=v;if(z&6){gt(v.component.subTree,E,D,B);return}if(z&128){v.suspense.move(E,D,B);return}if(z&64){Z.move(v,E,D,oe);return}if(Z===Gt){r(j,E,D);for(let ee=0;ee<Y.length;ee++)gt(Y[ee],E,D,B);r(v.anchor,E,D);return}if(Z===uo){W(v,E,D);return}if(B!==2&&z&1&&J)if(B===0)J.beforeEnter(j),r(j,E,D),$t(()=>J.enter(j),U);else{const{leave:ee,delayLeave:ce,afterLeave:ie}=J,ue=()=>r(j,E,D),Ve=()=>{ee(j,()=>{ue(),ie&&ie()})};ce?ce(j,ue,Ve):Ve()}else r(j,E,D)},Ge=(v,E,D,B=!1,U=!1)=>{const{type:j,props:Z,ref:J,children:Y,dynamicChildren:z,shapeFlag:le,patchFlag:ee,dirs:ce,cacheIndex:ie}=v;if(ee===-2&&(U=!1),J!=null&&uc(J,null,D,v,!0),ie!=null&&(E.renderCache[ie]=void 0),le&256){E.ctx.deactivate(v);return}const ue=le&1&&ce,Ve=!Xs(v);let ke;if(Ve&&(ke=Z&&Z.onVnodeBeforeUnmount)&&cn(ke,E,v),le&6)at(v.component,D,B);else{if(le&128){v.suspense.unmount(D,B);return}ue&&wr(v,null,E,"beforeUnmount"),le&64?v.type.remove(v,E,D,oe,B):z&&!z.hasOnce&&(j!==Gt||ee>0&&ee&64)?mt(z,E,D,!1,!0):(j===Gt&&ee&384||!U&&le&16)&&mt(Y,E,D),B&&je(v)}(Ve&&(ke=Z&&Z.onVnodeUnmounted)||ue)&&$t(()=>{ke&&cn(ke,E,v),ue&&wr(v,null,E,"unmounted")},D)},je=v=>{const{type:E,el:D,anchor:B,transition:U}=v;if(E===Gt){sn(D,B);return}if(E===uo){Q(v);return}const j=()=>{s(D),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(v.shapeFlag&1&&U&&!U.persisted){const{leave:Z,delayLeave:J}=U,Y=()=>Z(D,j);J?J(v.el,j,Y):Y()}else j()},sn=(v,E)=>{let D;for(;v!==E;)D=m(v),s(v),v=D;s(E)},at=(v,E,D)=>{const{bum:B,scope:U,job:j,subTree:Z,um:J,m:Y,a:z}=v;oh(Y),oh(z),B&&Oa(B),U.stop(),j&&(j.flags|=8,Ge(Z,v,E,D)),J&&$t(J,E),$t(()=>{v.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},mt=(v,E,D,B=!1,U=!1,j=0)=>{for(let Z=j;Z<v.length;Z++)Ge(v[Z],E,D,B,U)},F=v=>{if(v.shapeFlag&6)return F(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const E=m(v.anchor||v.el),D=E&&E[t1];return D?m(D):E};let re=!1;const te=(v,E,D)=>{v==null?E._vnode&&Ge(E._vnode,null,null,!0):O(E._vnode||null,v,E,null,null,null,D),E._vnode=v,re||(re=!0,Zu(),Rf(),re=!1)},oe={p:O,um:Ge,m:gt,r:je,mt:pt,mc:w,pc:Ie,pbc:A,n:F,o:t};let Se,Me;return{render:te,hydrate:Se,createApp:A1(te,Se)}}function $a({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Er({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function O1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Kf(t,e,n=!1){const r=t.children,s=e.children;if(_e(r)&&_e(s))for(let i=0;i<r.length;i++){const a=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=er(s[i]),c.el=a.el),!n&&c.patchFlag!==-2&&Kf(a,c)),c.type===sa&&(c.el=a.el)}}function N1(t){const e=t.slice(),n=[0];let r,s,i,a,c;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(s=n[n.length-1],t[s]<h){e[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)c=i+a>>1,t[n[c]]<h?i=c+1:a=c;h<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=e[a];return n}function Wf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Wf(e)}function oh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const M1=Symbol.for("v-scx"),F1=()=>Nn(M1);function is(t,e,n){return Qf(t,e,n)}function Qf(t,e,n=ze){const{immediate:r,deep:s,flush:i,once:a}=n,c=Tt({},n);let l;if(ia)if(i==="sync"){const m=F1();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!e||r)c.once=!0;else{const m=()=>{};return m.stop=hn,m.resume=hn,m.pause=hn,m}const h=kt;c.call=(m,y,L)=>_n(m,h,y,L);let d=!1;i==="post"?c.scheduler=m=>{$t(m,h&&h.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(m,y)=>{y?m():il(m)}),c.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Ym(t,e,c);return l&&l.push(p),p}function U1(t,e,n){const r=this.proxy,s=ot(t)?t.includes(".")?Yf(r,t):()=>r[t]:t.bind(r,r);let i;ye(e)?i=e:(i=e.handler,n=e);const a=Ai(this),c=Qf(s,i.bind(r),n);return a(),c}function Yf(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const B1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Yt(e)}Modifiers`]||t[`${Nr(e)}Modifiers`];function $1(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ze;let s=n;const i=e.startsWith("update:"),a=i&&B1(r,e.slice(7));a&&(a.trim&&(s=n.map(d=>ot(d)?d.trim():d)),a.number&&(s=n.map(dm)));let c,l=r[c=La(e)]||r[c=La(Yt(e))];!l&&i&&(l=r[c=La(Nr(e))]),l&&_n(l,t,6,s);const h=r[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,_n(h,t,6,s)}}function Jf(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let a={},c=!1;if(!ye(t)){const l=h=>{const d=Jf(h,e,!0);d&&(c=!0,Tt(a,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Je(t)&&r.set(t,null),null):(_e(i)?i.forEach(l=>a[l]=null):Tt(a,i),Je(t)&&r.set(t,a),a)}function ra(t,e){return!t||!Qo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oe(t,e[0].toLowerCase()+e.slice(1))||Oe(t,Nr(e))||Oe(t,e))}function ja(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:c,emit:l,render:h,renderCache:d,props:p,data:m,setupState:y,ctx:L,inheritAttrs:O}=t,M=Io(t);let G,H;try{if(n.shapeFlag&4){const Q=s||r,we=Q;G=un(h.call(we,Q,d,p,y,m,L)),H=c}else{const Q=e;G=un(Q.length>1?Q(p,{attrs:c,slots:a,emit:l}):Q(p,null)),H=e.props?c:j1(c)}}catch(Q){ei.length=0,ta(Q,t,1),G=ct(kr)}let W=G;if(H&&O!==!1){const Q=Object.keys(H),{shapeFlag:we}=W;Q.length&&we&7&&(i&&Q.some(Gc)&&(H=q1(H,i)),W=us(W,H,!1,!0))}return n.dirs&&(W=us(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&ol(W,n.transition),G=W,Io(M),G}const j1=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qo(n))&&((e||(e={}))[n]=t[n]);return e},q1=(t,e)=>{const n={};for(const r in t)(!Gc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function z1(t,e,n){const{props:r,children:s,component:i}=t,{props:a,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ah(r,a,h):!!a;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(a[m]!==r[m]&&!ra(h,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?ah(r,a,h):!0:!!a;return!1}function ah(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ra(n,i))return!0}return!1}function G1({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Xf=t=>t.__isSuspense;function H1(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):Zm(t)}const Gt=Symbol.for("v-fgt"),sa=Symbol.for("v-txt"),kr=Symbol.for("v-cmt"),uo=Symbol.for("v-stc"),ei=[];let zt=null;function Wt(t=!1){ei.push(zt=t?null:[])}function K1(){ei.pop(),zt=ei[ei.length-1]||null}let hi=1;function ch(t){hi+=t,t<0&&zt&&(zt.hasOnce=!0)}function Zf(t){return t.dynamicChildren=hi>0?zt||Zr:null,K1(),hi>0&&zt&&zt.push(t),t}function dn(t,e,n,r,s,i){return Zf(be(t,e,n,r,s,i,!0))}function ep(t,e,n,r,s){return Zf(ct(t,e,n,r,s,!0))}function Co(t){return t?t.__v_isVNode===!0:!1}function $s(t,e){return t.type===e.type&&t.key===e.key}const tp=({key:t})=>t??null,ho=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ot(t)||xt(t)||ye(t)?{i:qt,r:t,k:e,f:!!n}:t:null);function be(t,e=null,n=null,r=0,s=null,i=t===Gt?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&tp(e),ref:e&&ho(e),scopeId:kf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:qt};return c?(ll(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ot(n)?8:16),hi>0&&!a&&zt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&zt.push(l),l}const ct=W1;function W1(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===m1)&&(t=kr),Co(t)){const c=us(t,e,!0);return n&&ll(c,n),hi>0&&!i&&zt&&(c.shapeFlag&6?zt[zt.indexOf(t)]=c:zt.push(c)),c.patchFlag=-2,c}if(a2(t)&&(t=t.__vccOpts),e){e=Q1(e);let{class:c,style:l}=e;c&&!ot(c)&&(e.class=Qc(c)),Je(l)&&(rl(l)&&!_e(l)&&(l=Tt({},l)),e.style=Wc(l))}const a=ot(t)?1:Xf(t)?128:n1(t)?64:Je(t)?4:ye(t)?2:0;return be(t,e,n,r,s,a,i,!0)}function Q1(t){return t?rl(t)||Bf(t)?Tt({},t):t:null}function us(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:c,transition:l}=t,h=e?X1(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&tp(h),ref:e&&e.ref?n&&i?_e(i)?i.concat(ho(e)):[i,ho(e)]:ho(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Gt?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&us(t.ssContent),ssFallback:t.ssFallback&&us(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&ol(d,l.clone(d)),d}function Y1(t=" ",e=0){return ct(sa,null,t,e)}function fn(t,e){const n=ct(uo,null,t);return n.staticCount=e,n}function J1(t="",e=!1){return e?(Wt(),ep(kr,null,t)):ct(kr,null,t)}function un(t){return t==null||typeof t=="boolean"?ct(kr):_e(t)?ct(Gt,null,t.slice()):Co(t)?er(t):ct(sa,null,String(t))}function er(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:us(t)}function ll(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ll(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Bf(e)?e._ctx=qt:s===3&&qt&&(qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:qt},n=32):(e=String(e),r&64?(n=16,e=[Y1(e)]):n=8);t.children=e,t.shapeFlag|=n}function X1(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Qc([e.class,r.class]));else if(s==="style")e.style=Wc([e.style,r.style]);else if(Qo(s)){const i=e[s],a=r[s];a&&i!==a&&!(_e(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function cn(t,e,n,r=null){_n(t,e,7,[n,r])}const Z1=Mf();let e2=0;function t2(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Z1,i={uid:e2++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ym(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jf(r,s),emitsOptions:Jf(r,s),emit:null,emitted:null,propsDefaults:ze,inheritAttrs:r.inheritAttrs,ctx:ze,data:ze,props:ze,attrs:ze,slots:ze,refs:ze,setupState:ze,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=$1.bind(null,i),t.ce&&t.ce(i),i}let kt=null,Ro,gc;{const t=nf(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Ro=e("__VUE_INSTANCE_SETTERS__",n=>kt=n),gc=e("__VUE_SSR_SETTERS__",n=>ia=n)}const Ai=t=>{const e=kt;return Ro(t),t.scope.on(),()=>{t.scope.off(),Ro(e)}},lh=()=>{kt&&kt.scope.off(),Ro(null)};function np(t){return t.vnode.shapeFlag&4}let ia=!1;function n2(t,e=!1,n=!1){e&&gc(e);const{props:r,children:s}=t.vnode,i=np(t);C1(t,r,i,e),x1(t,s,n);const a=i?r2(t,e):void 0;return e&&gc(!1),a}function r2(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,y1);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?i2(t):null,i=Ai(t);gr();const a=Si(r,t,0,[t.props,s]);if(mr(),i(),Xd(a)){if(Xs(t)||Vf(t),a.then(lh,lh),e)return a.then(c=>{uh(t,c,e)}).catch(c=>{ta(c,t,0)});t.asyncDep=a}else uh(t,a,e)}else rp(t,e)}function uh(t,e,n){ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=If(e)),rp(t,n)}let hh;function rp(t,e,n){const r=t.type;if(!t.render){if(!e&&hh&&!r.render){const s=r.template||al(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:c,compilerOptions:l}=r,h=Tt(Tt({isCustomElement:i,delimiters:c},a),l);r.render=hh(s,h)}}t.render=r.render||hn}{const s=Ai(t);gr();try{w1(t)}finally{mr(),s()}}}const s2={get(t,e){return Vt(t,"get",""),t[e]}};function i2(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,s2),slots:t.slots,emit:t.emit,expose:e}}function oa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(If(jm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Zs)return Zs[n](t)},has(e,n){return n in e||n in Zs}})):t.proxy}function o2(t,e=!0){return ye(t)?t.displayName||t.name:t.name||e&&t.__name}function a2(t){return ye(t)&&"__vccOpts"in t}const Xt=(t,e)=>Wm(t,e,ia);function sp(t,e,n){const r=arguments.length;return r===2?Je(e)&&!_e(e)?Co(e)?ct(t,null,[e]):ct(t,e):ct(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Co(n)&&(n=[n]),ct(t,e,n))}const c2="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mc;const dh=typeof window<"u"&&window.trustedTypes;if(dh)try{mc=dh.createPolicy("vue",{createHTML:t=>t})}catch{}const ip=mc?t=>mc.createHTML(t):t=>t,l2="http://www.w3.org/2000/svg",u2="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,fh=Rn&&Rn.createElement("template"),h2={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Rn.createElementNS(l2,t):e==="mathml"?Rn.createElementNS(u2,t):n?Rn.createElement(t,{is:n}):Rn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Rn.createTextNode(t),createComment:t=>Rn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const a=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{fh.innerHTML=ip(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=fh.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},d2=Symbol("_vtc");function f2(t,e,n){const r=t[d2];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Po=Symbol("_vod"),op=Symbol("_vsh"),ko={beforeMount(t,{value:e},{transition:n}){t[Po]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):js(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),js(t,!0),r.enter(t)):r.leave(t,()=>{js(t,!1)}):js(t,e))},beforeUnmount(t,{value:e}){js(t,e)}};function js(t,e){t.style.display=e?t[Po]:"none",t[op]=!e}const p2=Symbol(""),g2=/(^|;)\s*display\s*:/;function m2(t,e,n){const r=t.style,s=ot(n);let i=!1;if(n&&!s){if(e)if(ot(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();n[c]==null&&fo(r,c,"")}else for(const a in e)n[a]==null&&fo(r,a,"");for(const a in n)a==="display"&&(i=!0),fo(r,a,n[a])}else if(s){if(e!==n){const a=r[p2];a&&(n+=";"+a),r.cssText=n,i=g2.test(n)}}else e&&t.removeAttribute("style");Po in t&&(t[Po]=i?r.display:"",t[op]&&(r.display="none"))}const ph=/\s*!important$/;function fo(t,e,n){if(_e(n))n.forEach(r=>fo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=_2(t,e);ph.test(n)?t.setProperty(Nr(r),n.replace(ph,""),"important"):t[r]=n}}const gh=["Webkit","Moz","ms"],qa={};function _2(t,e){const n=qa[e];if(n)return n;let r=Yt(e);if(r!=="filter"&&r in t)return qa[e]=r;r=Xo(r);for(let s=0;s<gh.length;s++){const i=gh[s]+r;if(i in t)return qa[e]=i}return e}const mh="http://www.w3.org/1999/xlink";function _h(t,e,n,r,s,i=vm(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(mh,e.slice(6,e.length)):t.setAttributeNS(mh,e,n):n==null||i&&!rf(n)?t.removeAttribute(e):t.setAttribute(e,i?"":pr(n)?String(n):n)}function vh(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ip(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=rf(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function v2(t,e,n,r){t.addEventListener(e,n,r)}function y2(t,e,n,r){t.removeEventListener(e,n,r)}const yh=Symbol("_vei");function w2(t,e,n,r,s=null){const i=t[yh]||(t[yh]={}),a=i[e];if(r&&a)a.value=r;else{const[c,l]=E2(e);if(r){const h=i[e]=I2(r,s);v2(t,c,h,l)}else a&&(y2(t,c,a,l),i[e]=void 0)}}const wh=/(?:Once|Passive|Capture)$/;function E2(t){let e;if(wh.test(t)){e={};let r;for(;r=t.match(wh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nr(t.slice(2)),e]}let za=0;const T2=Promise.resolve(),b2=()=>za||(T2.then(()=>za=0),za=Date.now());function I2(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;_n(S2(r,n.value),e,5,[r])};return n.value=t,n.attached=b2(),n}function S2(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Eh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,A2=(t,e,n,r,s,i)=>{const a=s==="svg";e==="class"?f2(t,r,a):e==="style"?m2(t,n,r):Qo(e)?Gc(e)||w2(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):C2(t,e,r,a))?(vh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_h(t,e,r,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ot(r))?vh(t,Yt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_h(t,e,r,a))};function C2(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Eh(e)&&ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Eh(e)&&ot(n)?!1:e in t}const R2=Tt({patchProp:A2},h2);let Th;function P2(){return Th||(Th=D1(R2))}const k2=(...t)=>{const e=P2().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=V2(r);if(!s)return;const i=e._component;!ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,x2(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function x2(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function V2(t){return ot(t)?document.querySelector(t):t}const qn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},D2={};function L2(t,e){const n=Wr("router-view");return Wt(),ep(n)}const ap=qn(D2,[["render",L2]]);function O2(){return cp().__VUE_DEVTOOLS_GLOBAL_HOOK__}function cp(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const N2=typeof Proxy=="function",M2="devtools-plugin:setup",F2="plugin:settings:set";let Gr,_c;function U2(){var t;return Gr!==void 0||(typeof window<"u"&&window.performance?(Gr=!0,_c=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Gr=!0,_c=globalThis.perf_hooks.performance):Gr=!1),Gr}function B2(){return U2()?_c.now():Date.now()}class $2{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const a in e.settings){const c=e.settings[a];r[a]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const a=localStorage.getItem(s),c=JSON.parse(a);Object.assign(i,c)}catch{}this.fallbacks={getSettings(){return i},setSettings(a){try{localStorage.setItem(s,JSON.stringify(a))}catch{}i=a},now(){return B2()}},n&&n.on(F2,(a,c)=>{a===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(a,c)=>this.target?this.target.on[c]:(...l)=>{this.onQueue.push({method:c,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...l)=>(this.targetQueue.push({method:c,args:l,resolve:()=>{}}),this.fallbacks[c](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:c,args:l,resolve:h})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function j2(t,e){const n=t,r=cp(),s=O2(),i=N2&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(M2,t,e);else{const a=i?new $2(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var q2="store";function Ts(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function lp(t){return t!==null&&typeof t=="object"}function z2(t){return t&&typeof t.then=="function"}function G2(t,e){return function(){return t(e)}}function up(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function hp(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;aa(t,n,[],t._modules.root,!0),ul(t,n,e)}function ul(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,i={};Ts(s,function(a,c){i[c]=G2(a,t),Object.defineProperty(t.getters,c,{get:function(){return i[c]()},enumerable:!0})}),t._state=Ii({data:e}),t.strict&&Y2(t),r&&n&&t._withCommit(function(){r.data=null})}function aa(t,e,n,r,s){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=r),!i&&!s){var c=hl(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){c[l]=r.state})}var h=r.context=H2(t,a,n);r.forEachMutation(function(d,p){var m=a+p;K2(t,m,d,h)}),r.forEachAction(function(d,p){var m=d.root?p:a+p,y=d.handler||d;W2(t,m,y,h)}),r.forEachGetter(function(d,p){var m=a+p;Q2(t,m,d,h)}),r.forEachChild(function(d,p){aa(t,e,n.concat(p),d,s)})}function H2(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,a,c){var l=xo(i,a,c),h=l.payload,d=l.options,p=l.type;return(!d||!d.root)&&(p=e+p),t.dispatch(p,h)},commit:r?t.commit:function(i,a,c){var l=xo(i,a,c),h=l.payload,d=l.options,p=l.type;(!d||!d.root)&&(p=e+p),t.commit(p,h,d)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return dp(t,e)}},state:{get:function(){return hl(t.state,n)}}}),s}function dp(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function K2(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(a){n.call(t,r.state,a)})}function W2(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(a){var c=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},a);return z2(c)||(c=Promise.resolve(c)),t._devtoolHook?c.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):c})}function Q2(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function Y2(t){is(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function hl(t,e){return e.reduce(function(n,r){return n[r]},t)}function xo(t,e,n){return lp(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var J2="vuex bindings",bh="vuex:mutations",Ga="vuex:actions",Hr="vuex",X2=0;function Z2(t,e){j2({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[J2]},function(n){n.addTimelineLayer({id:bh,label:"Vuex Mutations",color:Ih}),n.addTimelineLayer({id:Ga,label:"Vuex Actions",color:Ih}),n.addInspector({id:Hr,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Hr)if(r.filter){var s=[];mp(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[gp(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Hr){var s=r.nodeId;dp(e,s),r.state=n_(s_(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Hr){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Hr),n.sendInspectorState(Hr),n.addTimelineEvent({layerId:bh,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=X2++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Ga,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},a=Date.now()-r._time;i.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Ga,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Ih=8702998,e_=6710886,t_=16777215,fp={label:"namespaced",textColor:t_,backgroundColor:e_};function pp(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function gp(t,e){return{id:e||"root",label:pp(e),tags:t.namespaced?[fp]:[],children:Object.keys(t._children).map(function(n){return gp(t._children[n],e+n+"/")})}}function mp(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[fp]:[]}),Object.keys(e._children).forEach(function(s){mp(t,e._children[s],n,r+s+"/")})}function n_(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(a){return{key:a,editable:!0,value:t.state[a]}})};if(r.length){var i=r_(e);s.getters=Object.keys(i).map(function(a){return{key:a.endsWith("/")?pp(a):a,editable:!1,value:vc(function(){return i[a]})}})}return s}function r_(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(a){s[a]||(s[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),s=s[a]._custom.value}),s[i]=vc(function(){return t[n]})}else e[n]=vc(function(){return t[n]})}),e}function s_(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var a=r[s];if(!a)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?a:a._children},e==="root"?t:t.root._children)}function vc(t){try{return t()}catch(e){return e}}var rn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},_p={namespaced:{configurable:!0}};_p.namespaced.get=function(){return!!this._rawModule.namespaced};rn.prototype.addChild=function(e,n){this._children[e]=n};rn.prototype.removeChild=function(e){delete this._children[e]};rn.prototype.getChild=function(e){return this._children[e]};rn.prototype.hasChild=function(e){return e in this._children};rn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};rn.prototype.forEachChild=function(e){Ts(this._children,e)};rn.prototype.forEachGetter=function(e){this._rawModule.getters&&Ts(this._rawModule.getters,e)};rn.prototype.forEachAction=function(e){this._rawModule.actions&&Ts(this._rawModule.actions,e)};rn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ts(this._rawModule.mutations,e)};Object.defineProperties(rn.prototype,_p);var Mr=function(e){this.register([],e,!1)};Mr.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};Mr.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};Mr.prototype.update=function(e){vp([],this.root,e)};Mr.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new rn(n,r);if(e.length===0)this.root=i;else{var a=this.get(e.slice(0,-1));a.addChild(e[e.length-1],i)}n.modules&&Ts(n.modules,function(c,l){s.register(e.concat(l),c,r)})};Mr.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};Mr.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function vp(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;vp(t.concat(r),e.getChild(r),n.modules[r])}}function i_(t){return new Ft(t)}var Ft=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Mr(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var a=this,c=this,l=c.dispatch,h=c.commit;this.dispatch=function(m,y){return l.call(a,m,y)},this.commit=function(m,y,L){return h.call(a,m,y,L)},this.strict=s;var d=this._modules.root.state;aa(this,d,[],this._modules.root),ul(this,d),r.forEach(function(p){return p(n)})},dl={state:{configurable:!0}};Ft.prototype.install=function(e,n){e.provide(n||q2,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&Z2(e,this)};dl.state.get=function(){return this._state.data};dl.state.set=function(t){};Ft.prototype.commit=function(e,n,r){var s=this,i=xo(e,n,r),a=i.type,c=i.payload,l={type:a,payload:c},h=this._mutations[a];h&&(this._withCommit(function(){h.forEach(function(p){p(c)})}),this._subscribers.slice().forEach(function(d){return d(l,s.state)}))};Ft.prototype.dispatch=function(e,n){var r=this,s=xo(e,n),i=s.type,a=s.payload,c={type:i,payload:a},l=this._actions[i];if(l){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(c,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(d){return d(a)})):l[0](a);return new Promise(function(d,p){h.then(function(m){try{r._actionSubscribers.filter(function(y){return y.after}).forEach(function(y){return y.after(c,r.state)})}catch{}d(m)},function(m){try{r._actionSubscribers.filter(function(y){return y.error}).forEach(function(y){return y.error(c,r.state,m)})}catch{}p(m)})})}};Ft.prototype.subscribe=function(e,n){return up(e,this._subscribers,n)};Ft.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return up(r,this._actionSubscribers,n)};Ft.prototype.watch=function(e,n,r){var s=this;return is(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Ft.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Ft.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),aa(this,this.state,e,this._modules.get(e),r.preserveState),ul(this,this.state)};Ft.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=hl(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),hp(this)};Ft.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Ft.prototype.hotUpdate=function(e){this._modules.update(e),hp(this,!0)};Ft.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Ft.prototype,dl);var fl=wp(function(t,e){var n={};return yp(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Ep(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),o_=wp(function(t,e){var n={};return yp(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var c=[],l=arguments.length;l--;)c[l]=arguments[l];var h=this.$store.dispatch;if(t){var d=Ep(this.$store,"mapActions",t);if(!d)return;h=d.context.dispatch}return typeof i=="function"?i.apply(this,[h].concat(c)):h.apply(this.$store,[i].concat(c))}}),n});function yp(t){return a_(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function a_(t){return Array.isArray(t)||lp(t)}function wp(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Ep(t,e,n){var r=t._modulesNamespaceMap[n];return r}var Sh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},bp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,l=s+2<t.length,h=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(n[d],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||p==null)throw new l_;const m=i<<2|c>>4;if(r.push(m),h!==64){const y=c<<4&240|h>>2;if(r.push(y),p!==64){const L=h<<6&192|p;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u_=function(t){const e=Tp(t);return bp.encodeByteArray(e,!0)},Vo=function(t){return u_(t).replace(/\./g,"")},Ip=function(t){try{return bp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=()=>h_().__FIREBASE_DEFAULTS__,f_=()=>{if(typeof process>"u"||typeof Sh>"u")return;const t=Sh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ip(t[1]);return e&&JSON.parse(e)},ca=()=>{try{return d_()||f_()||p_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sp=t=>{var e,n;return(n=(e=ca())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},g_=t=>{const e=Sp(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ap=()=>{var t;return(t=ca())===null||t===void 0?void 0:t.config},Cp=t=>{var e;return(e=ca())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vo(JSON.stringify(n)),Vo(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function y_(){var t;const e=(t=ca())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function T_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b_(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I_(){return!y_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S_(){try{return typeof indexedDB=="object"}catch{return!1}}function A_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C_,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}}class Ci{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?R_(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new zn(s,c,r)}}function R_(t,e){return t.replace(P_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const P_=/\{\$([^}]+)}/g;function k_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Ah(i)&&Ah(a)){if(!Do(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ah(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function x_(t,e){const n=new V_(t,e);return n.subscribe.bind(n)}class V_{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D_(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ha),s.error===void 0&&(s.error=Ha),s.complete===void 0&&(s.complete=Ha);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D_(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ha(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){return t&&t._delegate?t._delegate:t}class xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new m_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N_(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O_(t){return t===br?void 0:t}function N_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const F_={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},U_=Pe.INFO,B_={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},$_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pl{constructor(e){this.name=e,this._logLevel=U_,this._logHandler=$_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const j_=(t,e)=>e.some(n=>t instanceof n);let Ch,Rh;function q_(){return Ch||(Ch=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z_(){return Rh||(Rh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rp=new WeakMap,yc=new WeakMap,Pp=new WeakMap,Ka=new WeakMap,gl=new WeakMap;function G_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(or(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Rp.set(n,t)}).catch(()=>{}),gl.set(e,t),e}function H_(t){if(yc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});yc.set(t,e)}let wc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K_(t){wc=t(wc)}function W_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wa(this),e,...n);return Pp.set(r,e.sort?e.sort():[e]),or(r)}:z_().includes(t)?function(...e){return t.apply(Wa(this),e),or(Rp.get(this))}:function(...e){return or(t.apply(Wa(this),e))}}function Q_(t){return typeof t=="function"?W_(t):(t instanceof IDBTransaction&&H_(t),j_(t,q_())?new Proxy(t,wc):t)}function or(t){if(t instanceof IDBRequest)return G_(t);if(Ka.has(t))return Ka.get(t);const e=Q_(t);return e!==t&&(Ka.set(t,e),gl.set(e,t)),e}const Wa=t=>gl.get(t);function Y_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=or(a);return r&&a.addEventListener("upgradeneeded",l=>{r(or(a.result),l.oldVersion,l.newVersion,or(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const J_=["get","getKey","getAll","getAllKeys","count"],X_=["put","add","delete","clear"],Qa=new Map;function Ph(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qa.get(e))return Qa.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=X_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||J_.includes(n)))return;const i=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&l.done]))[0]};return Qa.set(e,i),i}K_(t=>({...t,get:(e,n,r)=>Ph(e,n)||t.get(e,n,r),has:(e,n)=>!!Ph(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ev(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ev(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ec="@firebase/app",kh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new pl("@firebase/app"),tv="@firebase/app-compat",nv="@firebase/analytics-compat",rv="@firebase/analytics",sv="@firebase/app-check-compat",iv="@firebase/app-check",ov="@firebase/auth",av="@firebase/auth-compat",cv="@firebase/database",lv="@firebase/data-connect",uv="@firebase/database-compat",hv="@firebase/functions",dv="@firebase/functions-compat",fv="@firebase/installations",pv="@firebase/installations-compat",gv="@firebase/messaging",mv="@firebase/messaging-compat",_v="@firebase/performance",vv="@firebase/performance-compat",yv="@firebase/remote-config",wv="@firebase/remote-config-compat",Ev="@firebase/storage",Tv="@firebase/storage-compat",bv="@firebase/firestore",Iv="@firebase/vertexai-preview",Sv="@firebase/firestore-compat",Av="firebase",Cv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]",Rv={[Ec]:"fire-core",[tv]:"fire-core-compat",[rv]:"fire-analytics",[nv]:"fire-analytics-compat",[iv]:"fire-app-check",[sv]:"fire-app-check-compat",[ov]:"fire-auth",[av]:"fire-auth-compat",[cv]:"fire-rtdb",[lv]:"fire-data-connect",[uv]:"fire-rtdb-compat",[hv]:"fire-fn",[dv]:"fire-fn-compat",[fv]:"fire-iid",[pv]:"fire-iid-compat",[gv]:"fire-fcm",[mv]:"fire-fcm-compat",[_v]:"fire-perf",[vv]:"fire-perf-compat",[yv]:"fire-rc",[wv]:"fire-rc-compat",[Ev]:"fire-gcs",[Tv]:"fire-gcs-compat",[bv]:"fire-fst",[Sv]:"fire-fst-compat",[Iv]:"fire-vertex","fire-js":"fire-js",[Av]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Map,Pv=new Map,bc=new Map;function xh(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hs(t){const e=t.name;if(bc.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;bc.set(e,t);for(const n of Lo.values())xh(n,t);for(const n of Pv.values())xh(n,t);return!0}function ml(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Ci("app","Firebase",kv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=Cv;function kp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ar.create("bad-app-name",{appName:String(s)});if(n||(n=Ap()),!n)throw ar.create("no-options");const i=Lo.get(s);if(i){if(Do(n,i.options)&&Do(r,i.config))return i;throw ar.create("duplicate-app",{appName:s})}const a=new M_(s);for(const l of bc.values())a.addComponent(l);const c=new xv(n,r,a);return Lo.set(s,c),c}function xp(t=Tc){const e=Lo.get(t);if(!e&&t===Tc&&Ap())return kp();if(!e)throw ar.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=Rv[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(c.join(" "));return}hs(new xr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="firebase-heartbeat-database",Dv=1,di="firebase-heartbeat-store";let Ya=null;function Vp(){return Ya||(Ya=Y_(Vv,Dv,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(di)}catch(n){console.warn(n)}}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),Ya}async function Lv(t){try{const n=(await Vp()).transaction(di),r=await n.objectStore(di).get(Dp(t));return await n.done,r}catch(e){if(e instanceof zn)Fn.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function Vh(t,e){try{const r=(await Vp()).transaction(di,"readwrite");await r.objectStore(di).put(e,Dp(t)),await r.done}catch(n){if(n instanceof zn)Fn.warn(n.message);else{const r=ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function Dp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=1024,Nv=30*24*60*60*1e3;class Mv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Uv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Dh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=Nv}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dh(),{heartbeatsToSend:r,unsentEntries:s}=Fv(this._heartbeatsCache.heartbeats),i=Vo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Fn.warn(n),""}}}function Dh(){return new Date().toISOString().substring(0,10)}function Fv(t,e=Ov){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Lh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Lh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Uv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S_()?A_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lh(t){return Vo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){hs(new xr("platform-logger",e=>new Z_(e),"PRIVATE")),hs(new xr("heartbeat",e=>new Mv(e),"PRIVATE")),cr(Ec,kh,t),cr(Ec,kh,"esm2017"),cr("fire-js","")}Bv("");var $v="firebase",jv="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr($v,jv,"app");function _l(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Lp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qv=Lp,Op=new Ci("auth","Firebase",Lp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new pl("@firebase/auth");function zv(t,...e){Oo.logLevel<=Pe.WARN&&Oo.warn(`Auth (${bs}): ${t}`,...e)}function po(t,...e){Oo.logLevel<=Pe.ERROR&&Oo.error(`Auth (${bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw yl(t,...e)}function tn(t,...e){return yl(t,...e)}function vl(t,e,n){const r=Object.assign(Object.assign({},qv()),{[e]:n});return new Ci("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return vl(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gv(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&yn(t,"argument-error"),vl(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yl(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Op.create(t,...e)}function fe(t,e,...n){if(!t)throw yl(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw po(e),new Error(e)}function Un(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Hv(){return Oh()==="http:"||Oh()==="https:"}function Oh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hv()||E_()||"connection"in navigator)?navigator.onLine:!0}function Wv(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=v_()||T_()}get(){return Kv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Pi(3e4,6e4);function El(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Is(t,e,n,r,s={}){return Mp(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Ri(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},i);return w_()||(h.referrerPolicy="no-referrer"),Np.fetch()(Fp(t,t.config.apiHost,n,c),h)})}async function Mp(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qv),e);try{const s=new Xv(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw so(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw so(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw so(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw so(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vl(t,d,h);yn(t,d)}}catch(s){if(s instanceof zn)throw s;yn(t,"network-request-failed",{message:String(s)})}}async function Jv(t,e,n,r,s={}){const i=await Is(t,e,n,r,s);return"mfaPendingCredential"in i&&yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Fp(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?wl(t.config,s):`${t.config.apiScheme}://${s}`}class Xv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),Yv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function so(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(t,e){return Is(t,"POST","/v1/accounts:delete",e)}async function Up(t,e){return Is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ey(t,e=!1){const n=vn(t),r=await n.getIdToken(e),s=Tl(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ti(Ja(s.auth_time)),issuedAtTime:ti(Ja(s.iat)),expirationTime:ti(Ja(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ja(t){return Number(t)*1e3}function Tl(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return po("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ip(n);return s?JSON.parse(s):(po("Failed to decode base64 JWT payload"),null)}catch(s){return po("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Nh(t){const e=Tl(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&ty(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ty({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fi(t,Up(n,{idToken:r}));fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Bp(i.providerUserInfo):[],c=sy(t.providerData,a),l=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),d=l?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Sc(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function ry(t){const e=vn(t);await No(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sy(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bp(t){return t.map(e=>{var{providerId:n}=e,r=_l(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(t,e){const n=await Mp(t,{},async()=>{const r=Ri({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Fp(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Np.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oy(t,e){return Is(t,"POST","/v2/accounts:revokeToken",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=Nh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iy(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new os;return r&&(fe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new os,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=_l(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ny(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fi(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ey(this,e)}reload(){return ry(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await No(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await fi(this,Zv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,l,h,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,L=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,G=(h=n.createdAt)!==null&&h!==void 0?h:void 0,H=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:W,emailVerified:Q,isAnonymous:we,providerData:ge,stsTokenManager:S}=n;fe(W&&S,e,"internal-error");const w=os.fromJSON(this.name,S);fe(typeof W=="string",e,"internal-error"),Jn(p,e.name),Jn(m,e.name),fe(typeof Q=="boolean",e,"internal-error"),fe(typeof we=="boolean",e,"internal-error"),Jn(y,e.name),Jn(L,e.name),Jn(O,e.name),Jn(M,e.name),Jn(G,e.name),Jn(H,e.name);const T=new Dn({uid:W,auth:e,email:m,emailVerified:Q,displayName:p,isAnonymous:we,photoURL:L,phoneNumber:y,tenantId:O,stsTokenManager:w,createdAt:G,lastLoginAt:H});return ge&&Array.isArray(ge)&&(T.providerData=ge.map(A=>Object.assign({},A))),M&&(T._redirectEventId=M),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new os;s.updateFromServerResponse(n);const i=new Dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await No(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Bp(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new os;c.updateFromIdToken(r);const l=new Dn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Sc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map;function Ln(t){Un(t instanceof Function,"Expected a class definition");let e=Mh.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$p.type="NONE";const Fh=$p;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e,n){return`firebase:${t}:${e}:${n}`}class as{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=go(this.userKey,s.apiKey,i),this.fullPersistenceKey=go("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new as(Ln(Fh),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Ln(Fh);const a=go(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const d=await h._get(a);if(d){const p=Dn._fromJSON(e,d);h!==i&&(c=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new as(i,e,r):(i=l[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new as(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kp(e))return"Blackberry";if(Wp(e))return"Webos";if(qp(e))return"Safari";if((e.includes("chrome/")||zp(e))&&!e.includes("edge/"))return"Chrome";if(Hp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jp(t=Dt()){return/firefox\//i.test(t)}function qp(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zp(t=Dt()){return/crios\//i.test(t)}function Gp(t=Dt()){return/iemobile/i.test(t)}function Hp(t=Dt()){return/android/i.test(t)}function Kp(t=Dt()){return/blackberry/i.test(t)}function Wp(t=Dt()){return/webos/i.test(t)}function bl(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ay(t=Dt()){var e;return bl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cy(){return b_()&&document.documentMode===10}function Qp(t=Dt()){return bl(t)||Hp(t)||Wp(t)||Kp(t)||/windows phone/i.test(t)||Gp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e=[]){let n;switch(t){case"Browser":n=Uh(Dt());break;case"Worker":n=`${Uh(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const l=e(i);a(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(t,e={}){return Is(t,"GET","/v2/passwordPolicy",El(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=6;class dy{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:hy,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bh(this),this.idTokenSubscription=new Bh(this),this.beforeStateQueue=new ly(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Op,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await as.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Up(this,{idToken:e}),r=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===c)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await No(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wv()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Cr(this));const n=e?vn(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uy(this),n=new dy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ci("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oy(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await as.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zv(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function la(t){return vn(t)}class Bh{constructor(e){this.auth=e,this.observer=null,this.addObserver=x_(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function py(t){Il=t}function gy(t){return Il.loadJS(t)}function my(){return Il.gapiScript}function _y(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e){const n=ml(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Do(i,e??{}))return s;yn(s,"already-initialized")}return n.initialize({options:e})}function yy(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wy(t,e,n){const r=la(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jp(e),{host:a,port:c}=Ey(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Ty()}function Jp(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ey(t){const e=Jp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:$h(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:$h(a)}}}function $h(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ty(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(t,e){return Jv(t,"POST","/v1/accounts:signInWithIdp",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="http://localhost";class Vr extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=_l(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Vr(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return cs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cs(e,n)}buildRequest(){const e={requestUri:by,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ri(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Sl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ki{constructor(){super("facebook.com")}static credential(e){return Vr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends ki{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vr._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kn.credential(n,r)}catch{return null}}}kn.GOOGLE_SIGN_IN_METHOD="google.com";kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ki{constructor(){super("github.com")}static credential(e){return Vr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ki{constructor(){super("twitter.com")}static credential(e,n){return Vr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Dn._fromIdTokenResponse(e,r,s),a=jh(r);return new ds({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jh(r);return new ds({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mo(e,n,r,s)}}function Zp(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mo._fromErrorAndOperation(t,i,e,r):i})}async function Iy(t,e,n=!1){const r=await fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t,e,n=!1){const{auth:r}=t;if(xn(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await fi(t,Zp(r,s,e,t),n);fe(i.idToken,r,"internal-error");const a=Tl(i.idToken);fe(a,r,"internal-error");const{sub:c}=a;return fe(t.uid===c,r,"user-mismatch"),ds._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(t,e,n=!1){if(xn(t.app))return Promise.reject(Cr(t));const r="signIn",s=await Zp(t,r,e),i=await ds._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Cy(t,e,n,r){return vn(t).onIdTokenChanged(e,n,r)}function Ry(t,e,n){return vn(t).beforeAuthStateChanged(e,n)}const Fo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fo,"1"),this.storage.removeItem(Fo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=1e3,ky=10;class t0 extends e0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);cy()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ky):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Py)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}t0.type="LOCAL";const xy=t0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends e0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}n0.type="SESSION";const r0=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ua(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(n.origin,i)),l=await Vy(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ua.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,l)=>{const h=Al("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function Ly(t){pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function Oy(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ny(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function My(){return s0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebaseLocalStorageDb",Fy=1,Uo="firebaseLocalStorage",o0="fbase_key";class xi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ha(t,e){return t.transaction([Uo],e?"readwrite":"readonly").objectStore(Uo)}function Uy(){const t=indexedDB.deleteDatabase(i0);return new xi(t).toPromise()}function Ac(){const t=indexedDB.open(i0,Fy);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Uo,{keyPath:o0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Uo)?e(r):(r.close(),await Uy(),e(await Ac()))})})}async function qh(t,e,n){const r=ha(t,!0).put({[o0]:e,value:n});return new xi(r).toPromise()}async function By(t,e){const n=ha(t,!1).get(e),r=await new xi(n).toPromise();return r===void 0?null:r.value}function zh(t,e){const n=ha(t,!0).delete(e);return new xi(n).toPromise()}const $y=800,jy=3;class a0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ac(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jy)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ua._getInstance(My()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Oy(),!this.activeServiceWorker)return;this.sender=new Dy(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ny()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ac();return await qh(e,Fo,"1"),await zh(e,Fo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>qh(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>By(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ha(s,!1).getAll();return new xi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$y)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a0.type="LOCAL";const qy=a0;new Pi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){return e?Ln(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zy(t){return Ay(t.auth,new Cl(t),t.bypassAuthState)}function Gy(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),Sy(n,new Cl(t),t.bypassAuthState)}async function Hy(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),Iy(n,new Cl(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zy;case"linkViaPopup":case"linkViaRedirect":return Hy;case"reauthViaPopup":case"reauthViaRedirect":return Gy;default:yn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Pi(2e3,1e4);async function Wy(t,e,n){if(xn(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=la(t);Gv(t,e,Sl);const s=c0(r,n);return new Ir(r,"signInViaPopup",e,s).executeNotNull()}class Ir extends l0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ir.currentPopupAction&&Ir.currentPopupAction.cancel(),Ir.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=Al();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ir.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ky.get())};e()}}Ir.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="pendingRedirect",mo=new Map;class Yy extends l0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mo.get(this.auth._key());if(!e){try{const r=await Jy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mo.set(this.auth._key(),e)}return this.bypassAuthState||mo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jy(t,e){const n=e3(e),r=Zy(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Xy(t,e){mo.set(t._key(),e)}function Zy(t){return Ln(t._redirectPersistence)}function e3(t){return go(Qy,t.config.apiKey,t.name)}async function t3(t,e,n=!1){if(xn(t.app))return Promise.reject(Cr(t));const r=la(t),s=c0(r,e),a=await new Yy(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=10*60*1e3;class r3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!u0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gh(e))}saveEventToCache(e){this.cachedEventUids.add(Gh(e)),this.lastProcessedEventTime=Date.now()}}function Gh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function u0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e={}){return Is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a3=/^https?/;async function c3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i3(t);for(const n of e)try{if(l3(n))return}catch{}yn(t,"unauthorized-domain")}function l3(t){const e=Ic(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!a3.test(n))return!1;if(o3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new Pi(3e4,6e4);function Hh(){const t=pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h3(t){return new Promise((e,n)=>{var r,s,i;function a(){Hh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hh(),n(tn(t,"network-request-failed"))},timeout:u3.get()})}if(!((s=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=pn().gapi)===null||i===void 0)&&i.load)a();else{const c=_y("iframefcb");return pn()[c]=()=>{gapi.load?a():n(tn(t,"network-request-failed"))},gy(`${my()}?onload=${c}`).catch(l=>n(l))}}).catch(e=>{throw _o=null,e})}let _o=null;function d3(t){return _o=_o||h3(t),_o}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new Pi(5e3,15e3),p3="__/auth/iframe",g3="emulator/auth/iframe",m3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v3(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wl(e,g3):`https://${t.config.authDomain}/${p3}`,r={apiKey:e.apiKey,appName:t.name,v:bs},s=_3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ri(r).slice(1)}`}async function y3(t){const e=await d3(t),n=pn().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:v3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=tn(t,"network-request-failed"),c=pn().setTimeout(()=>{i(a)},f3.get());function l(){pn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E3=500,T3=600,b3="_blank",I3="http://localhost";class Kh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S3(t,e,n,r=E3,s=T3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},w3),{width:r.toString(),height:s.toString(),top:i,left:a}),h=Dt().toLowerCase();n&&(c=zp(h)?b3:n),jp(h)&&(e=e||I3,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,L])=>`${m}${y}=${L},`,"");if(ay(h)&&c!=="_self")return A3(e||"",c),new Kh(null);const p=window.open(e||"",c,d);fe(p,t,"popup-blocked");try{p.focus()}catch{}return new Kh(p)}function A3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="__/auth/handler",R3="emulator/auth/handler",P3=encodeURIComponent("fac");async function Wh(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bs,eventId:s};if(e instanceof Sl){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",k_(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof ki){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const d of Object.keys(c))c[d]===void 0&&delete c[d];const l=await t._getAppCheckToken(),h=l?`#${P3}=${encodeURIComponent(l)}`:"";return`${k3(t)}?${Ri(c).slice(1)}${h}`}function k3({config:t}){return t.emulator?wl(t,R3):`https://${t.authDomain}/${C3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="webStorageSupport";class x3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r0,this._completeRedirectFn=t3,this._overrideRedirectResult=Xy}async _openPopup(e,n,r,s){var i;Un((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Wh(e,n,r,Ic(),s);return S3(e,a,Al())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Wh(e,n,r,Ic(),s);return Ly(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Un(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await y3(e),r=new r3(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xa,{type:Xa},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Xa];a!==void 0&&n(!!a),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qp()||qp()||bl()}}const V3=x3;var Qh="@firebase/auth",Yh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O3(t){hs(new xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;fe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yp(t)},h=new fy(r,s,i,l);return yy(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hs(new xr("auth-internal",e=>{const n=la(e.getProvider("auth").getImmediate());return(r=>new D3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Qh,Yh,L3(t)),cr(Qh,Yh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=5*60,M3=Cp("authIdTokenMaxAge")||N3;let Jh=null;const F3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M3)return;const s=n==null?void 0:n.token;Jh!==s&&(Jh=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function U3(t=xp()){const e=ml(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vy(t,{popupRedirectResolver:V3,persistence:[qy,xy,r0]}),r=Cp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=F3(i.toString());Ry(n,a,()=>a(n.currentUser)),Cy(n,c=>a(c))}}const s=Sp("auth");return s&&wy(n,`http://${s}`),n}function B3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}py({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",B3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O3("Browser");var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,h0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function T(){}T.prototype=w.prototype,S.D=w.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(A,R,k){for(var _=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)_[pt-2]=arguments[pt];return w.prototype[R].apply(A,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,T){T||(T=0);var A=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)A[R]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(R=0;16>R;++R)A[R]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=S.g[0],T=S.g[1],R=S.g[2];var k=S.g[3],_=w+(k^T&(R^k))+A[0]+3614090360&4294967295;w=T+(_<<7&4294967295|_>>>25),_=k+(R^w&(T^R))+A[1]+3905402710&4294967295,k=w+(_<<12&4294967295|_>>>20),_=R+(T^k&(w^T))+A[2]+606105819&4294967295,R=k+(_<<17&4294967295|_>>>15),_=T+(w^R&(k^w))+A[3]+3250441966&4294967295,T=R+(_<<22&4294967295|_>>>10),_=w+(k^T&(R^k))+A[4]+4118548399&4294967295,w=T+(_<<7&4294967295|_>>>25),_=k+(R^w&(T^R))+A[5]+1200080426&4294967295,k=w+(_<<12&4294967295|_>>>20),_=R+(T^k&(w^T))+A[6]+2821735955&4294967295,R=k+(_<<17&4294967295|_>>>15),_=T+(w^R&(k^w))+A[7]+4249261313&4294967295,T=R+(_<<22&4294967295|_>>>10),_=w+(k^T&(R^k))+A[8]+1770035416&4294967295,w=T+(_<<7&4294967295|_>>>25),_=k+(R^w&(T^R))+A[9]+2336552879&4294967295,k=w+(_<<12&4294967295|_>>>20),_=R+(T^k&(w^T))+A[10]+4294925233&4294967295,R=k+(_<<17&4294967295|_>>>15),_=T+(w^R&(k^w))+A[11]+2304563134&4294967295,T=R+(_<<22&4294967295|_>>>10),_=w+(k^T&(R^k))+A[12]+1804603682&4294967295,w=T+(_<<7&4294967295|_>>>25),_=k+(R^w&(T^R))+A[13]+4254626195&4294967295,k=w+(_<<12&4294967295|_>>>20),_=R+(T^k&(w^T))+A[14]+2792965006&4294967295,R=k+(_<<17&4294967295|_>>>15),_=T+(w^R&(k^w))+A[15]+1236535329&4294967295,T=R+(_<<22&4294967295|_>>>10),_=w+(R^k&(T^R))+A[1]+4129170786&4294967295,w=T+(_<<5&4294967295|_>>>27),_=k+(T^R&(w^T))+A[6]+3225465664&4294967295,k=w+(_<<9&4294967295|_>>>23),_=R+(w^T&(k^w))+A[11]+643717713&4294967295,R=k+(_<<14&4294967295|_>>>18),_=T+(k^w&(R^k))+A[0]+3921069994&4294967295,T=R+(_<<20&4294967295|_>>>12),_=w+(R^k&(T^R))+A[5]+3593408605&4294967295,w=T+(_<<5&4294967295|_>>>27),_=k+(T^R&(w^T))+A[10]+38016083&4294967295,k=w+(_<<9&4294967295|_>>>23),_=R+(w^T&(k^w))+A[15]+3634488961&4294967295,R=k+(_<<14&4294967295|_>>>18),_=T+(k^w&(R^k))+A[4]+3889429448&4294967295,T=R+(_<<20&4294967295|_>>>12),_=w+(R^k&(T^R))+A[9]+568446438&4294967295,w=T+(_<<5&4294967295|_>>>27),_=k+(T^R&(w^T))+A[14]+3275163606&4294967295,k=w+(_<<9&4294967295|_>>>23),_=R+(w^T&(k^w))+A[3]+4107603335&4294967295,R=k+(_<<14&4294967295|_>>>18),_=T+(k^w&(R^k))+A[8]+1163531501&4294967295,T=R+(_<<20&4294967295|_>>>12),_=w+(R^k&(T^R))+A[13]+2850285829&4294967295,w=T+(_<<5&4294967295|_>>>27),_=k+(T^R&(w^T))+A[2]+4243563512&4294967295,k=w+(_<<9&4294967295|_>>>23),_=R+(w^T&(k^w))+A[7]+1735328473&4294967295,R=k+(_<<14&4294967295|_>>>18),_=T+(k^w&(R^k))+A[12]+2368359562&4294967295,T=R+(_<<20&4294967295|_>>>12),_=w+(T^R^k)+A[5]+4294588738&4294967295,w=T+(_<<4&4294967295|_>>>28),_=k+(w^T^R)+A[8]+2272392833&4294967295,k=w+(_<<11&4294967295|_>>>21),_=R+(k^w^T)+A[11]+1839030562&4294967295,R=k+(_<<16&4294967295|_>>>16),_=T+(R^k^w)+A[14]+4259657740&4294967295,T=R+(_<<23&4294967295|_>>>9),_=w+(T^R^k)+A[1]+2763975236&4294967295,w=T+(_<<4&4294967295|_>>>28),_=k+(w^T^R)+A[4]+1272893353&4294967295,k=w+(_<<11&4294967295|_>>>21),_=R+(k^w^T)+A[7]+4139469664&4294967295,R=k+(_<<16&4294967295|_>>>16),_=T+(R^k^w)+A[10]+3200236656&4294967295,T=R+(_<<23&4294967295|_>>>9),_=w+(T^R^k)+A[13]+681279174&4294967295,w=T+(_<<4&4294967295|_>>>28),_=k+(w^T^R)+A[0]+3936430074&4294967295,k=w+(_<<11&4294967295|_>>>21),_=R+(k^w^T)+A[3]+3572445317&4294967295,R=k+(_<<16&4294967295|_>>>16),_=T+(R^k^w)+A[6]+76029189&4294967295,T=R+(_<<23&4294967295|_>>>9),_=w+(T^R^k)+A[9]+3654602809&4294967295,w=T+(_<<4&4294967295|_>>>28),_=k+(w^T^R)+A[12]+3873151461&4294967295,k=w+(_<<11&4294967295|_>>>21),_=R+(k^w^T)+A[15]+530742520&4294967295,R=k+(_<<16&4294967295|_>>>16),_=T+(R^k^w)+A[2]+3299628645&4294967295,T=R+(_<<23&4294967295|_>>>9),_=w+(R^(T|~k))+A[0]+4096336452&4294967295,w=T+(_<<6&4294967295|_>>>26),_=k+(T^(w|~R))+A[7]+1126891415&4294967295,k=w+(_<<10&4294967295|_>>>22),_=R+(w^(k|~T))+A[14]+2878612391&4294967295,R=k+(_<<15&4294967295|_>>>17),_=T+(k^(R|~w))+A[5]+4237533241&4294967295,T=R+(_<<21&4294967295|_>>>11),_=w+(R^(T|~k))+A[12]+1700485571&4294967295,w=T+(_<<6&4294967295|_>>>26),_=k+(T^(w|~R))+A[3]+2399980690&4294967295,k=w+(_<<10&4294967295|_>>>22),_=R+(w^(k|~T))+A[10]+4293915773&4294967295,R=k+(_<<15&4294967295|_>>>17),_=T+(k^(R|~w))+A[1]+2240044497&4294967295,T=R+(_<<21&4294967295|_>>>11),_=w+(R^(T|~k))+A[8]+1873313359&4294967295,w=T+(_<<6&4294967295|_>>>26),_=k+(T^(w|~R))+A[15]+4264355552&4294967295,k=w+(_<<10&4294967295|_>>>22),_=R+(w^(k|~T))+A[6]+2734768916&4294967295,R=k+(_<<15&4294967295|_>>>17),_=T+(k^(R|~w))+A[13]+1309151649&4294967295,T=R+(_<<21&4294967295|_>>>11),_=w+(R^(T|~k))+A[4]+4149444226&4294967295,w=T+(_<<6&4294967295|_>>>26),_=k+(T^(w|~R))+A[11]+3174756917&4294967295,k=w+(_<<10&4294967295|_>>>22),_=R+(w^(k|~T))+A[2]+718787259&4294967295,R=k+(_<<15&4294967295|_>>>17),_=T+(k^(R|~w))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(R+(_<<21&4294967295|_>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+k&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var T=w-this.blockSize,A=this.B,R=this.h,k=0;k<w;){if(R==0)for(;k<=T;)s(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<w;)if(A[R++]=S.charCodeAt(k++),R==this.blockSize){s(this,A),R=0;break}}else for(;k<w;)if(A[R++]=S[k++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var T=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=T&255,T/=256;for(this.u(S),S=Array(16),w=T=0;4>w;++w)for(var A=0;32>A;A+=8)S[T++]=this.g[w]>>>A&255;return S};function i(S,w){var T=c;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=w(S)}function a(S,w){this.h=w;for(var T=[],A=!0,R=S.length-1;0<=R;R--){var k=S[R]|0;A&&k==w||(T[R]=k,A=!1)}this.g=T}var c={};function l(S){return-128<=S&&128>S?i(S,function(w){return new a([w|0],0>w?-1:0)}):new a([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return M(h(-S));for(var w=[],T=1,A=0;S>=T;A++)w[A]=S/T|0,T*=4294967296;return new a(w,0)}function d(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return M(d(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(w,8)),A=p,R=0;R<S.length;R+=8){var k=Math.min(8,S.length-R),_=parseInt(S.substring(R,R+k),w);8>k?(k=h(Math.pow(w,k)),A=A.j(k).add(h(_))):(A=A.j(T),A=A.add(h(_)))}return A}var p=l(0),m=l(1),y=l(16777216);t=a.prototype,t.m=function(){if(O(this))return-M(this).m();for(var S=0,w=1,T=0;T<this.g.length;T++){var A=this.i(T);S+=(0<=A?A:4294967296+A)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(O(this))return"-"+M(this).toString(S);for(var w=h(Math.pow(S,6)),T=this,A="";;){var R=Q(T,w).g;T=G(T,R.j(w));var k=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=R,L(T))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function O(S){return S.h==-1}t.l=function(S){return S=G(this,S),O(S)?-1:L(S)?0:1};function M(S){for(var w=S.g.length,T=[],A=0;A<w;A++)T[A]=~S.g[A];return new a(T,~S.h).add(m)}t.abs=function(){return O(this)?M(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],A=0,R=0;R<=w;R++){var k=A+(this.i(R)&65535)+(S.i(R)&65535),_=(k>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=_>>>16,k&=65535,_&=65535,T[R]=_<<16|k}return new a(T,T[T.length-1]&-2147483648?-1:0)};function G(S,w){return S.add(M(w))}t.j=function(S){if(L(this)||L(S))return p;if(O(this))return O(S)?M(this).j(M(S)):M(M(this).j(S));if(O(S))return M(this.j(M(S)));if(0>this.l(y)&&0>S.l(y))return h(this.m()*S.m());for(var w=this.g.length+S.g.length,T=[],A=0;A<2*w;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var k=this.i(A)>>>16,_=this.i(A)&65535,pt=S.i(R)>>>16,Lt=S.i(R)&65535;T[2*A+2*R]+=_*Lt,H(T,2*A+2*R),T[2*A+2*R+1]+=k*Lt,H(T,2*A+2*R+1),T[2*A+2*R+1]+=_*pt,H(T,2*A+2*R+1),T[2*A+2*R+2]+=k*pt,H(T,2*A+2*R+2)}for(A=0;A<w;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=w;A<2*w;A++)T[A]=0;return new a(T,0)};function H(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function W(S,w){this.g=S,this.h=w}function Q(S,w){if(L(w))throw Error("division by zero");if(L(S))return new W(p,p);if(O(S))return w=Q(M(S),w),new W(M(w.g),M(w.h));if(O(w))return w=Q(S,M(w)),new W(M(w.g),w.h);if(30<S.g.length){if(O(S)||O(w))throw Error("slowDivide_ only works with positive integers.");for(var T=m,A=w;0>=A.l(S);)T=we(T),A=we(A);var R=ge(T,1),k=ge(A,1);for(A=ge(A,2),T=ge(T,2);!L(A);){var _=k.add(A);0>=_.l(S)&&(R=R.add(T),k=_),A=ge(A,1),T=ge(T,1)}return w=G(S,R.j(w)),new W(R,w)}for(R=p;0<=S.l(w);){for(T=Math.max(1,Math.floor(S.m()/w.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=h(T),_=k.j(w);O(_)||0<_.l(S);)T-=A,k=h(T),_=k.j(w);L(k)&&(k=m),R=R.add(k),S=G(S,_)}return new W(R,S)}t.A=function(S){return Q(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)&S.i(A);return new a(T,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)|S.i(A);return new a(T,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)^S.i(A);return new a(T,this.h^S.h)};function we(S){for(var w=S.g.length+1,T=[],A=0;A<w;A++)T[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(T,S.h)}function ge(S,w){var T=w>>5;w%=32;for(var A=S.g.length-T,R=[],k=0;k<A;k++)R[k]=0<w?S.i(k+T)>>>w|S.i(k+T+1)<<32-w:S.i(k+T);return new a(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Rr=a}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d0,Hs,f0,vo,Cc,p0,g0,m0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof io=="object"&&io];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)e:{var f=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var V=o[g];if(!(V in f))break e;f=f[V]}o=o[o.length-1],g=f[o],u=u(g),u!=g&&u!=null&&e(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,g=!1,V={next:function(){if(!g&&f<o.length){var N=f++;return{value:u(N,o[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function p(o,u,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,g),o.apply(u,V)}}return function(){return o.apply(u,arguments)}}function m(o,u,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function L(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,V,N){for(var X=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)X[qe-2]=arguments[qe];return u.prototype[V].apply(g,X)}}function O(o){const u=o.length;if(0<u){const f=Array(u);for(let g=0;g<u;g++)f[g]=o[g];return f}return[]}function M(o,u){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(l(g)){const V=o.length||0,N=g.length||0;o.length=V+N;for(let X=0;X<N;X++)o[V+X]=g[X]}else o.push(g)}}class G{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function H(o){return/^[\s\xa0]*$/.test(o)}function W(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function Q(o){return Q[" "](o),o}Q[" "]=function(){};var we=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ge(o,u,f){for(const g in o)u.call(f,o[g],g,o)}function S(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function w(o){const u={};for(const f in o)u[f]=o[f];return u}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,u){let f,g;for(let V=1;V<arguments.length;V++){g=arguments[V];for(f in g)o[f]=g[f];for(let N=0;N<T.length;N++)f=T[N],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function R(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function k(o){c.setTimeout(()=>{throw o},0)}function _(){var o=ht;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class pt{constructor(){this.h=this.g=null}add(u,f){const g=Lt.get();g.set(u,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Lt=new G(()=>new Ke,o=>o.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Ie=!1,ht=new pt,Ut=()=>{const o=c.Promise.resolve(void 0);Ae=()=>{o.then(gt)}};var gt=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(f){k(f)}var u=Lt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Ie=!1};function Ge(){this.s=this.s,this.C=this.C}Ge.prototype.s=!1,Ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};c.addEventListener("test",f,u),c.removeEventListener("test",f,u)}catch{}return o}();function at(o,u){if(je.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(we){e:{try{Q(u.nodeName);var V=!0;break e}catch{}V=!1}V||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:mt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&at.aa.h.call(this)}}L(at,je);var mt={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),re=0;function te(o,u,f,g,V){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!g,this.ha=V,this.key=++re,this.da=this.fa=!1}function oe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Se(o){this.src=o,this.g={},this.h=0}Se.prototype.add=function(o,u,f,g,V){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var X=v(o,u,g,V);return-1<X?(u=o[X],f||(u.fa=!1)):(u=new te(u,this.src,N,!!g,V),u.fa=f,o.push(u)),u};function Me(o,u){var f=u.type;if(f in o.g){var g=o.g[f],V=Array.prototype.indexOf.call(g,u,void 0),N;(N=0<=V)&&Array.prototype.splice.call(g,V,1),N&&(oe(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function v(o,u,f,g){for(var V=0;V<o.length;++V){var N=o[V];if(!N.da&&N.listener==u&&N.capture==!!f&&N.ha==g)return V}return-1}var E="closure_lm_"+(1e6*Math.random()|0),D={};function B(o,u,f,g,V){if(Array.isArray(u)){for(var N=0;N<u.length;N++)B(o,u[N],f,g,V);return null}return f=ce(f),o&&o[F]?o.K(u,f,h(g)?!!g.capture:!!g,V):U(o,u,f,!1,g,V)}function U(o,u,f,g,V,N){if(!u)throw Error("Invalid event type");var X=h(V)?!!V.capture:!!V,qe=le(o);if(qe||(o[E]=qe=new Se(o)),f=qe.add(u,f,g,X,N),f.proxy)return f;if(g=j(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)sn||(V=X),V===void 0&&(V=!1),o.addEventListener(u.toString(),g,V);else if(o.attachEvent)o.attachEvent(Y(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function j(){function o(f){return u.call(o.src,o.listener,f)}const u=z;return o}function Z(o,u,f,g,V){if(Array.isArray(u))for(var N=0;N<u.length;N++)Z(o,u[N],f,g,V);else g=h(g)?!!g.capture:!!g,f=ce(f),o&&o[F]?(o=o.i,u=String(u).toString(),u in o.g&&(N=o.g[u],f=v(N,f,g,V),-1<f&&(oe(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete o.g[u],o.h--)))):o&&(o=le(o))&&(u=o.g[u.toString()],o=-1,u&&(o=v(u,f,g,V)),(f=-1<o?u[o]:null)&&J(f))}function J(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[F])Me(u.i,o);else{var f=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(f,g,o.capture):u.detachEvent?u.detachEvent(Y(f),g):u.addListener&&u.removeListener&&u.removeListener(g),(f=le(u))?(Me(f,o),f.h==0&&(f.src=null,u[E]=null)):oe(o)}}}function Y(o){return o in D?D[o]:D[o]="on"+o}function z(o,u){if(o.da)o=!0;else{u=new at(u,this);var f=o.listener,g=o.ha||o.src;o.fa&&J(o),o=f.call(g,u)}return o}function le(o){return o=o[E],o instanceof Se?o:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(o){return typeof o=="function"?o:(o[ee]||(o[ee]=function(u){return o.handleEvent(u)}),o[ee])}function ie(){Ge.call(this),this.i=new Se(this),this.M=this,this.F=null}L(ie,Ge),ie.prototype[F]=!0,ie.prototype.removeEventListener=function(o,u,f,g){Z(this,o,u,f,g)};function ue(o,u){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new je(u,o);else if(u instanceof je)u.target=u.target||o;else{var V=u;u=new je(g,o),A(u,V)}if(V=!0,f)for(var N=f.length-1;0<=N;N--){var X=u.g=f[N];V=Ve(X,g,!0,u)&&V}if(X=u.g=o,V=Ve(X,g,!0,u)&&V,V=Ve(X,g,!1,u)&&V,f)for(N=0;N<f.length;N++)X=u.g=f[N],V=Ve(X,g,!1,u)&&V}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],g=0;g<f.length;g++)oe(f[g]);delete o.g[u],o.h--}}this.F=null},ie.prototype.K=function(o,u,f,g){return this.i.add(String(o),u,!1,f,g)},ie.prototype.L=function(o,u,f,g){return this.i.add(String(o),u,!0,f,g)};function Ve(o,u,f,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var V=!0,N=0;N<u.length;++N){var X=u[N];if(X&&!X.da&&X.capture==f){var qe=X.listener,vt=X.ha||X.src;X.fa&&Me(o.i,X),V=qe.call(vt,g)!==!1&&V}}return V&&!g.defaultPrevented}function ke(o,u,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function dt(o){o.g=ke(()=>{o.g=null,o.i&&(o.i=!1,dt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class nt extends Ge{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(o){Ge.call(this),this.h=o,this.g={}}L(rt,Ge);var Ye=[];function on(o){ge(o.g,function(u,f){this.g.hasOwnProperty(f)&&J(u)},o),o.g={}}rt.prototype.N=function(){rt.aa.N.call(this),on(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=c.JSON.stringify,st=c.JSON.parse,_t=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Hn(){}Hn.prototype.h=null;function Fi(o){return o.h||(o.h=o.i())}function an(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){je.call(this,"d")}L(Ps,je);function ks(){je.call(this,"c")}L(ks,je);var bn={},b=null;function x(){return b=b||new ie}bn.La="serverreachability";function I(o){je.call(this,bn.La,o)}L(I,je);function C(o){const u=x();ue(u,new I(u))}bn.STAT_EVENT="statevent";function P(o,u){je.call(this,bn.STAT_EVENT,o),this.stat=u}L(P,je);function $(o){const u=x();ue(u,new P(u,o))}bn.Ma="timingevent";function ne(o,u){je.call(this,bn.Ma,o),this.size=u}L(ne,je);function se(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Fe(o,u,f,g,V,N){o.info(function(){if(o.g)if(N)for(var X="",qe=N.split("&"),vt=0;vt<qe.length;vt++){var De=qe[vt].split("=");if(1<De.length){var It=De[0];De=De[1];var St=It.split("_");X=2<=St.length&&St[1]=="type"?X+(It+"="+De+"&"):X+(It+"=redacted&")}}else X=null;else X=N;return"XMLHTTP REQ ("+g+") [attempt "+V+"]: "+u+`
`+f+`
`+X})}function Te(o,u,f,g,V,N,X){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+V+"]: "+u+`
`+f+`
`+N+" "+X})}function Re(o,u,f,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Ue(o,f)+(g?" "+g:"")})}function We(o,u){o.info(function(){return"TIMEOUT: "+u})}Ee.prototype.info=function(){};function Ue(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var V=g[1];if(Array.isArray(V)&&!(1>V.length)){var N=V[0];if(N!="noop"&&N!="stop"&&N!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return Gn(f)}catch{return u}}var Ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Br={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xs;function Ui(){}L(Ui,Hn),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},xs=new Ui;function Kn(o,u,f,g){this.j=o,this.i=u,this.l=f,this.R=g||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var lu={},ba={};function Ia(o,u,f){o.L=1,o.v=qi(In(u)),o.m=f,o.P=!0,uu(o,null)}function uu(o,u){o.F=Date.now(),Bi(o),o.A=In(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Iu(f.i,"t",g),o.C=0,f=o.j.J,o.h=new cu,o.g=ju(o.j,f?u:null,!o.m),0<o.O&&(o.M=new nt(m(o.Y,o,o.g),o.O)),u=o.U,f=o.g,g=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ye[0]=V.toString()),V=Ye);for(var N=0;N<V.length;N++){var X=B(f,V[N],g||u.handleEvent,!1,u.h||u);if(!X)break;u.g[X.key]=X}u=o.H?w(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),C(),Fe(o.i,o.u,o.A,o.l,o.R,o.m)}Kn.prototype.ca=function(o){o=o.target;const u=this.M;u&&Sn(o)==3?u.j():this.Y(o)},Kn.prototype.Y=function(o){try{if(o==this.g)e:{const St=Sn(this.g);var u=this.g.Ba();const qr=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||xu(this.g)))){this.J||St!=4||u==7||(u==8||0>=qr?C(3):C(2)),Sa(this);var f=this.g.Z();this.X=f;t:if(hu(this)){var g=xu(this.g);o="";var V=g.length,N=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),Vs(this);var X="";break t}this.h.i=new c.TextDecoder}for(u=0;u<V;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(N&&u==V-1)});g.length=0,this.h.g+=o,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=f==200,Te(this.i,this.u,this.A,this.l,this.R,St,f),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,vt=this.g;if((qe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(qe)){var De=qe;break t}}De=null}if(f=De)Re(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,f);else{this.o=!1,this.s=3,$(12),_r(this),Vs(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<X.length;)if(Jt=jg(this,X),Jt==ba){St==4&&(this.s=4,$(14),f=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==lu){this.s=4,$(15),Re(this.i,this.l,X,"[Invalid Chunk]"),f=!1;break}else Re(this.i,this.l,Jt,null),Aa(this,Jt);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||X.length!=0||this.h.h||(this.s=1,$(16),f=!1),this.o=this.o&&f,!f)Re(this.i,this.l,X,"[Invalid Chunked Response]"),_r(this),Vs(this);else if(0<X.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Va(It),It.M=!0,$(11))}}else Re(this.i,this.l,X,null),Aa(this,X);St==4&&_r(this),this.o&&!this.J&&(St==4?Fu(this.j,this):(this.o=!1,Bi(this)))}else im(this.g),f==400&&0<X.indexOf("Unknown SID")?(this.s=3,$(12)):(this.s=0,$(13)),_r(this),Vs(this)}}}catch{}finally{}};function hu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function jg(o,u){var f=o.C,g=u.indexOf(`
`,f);return g==-1?ba:(f=Number(u.substring(f,g)),isNaN(f)?lu:(g+=1,g+f>u.length?ba:(u=u.slice(g,g+f),o.C=g+f,u)))}Kn.prototype.cancel=function(){this.J=!0,_r(this)};function Bi(o){o.S=Date.now()+o.I,du(o,o.I)}function du(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=se(m(o.ba,o),u)}function Sa(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Kn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(We(this.i,this.A),this.L!=2&&(C(),$(17)),_r(this),this.s=2,Vs(this)):du(this,this.S-o)};function Vs(o){o.j.G==0||o.J||Fu(o.j,o)}function _r(o){Sa(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,on(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Aa(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||Ca(f.h,o))){if(!o.K&&Ca(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var V=g;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Qi(f),Ki(f);else break e;xa(f),$(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=se(m(f.Za,f),6e3));if(1>=gu(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else yr(f,11)}else if((o.K||f.g==o)&&Qi(f),!H(u))for(V=f.Da.g.parse(u),u=0;u<V.length;u++){let De=V[u];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];const It=De[3];It!=null&&(f.la=It,f.j.info("VER="+f.la));const St=De[4];St!=null&&(f.Aa=St,f.j.info("SVER="+f.Aa));const qr=De[5];qr!=null&&typeof qr=="number"&&0<qr&&(g=1.5*qr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Jt=o.g;if(Jt){const Ji=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var N=g.h;N.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Ra(N,N.h),N.h=null))}if(g.D){const Da=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(g.ya=Da,Qe(g.I,g.D,Da))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var X=o;if(g.qa=$u(g,g.J?g.ia:null,g.W),X.K){mu(g.h,X);var qe=X,vt=g.L;vt&&(qe.I=vt),qe.B&&(Sa(qe),Bi(qe)),g.g=X}else Nu(g);0<f.i.length&&Wi(f)}else De[0]!="stop"&&De[0]!="close"||yr(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?yr(f,7):ka(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}C(4)}catch{}}var qg=class{constructor(o,u){this.g=o,this.map=u}};function fu(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function gu(o){return o.h?1:o.g?o.g.size:0}function Ca(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ra(o,u){o.g?o.g.add(u):o.h=u}function mu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}fu.prototype.cancel=function(){if(this.i=_u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function _u(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return O(o.i)}function zg(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],f=o.length,g=0;g<f;g++)u.push(o[g]);return u}u=[],f=0;for(g in o)u[f++]=o[g];return u}function Gg(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const g in o)u[f++]=g;return u}}}function vu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=Gg(o),g=zg(o),V=g.length,N=0;N<V;N++)u.call(void 0,g[N],f&&f[N],o)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hg(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),V=null;if(0<=g){var N=o[f].substring(0,g);V=o[f].substring(g+1)}else N=o[f];u(N,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function vr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof vr){this.h=o.h,$i(this,o.j),this.o=o.o,this.g=o.g,ji(this,o.s),this.l=o.l;var u=o.i,f=new Os;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),wu(this,f),this.m=o.m}else o&&(u=String(o).match(yu))?(this.h=!1,$i(this,u[1]||"",!0),this.o=Ds(u[2]||""),this.g=Ds(u[3]||"",!0),ji(this,u[4]),this.l=Ds(u[5]||"",!0),wu(this,u[6]||"",!0),this.m=Ds(u[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}vr.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ls(u,Eu,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ls(u,Eu,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ls(f,f.charAt(0)=="/"?Qg:Wg,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ls(f,Jg)),o.join("")};function In(o){return new vr(o)}function $i(o,u,f){o.j=f?Ds(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ji(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function wu(o,u,f){u instanceof Os?(o.i=u,Xg(o.i,o.h)):(f||(u=Ls(u,Yg)),o.i=new Os(u,o.h))}function Qe(o,u,f){o.i.set(u,f)}function qi(o){return Qe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ds(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ls(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Kg),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Eu=/[#\/\?@]/g,Wg=/[#\?:]/g,Qg=/[#\?]/g,Yg=/[#\?@]/g,Jg=/#/g;function Os(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Wn(o){o.g||(o.g=new Map,o.h=0,o.i&&Hg(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=Os.prototype,t.add=function(o,u){Wn(this),this.i=null,o=$r(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Tu(o,u){Wn(o),u=$r(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function bu(o,u){return Wn(o),u=$r(o,u),o.g.has(u)}t.forEach=function(o,u){Wn(this),this.g.forEach(function(f,g){f.forEach(function(V){o.call(u,V,g,this)},this)},this)},t.na=function(){Wn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let g=0;g<u.length;g++){const V=o[g];for(let N=0;N<V.length;N++)f.push(u[g])}return f},t.V=function(o){Wn(this);let u=[];if(typeof o=="string")bu(this,o)&&(u=u.concat(this.g.get($r(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},t.set=function(o,u){return Wn(this),this.i=null,o=$r(this,o),bu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Iu(o,u,f){Tu(o,u),0<f.length&&(o.i=null,o.g.set($r(o,u),O(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var g=u[f];const N=encodeURIComponent(String(g)),X=this.V(g);for(g=0;g<X.length;g++){var V=N;X[g]!==""&&(V+="="+encodeURIComponent(String(X[g]))),o.push(V)}}return this.i=o.join("&")};function $r(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Xg(o,u){u&&!o.j&&(Wn(o),o.i=null,o.g.forEach(function(f,g){var V=g.toLowerCase();g!=V&&(Tu(this,g),Iu(this,V,f))},o)),o.j=u}function Zg(o,u){const f=new Ee;if(c.Image){const g=new Image;g.onload=y(Qn,f,"TestLoadImage: loaded",!0,u,g),g.onerror=y(Qn,f,"TestLoadImage: error",!1,u,g),g.onabort=y(Qn,f,"TestLoadImage: abort",!1,u,g),g.ontimeout=y(Qn,f,"TestLoadImage: timeout",!1,u,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function em(o,u){const f=new Ee,g=new AbortController,V=setTimeout(()=>{g.abort(),Qn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(N=>{clearTimeout(V),N.ok?Qn(f,"TestPingServer: ok",!0,u):Qn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(V),Qn(f,"TestPingServer: error",!1,u)})}function Qn(o,u,f,g,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),g(f)}catch{}}function tm(){this.g=new _t}function nm(o,u,f){const g=f||"";try{vu(o,function(V,N){let X=V;h(V)&&(X=Gn(V)),u.push(g+N+"="+encodeURIComponent(X))})}catch(V){throw u.push(g+"type="+encodeURIComponent("_badmap")),V}}function zi(o){this.l=o.Ub||null,this.j=o.eb||!1}L(zi,Hn),zi.prototype.g=function(){return new Gi(this.l,this.j)},zi.prototype.i=function(o){return function(){return o}}({});function Gi(o,u){ie.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Gi,ie),t=Gi.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Ms(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Su(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Su(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Ns(this):Ms(this),this.readyState==3&&Su(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ns(this))},t.Qa=function(o){this.g&&(this.response=o,Ns(this))},t.ga=function(){this.g&&Ns(this)};function Ns(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ms(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Ms(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Au(o){let u="";return ge(o,function(f,g){u+=g,u+=":",u+=f,u+=`\r
`}),u}function Pa(o,u,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Au(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Qe(o,u,f))}function Ze(o){ie.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Ze,ie);var rm=/^https?$/i,sm=["POST","PUT"];t=Ze.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xs.g(),this.v=this.o?Fi(this.o):Fi(xs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(N){Cu(this,N);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var V in g)f.set(V,g[V]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())f.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),V=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(sm,u,void 0))||g||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,X]of f)this.g.setRequestHeader(N,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ku(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){Cu(this,N)}};function Cu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Ru(o),Hi(o)}function Ru(o){o.A||(o.A=!0,ue(o,"complete"),ue(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ue(this,"complete"),ue(this,"abort"),Hi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pu(this):this.bb())},t.bb=function(){Pu(this)};function Pu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Sn(o)!=4||o.Z()!=2)){if(o.u&&Sn(o)==4)ke(o.Ea,0,o);else if(ue(o,"readystatechange"),Sn(o)==4){o.h=!1;try{const X=o.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var g;if(g=X===0){var V=String(o.D).match(yu)[1]||null;!V&&c.self&&c.self.location&&(V=c.self.location.protocol.slice(0,-1)),g=!rm.test(V?V.toLowerCase():"")}f=g}if(f)ue(o,"complete"),ue(o,"success");else{o.m=6;try{var N=2<Sn(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",Ru(o)}}finally{Hi(o)}}}}function Hi(o,u){if(o.g){ku(o);const f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ue(o,"ready");try{f.onreadystatechange=g}catch{}}}function ku(o){o.I&&(c.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Sn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),st(u)}};function xu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function im(o){const u={};o=(o.g&&2<=Sn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(H(o[g]))continue;var f=R(o[g]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const N=u[V]||[];u[V]=N,N.push(f)}S(u,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Vu(o){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,o),this.cb=Fs("retryDelaySeedMs",1e4,o),this.Wa=Fs("forwardChannelMaxRetries",2,o),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new fu(o&&o.concurrentRequestLimit),this.Da=new tm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vu.prototype,t.la=8,t.G=1,t.connect=function(o,u,f,g){$(0),this.W=o,this.H=u||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=$u(this,null,this.W),Wi(this)};function ka(o){if(Du(o),o.G==3){var u=o.U++,f=In(o.I);if(Qe(f,"SID",o.K),Qe(f,"RID",u),Qe(f,"TYPE","terminate"),Us(o,f),u=new Kn(o,o.j,u),u.L=2,u.v=qi(In(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=u.v,f=!0),f||(u.g=ju(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Bi(u)}Bu(o)}function Ki(o){o.g&&(Va(o),o.g.cancel(),o.g=null)}function Du(o){Ki(o),o.u&&(c.clearTimeout(o.u),o.u=null),Qi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Wi(o){if(!pu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Ae||Ut(),Ie||(Ae(),Ie=!0),ht.add(u,o),o.B=0}}function om(o,u){return gu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=se(m(o.Ga,o,u),Uu(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new Kn(this,this.j,o);let N=this.o;if(this.S&&(N?(N=w(N),A(N,this.S)):N=this.S),this.m!==null||this.O||(V.H=N,N=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Ou(this,V,u),f=In(this.I),Qe(f,"RID",o),Qe(f,"CVER",22),this.D&&Qe(f,"X-HTTP-Session-Id",this.D),Us(this,f),N&&(this.O?u="headers="+encodeURIComponent(String(Au(N)))+"&"+u:this.m&&Pa(f,this.m,N)),Ra(this.h,V),this.Ua&&Qe(f,"TYPE","init"),this.P?(Qe(f,"$req",u),Qe(f,"SID","null"),V.T=!0,Ia(V,f,null)):Ia(V,f,u),this.G=2}}else this.G==3&&(o?Lu(this,o):this.i.length==0||pu(this.h)||Lu(this))};function Lu(o,u){var f;u?f=u.l:f=o.U++;const g=In(o.I);Qe(g,"SID",o.K),Qe(g,"RID",f),Qe(g,"AID",o.T),Us(o,g),o.m&&o.o&&Pa(g,o.m,o.o),f=new Kn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Ou(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ra(o.h,f),Ia(f,g,u)}function Us(o,u){o.H&&ge(o.H,function(f,g){Qe(u,g,f)}),o.l&&vu({},function(f,g){Qe(u,g,f)})}function Ou(o,u,f){f=Math.min(o.i.length,f);var g=o.l?m(o.l.Na,o.l,o):null;e:{var V=o.i;let N=-1;for(;;){const X=["count="+f];N==-1?0<f?(N=V[0].g,X.push("ofs="+N)):N=0:X.push("ofs="+N);let qe=!0;for(let vt=0;vt<f;vt++){let De=V[vt].g;const It=V[vt].map;if(De-=N,0>De)N=Math.max(0,V[vt].g-100),qe=!1;else try{nm(It,X,"req"+De+"_")}catch{g&&g(It)}}if(qe){g=X.join("&");break e}}}return o=o.i.splice(0,f),u.D=o,g}function Nu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Ae||Ut(),Ie||(Ae(),Ie=!0),ht.add(u,o),o.v=0}}function xa(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=se(m(o.Fa,o),Uu(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=se(m(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$(10),Ki(this),Mu(this))};function Va(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Mu(o){o.g=new Kn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=In(o.qa);Qe(u,"RID","rpc"),Qe(u,"SID",o.K),Qe(u,"AID",o.T),Qe(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Qe(u,"TO",o.ja),Qe(u,"TYPE","xmlhttp"),Us(o,u),o.m&&o.o&&Pa(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=qi(In(u)),f.m=null,f.P=!0,uu(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Ki(this),xa(this),$(19))};function Qi(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Fu(o,u){var f=null;if(o.g==u){Qi(o),Va(o),o.g=null;var g=2}else if(Ca(o.h,u))f=u.D,mu(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var V=o.B;g=x(),ue(g,new ne(g,f)),Wi(o)}else Nu(o);else if(V=u.s,V==3||V==0&&0<u.X||!(g==1&&om(o,u)||g==2&&xa(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),V){case 1:yr(o,5);break;case 4:yr(o,10);break;case 3:yr(o,6);break;default:yr(o,2)}}}function Uu(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function yr(o,u){if(o.j.info("Error code "+u),u==2){var f=m(o.fb,o),g=o.Xa;const V=!g;g=new vr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$i(g,"https"),qi(g),V?Zg(g.toString(),f):em(g.toString(),f)}else $(2);o.G=0,o.l&&o.l.sa(u),Bu(o),Du(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),$(2)):(this.j.info("Failed to ping google.com"),$(1))};function Bu(o){if(o.G=0,o.ka=[],o.l){const u=_u(o.h);(u.length!=0||o.i.length!=0)&&(M(o.ka,u),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function $u(o,u,f){var g=f instanceof vr?In(f):new vr(f);if(g.g!="")u&&(g.g=u+"."+g.g),ji(g,g.s);else{var V=c.location;g=V.protocol,u=u?u+"."+V.hostname:V.hostname,V=+V.port;var N=new vr(null);g&&$i(N,g),u&&(N.g=u),V&&ji(N,V),f&&(N.l=f),g=N}return f=o.D,u=o.ya,f&&u&&Qe(g,f,u),Qe(g,"VER",o.la),Us(o,g),g}function ju(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Ze(new zi({eb:f})):new Ze(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}t=qu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yi(){}Yi.prototype.g=function(o,u){return new Bt(o,u)};function Bt(o,u){ie.call(this),this.g=new Vu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!H(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!H(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new jr(this)}L(Bt,ie),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){ka(this.g)},Bt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Gn(o),o=f);u.i.push(new qg(u.Ya++,o)),u.G==3&&Wi(u)},Bt.prototype.N=function(){this.g.l=null,delete this.j,ka(this.g),delete this.g,Bt.aa.N.call(this)};function zu(o){Ps.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const f in u){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}L(zu,Ps);function Gu(){ks.call(this),this.status=1}L(Gu,ks);function jr(o){this.g=o}L(jr,qu),jr.prototype.ua=function(){ue(this.g,"a")},jr.prototype.ta=function(o){ue(this.g,new zu(o))},jr.prototype.sa=function(o){ue(this.g,new Gu)},jr.prototype.ra=function(){ue(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,m0=function(){return new Yi},g0=function(){return x()},p0=bn,Cc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,vo=Ot,Br.COMPLETE="complete",f0=Br,an.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Hs=an,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,d0=Ze}).apply(typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{});const Zh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ss="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new pl("@firebase/firestore");function qs(){return Dr.logLevel}function ae(t,...e){if(Dr.logLevel<=Pe.DEBUG){const n=e.map(Rl);Dr.debug(`Firestore (${Ss}): ${t}`,...n)}}function Bn(t,...e){if(Dr.logLevel<=Pe.ERROR){const n=e.map(Rl);Dr.error(`Firestore (${Ss}): ${t}`,...n)}}function fs(t,...e){if(Dr.logLevel<=Pe.WARN){const n=e.map(Rl);Dr.warn(`Firestore (${Ss}): ${t}`,...n)}}function Rl(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Ss}) INTERNAL ASSERTION FAILED: `+t;throw Bn(e),new Error(e)}function $e(t,e){t||pe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class j3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q3{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new lr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new lr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new _0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Ct(e)}}class z3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class G3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const r=i=>{i.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new H3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=W3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function ps(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new ut(0,0))}static max(){return new me(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends pi{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new et(n)}static emptyPath(){return new et([])}}const Q3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends pi{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return Q3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new he(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new he(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new he(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(et.fromString(e))}static fromName(e){return new de(et.fromString(e).popFirst(5))}static empty(){return new de(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new et(e.slice()))}}function Y3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new hr(s,de.empty(),e)}function J3(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(me.min(),de.empty(),-1)}static max(){return new hr(me.max(),de.empty(),-1)}}function X3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ew{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==Z3)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},l=>r(l))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;n(e[h]).next(d=>{a[h]=d,++c,c===i&&r(a)},d=>s(d))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function tw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Di(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pl.oe=-1;function da(t){return t==null}function Bo(t){return t===0&&1/t==-1/0}function nw(t){return typeof t=="number"&&Number.isInteger(t)&&!Bo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oo(this.root,e,this.comparator,!0)}}class oo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??yt.RED,this.left=s??yt.EMPTY,this.right=i??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new yt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new td(this.data.getIterator())}getIteratorFrom(e){return new td(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class td{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new Et(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new w0("Invalid base64 string: "+i):i}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const rw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if($e(!!t),typeof t=="string"){let e=0;const n=rw.exec(t);if($e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xl(t){const e=t.mapValue.fields.__previous_value__;return kl(e)?xl(e):e}function gi(t){const e=dr(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,r,s,i,a,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}}class mi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kl(t)?4:ow(t)?9007199254740991:iw(t)?10:11:pe()}function wn(t,e){if(t===e)return!0;const n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gi(t).isEqual(gi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=dr(s.timestampValue),c=dr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Lr(s.bytesValue).isEqual(Lr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=tt(s.doubleValue),c=tt(i.doubleValue);return a===c?Bo(a)===Bo(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(ed(a)!==ed(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!wn(a[l],c[l])))return!1;return!0}(t,e);default:return pe()}}function _i(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function gs(t,e){if(t===e)return 0;const n=Or(t),r=Or(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=tt(i.integerValue||i.doubleValue),l=tt(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return nd(t.timestampValue,e.timestampValue);case 4:return nd(gi(t),gi(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Lr(i),l=Lr(a);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){const d=Le(c[h],l[h]);if(d!==0)return d}return Le(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Le(tt(i.latitude),tt(a.latitude));return c!==0?c:Le(tt(i.longitude),tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rd(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,l,h,d;const p=i.fields||{},m=a.fields||{},y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,L=(l=m.value)===null||l===void 0?void 0:l.arrayValue,O=Le(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((d=L==null?void 0:L.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:rd(y,L)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ao.mapValue&&a===ao.mapValue)return 0;if(i===ao.mapValue)return 1;if(a===ao.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Le(l[p],d[p]);if(m!==0)return m;const y=gs(c[l[p]],h[d[p]]);if(y!==0)return y}return Le(l.length,d.length)}(t.mapValue,e.mapValue);default:throw pe()}}function nd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=dr(t),r=dr(e),s=Le(n.seconds,r.seconds);return s!==0?s:Le(n.nanos,r.nanos)}function rd(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=gs(n[s],r[s]);if(i)return i}return Le(n.length,r.length)}function ms(t){return Rc(t)}function Rc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Rc(n.fields[a])}`;return s+"}"}(t.mapValue):pe()}function Pc(t){return!!t&&"integerValue"in t}function Vl(t){return!!t&&"arrayValue"in t}function sd(t){return!!t&&"nullValue"in t}function id(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yo(t){return!!t&&"mapValue"in t}function iw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ni(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ni(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ni(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ow(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ni(n)}setAll(e){let n=wt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=ni(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){As(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ht(ni(this.value))}}function E0(t){const e=[];return As(t.fields,(n,r)=>{const s=new wt([n]);if(yo(r)){const i=E0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Pt(e,0,me.min(),me.min(),me.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,s){return new Pt(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new Pt(e,2,n,me.min(),me.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,me.min(),me.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.position=e,this.inclusive=n}}function od(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=de.comparator(de.fromName(a.referenceValue),n.key):r=gs(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ad(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function aw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{}class lt extends T0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lw(e,n,r):n==="array-contains"?new dw(e,r):n==="in"?new fw(e,r):n==="not-in"?new pw(e,r):n==="array-contains-any"?new gw(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uw(e,r):new hw(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gs(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends T0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new En(e,n)}matches(e){return b0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function b0(t){return t.op==="and"}function I0(t){return cw(t)&&b0(t)}function cw(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function kc(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+ms(t.value);if(I0(t))return t.filters.map(e=>kc(e)).join(",");{const e=t.filters.map(n=>kc(n)).join(",");return`${t.op}(${e})`}}function S0(t,e){return t instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.field.isEqual(s.field)&&wn(r.value,s.value)}(t,e):t instanceof En?function(r,s){return s instanceof En&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&S0(a,s.filters[c]),!0):!1}(t,e):void pe()}function A0(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${ms(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(A0).join(" ,")+"}"}(t):"Filter"}class lw extends lt{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class uw extends lt{constructor(e,n){super(e,"in",n),this.keys=C0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hw extends lt{constructor(e,n){super(e,"not-in",n),this.keys=C0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function C0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class dw extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vl(n)&&_i(n.arrayValue,this.value)}}class fw extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_i(this.value.arrayValue,n)}}class pw extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(_i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_i(this.value.arrayValue,n)}}class gw extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_i(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function cd(t,e=null,n=[],r=[],s=null,i=null,a=null){return new mw(t,e,n,r,s,i,a)}function Dl(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),da(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ms(r)).join(",")),e.ue=n}return e.ue}function Ll(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ad(t.startAt,e.startAt)&&ad(t.endAt,e.endAt)}function xc(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _w(t,e,n,r,s,i,a,c){return new fa(t,e,n,r,s,i,a,c)}function Ol(t){return new fa(t)}function ld(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vw(t){return t.collectionGroup!==null}function ri(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Et(wt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new jo(i,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new jo(wt.keyField(),r))}return e.ce}function gn(t){const e=ve(t);return e.le||(e.le=yw(e,ri(t))),e.le}function yw(t,e){if(t.limitType==="F")return cd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new jo(s.field,i)});const n=t.endAt?new $o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $o(t.startAt.position,t.startAt.inclusive):null;return cd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vc(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pa(t,e){return Ll(gn(t),gn(e))&&t.limitType===e.limitType}function R0(t){return`${Dl(gn(t))}|lt:${t.limitType}`}function Qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>A0(s)).join(", ")}]`),da(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ms(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ms(s)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function ga(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):de.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ri(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,l){const h=od(a,c,l);return a.inclusive?h<=0:h<0}(r.startAt,ri(r),s)||r.endAt&&!function(a,c,l){const h=od(a,c,l);return a.inclusive?h>=0:h>0}(r.endAt,ri(r),s))}(t,e)}function ww(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P0(t){return(e,n)=>{let r=!1;for(const s of ri(t)){const i=Ew(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Ew(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(i,a,c){const l=a.data.field(i),h=c.data.field(i);return l!==null&&h!==null?gs(l,h):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Xe(de.comparator);function $n(){return Tw}const k0=new Xe(de.comparator);function Ks(...t){let e=k0;for(const n of t)e=e.insert(n.key,n);return e}function x0(t){let e=k0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return si()}function V0(){return si()}function si(){return new Cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bw=new Xe(de.comparator),Iw=new Et(de.comparator);function Ce(...t){let e=Iw;for(const n of t)e=e.add(n);return e}const Sw=new Et(Le);function Aw(){return Sw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bo(e)?"-0":e}}function D0(t){return{integerValue:""+t}}function Cw(t,e){return nw(e)?D0(e):Nl(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this._=void 0}}function Rw(t,e,n){return t instanceof qo?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kl(i)&&(i=xl(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof vi?O0(t,e):t instanceof yi?N0(t,e):function(s,i){const a=L0(s,i),c=ud(a)+ud(s.Pe);return Pc(a)&&Pc(s.Pe)?D0(c):Nl(s.serializer,c)}(t,e)}function Pw(t,e,n){return t instanceof vi?O0(t,e):t instanceof yi?N0(t,e):n}function L0(t,e){return t instanceof zo?function(r){return Pc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qo extends ma{}class vi extends ma{constructor(e){super(),this.elements=e}}function O0(t,e){const n=M0(e);for(const r of t.elements)n.some(s=>wn(s,r))||n.push(r);return{arrayValue:{values:n}}}class yi extends ma{constructor(e){super(),this.elements=e}}function N0(t,e){let n=M0(e);for(const r of t.elements)n=n.filter(s=>!wn(s,r));return{arrayValue:{values:n}}}class zo extends ma{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ud(t){return tt(t.integerValue||t.doubleValue)}function M0(t){return Vl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kw(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vi&&s instanceof vi||r instanceof yi&&s instanceof yi?ps(r.elements,s.elements,wn):r instanceof zo&&s instanceof zo?wn(r.Pe,s.Pe):r instanceof qo&&s instanceof qo}(t.transform,e.transform)}class xw{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _a{}function F0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new B0(t.key,Mn.none()):new Li(t.key,t.data,Mn.none());{const n=t.data,r=Ht.empty();let s=new Et(wt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Fr(t.key,r,new Zt(s.toArray()),Mn.none())}}function Vw(t,e,n){t instanceof Li?function(s,i,a){const c=s.value.clone(),l=dd(s.fieldTransforms,i,a.transformResults);c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,i,a){if(!wo(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=dd(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(U0(s)),l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ii(t,e,n,r){return t instanceof Li?function(i,a,c,l){if(!wo(i.precondition,a))return c;const h=i.value.clone(),d=fd(i.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(i,a,c,l){if(!wo(i.precondition,a))return c;const h=fd(i.fieldTransforms,l,a),d=a.data;return d.setAll(U0(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,c){return wo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Dw(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=L0(r.transform,s||null);i!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,i))}return n||null}function hd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ps(r,s,(i,a)=>kw(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Li extends _a{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends _a{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dd(t,e,n){const r=new Map;$e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Pw(a,c,n[s]))}return r}function fd(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Rw(i,a,e))}return r}class B0 extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lw extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Vw(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ii(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ii(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=V0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const l=F0(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(n,r)=>hd(n,r))&&ps(this.baseMutations,e.baseMutations,(n,r)=>hd(n,r))}}class Ml{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){$e(e.mutations.length===r.length);let s=function(){return bw}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Ml(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,xe;function Fw(t){switch(t){default:return pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function $0(t){if(t===void 0)return Bn("GRPC error has no .code"),K.UNKNOWN;switch(t){case it.OK:return K.OK;case it.CANCELLED:return K.CANCELLED;case it.UNKNOWN:return K.UNKNOWN;case it.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case it.INTERNAL:return K.INTERNAL;case it.UNAVAILABLE:return K.UNAVAILABLE;case it.UNAUTHENTICATED:return K.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case it.NOT_FOUND:return K.NOT_FOUND;case it.ALREADY_EXISTS:return K.ALREADY_EXISTS;case it.PERMISSION_DENIED:return K.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case it.ABORTED:return K.ABORTED;case it.OUT_OF_RANGE:return K.OUT_OF_RANGE;case it.UNIMPLEMENTED:return K.UNIMPLEMENTED;case it.DATA_LOSS:return K.DATA_LOSS;default:return pe()}}(xe=it||(it={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new Rr([4294967295,4294967295],0);function pd(t){const e=Uw().encode(t),n=new h0;return n.update(e),new Uint8Array(n.digest())}function gd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class Fl{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ws(`Invalid padding: ${n}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Rr.fromNumber(r)));return s.compare(Bw)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=pd(e),[r,s]=gd(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Fl(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=pd(e),[r,s]=gd(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Oi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new va(me.min(),s,new Xe(Le),$n(),Ce())}}class Oi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oi(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class j0{constructor(e,n){this.targetId=e,this.me=n}}class q0{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class md{constructor(){this.fe=0,this.ge=vd(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pe()}}),new Oi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=vd()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $w{constructor(e){this.Le=e,this.Be=new Map,this.ke=$n(),this.qe=_d(),this.Qe=new Xe(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(xc(i))if(r===0){const a=new de(i.path);this.Ue(n,a,Pt.newNoDocument(a,me.min()))}else $e(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),l=c?this.Xe(c,e,a):1;if(l!==0){this.je(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Lr(r).toUint8Array()}catch(l){if(l instanceof w0)return fs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Fl(a,s,i)}catch(l){return fs(l instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&xc(c.target)){const l=new de(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Pt.newNoDocument(l,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=Ce();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(l=>{const h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new va(e,n,this.Qe,this.ke,r);return this.ke=$n(),this.qe=_d(),this.Qe=new Xe(Le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new md,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new md),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _d(){return new Xe(de.comparator)}function vd(){return new Xe(de.comparator)}const jw={asc:"ASCENDING",desc:"DESCENDING"},qw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zw={and:"AND",or:"OR"};class Gw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dc(t,e){return t.useProto3Json||da(e)?e:{value:e}}function Go(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hw(t,e){return Go(t,e.toTimestamp())}function mn(t){return $e(!!t),me.fromTimestamp(function(n){const r=dr(n);return new ut(r.seconds,r.nanos)}(t))}function Ul(t,e){return Lc(t,e).canonicalString()}function Lc(t,e){const n=function(s){return new et(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G0(t){const e=et.fromString(t);return $e(Y0(e)),e}function Oc(t,e){return Ul(t.databaseId,e.path)}function Za(t,e){const n=G0(e);if(n.get(1)!==t.databaseId.projectId)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(K0(n))}function H0(t,e){return Ul(t.databaseId,e)}function Kw(t){const e=G0(t);return e.length===4?et.emptyPath():K0(e)}function Nc(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K0(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yd(t,e,n){return{name:Oc(t,e),fields:n.value.mapValue.fields}}function Ww(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?($e(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const d=h.code===void 0?K.UNKNOWN:$0(h.code);return new he(d,h.message||"")}(a);n=new q0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Za(t,r.document.name),i=mn(r.document.updateTime),a=r.document.createTime?mn(r.document.createTime):me.min(),c=new Ht({mapValue:{fields:r.document.fields}}),l=Pt.newFoundDocument(s,i,a,c),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Eo(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Za(t,r.document),i=r.readTime?mn(r.readTime):me.min(),a=Pt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Eo([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Za(t,r.document),i=r.removedTargetIds||[];n=new Eo([],i,s,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Mw(s,i),c=r.targetId;n=new j0(c,a)}}return n}function Qw(t,e){let n;if(e instanceof Li)n={update:yd(t,e.key,e.value)};else if(e instanceof B0)n={delete:Oc(t,e.key)};else if(e instanceof Fr)n={update:yd(t,e.key,e.data),updateMask:s4(e.fieldMask)};else{if(!(e instanceof Lw))return pe();n={verify:Oc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof qo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof yi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zo)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Hw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe()}(t,e.precondition)),n}function Yw(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?mn(s.updateTime):mn(i);return a.isEqual(me.min())&&(a=mn(i)),new xw(a,s.transformResults||[])}(n,e))):[]}function Jw(t,e){return{documents:[H0(t,e.path)]}}function Xw(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H0(t,s);const i=function(h){if(h.length!==0)return Q0(En.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Yr(m.field),direction:t4(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Dc(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function Zw(t){let e=Kw(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){$e(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=W0(p);return m instanceof En&&I0(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(L){return new jo(Jr(L.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,da(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new $o(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,y=p.values||[];return new $o(y,m)}(n.endAt)),_w(e,s,a,i,c,"F",l,h)}function e4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jr(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jr(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jr(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jr(n.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Jr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>W0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function t4(t){return jw[t]}function n4(t){return qw[t]}function r4(t){return zw[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Jr(t){return wt.fromServerFormat(t.fieldPath)}function Q0(t){return t instanceof lt?function(n){if(n.op==="=="){if(id(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NAN"}};if(sd(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(id(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NAN"}};if(sd(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(n.field),op:n4(n.op),value:n.value}}}(t):t instanceof En?function(n){const r=n.getFilters().map(s=>Q0(s));return r.length===1?r[0]:{compositeFilter:{op:r4(n.op),filters:r}}}(t):pe()}function s4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,s,i=me.min(),a=me.min(),c=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.ct=e}}function o4(t){const e=Zw({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.un=new c4}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(hr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class c4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(et.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _s(0)}static kn(){return new _s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.changes=new Cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ii(r.mutation,s,Zt.empty(),ut.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const s=Sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ks();return i.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=$n();const a=si(),c=function(){return si()}();return n.forEach((l,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Fr)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),ii(d.mutation,h,d.mutation.getFieldMask(),ut.now())):a.set(h.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var p;return c.set(h,new u4(d,(p=a.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=si();let s=new Xe((a,c)=>a-c),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let d=r.get(l)||Zt.empty();d=c.applyToLocalView(h,d),r.set(l,d);const p=(s.get(c.batchId)||Ce()).add(l);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,d=l.value,p=V0();d.forEach(m=>{if(!i.has(m)){const y=F0(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Sr());let c=-1,l=i;return a.next(h=>q.forEach(h,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,l,h,Ce())).next(d=>({batchId:c,changes:x0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let s=Ks();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ks();return this.indexManager.getCollectionParents(e,i).next(c=>q.forEach(c,l=>{const h=function(p,m){return new fa(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,Pt.newInvalidDocument(d)))});let c=Ks();return a.forEach((l,h)=>{const d=i.get(l);d!==void 0&&ii(d.mutation,h,Zt.empty(),ut.now()),ga(n,h)&&(c=c.insert(l,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:o4(s.bundledQuery),readTime:mn(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.overlays=new Xe(de.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Sr(),i=n.length+1,a=new de(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Sr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const c=Sr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>c.set(h,d)),!(c.size()>=s)););return q.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Nw(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.Tr=new Et(ft.Er),this.dr=new Et(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new et([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new et([])),r=new ft(n,e),s=new ft(n,e+1);let i=Ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(ft.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ow(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new ft(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Le);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;de.isDocumentKey(i)||(i=i.child(""));const a=new ft(new de(i),0);let c=new Et(Le);return this.br.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.wr)),!0)},a),q.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.Mr=e,this.docs=function(){return new Xe(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Pt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$n();const a=n.path,c=new de(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||X3(J3(d),r)<=0||(s.has(d.key)||ga(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){pe()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _4(this)}getSize(e){return q.resolve(this.size)}}class _4 extends l4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.persistence=e,this.Nr=new Cs(n=>Dl(n),Ll),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bl,this.targetCount=0,this.kr=_s.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new _s(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Pl(0),this.Kr=!1,this.Kr=!0,this.$r=new p4,this.referenceDelegate=e(this),this.Ur=new v4(this),this.indexManager=new a4,this.remoteDocumentCache=function(s){return new m4(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new i4(n),this.Gr=new d4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new g4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const s=new w4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class w4 extends ew{constructor(e){super(),this.currentSequenceNumber=e}}class $l{constructor(e){this.persistence=e,this.Jr=new Bl,this.Yr=null}static Zr(e){return new $l(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const s=de.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return I_()?8:tw(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new E4;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(qs()<=Pe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(qs()<=Pe.DEBUG&&ae("QueryEngine","Query:",Qr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(qs()<=Pe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):q.resolve())}Yi(e,n){if(ld(n))return q.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vc(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ce(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.ts(n,c);return this.ns(n,h,a,l.readTime)?this.Yi(e,Vc(n,null,"F")):this.rs(e,h,n,l)}))})))}Zi(e,n,r,s){return ld(n)||s.isEqual(me.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?q.resolve(null):(qs()<=Pe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qr(n)),this.rs(e,a,n,Y3(s,-1)).next(c=>c))})}ts(e,n){let r=new Et(P0(e));return n.forEach((s,i)=>{ga(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return qs()<=Pe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Qr(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(Le),this._s=new Cs(i=>Dl(i),Ll),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function I4(t,e,n,r){return new b4(t,e,n,r)}async function J0(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let l=Ce();for(const h of s){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of i){c.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:c}))})})}function S4(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,d){const p=h.batch,m=p.keys();let y=q.resolve();return m.forEach(L=>{y=y.next(()=>d.getEntry(l,L)).next(O=>{const M=h.docVersions.get(L);$e(M!==null),O.version.compareTo(M)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Ce();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function X0(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function A4(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;c.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(p,y),function(O,M,G){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(m,y,d)&&c.push(n.Ur.updateTargetData(i,y))});let l=$n(),h=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),c.push(C4(i,a,e.documentUpdates).next(d=>{l=d.Ps,h=d.Is})),!r.isEqual(me.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(d)}return q.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,h)).next(()=>l)}).then(i=>(n.os=s,i))}function C4(t,e,n){let r=Ce(),s=Ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=$n();return n.forEach((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):ae("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function R4(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P4(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new ir(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Mc(t,e,n){const r=ve(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Di(a))throw a;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function wd(t,e,n){const r=ve(t);let s=me.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,d){const p=ve(l),m=p._s.get(d);return m!==void 0?q.resolve(p.os.get(m)):p.Ur.getTargetData(h,d)}(r,a,gn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:me.min(),n?i:Ce())).next(c=>(k4(r,ww(e),c),{documents:c,Ts:i})))}function k4(t,e,n){let r=t.us.get(e)||me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ed{constructor(){this.activeTargetIds=Aw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x4{constructor(){this.so=new Ed,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ed,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=null;function ec(){return co===null?co=function(){return 268435456+Math.round(2147483648*Math.random())}():co++,"0x"+co.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class O4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=ec(),l=this.xo(n,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${n}' ${c}:`,l,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,l,h,s).then(d=>(ae("RestConnection",`Received RPC '${n}' ${c}: `,d),d),d=>{throw fs("RestConnection",`RPC '${n}' ${c} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ss}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=D4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ec();return new Promise((a,c)=>{const l=new d0;l.setWithCredentials(!0),l.listenOnce(f0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vo.NO_ERROR:const d=l.getResponseJson();ae(At,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case vo.TIMEOUT:ae(At,`RPC '${e}' ${i} timed out`),c(new he(K.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:const p=l.getStatus();if(ae(At,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const L=function(M){const G=M.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(G)>=0?G:K.UNKNOWN}(y.status);c(new he(L,y.message))}else c(new he(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new he(K.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ae(At,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);ae(At,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=ec(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=m0(),c=g0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ae(At,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=a.createWebChannel(d,l);let m=!1,y=!1;const L=new L4({Io:M=>{y?ae(At,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(m||(ae(At,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),ae(At,`RPC '${e}' stream ${s} sending:`,M),p.send(M))},To:()=>p.close()}),O=(M,G,H)=>{M.listen(G,W=>{try{H(W)}catch(Q){setTimeout(()=>{throw Q},0)}})};return O(p,Hs.EventType.OPEN,()=>{y||(ae(At,`RPC '${e}' stream ${s} transport opened.`),L.yo())}),O(p,Hs.EventType.CLOSE,()=>{y||(y=!0,ae(At,`RPC '${e}' stream ${s} transport closed`),L.So())}),O(p,Hs.EventType.ERROR,M=>{y||(y=!0,fs(At,`RPC '${e}' stream ${s} transport errored:`,M),L.So(new he(K.UNAVAILABLE,"The operation could not be completed")))}),O(p,Hs.EventType.MESSAGE,M=>{var G;if(!y){const H=M.data[0];$e(!!H);const W=H,Q=W.error||((G=W[0])===null||G===void 0?void 0:G.error);if(Q){ae(At,`RPC '${e}' stream ${s} received error:`,Q);const we=Q.status;let ge=function(T){const A=it[T];if(A!==void 0)return $0(A)}(we),S=Q.message;ge===void 0&&(ge=K.INTERNAL,S="Unknown error status: "+we+" with message "+Q.message),y=!0,L.So(new he(ge,S)),p.close()}else ae(At,`RPC '${e}' stream ${s} received:`,H),L.bo(H)}}),O(c,p0.STAT_EVENT,M=>{M.stat===Cc.PROXY?ae(At,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===Cc.NOPROXY&&ae(At,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){return new Gw(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,r,s,i,a,c,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Z0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new he(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N4 extends eg{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Ww(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?me.min():a.readTime?mn(a.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nc(this.serializer),n.addTarget=function(i,a){let c;const l=a.target;if(c=xc(l)?{documents:Jw(i,l)}:{query:Xw(i,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=z0(i,a.resumeToken);const h=Dc(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(me.min())>0){c.readTime=Go(i,a.snapshotVersion.toTimestamp());const h=Dc(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=e4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nc(this.serializer),n.removeTarget=e,this.a_(n)}}class M4 extends eg{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Yw(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qw(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Lc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(K.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Lc(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(K.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class U4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bn(n),this.D_=!1):ae("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ur(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=ve(l);h.L_.add(4),await Ni(h),h.q_.set("Unknown"),h.L_.delete(4),await wa(h)}(this))})}),this.q_=new U4(r,s)}}async function wa(t){if(Ur(t))for(const e of t.B_)await e(!0)}async function Ni(t){for(const e of t.B_)await e(!1)}function tg(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Hl(n)?Gl(n):Rs(n).r_()&&zl(n,e))}function ql(t,e){const n=ve(t),r=Rs(n);n.N_.delete(e),r.r_()&&ng(n,e),n.N_.size===0&&(r.r_()?r.o_():Ur(n)&&n.q_.set("Unknown"))}function zl(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rs(t).A_(e)}function ng(t,e){t.Q_.xe(e),Rs(t).R_(e)}function Gl(t){t.Q_=new $w({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Rs(t).start(),t.q_.v_()}function Hl(t){return Ur(t)&&!Rs(t).n_()&&t.N_.size>0}function Ur(t){return ve(t).L_.size===0}function rg(t){t.Q_=void 0}async function $4(t){t.q_.set("Online")}async function j4(t){t.N_.forEach((e,n)=>{zl(t,e)})}async function q4(t,e){rg(t),Hl(t)?(t.q_.M_(e),Gl(t)):t.q_.set("Unknown")}async function z4(t,e,n){if(t.q_.set("Online"),e instanceof q0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ho(t,r)}else if(e instanceof Eo?t.Q_.Ke(e):e instanceof j0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await X0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(h);d&&i.N_.set(h,d.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,h)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),ng(i,l);const p=new ir(d.target,l,h,d.sequenceNumber);zl(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),await Ho(t,r)}}async function Ho(t,e,n){if(!Di(e))throw e;t.L_.add(1),await Ni(t),t.q_.set("Offline"),n||(n=()=>X0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wa(t)})}function sg(t,e){return e().catch(n=>Ho(t,n,e))}async function Ea(t){const e=ve(t),n=fr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;G4(e);)try{const s=await R4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,H4(e,s)}catch(s){await Ho(e,s)}ig(e)&&og(e)}function G4(t){return Ur(t)&&t.O_.length<10}function H4(t,e){t.O_.push(e);const n=fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ig(t){return Ur(t)&&!fr(t).n_()&&t.O_.length>0}function og(t){fr(t).start()}async function K4(t){fr(t).p_()}async function W4(t){const e=fr(t);for(const n of t.O_)e.m_(n.mutations)}async function Q4(t,e,n){const r=t.O_.shift(),s=Ml.from(r,e,n);await sg(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ea(t)}async function Y4(t,e){e&&fr(t).V_&&await async function(r,s){if(function(a){return Fw(a)&&a!==K.ABORTED}(s.code)){const i=r.O_.shift();fr(r).s_(),await sg(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ea(r)}}(t,e),ig(t)&&og(t)}async function bd(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=Ur(n);n.L_.add(3),await Ni(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wa(n)}async function J4(t,e){const n=ve(t);e?(n.L_.delete(2),await wa(n)):e||(n.L_.add(2),await Ni(n),n.q_.set("Unknown"))}function Rs(t){return t.K_||(t.K_=function(n,r,s){const i=ve(n);return i.w_(),new N4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$4.bind(null,t),Ro:j4.bind(null,t),mo:q4.bind(null,t),d_:z4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Hl(t)?Gl(t):t.q_.set("Unknown")):(await t.K_.stop(),rg(t))})),t.K_}function fr(t){return t.U_||(t.U_=function(n,r,s){const i=ve(n);return i.w_(),new M4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:K4.bind(null,t),mo:Y4.bind(null,t),f_:W4.bind(null,t),g_:Q4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ea(t)):(await t.U_.stop(),t.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Kl(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wl(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),Di(t))return new he(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Ks(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new ls(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.W_=new Xe(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vs{constructor(e,n,r,s,i,a,c,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new vs(e,n,ls.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Z4{constructor(){this.queries=Sd(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=Sd(),i.forEach((a,c)=>{for(const l of c.j_)l.onError(r)})})(this,new he(K.ABORTED,"Firestore shutting down"))}}function Sd(){return new Cs(t=>R0(t),pa)}async function eE(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new X4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Wl(a,`Initialization of query '${Qr(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ql(n)}async function tE(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nE(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Ql(n)}function rE(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ql(t){t.Y_.forEach(e=>{e.next()})}var Fc,Ad;(Ad=Fc||(Fc={})).ea="default",Ad.Cache="cache";class sE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.key=e}}class cg{constructor(e){this.key=e}}class iE{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=P0(e),this.Ra=new ls(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Id,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),y=ga(this.query,p)?p:null,L=!!m&&this.mutatedKeys.has(m.key),O=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?L!==O&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Aa(y,l)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(l||h)&&(c=!0)),M&&(y?(a=a.add(y),i=O?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,p)=>function(y,L){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return O(y)-O(L)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,h=l!==this.Ea;return this.Ea=l,a.length!==0||h?{snapshot:new vs(this.query,e.Ra,i,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Id,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cg(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ag(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return vs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oE{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aE{constructor(e){this.key=e,this.va=!1}}class cE{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Cs(c=>R0(c),pa),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(de.comparator),this.Na=new Map,this.La=new Bl,this.Ba={},this.ka=new Map,this.qa=_s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function lE(t,e,n=!0){const r=pg(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await lg(r,e,n,!0),s}async function uE(t,e){const n=pg(t);await lg(n,e,!0,!1)}async function lg(t,e,n,r){const s=await P4(t.localStore,gn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await hE(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&tg(t.remoteStore,s),c}async function hE(t,e,n,r,s){t.Ka=(p,m,y)=>async function(O,M,G,H){let W=M.view.ma(G);W.ns&&(W=await wd(O.localStore,M.query,!1).then(({documents:S})=>M.view.ma(S,W)));const Q=H&&H.targetChanges.get(M.targetId),we=H&&H.targetMismatches.get(M.targetId)!=null,ge=M.view.applyChanges(W,O.isPrimaryClient,Q,we);return Rd(O,M.targetId,ge.wa),ge.snapshot}(t,p,m,y);const i=await wd(t.localStore,e,!0),a=new iE(e,i.Ts),c=a.ma(i.documents),l=Oi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(c,t.isPrimaryClient,l);Rd(t,n,h.wa);const d=new oE(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function dE(t,e,n){const r=ve(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!pa(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ql(r.remoteStore,s.targetId),Uc(r,s.targetId)}).catch(Vi)):(Uc(r,s.targetId),await Mc(r.localStore,s.targetId,!0))}async function fE(t,e){const n=ve(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ql(n.remoteStore,r.targetId))}async function pE(t,e,n){const r=EE(t);try{const s=await function(a,c){const l=ve(a),h=ut.now(),d=c.reduce((y,L)=>y.add(L.key),Ce());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let L=$n(),O=Ce();return l.cs.getEntries(y,d).next(M=>{L=M,L.forEach((G,H)=>{H.isValidDocument()||(O=O.add(G))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,L)).next(M=>{p=M;const G=[];for(const H of c){const W=Dw(H,p.get(H.key).overlayedDocument);W!=null&&G.push(new Fr(H.key,W,E0(W.value.mapValue),Mn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,h,G,c)}).next(M=>{m=M;const G=M.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(y,M.batchId,G)})}).then(()=>({batchId:m.batchId,changes:x0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,l){let h=a.Ba[a.currentUser.toKey()];h||(h=new Xe(Le)),h=h.insert(c,l),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await Mi(r,s.changes),await Ea(r.remoteStore)}catch(s){const i=Wl(s,"Failed to persist write");n.reject(i)}}async function ug(t,e){const n=ve(t);try{const r=await A4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&($e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?$e(a.va):s.removedDocuments.size>0&&($e(a.va),a.va=!1))}),await Mi(n,r,e)}catch(r){await Vi(r)}}function Cd(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const l=ve(a);l.onlineState=c;let h=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(c)&&(h=!0)}),h&&Ql(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gE(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Xe(de.comparator);a=a.insert(i,Pt.newNoDocument(i,me.min()));const c=Ce().add(i),l=new va(me.min(),new Map,new Xe(Le),a,c);await ug(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Yl(r)}else await Mc(r.localStore,e,!1).then(()=>Uc(r,e,n)).catch(Vi)}async function mE(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await S4(n.localStore,e);dg(n,r,null),hg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mi(n,s)}catch(s){await Vi(s)}}async function _E(t,e,n){const r=ve(t);try{const s=await function(a,c){const l=ve(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,c).next(p=>($e(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(h,p))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,e);dg(r,e,n),hg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mi(r,s)}catch(s){await Vi(s)}}function hg(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dg(t,e,n){const r=ve(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fg(t,r)})}function fg(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ql(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Yl(t))}function Rd(t,e,n){for(const r of n)r instanceof ag?(t.La.addReference(r.key,e),vE(t,r)):r instanceof cg?(ae("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fg(t,r.key)):pe()}function vE(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ae("SyncEngine","New document in limbo: "+n),t.xa.add(r),Yl(t))}function Yl(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(et.fromString(e)),r=t.qa.next();t.Na.set(r,new aE(n)),t.Oa=t.Oa.insert(n,r),tg(t.remoteStore,new ir(gn(Ol(n.path)),r,"TargetPurposeLimboResolution",Pl.oe))}}async function Mi(t,e,n){const r=ve(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){s.push(h);const p=jl.Wi(l.targetId,h);i.push(p)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(l,h){const d=ve(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(h,m=>q.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>q.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Di(p))throw p;ae("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=d.os.get(m),L=y.snapshotVersion,O=y.withLastLimboFreeSnapshotVersion(L);d.os=d.os.insert(m,O)}}}(r.localStore,i))}async function yE(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=await J0(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(l=>{l.reject(new he(K.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mi(n,r.hs)}}function wE(t,e){const n=ve(t),r=n.Na.get(e);if(r&&r.va)return Ce().add(r.key);{let s=Ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function pg(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ug.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gE.bind(null,e),e.Ca.d_=nE.bind(null,e.eventManager),e.Ca.$a=rE.bind(null,e.eventManager),e}function EE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_E.bind(null,e),e}class Ko{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ya(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return I4(this.persistence,new T4,e.initialUser,this.serializer)}Ga(e){return new y4($l.Zr,this.serializer)}Wa(e){return new x4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ko.provider={build:()=>new Ko};class Bc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yE.bind(null,this.syncEngine),await J4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z4}()}createDatastore(e){const n=ya(e.databaseInfo.databaseId),r=function(i){return new O4(i)}(e.databaseInfo);return function(i,a,c,l){return new F4(i,a,c,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new B4(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Cd(this.syncEngine,n,0),function(){return Td.D()?new Td:new V4}())}createSyncEngine(e,n){return function(s,i,a,c,l,h,d){const p=new cE(s,i,a,c,l,h);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ve(s);ae("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ni(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bc.provider={build:()=>new Bc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=v0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{ae("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ae("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nc(t,e){t.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IE(t);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bd(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>bd(e.remoteStore,s)),t._onlineComponents=e}async function IE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await nc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await nc(t,new Ko)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await nc(t,new Ko);return t._offlineComponents}async function gg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Pd(t,t._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await Pd(t,new Bc))),t._onlineComponents}function SE(t){return gg(t).then(e=>e.syncEngine)}async function AE(t){const e=await gg(t),n=e.eventManager;return n.onListen=lE.bind(null,e.syncEngine),n.onUnlisten=dE.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uE.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fE.bind(null,e.syncEngine),n}function CE(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,l,h){const d=new TE({next:m=>{d.Za(),a.enqueueAndForget(()=>tE(i,p));const y=m.docs.has(c);!y&&m.fromCache?h.reject(new he(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?h.reject(new he(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new sE(Ol(c.path),d,{includeMetadataChanges:!0,_a:!0});return eE(i,p)}(await AE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e,n){if(!n)throw new he(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PE(t,e,n,r){if(e===!0&&r===!0)throw new he(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xd(t){if(!de.isDocumentKey(t))throw new he(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jl(t);throw new he(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $3;switch(r.type){case"firstParty":return new G3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kd.get(n);r&&(ae("ComponentProvider","Removing Datastore"),kd.delete(n),r.terminate())}(this),Promise.resolve()}}function kE(t,e,n,r={}){var s;const i=(t=wi(t,Xl))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Ct.MOCK_USER;else{c=__(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new he(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(h)}t._authCredentials=new j3(new _0(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zl(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Ei extends Zl{constructor(e,n,r){super(e,n,Ol(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new de(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function xE(t,e,...n){if(t=vn(t),arguments.length===1&&(e=v0.newId()),RE("doc","path",e),t instanceof Xl){const r=et.fromString(e,...n);return xd(r),new Qt(t,null,new de(r))}{if(!(t instanceof Qt||t instanceof Ei))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return xd(r),new Qt(t.firestore,t instanceof Ei?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Z0(this,"async_queue_retry"),this.Vu=()=>{const r=tc();r&&ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new lr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Di(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Bn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Kl.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class eu extends Xl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Dd,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dd(e),this._firestoreClient=void 0,await e}}}function VE(t,e){const n=typeof t=="object"?t:xp(),r=typeof t=="string"?t:"(default)",s=ml(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=g_("firestore");i&&kE(s,...i)}return s}function _g(t){if(t._terminated)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DE(t),t._firestoreClient}function DE(t){var e,n,r;const s=t._freezeSettings(),i=function(c,l,h,d){return new sw(c,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mg(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bE(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(bt.fromBase64String(e))}catch(n){throw new he(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=/^__.*__$/;class OE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Li(e,this.data,n,this.fieldTransforms)}}function yg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class su{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new su(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wo(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yg(this.Cu)&&LE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NE{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ya(e)}Qu(e,n,r,s=!1){return new su({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ME(t){const e=t._freezeSettings(),n=ya(t._databaseId);return new NE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FE(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);bg("Data must be an object, but it was:",a,r);const c=Eg(r,a);let l,h;if(i.merge)l=new Zt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=UE(e,p,n);if(!a.contains(m))throw new he(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$E(d,m)||d.push(m)}l=new Zt(d),h=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=a.fieldTransforms;return new OE(new Ht(c),l,h)}function wg(t,e){if(Tg(t=vn(t)))return bg("Unsupported field value:",e,t),Eg(t,e);if(t instanceof vg)return function(r,s){if(!yg(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let l=wg(c,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ut.fromDate(r);return{timestampValue:Go(s.serializer,i)}}if(r instanceof ut){const i=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Go(s.serializer,i)}}if(r instanceof nu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ys)return{bytesValue:z0(s.serializer,r._byteString)};if(r instanceof Qt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ul(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ru)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Nl(c.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Jl(r)}`)}(t,e)}function Eg(t,e){const n={};return y0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,s)=>{const i=wg(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Tg(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof nu||t instanceof ys||t instanceof Qt||t instanceof vg||t instanceof ru)}function bg(t,e,n){if(!Tg(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Jl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function UE(t,e,n){if((e=vn(e))instanceof tu)return e._internalPath;if(typeof e=="string")return Ig(t,e);throw Wo("Field path arguments must be of type string or ",t,!1,void 0,n)}const BE=new RegExp("[~\\*/\\[\\]]");function Ig(t,e,n){if(e.search(BE)>=0)throw Wo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tu(...e.split("."))._internalPath}catch{throw Wo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wo(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new he(K.INVALID_ARGUMENT,c+t+l)}function $E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ag("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jE extends Sg{data(){return super.data()}}function Ag(t,e){return typeof e=="string"?Ig(t,e):e instanceof tu?e._internalPath:e._delegate._internalPath}class qE{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>tt(a.doubleValue));return new ru(i)}convertGeoPoint(e){return new nu(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gi(e));default:return null}}convertTimestamp(e){const n=dr(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);$e(Y0(r));const s=new mi(r.get(1),r.get(3)),i=new de(r.popFirst(5));return s.isEqual(n)||Bn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cg extends Sg{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new HE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class HE extends Cg{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){t=wi(t,Qt);const e=wi(t.firestore,eu);return CE(_g(e),t._key).then(n=>JE(e,t,n))}class WE extends qE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function QE(t,e,n){t=wi(t,Qt);const r=wi(t.firestore,eu),s=zE(t.converter,e);return YE(r,[FE(ME(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mn.none())])}function YE(t,e){return function(r,s){const i=new lr;return r.asyncQueue.enqueueAndForget(async()=>pE(await SE(r),s,i)),i.promise}(_g(t),e)}function JE(t,e,n){const r=n.docs.get(e._key),s=new WE(t);return new Cg(t,s,e._key,r,new GE(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ss=s})(bs),hs(new xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new eu(new q3(r.getProvider("auth-internal")),new K3(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mi(h.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),cr(Zh,"4.7.3",e),cr(Zh,"4.7.3","esm2017")})();const XE={apiKey:"AIzaSyC1yRNBfDNJRiBLTlmUvl-pxNrXQrhlCoA",authDomain:"seraphium-5fd68.firebaseapp.com",projectId:"seraphium-5fd68",storageBucket:"seraphium-5fd68.appspot.com",messagingSenderId:"123829673679",appId:"1:123829673679:web:7d1082bf98919a3a1de1ba",measurementId:"G-F0QZBBJ20N"},Rg=kp(XE),ZE=U3(Rg),e9=new kn,t9=VE(Rg),n9=i_({state:{tutorialSkiped:!1,canChoose:!1,playerProfile:{username:"Undefined",chessShards:0,battleShards:0,level:1,characters:[{charName:"Classic Pawn",charLvl:1}]},skills:[{name:"Продвинутая оценка способностей противника",description:["Позволяет узнать скрытые способности противника уровня 14 и ниже.","Способность может быть заблокирована в зависимости от положительных эффектов противника."],icon:"/src/assets/Skills/Bonuses/SearchEnemySkills/radar-sweep-svgrepo-com.svg"}],characters:[{name:"Classic Pawn",rarity:3,type:"B",icon:"/src/assets/pieces/white/pawn.svg",chibiIcon:"/src/assets/pieces/white/pawn.svg",description:"— a hereditary hatter who runs a small shop. Unlike her relatives, Aellen was always drawn to magic and its unpredictable nature.",skills:[{name:"Remove enemy piece",description:"Remove enemy piece",power:1,skillImg:"/src/assets/Skills/burning-passion-svgrepo-com.svg"},{name:"Rewards and experience increased by",description:"Rewards and experience increased by 1%",power:1}]}],insertedElement:null},mutations:{setCanChoose(t,e){t.canChoose=e},updateProvince(t,e){t.playerProfile.province=e},setInsertedElement(t,e){t.insertedElement=e},setTutorialSkiped(t,e){t.tutorialSkiped=e},setPlayerProfile(t,e){t.playerProfile=e},UPDATE_CHARACTER_TYPE(t,{name:e,newType:n}){const r=t.characters.find(s=>s.name===e);r&&(r.type=n)}},actions:{async loginWithGoogle({commit:t}){try{const n=(await Wy(ZE,e9)).user,r=xE(t9,"users",n.uid),s=await KE(r);if(s.exists()){const i=s.data();t("setPlayerProfile",{username:i.username,level:i.level,province:i.province,characters:i.characters}),t("setTutorialSkiped",i.tutorialSkiped)}else await QE(r,{username:n.displayName||"Undefined",level:1,province:null,characters:[],tutorialSkiped:!1}),t("setPlayerProfile",{username:n.displayName,level:1,province:null,characters:[]}),t("setTutorialSkiped",!1)}catch(e){console.error("Error during Google sign-in:",e)}},updateInsertedElement({commit:t},e){t("setInsertedElement",e)},updateCanChoose({commit:t},e){t("setCanChoose",e)},setProvince({commit:t},e){t("updateProvince",e)},skipTutorial({commit:t},e){t("setTutorialSkiped",e)}},getters:{canChoose:t=>t.canChoose,province:t=>t.playerProfile.province,provinces:t=>t.provinces,characters:t=>t.characters,insertedElement:t=>t.insertedElement,playerProfile:t=>t.playerProfile,skills:t=>t.skills,tutorialSkiped:t=>t.tutorialSkiped,chessShards:t=>t.playerProfile.chessShards}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Xr=typeof document<"u";function Pg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function r9(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Pg(t.default)}const Be=Object.assign;function rc(t,e){const n={};for(const r in e){const s=e[r];n[r]=nn(s)?s.map(t):t(s)}return n}const oi=()=>{},nn=Array.isArray,kg=/#/g,s9=/&/g,i9=/\//g,o9=/=/g,a9=/\?/g,xg=/\+/g,c9=/%5B/g,l9=/%5D/g,Vg=/%5E/g,u9=/%60/g,Dg=/%7B/g,h9=/%7C/g,Lg=/%7D/g,d9=/%20/g;function iu(t){return encodeURI(""+t).replace(h9,"|").replace(c9,"[").replace(l9,"]")}function f9(t){return iu(t).replace(Dg,"{").replace(Lg,"}").replace(Vg,"^")}function $c(t){return iu(t).replace(xg,"%2B").replace(d9,"+").replace(kg,"%23").replace(s9,"%26").replace(u9,"`").replace(Dg,"{").replace(Lg,"}").replace(Vg,"^")}function p9(t){return $c(t).replace(o9,"%3D")}function g9(t){return iu(t).replace(kg,"%23").replace(a9,"%3F")}function m9(t){return t==null?"":g9(t).replace(i9,"%2F")}function Ti(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const _9=/\/$/,v9=t=>t.replace(_9,"");function sc(t,e,n="/"){let r,s={},i="",a="";const c=e.indexOf("#");let l=e.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,c>-1?c:e.length),s=t(i)),c>-1&&(r=r||e.slice(0,c),a=e.slice(c,e.length)),r=T9(r??e,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:Ti(a)}}function y9(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Ld(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function w9(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ws(e.matched[r],n.matched[s])&&Og(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ws(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Og(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!E9(t[n],e[n]))return!1;return!0}function E9(t,e){return nn(t)?Od(t,e):nn(e)?Od(e,t):t===e}function Od(t,e){return nn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function T9(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const Xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bi;(function(t){t.pop="pop",t.push="push"})(bi||(bi={}));var ai;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ai||(ai={}));function b9(t){if(!t)if(Xr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),v9(t)}const I9=/^[^#]+#/;function S9(t,e){return t.replace(I9,"#")+e}function A9(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ta=()=>({left:window.scrollX,top:window.scrollY});function C9(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=A9(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Nd(t,e){return(history.state?history.state.position-e:-1)+t}const jc=new Map;function R9(t,e){jc.set(t,e)}function P9(t){const e=jc.get(t);return jc.delete(t),e}let k9=()=>location.protocol+"//"+location.host;function Ng(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let c=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(c);return l[0]!=="/"&&(l="/"+l),Ld(l,"")}return Ld(n,t)+r+s}function x9(t,e,n,r){let s=[],i=[],a=null;const c=({state:m})=>{const y=Ng(t,location),L=n.value,O=e.value;let M=0;if(m){if(n.value=y,e.value=m,a&&a===L){a=null;return}M=O?m.position-O.position:0}else r(y);s.forEach(G=>{G(n.value,L,{delta:M,type:bi.pop,direction:M?M>0?ai.forward:ai.back:ai.unknown})})};function l(){a=n.value}function h(m){s.push(m);const y=()=>{const L=s.indexOf(m);L>-1&&s.splice(L,1)};return i.push(y),y}function d(){const{history:m}=window;m.state&&m.replaceState(Be({},m.state,{scroll:Ta()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:h,destroy:p}}function Md(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Ta():null}}function V9(t){const{history:e,location:n}=window,r={value:Ng(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,h,d){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:k9()+t+l;try{e[d?"replaceState":"pushState"](h,"",m),s.value=h}catch(y){console.error(y),n[d?"replace":"assign"](m)}}function a(l,h){const d=Be({},e.state,Md(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});i(l,d,!0),r.value=l}function c(l,h){const d=Be({},s.value,e.state,{forward:l,scroll:Ta()});i(d.current,d,!0);const p=Be({},Md(r.value,l,null),{position:d.position+1},h);i(l,p,!1),r.value=l}return{location:r,state:s,push:c,replace:a}}function D9(t){t=b9(t);const e=V9(t),n=x9(t,e.state,e.location,e.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Be({location:"",base:t,go:r,createHref:S9.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function L9(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),D9(t)}function O9(t){return typeof t=="string"||t&&typeof t=="object"}function Mg(t){return typeof t=="string"||typeof t=="symbol"}const Fg=Symbol("");var Fd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Fd||(Fd={}));function Es(t,e){return Be(new Error,{type:t,[Fg]:!0},e)}function Cn(t,e){return t instanceof Error&&Fg in t&&(e==null||!!(t.type&e))}const Ud="[^/]+?",N9={sensitive:!1,strict:!1,start:!0,end:!0},M9=/[.+*?^${}()[\]/\\]/g;function F9(t,e){const n=Be({},N9,e),r=[];let s=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const m=h[p];let y=40+(n.sensitive?.25:0);if(m.type===0)p||(s+="/"),s+=m.value.replace(M9,"\\$&"),y+=40;else if(m.type===1){const{value:L,repeatable:O,optional:M,regexp:G}=m;i.push({name:L,repeatable:O,optional:M});const H=G||Ud;if(H!==Ud){y+=10;try{new RegExp(`(${H})`)}catch(Q){throw new Error(`Invalid custom RegExp for param "${L}" (${H}): `+Q.message)}}let W=O?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;p||(W=M&&h.length<2?`(?:/${W})`:"/"+W),M&&(W+="?"),s+=W,y+=20,M&&(y+=-8),O&&(y+=-20),H===".*"&&(y+=-50)}d.push(y)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function c(h){const d=h.match(a),p={};if(!d)return null;for(let m=1;m<d.length;m++){const y=d[m]||"",L=i[m-1];p[L.name]=y&&L.repeatable?y.split("/"):y}return p}function l(h){let d="",p=!1;for(const m of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const y of m)if(y.type===0)d+=y.value;else if(y.type===1){const{value:L,repeatable:O,optional:M}=y,G=L in h?h[L]:"";if(nn(G)&&!O)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const H=nn(G)?G.join("/"):G;if(!H)if(M)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${L}"`);d+=H}}return d||"/"}return{re:a,score:r,keys:i,parse:c,stringify:l}}function U9(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ug(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=U9(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Bd(r))return 1;if(Bd(s))return-1}return s.length-r.length}function Bd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const B9={type:0,value:""},$9=/[a-zA-Z0-9_]/;function j9(t){if(!t)return[[]];if(t==="/")return[[B9]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let c=0,l,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&p(),a()):l===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:$9.test(l)?m():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}function q9(t,e,n){const r=F9(j9(t.path),n),s=Be(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function z9(t,e){const n=[],r=new Map;e=zd({strict:!1,end:!0,sensitive:!1},e);function s(p){return r.get(p)}function i(p,m,y){const L=!y,O=jd(p);O.aliasOf=y&&y.record;const M=zd(e,p),G=[O];if("alias"in p){const Q=typeof p.alias=="string"?[p.alias]:p.alias;for(const we of Q)G.push(jd(Be({},O,{components:y?y.record.components:O.components,path:we,aliasOf:y?y.record:O})))}let H,W;for(const Q of G){const{path:we}=Q;if(m&&we[0]!=="/"){const ge=m.record.path,S=ge[ge.length-1]==="/"?"":"/";Q.path=m.record.path+(we&&S+we)}if(H=q9(Q,m,M),y?y.alias.push(H):(W=W||H,W!==H&&W.alias.push(H),L&&p.name&&!qd(H)&&a(p.name)),Bg(H)&&l(H),O.children){const ge=O.children;for(let S=0;S<ge.length;S++)i(ge[S],H,y&&y.children[S])}y=y||H}return W?()=>{a(W)}:oi}function a(p){if(Mg(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function c(){return n}function l(p){const m=K9(p,n);n.splice(m,0,p),p.record.name&&!qd(p)&&r.set(p.record.name,p)}function h(p,m){let y,L={},O,M;if("name"in p&&p.name){if(y=r.get(p.name),!y)throw Es(1,{location:p});M=y.record.name,L=Be($d(m.params,y.keys.filter(W=>!W.optional).concat(y.parent?y.parent.keys.filter(W=>W.optional):[]).map(W=>W.name)),p.params&&$d(p.params,y.keys.map(W=>W.name))),O=y.stringify(L)}else if(p.path!=null)O=p.path,y=n.find(W=>W.re.test(O)),y&&(L=y.parse(O),M=y.record.name);else{if(y=m.name?r.get(m.name):n.find(W=>W.re.test(m.path)),!y)throw Es(1,{location:p,currentLocation:m});M=y.record.name,L=Be({},m.params,p.params),O=y.stringify(L)}const G=[];let H=y;for(;H;)G.unshift(H.record),H=H.parent;return{name:M,path:O,params:L,matched:G,meta:H9(G)}}t.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:c,getRecordMatcher:s}}function $d(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function jd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:G9(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function G9(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function qd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function H9(t){return t.reduce((e,n)=>Be(e,n.meta),{})}function zd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function K9(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Ug(t,e[i])<0?r=i:n=i+1}const s=W9(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function W9(t){let e=t;for(;e=e.parent;)if(Bg(e)&&Ug(t,e)===0)return e}function Bg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Q9(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(xg," "),a=i.indexOf("="),c=Ti(a<0?i:i.slice(0,a)),l=a<0?null:Ti(i.slice(a+1));if(c in e){let h=e[c];nn(h)||(h=e[c]=[h]),h.push(l)}else e[c]=l}return e}function Gd(t){let e="";for(let n in t){const r=t[n];if(n=p9(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(nn(r)?r.map(i=>i&&$c(i)):[r&&$c(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Y9(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=nn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const J9=Symbol(""),Hd=Symbol(""),ou=Symbol(""),$g=Symbol(""),qc=Symbol("");function zs(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function tr(t,e,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const h=m=>{m===!1?l(Es(4,{from:n,to:e})):m instanceof Error?l(m):O9(m)?l(Es(2,{from:e,to:m})):(a&&r.enterCallbacks[s]===a&&typeof m=="function"&&a.push(m),c())},d=i(()=>t.call(r&&r.instances[s],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(m=>l(m))})}function ic(t,e,n,r,s=i=>i()){const i=[];for(const a of t)for(const c in a.components){let l=a.components[c];if(!(e!=="beforeRouteEnter"&&!a.instances[c]))if(Pg(l)){const d=(l.__vccOpts||l)[e];d&&i.push(tr(d,n,r,a,c,s))}else{let h=l();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${c}" at "${a.path}"`);const p=r9(d)?d.default:d;a.mods[c]=d,a.components[c]=p;const y=(p.__vccOpts||p)[e];return y&&tr(y,n,r,a,c,s)()}))}}return i}function Kd(t){const e=Nn(ou),n=Nn($g),r=Xt(()=>{const l=ns(t.to);return e.resolve(l)}),s=Xt(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],p=n.matched;if(!d||!p.length)return-1;const m=p.findIndex(ws.bind(null,d));if(m>-1)return m;const y=Wd(l[h-2]);return h>1&&Wd(d)===y&&p[p.length-1].path!==y?p.findIndex(ws.bind(null,l[h-2])):m}),i=Xt(()=>s.value>-1&&tT(n.params,r.value.params)),a=Xt(()=>s.value>-1&&s.value===n.matched.length-1&&Og(n.params,r.value.params));function c(l={}){return eT(l)?e[ns(t.replace)?"replace":"push"](ns(t.to)).catch(oi):Promise.resolve()}return{route:r,href:Xt(()=>r.value.href),isActive:i,isExactActive:a,navigate:c}}const X9=xf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Kd,setup(t,{slots:e}){const n=Ii(Kd(t)),{options:r}=Nn(ou),s=Xt(()=>({[Qd(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qd(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:sp("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Z9=X9;function eT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function tT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!nn(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function Wd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qd=(t,e,n)=>t??e??n,nT=xf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Nn(qc),s=Xt(()=>t.route||r.value),i=Nn(Hd,0),a=Xt(()=>{let h=ns(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),c=Xt(()=>s.value.matched[a.value]);lo(Hd,Xt(()=>a.value+1)),lo(J9,c),lo(qc,s);const l=qm();return is(()=>[l.value,c.value,t.name],([h,d,p],[m,y,L])=>{d&&(d.instances[p]=h,y&&y!==d&&h&&h===m&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!ws(d,y)||!m)&&(d.enterCallbacks[p]||[]).forEach(O=>O(h))},{flush:"post"}),()=>{const h=s.value,d=t.name,p=c.value,m=p&&p.components[d];if(!m)return Yd(n.default,{Component:m,route:h});const y=p.props[d],L=y?y===!0?h.params:typeof y=="function"?y(h):y:null,M=sp(m,Be({},L,e,{onVnodeUnmounted:G=>{G.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return Yd(n.default,{Component:M,route:h})||M}}});function Yd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const rT=nT;function sT(t){const e=z9(t.routes,t),n=t.parseQuery||Q9,r=t.stringifyQuery||Gd,s=t.history,i=zs(),a=zs(),c=zs(),l=zm(Xn);let h=Xn;Xr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=rc.bind(null,F=>""+F),p=rc.bind(null,m9),m=rc.bind(null,Ti);function y(F,re){let te,oe;return Mg(F)?(te=e.getRecordMatcher(F),oe=re):oe=F,e.addRoute(oe,te)}function L(F){const re=e.getRecordMatcher(F);re&&e.removeRoute(re)}function O(){return e.getRoutes().map(F=>F.record)}function M(F){return!!e.getRecordMatcher(F)}function G(F,re){if(re=Be({},re||l.value),typeof F=="string"){const E=sc(n,F,re.path),D=e.resolve({path:E.path},re),B=s.createHref(E.fullPath);return Be(E,D,{params:m(D.params),hash:Ti(E.hash),redirectedFrom:void 0,href:B})}let te;if(F.path!=null)te=Be({},F,{path:sc(n,F.path,re.path).path});else{const E=Be({},F.params);for(const D in E)E[D]==null&&delete E[D];te=Be({},F,{params:p(E)}),re.params=p(re.params)}const oe=e.resolve(te,re),Se=F.hash||"";oe.params=d(m(oe.params));const Me=y9(r,Be({},F,{hash:f9(Se),path:oe.path})),v=s.createHref(Me);return Be({fullPath:Me,hash:Se,query:r===Gd?Y9(F.query):F.query||{}},oe,{redirectedFrom:void 0,href:v})}function H(F){return typeof F=="string"?sc(n,F,l.value.path):Be({},F)}function W(F,re){if(h!==F)return Es(8,{from:re,to:F})}function Q(F){return S(F)}function we(F){return Q(Be(H(F),{replace:!0}))}function ge(F){const re=F.matched[F.matched.length-1];if(re&&re.redirect){const{redirect:te}=re;let oe=typeof te=="function"?te(F):te;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=H(oe):{path:oe},oe.params={}),Be({query:F.query,hash:F.hash,params:oe.path!=null?{}:F.params},oe)}}function S(F,re){const te=h=G(F),oe=l.value,Se=F.state,Me=F.force,v=F.replace===!0,E=ge(te);if(E)return S(Be(H(E),{state:typeof E=="object"?Be({},Se,E.state):Se,force:Me,replace:v}),re||te);const D=te;D.redirectedFrom=re;let B;return!Me&&w9(r,oe,te)&&(B=Es(16,{to:D,from:oe}),gt(oe,oe,!0,!1)),(B?Promise.resolve(B):A(D,oe)).catch(U=>Cn(U)?Cn(U,2)?U:Ut(U):Ie(U,D,oe)).then(U=>{if(U){if(Cn(U,2))return S(Be({replace:v},H(U.to),{state:typeof U.to=="object"?Be({},Se,U.to.state):Se,force:Me}),re||D)}else U=k(D,oe,!0,v,Se);return R(D,oe,U),U})}function w(F,re){const te=W(F,re);return te?Promise.reject(te):Promise.resolve()}function T(F){const re=sn.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(F):F()}function A(F,re){let te;const[oe,Se,Me]=iT(F,re);te=ic(oe.reverse(),"beforeRouteLeave",F,re);for(const E of oe)E.leaveGuards.forEach(D=>{te.push(tr(D,F,re))});const v=w.bind(null,F,re);return te.push(v),mt(te).then(()=>{te=[];for(const E of i.list())te.push(tr(E,F,re));return te.push(v),mt(te)}).then(()=>{te=ic(Se,"beforeRouteUpdate",F,re);for(const E of Se)E.updateGuards.forEach(D=>{te.push(tr(D,F,re))});return te.push(v),mt(te)}).then(()=>{te=[];for(const E of Me)if(E.beforeEnter)if(nn(E.beforeEnter))for(const D of E.beforeEnter)te.push(tr(D,F,re));else te.push(tr(E.beforeEnter,F,re));return te.push(v),mt(te)}).then(()=>(F.matched.forEach(E=>E.enterCallbacks={}),te=ic(Me,"beforeRouteEnter",F,re,T),te.push(v),mt(te))).then(()=>{te=[];for(const E of a.list())te.push(tr(E,F,re));return te.push(v),mt(te)}).catch(E=>Cn(E,8)?E:Promise.reject(E))}function R(F,re,te){c.list().forEach(oe=>T(()=>oe(F,re,te)))}function k(F,re,te,oe,Se){const Me=W(F,re);if(Me)return Me;const v=re===Xn,E=Xr?history.state:{};te&&(oe||v?s.replace(F.fullPath,Be({scroll:v&&E&&E.scroll},Se)):s.push(F.fullPath,Se)),l.value=F,gt(F,re,te,v),Ut()}let _;function pt(){_||(_=s.listen((F,re,te)=>{if(!at.listening)return;const oe=G(F),Se=ge(oe);if(Se){S(Be(Se,{replace:!0}),oe).catch(oi);return}h=oe;const Me=l.value;Xr&&R9(Nd(Me.fullPath,te.delta),Ta()),A(oe,Me).catch(v=>Cn(v,12)?v:Cn(v,2)?(S(v.to,oe).then(E=>{Cn(E,20)&&!te.delta&&te.type===bi.pop&&s.go(-1,!1)}).catch(oi),Promise.reject()):(te.delta&&s.go(-te.delta,!1),Ie(v,oe,Me))).then(v=>{v=v||k(oe,Me,!1),v&&(te.delta&&!Cn(v,8)?s.go(-te.delta,!1):te.type===bi.pop&&Cn(v,20)&&s.go(-1,!1)),R(oe,Me,v)}).catch(oi)}))}let Lt=zs(),Ke=zs(),Ae;function Ie(F,re,te){Ut(F);const oe=Ke.list();return oe.length?oe.forEach(Se=>Se(F,re,te)):console.error(F),Promise.reject(F)}function ht(){return Ae&&l.value!==Xn?Promise.resolve():new Promise((F,re)=>{Lt.add([F,re])})}function Ut(F){return Ae||(Ae=!F,pt(),Lt.list().forEach(([re,te])=>F?te(F):re()),Lt.reset()),F}function gt(F,re,te,oe){const{scrollBehavior:Se}=t;if(!Xr||!Se)return Promise.resolve();const Me=!te&&P9(Nd(F.fullPath,0))||(oe||!te)&&history.state&&history.state.scroll||null;return Af().then(()=>Se(F,re,Me)).then(v=>v&&C9(v)).catch(v=>Ie(v,F,re))}const Ge=F=>s.go(F);let je;const sn=new Set,at={currentRoute:l,listening:!0,addRoute:y,removeRoute:L,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:O,resolve:G,options:t,push:Q,replace:we,go:Ge,back:()=>Ge(-1),forward:()=>Ge(1),beforeEach:i.add,beforeResolve:a.add,afterEach:c.add,onError:Ke.add,isReady:ht,install(F){const re=this;F.component("RouterLink",Z9),F.component("RouterView",rT),F.config.globalProperties.$router=re,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>ns(l)}),Xr&&!je&&l.value===Xn&&(je=!0,Q(s.location).catch(Se=>{}));const te={};for(const Se in Xn)Object.defineProperty(te,Se,{get:()=>l.value[Se],enumerable:!0});F.provide(ou,re),F.provide($g,Ef(te)),F.provide(qc,l);const oe=F.unmount;sn.add(F),F.unmount=function(){sn.delete(F),sn.size<1&&(h=Xn,_&&_(),_=null,l.value=Xn,je=!1,Ae=!1),oe()}}};function mt(F){return F.reduce((re,te)=>re.then(()=>T(te)),Promise.resolve())}return at}function iT(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const c=e.matched[a];c&&(t.matched.find(h=>ws(h,c))?r.push(c):n.push(c));const l=t.matched[a];l&&(e.matched.find(h=>ws(h,l))||s.push(l))}return[n,r,s]}const oT={data(){return{iframeSrc:"/src/assets/public/index.html",isLoading:!0}},methods:{hideLoadingScreen(){this.isLoading=!1}},mounted(){function t(e,n){localStorage.setItem("botLevel",e.toString()),localStorage.setItem("timerTime",n.toString())}t(6,5)}},aT={key:0,class:"loading-screen"},cT=["src"];function lT(t,e,n,r,s,i){return Wt(),dn("div",null,[e[2]||(e[2]=be("div",{class:"fixed z-50 w-16 h-16"},"HEELo",-1)),s.isLoading?(Wt(),dn("div",aT,e[1]||(e[1]=[fn('<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-24 h-24"><title>new</title><g id="Layer 1"><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z"></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z"></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z"></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z"></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z"></path></g></svg>',1)]))):J1("",!0),So(be("iframe",{src:s.iframeSrc,class:"w-full h-screen",onLoad:e[0]||(e[0]=(...a)=>i.hideLoadingScreen&&i.hideLoadingScreen(...a))},null,40,cT),[[ko,!s.isLoading]])])}const uT=qn(oT,[["render",lT]]),hT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.5%206.5C9.5%205.11929%2010.6193%204%2012%204C13.3807%204%2014.5%205.11929%2014.5%206.5C14.5%207.88071%2013.3807%209%2012%209C10.6193%209%209.5%207.88071%209.5%206.5ZM12%202C9.51472%202%207.5%204.01472%207.5%206.5C7.5%207.91363%208.15183%209.17502%209.17133%2010H8C7.44772%2010%207%2010.4477%207%2011C7%2011.5523%207.44772%2012%208%2012H9.12533C9.15208%2012.3659%209.16098%2012.833%209.11237%2013.3535C8.99568%2014.6027%208.55656%2016.0909%207.31094%2017.2753C6.86615%2017.6982%206.19221%2018.1531%205.58717%2018.5199C5.29266%2018.6984%205.02896%2018.8475%204.83934%2018.9517C4.74472%2019.0037%204.66905%2019.0442%204.61781%2019.0713L4.56008%2019.1017L4.54633%2019.1088L4.54347%2019.1103L4.54336%2019.1103L4.54322%2019.1104C4.3106%2019.2299%204.13401%2019.4357%204.05132%2019.6838L3.27924%2022H3C2.44772%2022%202%2022.4477%202%2023C2%2023.5523%202.44772%2024%203%2024H4H20H21C21.5523%2024%2022%2023.5523%2022%2023C22%2022.4477%2021.5523%2022%2021%2022H20.7659L20.1559%2019.7395C20.0787%2019.4533%2019.8784%2019.2161%2019.6092%2019.0919L19.609%2019.0918L19.6072%2019.091L19.5951%2019.0853C19.5836%2019.0799%2019.5655%2019.0714%2019.5415%2019.0598C19.4933%2019.0366%2019.4214%2019.0014%2019.3304%2018.9553C19.1482%2018.8629%2018.8918%2018.7279%2018.5996%2018.5595C18.0041%2018.2164%2017.3055%2017.7605%2016.7767%2017.2682C15.5139%2016.0923%2015.054%2014.6022%2014.92%2013.349C14.8647%2012.8316%2014.8667%2012.3662%2014.8878%2012H16C16.5523%2012%2017%2011.5523%2017%2011C17%2010.4477%2016.5523%2010%2016%2010H14.8287C15.8482%209.17502%2016.5%207.91363%2016.5%206.5C16.5%204.01472%2014.4853%202%2012%202ZM11.1037%2013.5395C11.158%2012.9576%2011.1549%2012.4315%2011.1296%2012H12.8852C12.8649%2012.4363%2012.8682%2012.9705%2012.9313%2013.5616C13.0971%2015.112%2013.6847%2017.1218%2015.4138%2018.7319C15.512%2018.8233%2015.6134%2018.9128%2015.717%2019L8.38107%2019C8.48825%2018.9094%208.59149%2018.8175%208.68906%2018.7247C10.3982%2017.0996%2010.9591%2015.0879%2011.1037%2013.5395ZM5.72076%2021L18.4246%2021L18.6944%2022H5.38743L5.72076%2021Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",dT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.2666%209.92826L14.8997%2010.1618C13.5228%2011.0379%2011.6981%2010.6528%2010.7929%209.29487L10%208.10556L9.20712%209.29487C8.30186%2010.6528%206.47719%2011.0379%205.10034%2010.1618L4.73342%209.92826L5.54178%2013H14.4582L15.2666%209.92826ZM3.65358%206.87047C2.88614%206.38209%201.91813%207.08891%202.14963%207.96862L3.80381%2014.2545C3.91942%2014.6938%204.31662%2015%204.77089%2015H15.2291C15.6834%2015%2016.0806%2014.6938%2016.1962%2014.2545L17.8504%207.96862C18.0819%207.08891%2017.1139%206.38209%2016.3464%206.87047L13.8259%208.47443C13.367%208.76649%2012.7587%208.6381%2012.457%208.18547L10.832%205.74808C10.4362%205.15435%209.56377%205.15435%209.16795%205.74808L7.54302%208.18547C7.24127%208.6381%206.63304%208.76649%206.1741%208.47443L3.65358%206.87047Z'%20fill='%23ffffff'/%3e%3cpath%20d='M11%203.5C11%204.05228%2010.5523%204.5%2010%204.5C9.44772%204.5%209%204.05228%209%203.5C9%202.94772%209.44772%202.5%2010%202.5C10.5523%202.5%2011%202.94772%2011%203.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M19%205.5C19%206.05228%2018.5523%206.5%2018%206.5C17.4477%206.5%2017%206.05228%2017%205.5C17%204.94772%2017.4477%204.5%2018%204.5C18.5523%204.5%2019%204.94772%2019%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20d='M3%205.5C3%206.05228%202.55228%206.5%202%206.5C1.44772%206.5%201%206.05228%201%205.5C1%204.94772%201.44772%204.5%202%204.5C2.55228%204.5%203%204.94772%203%205.5Z'%20fill='%23ffffff'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.5%2016.25C4.5%2015.6977%204.94772%2015.25%205.5%2015.25H14.7513C15.3036%2015.25%2015.7513%2015.6977%2015.7513%2016.25C15.7513%2016.8023%2015.3036%2017.25%2014.7513%2017.25H5.5C4.94772%2017.25%204.5%2016.8023%204.5%2016.25Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e",fT={data(){return{chessShardsValue:null,battleShardsValue:null}},computed:{characters(){return this.$store.getters.playerProfile}},methods:{chessShards(){this.chessShardsValue=this.$store.getters.playerProfile.chessShards,this.battleShardsValue=this.$store.getters.playerProfile.battleShards}},mounted(){this.chessShards()}},pT={id:"profile",class:"absolute z-50 w-full items-center h-16 justify-between"},gT={class:"bg-gradient-to-r from-[#1d1f20] text-sm to-[#141516] tracking-wider pl-32 w-full h-full flex items-center space-x-4 px-4 drop-shadow-lg"},mT={class:"hidden w-52 h-10 flex space-x-10 font-serif text-xl text-white items-center"},_T={class:"flex justify-center items-center w-auto h-full space-x-4"},vT={class:"flex justify-center items-center w-auto h-full space-x-4"};function yT(t,e,n,r,s,i){return Wt(),dn("div",pT,[be("div",gT,[e[2]||(e[2]=fn('<button id="menu-icon" data-v-1bd37cd7><svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-12 h-12" data-v-1bd37cd7><title data-v-1bd37cd7>new</title><g id="Layer 1" data-v-1bd37cd7><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z" data-v-1bd37cd7></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z" data-v-1bd37cd7></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z" data-v-1bd37cd7></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z" data-v-1bd37cd7></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z" data-v-1bd37cd7></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z" data-v-1bd37cd7></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z" data-v-1bd37cd7></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z" data-v-1bd37cd7></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z" data-v-1bd37cd7></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z" data-v-1bd37cd7></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z" data-v-1bd37cd7></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z" data-v-1bd37cd7></path></g></svg></button><button id="inventory-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>INVENTORY</span></button><button class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>BRANCH</span></button><button id="equipment-button" class="h-full w-36 hover:bg-black/20" data-v-1bd37cd7><span class="text-white/80 font-serif cursor-pointer" data-v-1bd37cd7>EQUIPMENT</span></button>',4)),be("div",mT,[be("div",_T,[e[0]||(e[0]=be("img",{class:"w-8 h-8 shard",src:hT},null,-1)),be("span",null,oc(s.chessShardsValue),1)]),be("div",vT,[e[1]||(e[1]=be("img",{class:"w-8 h-8 shard",src:dT},null,-1)),be("span",null,oc(s.battleShardsValue),1)])])])])}const wT=qn(fT,[["render",yT],["__scopeId","data-v-1bd37cd7"]]),ET={data(){return{showFirstChar:!0}},computed:{...fl(["provinces","characters","playerProfile","insertedElement"])},methods:{...o_(["updateInsertedElement"]),showInventory(){const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{const n=document.getElementById("parent-container"),r=this.$refs.shownInventory,s=document.createDocumentFragment();Array.from(r.childNodes).forEach(d=>{s.appendChild(d.cloneNode(!0))});const i=s.getElementById("characters-list");i.innerHTML="";const a=this.$refs.unlockedChar,c=this.$refs.lockedChar;for(let d=0;d<this.playerProfile.characters.length;d++){const p=document.createDocumentFragment();Array.from(a.childNodes).forEach(y=>{p.appendChild(y.cloneNode(!0))});const m=this.characters.find(y=>y.name===this.playerProfile.characters[d].charName);p.querySelector(".char-icon").src=m.icon,p.querySelector(".char-lvl").textContent=`Lvl. ${this.playerProfile.characters[d].charLvl}`,i.appendChild(p)}for(let d=0;d<49;d++){const p=document.createDocumentFragment();Array.from(c.childNodes).forEach(m=>{p.appendChild(m.cloneNode(!0))}),i.appendChild(p)}const l=s.getElementById("selected-char");if(this.showFirstChar){const d='<svg class="w-6 h-6" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>';l.querySelector(".profile-name-slct").textContent=`${this.playerProfile.characters[0].charName} `,l.querySelector(".slct-char-rarity").innerHTML="";for(let p=0;p<this.playerProfile.characters[0].rarity;p++)l.querySelector(".slct-char-rarity").innerHTML+=d;l.querySelector(".slct-char-lvl").textContent=`Level ${this.playerProfile.characters[0].charLvl} / 50`,l.querySelector(".chibi-char-img-slct").src=this.characters.find(p=>p.name===this.playerProfile.characters[0].charName).chibiIcon}n.prepend(s),document.getElementById("hide-inventory").addEventListener("click",this.hideInventory),this.updateInsertedElement(n.firstElementChild)},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},hideInventory(){this.clickSound(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{this.insertedElement.remove(),this.updateInsertedElement(null),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},clickSound(){const t=document.getElementById("click-sound");t.volume=.3,t.play()}},mounted(){document.getElementById("inventory-button").addEventListener("click",this.showInventory)}},TT={id:"shownInventory",ref:"shownInventory",class:"hidden"},bT={id:"unlocked-char",ref:"unlockedChar",class:"hidden"},IT={id:"locked-char",ref:"lockedChar",class:"hidden"};function ST(t,e,n,r,s,i){return Wt(),dn(Gt,null,[be("div",TT,e[0]||(e[0]=[fn('<div id="inventory" class="w-full h-full absolute z-[400] flex justify-start items-center bg-black/40 backdrop-blur-lg" data-v-b3190f07><div class="w-full h-full flex justify-start items-center px-24" data-v-b3190f07><button id="hide-inventory" class="fixed top-0 left-0 w-24 h-24 flex justify-center items-center z-50" data-v-b3190f07><svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></button><div class="w-1/2 h-[40rem] flex flex-col" data-v-b3190f07><div class="w-[32rem] h-[5rem] text-white flex justify-start items-center text-xl tracking-wider" data-v-b3190f07><span data-v-b3190f07>Characters</span></div><div id="characters-list" class="w-[32rem] justify-between h-[35rem] grid auto-rows-auto grid-cols-5 overflow-y-auto gap-4" data-v-b3190f07></div></div><div id="selected-char" class="w-1/2 h-[40rem] flex justify-end items-center px-10 space-y-4 flex-col" data-v-b3190f07><div class="w-full h-10 flex space-x-4 text-white font-mono justify-center" data-v-b3190f07><p class="w-auto h-full tracking-wider flex justify-center items-center text-xl profile-name-slct" data-v-b3190f07>Mira </p><div class="h-full slct-char-rarity flex justify-start items-center space-x-2" data-v-b3190f07><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg><svg class="w-6 h-6" viewBox="0 0 24 24" fill="white    " xmlns="http://www.w3.org/2000/svg" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></path></g></svg></div></div><p class="w-auto h-10 tracking-widest text-white font-light flex items-center slct-char-lvl" data-v-b3190f07>Level 1 / 50</p><img class="w-64 chibi-char-img-slct" data-v-b3190f07><div class="w-64 rounded-full h-1 bg-white" data-v-b3190f07></div><div class="w-full char-skills-invent char-info-block h-24 shadow-lg bg-[#111111] rounded-xl flex text-white font-mono px-8 py-6 justify-center items-center space-x-4" data-v-b3190f07><svg fill="#ffffff" class="w-12 h-12 cursor-pointer" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 505.712 505.712" xml:space="preserve" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><g transform="translate(1 1)" data-v-b3190f07><g data-v-b3190f07><g data-v-b3190f07><path d="M79.842,271.618H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,279.702,89.723,271.618,79.842,271.618z M79.842,307.547H61.877v-17.965 h17.965V307.547z" data-v-b3190f07></path> <path d="M205.596,271.618h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,279.702,215.477,271.618,205.596,271.618z M205.596,307.547h-17.965 v-17.965h17.965V307.547z" data-v-b3190f07></path> <path d="M332.249,73.105c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,12.575-5.389 l12.575-12.575c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575L332.249,73.105z M319.674,110.832 l-12.575-12.575l12.575-12.575l12.575,12.575L319.674,110.832z" data-v-b3190f07></path> <path d="M307.098,212.333c3.593,3.593,8.084,5.389,12.575,5.389s8.982-1.797,11.677-5.389l12.576-12.575 c3.593-3.593,5.389-8.084,5.389-12.575s-1.796-8.982-5.389-12.575l-12.576-12.575c-3.593-3.593-8.084-5.389-12.575-5.389 s-8.982,1.797-12.575,5.389l-12.575,12.575c-7.186,7.186-7.186,17.965,0,25.151L307.098,212.333z M319.674,174.607l12.575,12.575 l-12.575,12.575l-12.575-12.575L319.674,174.607z" data-v-b3190f07></path> <path d="M332.249,264.432c-3.593-3.593-8.084-5.389-12.575-5.389s-8.982,1.797-12.575,5.389l-12.575,12.575 c-7.186,7.186-7.186,17.965,0,25.151l12.575,12.575c3.593,3.593,8.084,5.389,12.575,5.389s8.982-2.695,12.575-5.389 l12.575-12.575c7.186-7.186,7.186-17.965,0-25.151L332.249,264.432z M319.674,301.26l-12.575-12.575l12.575-12.575l12.575,12.575 L319.674,301.26z" data-v-b3190f07></path> <path d="M205.596,397.372h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C223.561,405.456,215.477,397.372,205.596,397.372z M205.596,433.302h-17.965 v-17.965h17.965V433.302z" data-v-b3190f07></path> <path d="M79.842,397.372H61.877c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965v-17.965C97.807,405.456,89.723,397.372,79.842,397.372z M79.842,433.302H61.877v-17.965 h17.965V433.302z" data-v-b3190f07></path> <path d="M142.719,334.495h-17.965c-9.881,0-17.965,8.084-17.965,17.965v17.965c0,9.881,8.084,17.965,17.965,17.965h17.965 c9.881,0,17.965-8.084,17.965-17.965V352.46C160.684,342.579,152.6,334.495,142.719,334.495z M142.719,370.425h-17.965V352.46 h17.965V370.425z" data-v-b3190f07></path> <path d="M496.628,174.607l-158.99-158.99c-9.881-10.779-26.947-10.779-37.726,0L141.821,175.505 c-5.389,4.491-8.084,11.677-8.084,18.863s2.695,13.474,8.084,18.863l13.474,13.474H25.947C10.677,226.705-1,238.382-1,253.653 v215.579c0,15.27,11.677,26.947,26.947,26.947h215.579c15.27,0,26.947-11.677,26.947-26.947V339.563l32.337,31.759 c5.389,5.39,11.677,8.084,18.863,8.084c6.288,0,13.474-2.695,18.863-8.084l158.091-158.989 c5.389-4.491,8.084-11.677,8.084-18.863S502.018,179.997,496.628,174.607z M250.509,469.232c0,5.389-3.593,8.982-8.982,8.982 H25.947c-5.389,0-8.982-3.593-8.982-8.982V253.653c0-5.389,3.593-8.982,8.982-8.982H173.26h68.267 c5.389,0,8.982,3.593,8.982,8.982v68.267V469.232z M484.053,199.758L325.961,358.747c-3.593,3.593-8.982,3.593-12.575,0 l-44.912-44.912v-60.182v0c0-3.34-0.559-6.509-1.592-9.421c-0.738-2.08-1.718-4.029-2.908-5.816 c-0.476-0.715-0.986-1.404-1.528-2.065c-0.542-0.661-1.116-1.294-1.719-1.898s-1.237-1.177-1.898-1.719 c-4.628-3.793-10.621-6.028-17.302-6.028h-60.182l-26.947-26.947c-1.797-1.797-2.695-3.593-2.695-6.288s0.898-4.491,2.695-6.288 l158.99-158.091c3.593-3.593,8.982-3.593,12.575,0l158.091,158.091c1.797,1.796,2.695,3.593,2.695,6.288 S485.849,197.961,484.053,199.758z" data-v-b3190f07></path></g></g></g></g></svg><svg class="w-12 h-12 cursor-pointer" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" stroke="#ffffff" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M7 15.5c0 .049.006.096.007.145a7.3 7.3 0 1 1 8.638-8.638c-.049 0-.096-.007-.145-.007a8.557 8.557 0 0 0-.877.045 6.296 6.296 0 1 0-7.578 7.578A8.557 8.557 0 0 0 7 15.5zm.983-11.27l-.119-.992A5.3 5.3 0 0 0 3.2 8.558c.002.153.01.303.024.45l.995-.093a4.508 4.508 0 0 1-.019-.367A4.3 4.3 0 0 1 7.983 4.23zM22.8 15.5a7.3 7.3 0 1 1-7.3-7.3 7.308 7.308 0 0 1 7.3 7.3zm-1 0a6.3 6.3 0 1 0-6.3 6.3 6.307 6.307 0 0 0 6.3-6.3zm-10.58.415a4.508 4.508 0 0 1-.02-.367 4.3 4.3 0 0 1 3.783-4.318l-.119-.992a5.3 5.3 0 0 0-4.664 5.32c.002.153.01.303.024.45zm8.028-4.163l-.707.707a4.3 4.3 0 1 1-6.082 6.082l-.707.707a5.3 5.3 0 0 0 7.496-7.496z" data-v-b3190f07></path><path fill="none" stroke="none" d="M0 0h24v24H0z" data-v-b3190f07></path></g></svg></div></div></div></div>',1)]),512),be("div",bT,e[1]||(e[1]=[fn('<div class="unlocked-char w-24 h-28 rounded-md relative flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><div class="absolute top-0 w-24 h-1 rounded-t-md bg-cyan-200" data-v-b3190f07></div><img class="w-full rounded-md char-icon" data-v-b3190f07><div class="absolute bottom-0 w-24 h-6 rounded-b-md bg-white flex justify-center items-center" data-v-b3190f07><span class="text-[#121212] text-sm font-mono char-lvl" data-v-b3190f07>Lv. 1</span></div></div>',1)]),512),be("div",IT,e[2]||(e[2]=[fn('<div class="locked-char w-24 h-28 rounded-md bg-[#121212] flex justify-center cursor-pointer shadow-lg" data-v-b3190f07><svg class="w-16" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="#8f8f8f" data-v-b3190f07><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-b3190f07></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-b3190f07></g><g id="SVGRepo_iconCarrier" data-v-b3190f07><path d="M16,2C9.9,2,5,6.9,5,13v15.1c0,0.4,0.2,0.8,0.6,0.9c0.4,0.2,0.8,0.1,1.1-0.2l0.7-0.6c0.4-0.3,0.9-0.3,1.3,0 c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0c1.1,1.1,2.9,1.1,4,0c0.4-0.3,0.9-0.3,1.3,0 l0.7,0.6c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.3,0,0.4-0.1c0.4-0.2,0.6-0.5,0.6-0.9V13C27,6.9,22.1,2,16,2z M18,13c0-0.6,0.4-1,1-1 s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M12,13c0-0.6,0.4-1,1-1s1,0.4,1,1v3c0,0.6-0.4,1-1,1s-1-0.4-1-1V13z M21,20H11 c-0.6,0-1-0.4-1-1s0.4-1,1-1h10c0.6,0,1,0.4,1,1S21.6,20,21,20z" data-v-b3190f07></path></g></svg></div>',1)]),512)],64)}const AT=qn(ET,[["render",ST],["__scopeId","data-v-b3190f07"]]),CT={},RT={class:"bg-black w-full h-full z-50 fixed initial hidden"};function PT(t,e){return Wt(),dn("div",RT)}const kT=qn(CT,[["render",PT]]),xT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M74%20208H64a16%2016%200%200%200-16%2016v16a16%2016%200%200%200%2016%2016h15.94A535.78%20535.78%200%200%201%2064%20384h128a535.78%20535.78%200%200%201-15.94-128H192a16%2016%200%200%200%2016-16v-16a16%2016%200%200%200-16-16h-10l33.89-90.38a16%2016%200%200%200-15-21.62H144V64h24a8%208%200%200%200%208-8V40a8%208%200%200%200-8-8h-24V8a8%208%200%200%200-8-8h-16a8%208%200%200%200-8%208v24H88a8%208%200%200%200-8%208v16a8%208%200%200%200%208%208h24v32H55.09a16%2016%200%200%200-15%2021.62zm173.16%20251.58L224%20448v-16a16%2016%200%200%200-16-16H48a16%2016%200%200%200-16%2016v16L8.85%20459.58A16%2016%200%200%200%200%20473.89V496a16%2016%200%200%200%2016%2016h224a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31zm92.77-157.78l-3.29%2082.2h126.72l-3.29-82.21%2024.6-20.79A32%2032%200%200%200%20496%20256.54V198a6%206%200%200%200-6-6h-26.38a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H373.1a6%206%200%200%200-6%206v26h-24.71v-26a6%206%200%200%200-6-6H310a6%206%200%200%200-6%206v58.6a32%2032%200%200%200%2011.36%2024.4zM384%20304a16%2016%200%200%201%2032%200v32h-32zm119.16%20155.58L480%20448v-16a16%2016%200%200%200-16-16H336a16%2016%200%200%200-16%2016v16l-23.15%2011.58a16%2016%200%200%200-8.85%2014.31V496a16%2016%200%200%200%2016%2016h192a16%2016%200%200%200%2016-16v-22.11a16%2016%200%200%200-8.84-14.31z'/%3e%3c/g%3e%3c/svg%3e",VT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M216.923,246.538c3.457-6.556,9.963-22.777-1.666-39.137C200.508,186.65,179.942,125,193.61,83H207V0h-16v17h-16V0h-18v17%20h-16V0h-17v17h-16V0H91v83h14.057c13.668,42-6.98,103.65-21.73,124.401c-11.629,16.359-5.373,32.706-1.916,39.262%20C77.347,247.044,74,250.337,74,254.5v18c0,4.418,3.915,8.5,8.333,8.5H83v17h132v-17h1.333c4.418,0,7.667-4.082,7.667-8.5v-18%20C224,250.338,220.986,246.92,216.923,246.538z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",DT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M210.952,116c14.912,0,27.037-12.088,27.037-27s-10.945-25.013-26.964-30.666c-11.333-4-18.018-10.823-23.009-19.412%20C183.025,30.333,172.025,17,157.525,17c-5.832,0-19.798,0-19.798,0V0c-107,40.03-72.369,184-72.369,184h21.369v14h-6.369%20c-4.418,0-8.631,3.582-8.631,8v1c0,3.289,2.302,6.111,5.14,7.341c-8.77,15.05-1.419,29.775,0.761,33.659h-5.271%20c-4.418,0-8.631,3.582-8.631,8v18c0,4.418,4,8,8,8v16h132v-16.069c4-0.493,7-3.853,7-7.931v-18c0-4.418-2.951-8-7.369-8h-4.27%20c2.181-3.884,8.902-18.609,0.13-33.659c2.838-1.23,4.508-4.052,4.508-7.341v-1c0-4.418-2.951-8-7.369-8h-7.631v-14h24.132%20c-16.501-54-66.334-83-66.334-83h40.182C191.146,109.889,200.351,116,210.952,116z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",LT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.08%20297.08'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M206.873,255.08h-3.41c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.137-39.546-24.448-64.4h3.57%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-4.333v-4.285c13-8.971,20.511-23.502,20.511-39.914%20c0-10.332-7.011-26.11-15.819-41.721l-18.553,18.595c-3.111,3.111-8.182,3.111-11.294,0.001l-0.921-0.933%20c-3.111-3.11-3.106-8.202,0.005-11.313l21.676-21.674c-4.444-7.069-8.869-13.678-12.703-19.224%20c2.881-2.93,4.663-6.944,4.663-11.379C165.106,7.268,157.841,0,148.874,0c-8.967,0-16.234,7.268-16.234,16.233%20c0,4.434,1.781,8.448,4.662,11.379c-14.585,21.101-37.94,57.587-37.94,76.269c0,16.853,8.178,31.724,21.178,40.625v3.574h-4.667%20c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3.571c0.689,24.855-15.547,53.495-24.448,64.4%20c-9.031,11.064-2.926,22.263-0.712,25.6h-3.411c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118v-17.069%20c4-0.493,7-3.853,7-7.931v-9C214.54,258.662,211.291,255.08,206.873,255.08z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",OT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20297.77%20297.77'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M207.218,255.77h-3.369c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.129-39.546-24.438-64.4h3.519%20c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-4.626%20c-2.064-21.741,1.078-43.054,5.959-54.666c1.86-4.425,4.118-7.79,6.296-10.334h1.371c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.418-3.249-8-7.667-8h-9.8c-1.803-10.896-8.998-19.966-18.755-24.383c1.783-2.607,2.829-5.757,2.829-9.154%20C165.492,7.267,158.227,0,149.26,0s-16.234,7.267-16.234,16.232c0,3.385,1.037,6.525,2.809,9.127%20c-9.788,4.406-17.01,13.49-18.816,24.41h-10.8c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h2.371%20c2.178,2.544,4.436,5.909,6.296,10.334c4.881,11.612,8.023,32.925,5.959,54.666h-4.626c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h3.602c0.692,24.854-15.536,53.495-24.438,64.4%20c-9.031,11.063-2.926,22.263-0.712,25.6h-3.452c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118V280.7%20c4-0.493,7-3.853,7-7.931v-9C214.885,259.352,211.636,255.77,207.218,255.77z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",NT="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20298%20298'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M197.333,256h-1.641c1.878-3.337,7.061-14.536-0.605-25.6c-7.554-10.905-21.491-39.547-20.904-64.401%20c4.409-0.01,7.816-3.587,7.816-7.999v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-3.55%20c-1.006-16.142,1.307-29.861,4.798-40.724c1.121-3.487,2.432-6.186,3.752-8.276h2c4.418,0,7.667-3.582,7.667-8v-1%20c0-4.343-3.463-7.87-7.777-7.988C179.087,52.771,169,42.203,156,39.363V27h12V12h-12V0h-15v12h-12v15h12v12.595%20c-12,3.15-21.803,13.512-23.888,26.405h-0.779c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3%20c1.32,2.091,2.631,4.789,3.752,8.276c3.491,10.862,5.804,24.582,4.798,40.724h-4.55c-4.418,0-8.333,3.582-8.333,8v1%20c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h1.053c0.588,24.855-13.183,53.495-20.737,64.4%20c-7.664,11.063-2.482,22.263-0.604,25.6h-1.711c-4.418,0-8.333,3.582-8.333,8v9c0,3.727,3,6.849,6,7.737V298h100v-17.263%20c4-0.889,6-4.011,6-7.737v-9C205,259.582,201.751,256,197.333,256z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",MT={data(){return{isListShown:!1,filteredCharacters:[],selectedTileIndex:null,tilesWithCharacters:[],typeToTileMap:{B:2,R:0,N:1,Q:3,K:4,R1:7,B1:5,N1:6}}},computed:{...fl(["provinces","characters","playerProfile","insertedElement"]),characters(){const t=this.$store.state.playerProfile.characters.map(e=>e.charName);return this.$store.state.characters.filter(e=>t.includes(e.name))}},methods:{toggleAnimation(){document.querySelector(".initial").classList.toggle("active")},showList(){this.clickSound(),this.isListShown=!this.isListShown},filterCharactersByTypes(t){this.filteredCharacters=this.characters.filter(e=>t.includes(e.type))},createTiles(){let t="url('/src/assets/whiteabove3.png')",e="none",n="none",r="100% 100%",s="100% 100%",i="url('/src/assets/blackabove.png') center center / cover no-repeat, #101010";const a=document.getElementById("tiles");a.innerHTML="";for(let c=0;c<1;c++)for(let l=0;l<8;l++){const h=document.createElement("div");h.classList.add("tile-inv"),(c+l)%2===1&&h.classList.add("black"),["front-inv","back-inv","left-inv","right-inv","top-inv","bottom-inv"].forEach(L=>{const O=document.createElement("div");O.classList.add("face-inv",L),(c+l)%2===1?L==="bottom-inv"?(O.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${i}`,O.style.backgroundSize=s,O.style.animation=n):(O.style.background=`${i}`,O.style.backgroundSize=s,O.style.animation=n):L==="top-inv"||L==="front-inv"?(O.style.background=`${t}`,O.style.backgroundSize=r,O.style.animation=e):L==="bottom-inv"?(O.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${t}`,O.style.backgroundSize=r,O.style.animation=e):(O.style.background=`${t}`,O.style.backgroundSize=r),h.appendChild(O)}),h.style.transform="scaleZ(1)",h.classList.contains("black")?(h.querySelector(".front-inv").style.background=`linear-gradient(180deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) 100%), ${i}`,h.querySelector(".front-inv").style.backgroundSize=s):(h.querySelector(".front-inv").style.background=`${t}`,h.querySelector(".front-inv").style.backgroundSize=r);const p=Math.random()*2,m=2+Math.random(),y=-5-Math.random()*5;h.style.animation=`floatTile ${m}s ease-in-out infinite`,h.style.animationDelay=`${p}s`,h.style.setProperty("--float-height",`${y}px`),a.appendChild(h)}},hideEquipment(){this.clickSound(),this.isListShown&&this.showList(),document.body.style.pointerEvents="none";const t=document.querySelector(".initial"),e=document.getElementById("profile");t.classList.remove("hidden"),setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("flex"),document.getElementById("equipment-container").classList.add("hidden"),e.style.display="flex"},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{document.body.style.pointerEvents="auto",t.classList.add("hidden")},1500)},1e3)},showEquipment(){this.clickSound();const t=document.querySelector(".initial");t.classList.remove("hidden");const e=document.getElementById("profile");e.style.display="none",setTimeout(()=>{this.toggleAnimation()},0),setTimeout(()=>{document.getElementById("equipment-container").classList.remove("hidden"),document.getElementById("equipment-container").classList.add("flex")},900),setTimeout(()=>{this.toggleAnimation(),setTimeout(()=>{t.classList.add("hidden")},1500)},1e3)},selectCharacter(t){const e=this.typeToTileMap[t.type];if(e===void 0){alert("No tile assigned for this character type");return}const n=document.getElementById("tiles").children,r=n[e],s=r.querySelector(".piece-inv");s&&r.removeChild(s);const i=document.createElement("div");i.classList.add("piece-inv"),i.dataset.type=t.type,i.setAttribute("draggable",!0);const a=document.createElement("img");a.src=t.chibiIcon,a.classList.add("character-image"),i.appendChild(a),r.appendChild(i),i.addEventListener("dragstart",c=>this.handleDragStart(c,t));for(let c=0;c<n.length;c++){const l=7-c;n[l].addEventListener("dragover",h=>h.preventDefault()),n[l].addEventListener("drop",h=>this.handleDrop(h,c))}this.showList()},handleDragStart(t,e){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="none",document.body.classList.add("dragging");const n=t.target,r=document.getElementById("tiles").children;let s;for(let c=0;c<r.length;c++)if(r[c].contains(n)){s=c;break}n.classList.add("grabbable"),t.dataTransfer.setData("tileIndex",s),t.dataTransfer.setData("characterName",e.name);const i=7-s;r[i].querySelector(".front-inv").classList.add("hover-equipment"),t.target.addEventListener("dragend",()=>this.handleDragEnd(i))},handleDragEnd(t){document.getElementById("tiles").children[t].querySelector(".front-inv").classList.remove("hover-equipment")},handleDrop(t,e){t.preventDefault(),t.dataTransfer.dropEffect="move",document.body.classList.remove("dragging");const n=document.getElementById("tiles").children,r=7-e;t.dataTransfer.getData("tileIndex");const s=t.dataTransfer.getData("characterName"),i=n[e],a=n[r],c=this.$store.state.characters.find(l=>l.name===s);if(c){const l=i.querySelector(".piece-inv");l&&(i.removeChild(l),a.querySelector(".front-inv").classList.remove("hover-equipment"),r===this.typeToTileMap[c.type.replace("1","")]?this.updateCharacterType(c.name,c.type.replace("1","")):c.type.endsWith("1")||this.updateCharacterType(c.name,c.type+"1"),a.appendChild(l),document.body.style.cursor="url(/src/assets/GUI/pointer_scifi_b.svg), auto")}},updateCharacterType(t,e){this.$store.commit("UPDATE_CHARACTER_TYPE",{name:t,newType:e})},clickSound(){const t=document.getElementById("click-sound");t.volume=.2,t.play()}},mounted(){document.getElementById("equipment-button").addEventListener("click",this.showEquipment),this.createTiles()}},FT={id:"equipment-container",class:"w-full h-full bg-black/50 fixed backdrop-blur-sm z-[51000] justify-center items-center hidden"},UT={class:"fixed top-0 right-0 z-50 mt-6 mr-6"},BT={class:"absolute z-40 w-full h-full flex flex-col items-center space-y-10 backdrop-blur-sm bg-black/50"},$T={class:"w-2/3 h-24 mt-6 flex py-4 justify-center space-x-10"},jT={class:"w-2/3 h-full grid grid-cols-6 auto-rows-auto overflow-y-auto gap-6 text-white pb-10 px-10"},qT=["onClick"],zT=["src"];function GT(t,e,n,r,s,i){return Wt(),dn("div",FT,[e[9]||(e[9]=be("div",{class:"tiles",id:"tiles"},null,-1)),be("button",UT,[be("img",{onClick:e[0]||(e[0]=(...a)=>i.showList&&i.showList(...a)),class:"w-12 h-12",src:xT})]),be("button",{onClick:e[1]||(e[1]=(...a)=>i.hideEquipment&&i.hideEquipment(...a)),id:"hide-equipment",class:"fixed top-0 left-0 w-12 h-12 mt-6 ml-6 flex justify-center items-center z-50"},e[7]||(e[7]=[fn('<svg class="w-10 h-10 text-white hover:text-[#e8e1d2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M11 9L8 12M8 12L11 15M8 12H16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>',1)])),So(be("div",BT,[be("div",$T,[be("img",{onClick:e[2]||(e[2]=a=>i.filterCharactersByTypes(["R","R1"])),class:"w-16 h-16",src:VT}),be("img",{onClick:e[3]||(e[3]=a=>i.filterCharactersByTypes(["N","N1"])),class:"w-16 h-16",src:DT}),be("img",{onClick:e[4]||(e[4]=a=>i.filterCharactersByTypes(["B","B1"])),class:"w-16 h-16",src:LT}),be("img",{onClick:e[5]||(e[5]=a=>i.filterCharactersByTypes(["Q","Q1"])),class:"w-16 h-16",src:OT}),be("img",{onClick:e[6]||(e[6]=a=>i.filterCharactersByTypes(["K","K1"])),class:"w-16 h-16",src:NT})]),be("div",jT,[(Wt(!0),dn(Gt,null,v1(s.filteredCharacters,a=>(Wt(),dn("div",{class:"w-28 h-[8.4rem] border flex justify-center items-center relative rounded-md",onClick:c=>i.selectCharacter(a),key:a.name},[be("img",{class:"absolute drop-shadow-lg",src:a.chibiIcon},null,8,zT),e[8]||(e[8]=be("div",{class:"w-full h-full bg-indigo-700 rounded-md"},null,-1))],8,qT))),128))])],512),[[ko,s.isListShown]])])}const HT=qn(MT,[["render",GT]]),KT={};function WT(t,e){return null}const QT=qn(KT,[["render",WT]]),YT="/Lost-in-the-Tiles/assets/rain_tree2-B_F-BRPF.png",JT="/Lost-in-the-Tiles/assets/defaultAvatar2-BLsTfbxn.png",XT={components:{ProfileBars:wT,Inventory:AT,BlackScreen:kT,CharacterEquipment:HT,Dashboard:QT},data(){return{isSearchingGame:!1,isFindingMatch:!1}},computed:{...fl(["canChoose","provinces","characters","playerProfile","insertedElement","tutorialSkiped"])},methods:{findGame(){this.isFindingMatch||(this.isFindingMatch=!0,this.isSearchingGame=!1,setTimeout(()=>{this.$router.push("/scene")},5e3))},chooseBattle(){this.isSearchingGame||(this.isSearchingGame=!0)}},mounted(){document.getElementById("profile").classList.remove("hidden");const t=document.getElementById("background-home-music");function e(){t.volume=.1,t.play()}function n(){document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("mousemove",e,{once:!0})}window.addEventListener("load",n)}},ZT={id:"parent-container",class:"w-full h-screen bg-black/60 relative"},e5={class:"fixed z-50"},t5={class:"w-full h-36 fixed top-0 z-40"},n5={class:"fixed w-80 h-full flex flex-col space-y-4 justify-center items-center right-0 bg-gradient-to-l from-[#121212] to-[#1a1a1a]"},r5={class:"w-full h-24 pl-4 pr-4"},s5={class:"fixed w-60 h-12 z-50 bottom-0 right-0 mr-10 mb-10 text-white shadow-lg font-bold tracking-wider"};function i5(t,e,n,r,s,i){const a=Wr("BlackScreen"),c=Wr("Scene"),l=Wr("CharacterEquipment"),h=Wr("Inventory"),d=Wr("ProfileBars");return Wt(),dn(Gt,null,[be("div",ZT,[be("div",e5,[ct(a)]),be("div",{class:"w-full h-full z-40 relative",onClick:e[0]||(e[0]=p=>s.isSearchingGame=!1)},e[3]||(e[3]=[fn('<div class="w-full h-full z-50 absolute bg-[#111111]"><div class="w-full h-full absolute flex justify-center items-center filter blur-sm"><svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-48 h-48 animate-pulse"><title>new</title><g id="Layer 1"><path id="форма 7" fill-rule="evenodd" class="s0" d="m514.4 559c0 0-8.9 23.6 7.7 46.7 6.1 8.4 21.2 21.7 33.3 26.7 0 0 36.6 13.9 54.6 17.8 0 0 9.3 3.1 20.5-9.1 11-12.2 25.6-42.2 27.9-52.6 0 0-20.4 11.8-40.5 13.6 0 0-38.3 0.8-53-6.9 0 0-45.4-20.4-50.5-36.2z"></path><path id="форма 7" fill-rule="evenodd" class="s0" d="m505.3 559c0 0 8.9 23.6-7.7 46.7-6.1 8.4-21.2 21.7-33.3 26.7 0 0-36.6 13.9-54.6 17.8 0 0-9.3 3.1-20.5-9.1-11-12.2-25.6-42.2-27.9-52.6 0 0 20.4 11.8 40.5 13.6 0 0 38.3 0.8 53-6.9 0 0 45.4-20.4 50.5-36.2z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m675.5 566.6c0 0 21.4-9.3 30.5-24.8 0 0-9.2 4.9-14.3 4.8-0.3 0-12.9-1.6-12.9-1.6 0.2 1.6-1.5 9.9-3.3 21.6z"></path><path id="форма 6" fill-rule="evenodd" class="s0" d="m343.7 563.7c0 0-21.4-9.3-30.5-24.8 0 0 9.1 4.9 14.3 4.9 0.3 0 12.9-1.6 12.9-1.6-0.2 1.5 1.5 9.8 3.3 21.5z"></path><path id="форма 4" fill-rule="evenodd" class="s0" d="m512 430.2c-8.2 0-14.8-6.6-14.8-14.7 0-8.2 6.6-14.8 14.8-14.8 8.2 0 14.8 6.6 14.8 14.8 0 8.1-6.6 14.7-14.8 14.7z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m504.8 393c0 0-20.1-26.6-38.1-47.6 0 0-19.2-16.5-28.1-53.1 0 0-9.4-37.1 22.3-69 30.2-30.3 49.7-37.2 49.7-37.2 0 0 3.2-3.4 38 25 0 0 28.2 16.7 43 68.5 0 0-19.2 2.4-42 41.9l-18.1 45.8c0 0-7.1 18.1-12.4 22.9l1-66.8c0 0 2.2-18.7-7.6-17.1 0 0-9.1-3.1-8.6 9.5 0 0 2.7 75.6 0.9 77.2z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m485.2 415c0 0-28.2-2.4-54.9 4.9 0 0-23.1 10.4-59.9 2.8 0 0-37.6-7.3-53-49.5-14.6-40.2-10.8-69.1-10.8-69.1 0 0-4.4 1.2 36-18.3 0 0 28.1-15.6 81.3-6.9 0 0-6 18.4 20.1 55.8l31.4 40c0 0 13.8 16.6 15.9 23.4l-49.8-26.4c0 0-28.5-18.8-31.3-9.2 0 0-3.6 5.6 9.2 11.2 0 0 65.1 39 65.8 41.3z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m535.4 430.3c0 0 13.5-7.9 40.9-4.1 0 0 45.5 4.6 71.4 36.5 0 0 10.2 7.6 15.5 38.8 0.4 2.5 1.6 21.6-1 38.7-2.5 16.8-10.9 33.2-10.9 33.2 0 0-4 10.3-48.8 12.3 0 0-35.2-2.2-58.7-20.3-17.2-13.2-25.8-32.4-27.8-58 0 0 0.6-62.4 3.7-66.4l13.8 9.1 19.7 19c0 0 25.7 30.5 31.8 21.4 0 0 3-4-19.5-30.8-6.8-8-30.2-28.4-30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m489 430.3c0 0-13.5-7.9-40.9-4.1 0 0-45.6 4.6-71.4 36.5 0 0-10.2 7.6-15.6 38.8-0.4 2.5-1.5 21.6 1.1 38.7 2.5 16.8 10.9 33.2 10.9 33.2 0 0 4 10.3 48.8 12.3 0 0 35.1-2.2 58.6-20.3 17.3-13.2 25.9-32.4 27.9-58 0 0-0.7-62.4-3.8-66.4l-13.7 9.1-19.7 19c0 0-25.7 30.5-31.9 21.4 0 0-3-4 19.6-30.8 6.7-8 30.2-28.4 30.1-29.4z"></path><path id="форма 1" fill-rule="evenodd" class="s0" d="m529.6 397.9c0 0 14.1-30.3 24.3-56.1 0 0 5.5-24.6 33.7-49.6 0 0 31.6-24.2 75.4-14.2 39.2 8.9 52.1 27.9 52.1 27.9 0 0 4.7 23.9-9.4 66 0 0 1.6 9.6-37 43.2 0 0-16.3 9.9-49.6 9.2 0 0-18.1-6.9-39-9.6-15.3-2-33.4 0.3-40.4-1.6-0.8-0.2 3.2-5.2 14.8-12 17.2-10 43.8-22.4 43.8-22.4 0 0 17.6-6.8 11.6-14.8 0 0-1.6-9.5-12.5-3.1 0 0-65.4 37.9-67.8 37.1z"></path><path id="форма 2" fill-rule="evenodd" class="s0" d="m364.7 261.5c0 0 2.3-40.5 30.5-58.2 0 0 8.9-3.7 30.5 0 0 0 14.4 2.2 24.8 9.5 0 0-22.4 20.8-22.9 52.5 0 0-15.4-7.8-32.4-7.7 0 0-25.1 0.5-30.5 3.9z"></path><path id="форма 3" fill-rule="evenodd" class="s0" d="m576.3 215.7c0 0 9.8-8 35.3-9.5 0 0 21.4-1 25.8 4.7 0 0 19.1 23.5 26.7 54.4 0 0-20.4-5.3-31.5-3.8 0 0-20.6 2.1-29.6 7.6 0 0-2.9-27.3-26.7-53.4z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m255 453.1l21-48.6c0 0 10.4-21.4 27.6-32.4 0 0 6.2 27.4 45.8 55.3 0 0 18.9 10.7 28.6 11.4 0 0-39.3 40.4-35.3 91.6 0 0-32.7-3.4-54.3-28.6 0 0-26.8-26.9-33.4-48.7z"></path><path id="форма 5" fill-rule="evenodd" class="s0" d="m768 452.2l-21-48.7c0 0-10.4-21.3-27.6-32.4 0 0-6.2 27.4-45.8 55.3 0 0-18.9 10.7-28.6 11.5 0 0 39.3 40.3 35.3 91.5 0 0 32.7-3.4 54.3-28.6 0 0 26.8-26.9 33.4-48.6z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m494 729c0 0-21.1-9.8-24-29 0 0-2.6-12.8 3-30 0 0 8.4-17.6 11-21l7 5c0 0-6.8 11.1-10 22 0 0-3.3 7.9-1 25 0 0 4.7 13.6 15 17 0 0-6.2-7.1 0-17 0 0 5.4-9.6 17-10v22 56c0 0-9.9 0.2-14-12l-1-7c0 0-13.7 10.9-15 25 0 0-0.7 13.5 5 28 0 0 4.9 6.6 2 10 0 0-13.4 1.1-17-29 0 0-0.3-16.9 8-28 0 0 9.7-8 13-10 0 0 4.6-2.3 3-5 0 0-10.5 0.5-17 5.6 0 0-20.5 15.7-25 33.1 0 0-4 4.9-7-0.7 0 0-0.2-13.6 11.1-25.5 11.7-12.1 17.6-13.4 23.9-17.5 0 0-17.5-0.2-27.6-11.5-0.1-0.2-0.3-0.3-0.4-0.5-4.3-9-6.1-22.4-6.1-22.4 0 0-0.6-21.3 3.1-15.6 0 0 1.5 10.9 4 18 0 0 5.2 14.7 12.1 18.7 0 0 8.7 8.2 14.9 8.3 0 0 7.7 0.9 10 0 0 0 1.9-0.1 2-2z"></path><path id="форма 8" fill-rule="evenodd" class="s0" d="m530 729c0 0 21.1-9.8 24-29 0 0 2.6-12.8-3-30 0 0-8.4-17.6-11-21l-7 5c0 0 6.8 11.1 10 22 0 0 3.3 7.9 1 25 0 0-4.7 13.6-15 17 0 0 6.2-7.1 0-17 0 0-5.4-9.6-17-10v22 56c0 0 9.9 0.2 14-12l1-7c0 0 13.7 10.9 15 25 0 0 0.7 13.5-5 28 0 0-4.9 6.6-2 10 0 0 13.4 1.1 17-29 0 0 0.3-16.9-8-28 0 0-9.7-8-13-10 0 0-4.6-2.3-3-5 0 0 10.5 0.6 17 5.6 0 0 20.5 15.7 25 33.1 0 0 4 4.9 7-0.7 0 0 0.2-13.6-11.2-25.5-11.6-12.1-17.5-13.4-23.8-17.5 0 0 17.5-0.2 27.6-11.5 0.1-0.2 0.3-0.3 0.4-0.5 4.3-9 6.1-22.4 6.1-22.4 0 0 0.6-21.3-3.1-15.6 0 0-1.5 10.9-4 18 0 0-5.2 14.7-12.1 18.7 0 0-8.7 8.2-14.9 8.3 0 0-7.7 0.9-10 0 0 0-1.9-0.1-2-2z"></path></g></svg></div></div><img class="w-full h-full" src="'+YT+'">',2)])),be("div",t5,[ct(c,{class:"hidden"}),ct(l),ct(h),ct(d),So(be("div",n5,[e[4]||(e[4]=fn('<div class="w-full h-full flex flex-col space-y-6 justify-end px-4"><div class="w-72 h-auto bg-[#4c4c4c] flex flex-col text-white font-bold tracking-wider"><div class="w-full h-10 border-l-4 pl-4 text-start flex items-center"><span>RANKED</span></div><div class="w-72 h-auto flex flex-col space-y-1 pl-4 pt-2 pb-2 pr-4 overflow-y-auto font-light font-sans"><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="10min" name="10min"><label for="10min">10 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="15min/10" name="15min/10"><label for="15min/10">15/10</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="5min" name="5min"><label for="5min">5 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3min" name="3min"><label for="3min">3 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3/2" name="3/2"><label for="3/2">3/2</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1/1" name="1/1"><label for="1/1">1/1</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1min" name="1min"><label for="1min">1 min</label></div></div></div><div class="w-72 h-auto bg-[#4c4c4c] flex flex-col text-white font-bold tracking-wider"><div class="w-full h-10 border-l-4 pl-4 text-start flex items-center"><span>UNRANKED</span></div><div class="w-72 h-auto flex flex-col space-y-1 pl-4 pt-2 pb-2 pr-4 overflow-y-auto font-light font-sans"><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="10min" name="10min"><label for="10min">10 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="15min/10" name="15min/10"><label for="15min/10">15/10</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="5min" name="5min"><label for="5min">5 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3min" name="3min"><label for="3min">3 min</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="3/2" name="3/2"><label for="3/2">3/2</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1/1" name="1/1"><label for="1/1">1/1</label></div><div class="space-x-4 w-full h-8 p-1 flex items-center hover:bg-[#333236]"><input type="checkbox" id="1min" name="1min"><label for="1min">1 min</label></div></div></div></div>',1)),be("div",r5,[be("button",{onClick:e[1]||(e[1]=(...p)=>i.findGame&&i.findGame(...p)),class:"w-full h-14 hover:bg-gradient-to-r hover:from-[#745353] hover:to-[#b69494] bg-[#121212] text-white font-bold tracking-wider"},"FIND OPPONENT")])],512),[[ko,s.isSearchingGame]]),e[5]||(e[5]=fn('<div class="w-80 h-[80%] fixed mt-24 ml-24 left-0"><div class="w-full h-72 bg-gradient-to-br from-[#282828] to-[#111111] space-y-4 flex flex-col relative"><div class="w-full h-8 bg-black/50 flex items-center px-2"><span class="text-white/80 uppercase text-xs">My profile</span></div><div class="w-full h-16 px-4"><div class="w-full h-full flex space-x-4 text-white items-center pl-4 bg-black/20"><div class="w-12 h-12 rounded-full border"><img class="rounded-full" src="'+JT+'"></div><span>THEFIRSTPLAYER</span></div></div><div class="w-full h-20 px-4 absolute bottom-0 pb-4"><div class="w-full h-full flex space-x-4 text-white/70 justify-between px-10 items-center text-sm bg-gradient-to-br from-[#3e3e3e] to-[#1e1e1e]"><div class="flex flex-col text-center"><span>WINS</span><span>217</span></div><div class="flex flex-col text-center"><span>MATCHES</span><span>529</span></div></div></div></div></div>',1)),So(be("div",s5,[be("button",{class:"hover:bg-gradient-to-r hover:from-[#3e3d3d] hover:to-[#111111] w-60 h-12 bg-gradient-to-r from-[#565e5d] to-[#1a1c1c]",onClick:e[2]||(e[2]=(...p)=>i.chooseBattle&&i.chooseBattle(...p))},"PLAY")],512),[[ko,!s.isSearchingGame]])])]),e[6]||(e[6]=be("audio",{id:"click-sound",src:"/src/assets/music/souds/Click_2.wav"},null,-1)),e[7]||(e[7]=be("audio",{id:"background-home-music",src:"/src/assets/music/Sci-Fi1Loop.mp3",loop:"",autoplay:""},null,-1))],64)}const o5=qn(XT,[["render",i5]]),a5="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='_x32_'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23ffffff;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M391.861,70.97L256,0L120.118,70.97L27.881,45.624c0,0,0,147.01,0,253.466C27.881,405.544,205.307,512,256,512%20c50.693,0,228.119-106.456,228.119-212.911c0-106.456,0-253.466,0-253.466L391.861,70.97z%20M423.287,299.089%20c0,59.128-125.426,144.822-167.287,151.901c-41.842-7.079-167.287-92.772-167.287-151.901V125.426l38.356,10.544L256,68.633%20l128.91,67.337l38.376-10.544V299.089z'/%3e%3cpath%20class='st0'%20d='M119.128,165.326v133.763c0,30.476,74.574,91.832,120.238,114.02V111.633l-108.813,56.832L119.128,165.326z'/%3e%3cpath%20class='st0'%20d='M272.633,111.643v301.466c45.663-22.188,120.238-83.544,120.238-114.02V165.326l-11.446,3.139L272.633,111.643%20z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",c5="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20290.226%20290.226'%20xml:space='preserve'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M63.951,243.575c-1.945-3.578-4.401-6.907-7.363-9.869c-3.106-3.102-6.626-5.633-10.4-7.63%20c-4.51-2.387-0.945-7.5-0.945-7.5c4.616-7.023,8.825-14.079,12.305-20.226l-23.363-23.344H11.504c-4.362,0-7.898-3.539-7.898-7.902%20c0-4.361,3.536-7.9,7.898-7.9h25.947c2.1,0,4.107,0.832,5.588,2.312l85.379,85.291c1.483,1.483,2.315,3.495,2.315,5.589v26.073%20c0,4.365-3.537,7.897-7.9,7.897c-4.367,0-7.904-3.531-7.904-7.897v-22.798l-23.27-23.24c-6.281,3.707-13.582,8.252-20.816,13.25%20C70.842,245.679,66.698,248.629,63.951,243.575z'/%3e%3cpath%20d='M26.61,237.102c-7.106,0-13.784,2.764-18.812,7.784c-5.019,5.015-7.782,11.686-7.782,18.778%20c0,7.097,2.764,13.762,7.782,18.776c5.027,5.016,11.706,7.783,18.812,7.785c7.102,0,13.781-2.77,18.804-7.785%20c5.023-5.015,7.79-11.682,7.79-18.776c0-7.093-2.768-13.764-7.79-18.778C40.392,239.866,33.712,237.102,26.61,237.102z'/%3e%3cpath%20d='M100.985,182.318c-3.502,3.499-9.232,3.499-12.734,0.001l-8.81-8.801c-3.502-3.498-3.502-9.223,0-12.721L229.832,10.564%20c3.502-3.498,10.401-6.727,15.33-7.175l36.862-3.352c4.93-0.448,8.596,3.218,8.148,8.148l-3.346,36.791%20c-0.448,4.93-3.68,11.825-7.182,15.324l-150.4,150.251c-3.502,3.498-9.232,3.498-12.734,0l-8.822-8.813%20c-3.502-3.498-3.502-9.223,0-12.722L233.608,63.213c1.854-1.848,1.856-4.852,0.003-6.702c-1.848-1.853-4.853-1.853-6.709-0.002%20L100.985,182.318z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",l5="/Lost-in-the-Tiles/assets/victory-5LuAhIoc.svg",u5="/Lost-in-the-Tiles/assets/defeat--8WP-tUU.svg",h5="/Lost-in-the-Tiles/assets/draw-CC89OGb_.svg",d5="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M20.5%2015C18.9558%2018.0448%2015.7622%2021%2012%2021C7.14776%2021%203.58529%2017.5101%203%2013'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M3.5%209C4.89106%205.64934%208.0647%203%2012%203C16.7819%203%2020.4232%206.48993%2021%2011'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M21%2021L21%2015.6C21%2015.2686%2020.7314%2015%2020.4%2015V15L15%2015'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%209L3.6%209V9C3.26863%209%203%208.73137%203%208.4L3%203'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",f5="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M6%2012H18M18%2012L13%207M18%2012L13%2017'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",p5={mounted(){function t(b,x,I,C){const P=document.createElement("video");return P.src=b,P.autoplay=!0,P.loop=!0,P.muted=!0,P.playsInline=!0,P.style.width=I,P.style.height=C,P.classList.add("videoLayer"),x.appendChild(P),setTimeout(()=>{x.removeChild(P)},1500),P}function e(b,x){const I=document.querySelector(".player-capture"),C=document.querySelector(".enemy-capture"),P=document.createElement("img");P.classList.add("current-captured"),b===b.toLowerCase()&&x?(P.src=n.find($=>$.type===b).img,P.dataset.type=b,P.style.filter="drop-shadow(0px 0px 1px rgba(255, 255, 255, 0.8))",I.append(P)):b===b.toUpperCase()&&!x?(P.src=n.find($=>$.type===b).img,P.dataset.type=b,C.append(P)):b===b.toLowerCase()&&!x?(P.src=n.find($=>$.type===b).img,P.style.filter="drop-shadow(0px 0px 1px rgba(255, 255, 255, 0.8))",P.dataset.type=b,C.append(P)):(P.src=n.find($=>$.type===b).img,P.dataset.type=b,I.append(P))}const n=[{type:"P",img:"./src/assets/public/resources/capturedPieces/pawn-svgrepo-com.svg"},{type:"R",img:"./src/assets/public/resources/capturedPieces/rook-svgrepo-com.svg"},{type:"N",img:"./src/assets/public/resources/capturedPieces/knight-svgrepo-com.svg"},{type:"B",img:"./src/assets/public/resources/capturedPieces/bishop-svgrepo-com.svg"},{type:"Q",img:"./src/assets/public/resources/capturedPieces/pawn-svgrepo-com.svg"},{type:"K",img:"./src/assets/public/resources/capturedPieces/king-svgrepo-com.svg"},{type:"p",img:"./src/assets/public/resources/capturedPieces/pawn-svgrepo-com-b.svg"},{type:"r",img:"./src/assets/public/resources/capturedPieces/rook-svgrepo-com-b.svg"},{type:"n",img:"./src/assets/public/resources/capturedPieces/knight-svgrepo-com-b.svg"},{type:"b",img:"./src/assets/public/resources/capturedPieces/bishop-svgrepo-com-b.svg"},{type:"q",img:"./src/assets/public/resources/capturedPieces/queen-svgrepo-com-b.svg"},{type:"k",img:"./src/assets/public/resources/capturedPieces/king-svgrepo-com-b.svg"}],r=document.getElementById("background-music"),s=document.getElementById("background-wind");function i(){r.volume=.3,s.volume=.05,s.play(),r.play()}function a(){document.addEventListener("click",i,{once:!0}),document.addEventListener("keydown",i,{once:!0}),document.addEventListener("mousemove",i,{once:!0})}window.addEventListener("load",a);function c(b,x){const I=document.querySelector(".sword"),C=document.querySelector(".shield");b?(C.style.display="none",I.style.display="flex"):(I.style.display="none",C.style.display="flex")}function l(b,x){localStorage.setItem("botLevel",b.toString()),localStorage.setItem("timerTime",x.toString())}l(6,5);function h(){const b=parseInt(localStorage.getItem("botLevel"),10),x=parseInt(localStorage.getItem("timerTime"),10);return{botLevel:b,timerTime:x}}const d=h();document.getElementById("chessboard");let p=null,m="white",y="white",L=y==="white"?"black":"white",O={white:!1,black:!1},M={whiteKingside:!1,whiteQueenside:!1,blackKingside:!1,blackQueenside:!1},G=null,H=!0,W=!1,Q={};function we(b){const x=document.getElementById("skills-voices");x.src=b,x.volume=.1,x.play()}c(H);let ge="url('https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads//whiteabove3.png')",S="none",w="none",T="100% 100%",A="100% 100%",R="url('https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads//blackabove.png') center center / cover no-repeat, #101010";function k(b,x,I,C,P,$){const ne=document.getElementById("move-tile-sound"),se=document.getElementById("battle-sound");document.getElementById("changeStatus"),document.getElementById("click-sound"),b&&(ne.src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rocks-sliding-101019 (mp3cut.net).mp3",ne.volume=.1,ne.play()),x&&(I||(se.src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/swords_battle.mp3"),se.volume=.1,se.play())}let _=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function pt(b){if(b==="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1")for(let I=7;I>=0;I--)setTimeout(()=>{document.querySelectorAll(`.tile[data-row="${I}"]`).forEach(C=>{C.classList.contains("black")&&C.querySelectorAll(".face").forEach($=>{})})},(7-I)*400)}function Lt(){const b=document.getElementById("chessboard");b.innerHTML="";for(let I=0;I<8;I++)for(let C=0;C<8;C++){const P=document.createElement("div");P.classList.add("tile"),P.style.zIndex=I+1,(I+C)%2===1&&P.classList.add("black"),P.dataset.row=I,P.dataset.col=C,["front","back","left","right","top","bottom"].forEach(Fe=>{const Te=document.createElement("div");Te.classList.add("face",Fe),(I+C)%2===1?Fe==="bottom"?(Te.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${R}`,Te.style.backgroundSize=A,Te.style.animation=w):(Te.style.background=`${R}`,Te.style.backgroundSize=A,Te.style.animation=w):Fe==="top"||Fe==="front"?(Te.style.background=`${ge}`,Te.style.backgroundSize=T,Te.style.animation=S):Fe==="bottom"?(Te.style.background=`linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,1) 100%), ${ge}`,Te.style.backgroundSize=T,Te.style.animation=S):(Te.style.background=`${ge}`,Te.style.backgroundSize=T),P.appendChild(Te)});const ne=document.createElement("div");ne.classList.add("hover-border");const se=_[I][C];if(P.appendChild(ne),se){const Fe=Ae(se);Fe.style.zIndex=5,P.appendChild(Fe),P.classList.remove("on-lower-plane"),ne.style.transform="translateZ(140px)"}else P.classList.add("on-lower-plane"),ne.style.transform="translateZ(60px)",P.classList.contains("black")?(P.querySelector(".front").style.background=`${R}`,P.querySelector(".front").style.backgroundSize=A):(P.querySelector(".front").style.background=`${ge}`,P.querySelector(".front").style.backgroundSize=T);let Ee=`${I}-${C}`;Q[Ee],P.addEventListener("click",()=>Ie(I,C,P)),b.appendChild(P)}function x(I){return y==="white"&&I===I.toUpperCase()||y==="black"&&I===I.toLowerCase()}document.querySelectorAll(".tile").forEach(I=>{I.addEventListener("mouseenter",function(){const C=parseInt(I.dataset.row,10),P=parseInt(I.dataset.col,10),$=_[C][P];$&&x($),I.style.transform="translateZ(100px)"}),I.addEventListener("mouseleave",function(){const C=parseInt(I.dataset.row,10),P=parseInt(I.dataset.col,10),$=_[C][P];$&&x($),I.style.transform="translateZ(0px)"})}),b.style.display="grid",setTimeout(()=>{document.getElementById("loading-screen").style.opacity="0",setTimeout(()=>{document.getElementById("loading-screen").style.display="none"},2e3)},4e3)}let Ke=0;function Ae(b,x,I){const C=document.createElement("div");C.classList.add("piece"),C.dataset.type=b;let P=b;b!=="P"&&b!=="p"?document.querySelector(`[data-id="${P}"]`)&&(P=`${b}1`):(P=`${b}${Ke}`,Ke++,Ke===7&&(Ke=0)),C.dataset.id=P;const $=document.createElement("div");$.classList.add("letter-tip"),$.textContent=b.toUpperCase(),C.appendChild($),b===b.toLowerCase()&&C.classList.add("black");let ne=null;if(b==="P"||b==="p"?ne=an.find(se=>se.piece===b):ne=an.find(se=>se.piece===P),C.dataset.animation=Tn.find(se=>se.piece===b).image,C.dataset.custom=Tn.find(se=>se.piece===b).custom,C.dataset.sound=Tn.find(se=>se.piece===b).sound,ne){const se=document.createElement("img");se.src=ne.image,se.alt=b,se.loading="lazy",se.style.width="130px",se.style.height="197px",C.appendChild(se)}else C.textContent=b.toUpperCase();return C}function Ie(b,x,I){if(!H||W||!ks)return;const C=I.querySelector(".piece");if(p)if(ht(p.row,p.col,b,x)){W=!0,Se(p.row,p.col,b,x);const P=_t();pt(P),p=null,E(),j&&clearInterval(j),J(),W=!1}else p=null,E();else C&&le(C.dataset.type)&&(p={row:b,col:x,piece:C},Me(I))}function ht(b,x,I,C){const P=_[b][x],$=_[I][C];if($&&le($))return!1;const ne=P.toLowerCase();let se=!1;switch(ne){case"p":se=Ut(P,b,x,I,C,$);break;case"r":se=gt(b,x,I,C)&&at(b,x,I,C);break;case"n":se=Ge(b,x,I,C);break;case"b":se=je(b,x,I,C)&&at(b,x,I,C);break;case"q":se=(gt(b,x,I,C)||je(b,x,I,C))&&at(b,x,I,C);break;case"k":se=sn(b,x,I,C);break}if(!se)return!1;const Ee=_[I][C];let Fe=null;ne==="p"&&!Ee&&G&&b+(P==="P"?-1:1)===I&&Math.abs(x-C)===1&&G.row===b&&G.col===C&&(Fe=_[b][C],_[b][C]=null),_[I][C]=P,_[b][x]=null;const Re=ee(y);return _[b][x]=P,_[I][C]=Ee,Fe&&(_[b][C]=Fe),!Re}function Ut(b,x,I,C,P,$){const ne=b==="P"?-1:1,se=b==="P"?6:1;if(I===P&&!$){if(x+ne===C)return!0;if(x===se&&x+2*ne===C&&!_[x+ne][I])return G={row:C,col:P,piece:b},!0}return!!(Math.abs(I-P)===1&&x+ne===C&&($||G&&G.row===x&&G.col===P&&G.piece!==b))}function gt(b,x,I,C){return b!==I&&x!==C?!1:at(b,x,I,C)}function Ge(b,x,I,C){const P=Math.abs(b-I),$=Math.abs(x-C);return P===2&&$===1||P===1&&$===2}function je(b,x,I,C){return Math.abs(b-I)!==Math.abs(x-C)?!1:at(b,x,I,C)}function sn(b,x,I,C){return!!(Math.abs(b-I)<=1&&Math.abs(x-C)<=1||mt(b,x,I,C))}function at(b,x,I,C){const P=Math.sign(I-b),$=Math.sign(C-x);let ne=b+P,se=x+$;for(;ne!==I||se!==C;){if(_[ne][se])return!1;ne+=P,se+=$}return!0}function mt(b,x,I,C){const P=b===7?"white":"black";if(O[P]||ee(P))return!1;const $=C===6,ne=C===2;return b!==I||Math.abs(x-C)!==2?!1:$&&re(P,"kingside")?!(F(P,b,5)||F(P,b,6)):ne&&re(P,"queenside")?!(F(P,b,3)||F(P,b,2)):!1}function F(b,x,I){for(let C=0;C<8;C++)for(let P=0;P<8;P++){const $=_[C][P];if($&&ce($,b)&&ie($,C,P,x,I))return!0}return!1}function re(b,x){const I=b==="white"?7:0,C=x==="kingside";if(C){if(M[b+"Kingside"])return!1}else if(M[b+"Queenside"])return!1;if(C){if(_[I][5]||_[I][6])return!1}else if(_[I][1]||_[I][2]||_[I][3])return!1;return!0}function te(b,x){const I=b==="white"?7:0;if(x==="kingside"){_[I][7],_[I][5]=_[I][7];const P=7,$=5,ne=document.querySelector(`[data-row='${I}'][data-col='${P}']`),se=document.querySelector(`[data-row='${I}'][data-col='${$}']`);ne.classList.remove("no-bounce"),setTimeout(()=>{se.style.setProperty("--start-z","0px"),se.classList.add("no-bounce")},100);const Ee=ne.querySelector(".piece");Ee.style.opacity=0,setTimeout(()=>{se.querySelector(".hover-border").style.display="none",ne.style.transition="transform 1s ease",k(!0,!1,!1),se.style.transition="transform 1s ease",se.style.transform="scaleZ(1)"},600),Q[`${I}-${P}`]={transform:"translateZ(-80px)",transition:"transform 1s ease"},Q[`${I}-${$}`]={transform:"scaleZ(1)",transition:"transform 1s ease"},setTimeout(()=>{ne.classList.add("on-lower-plane"),se.classList.remove("on-lower-plane");const Fe=ne.querySelector(".piece");Fe&&(se.appendChild(Fe),setTimeout(()=>{Fe.style.opacity=1},350))},1100),_[I][7]=null,M[b+"Kingside"]=!0}else{const P=_[I][0];_[I][3]=_[I][0];const $=0,ne=3,se=document.querySelector(`[data-row='${I}'][data-col='${$}']`),Ee=document.querySelector(`[data-row='${I}'][data-col='${ne}']`);se.classList.remove("no-bounce"),setTimeout(()=>{Ee.style.setProperty("--start-z","0px"),Ee.classList.add("no-bounce")},100);const Fe=se.querySelector(".piece");Fe.style.opacity=0,setTimeout(()=>{Ee.querySelector(".hover-border").style.display="none",se.style.transition="transform 1s ease",k(!0,!1,!1),Ee.style.transition="transform 1s ease",Ee.style.transform="scaleZ(1)"},600),Q[`${I}-${$}`]={transform:"translateZ(-80px)",transition:"transform 1s ease"},Q[`${I}-${ne}`]={transform:"scaleZ(1)",transition:"transform 1s ease"};const Te=an.findIndex(Re=>Re.row===I&&Re.col===$&&Re.piece===P);Te!==-1&&(an[Te].row=I,an[Te].col=ne),setTimeout(()=>{se.classList.add("on-lower-plane"),Ee.classList.remove("on-lower-plane");const Re=se.querySelector(".piece");Re&&(Ee.appendChild(Re),setTimeout(()=>{Re.style.opacity=1},350))},1100),_[I][0]=null,M[b+"Queenside"]=!0}O[b]=!0}function oe(b,x,I,C,P){const $=document.querySelector(`[data-row='${b}'][data-col='${x}']`),ne=document.querySelector(`[data-row='${I}'][data-col='${C}']`);let se=!1,Ee;if(y===L)Ee=P==="P"?"Q":"q",se=!0;else{let Re=["Queen","Knight","Bishop","Rook"],We="";for(;!Re.includes(We);)We=prompt("Promote pawn to (Queen, Knight, Bishop, Rook):","Queen"),We&&(We=We.trim());switch(We){case"Queen":Ee=P==="P"?"Q":"q";break;case"Knight":Ee=P==="P"?"N":"n";break;case"Bishop":Ee=P==="P"?"B":"b";break;case"Rook":Ee=P==="P"?"R":"r";break}}_[I][C]=Ee;const Fe=ne.querySelector(".piece"),Te=$.querySelector(".piece");Te&&$.removeChild(Te),Fe&&ne.removeChild(Fe),$.style.transition="transform 1s ease",ne.querySelector(".hover-border").style.display="none",ne.style.transition="transform 1s ease",ne.style.transform="scaleZ(1)",setTimeout(()=>{$.classList.add("on-lower-plane"),ne.classList.remove("on-lower-plane");const Re=document.createElement("div");if(se){Re.classList.add("piece"),Re.dataset.type=Ee,Ee===Ee.toLowerCase()&&Re.classList.add("black");const We=an.find(Ue=>Ue.piece===Ee);if(We){const Ue=document.createElement("img");Ue.src=We.image,Ue.alt=Ee,Ue.style.width="105px",Ue.style.height="105px",Re.appendChild(Ue)}else Re.textContent=Ee.toUpperCase();ne.appendChild(Re)}else{Re.classList.add("piece"),Re.dataset.type=Ee,Ee===Ee.toLowerCase()&&Re.classList.add("black");const We=an.find(Ue=>Ue.piece===Ee);if(We){const Ue=document.createElement("img");Ue.src=We.image,Ue.alt=Ee,Ue.style.width="105px",Ue.style.height="105px",Re.appendChild(Ue)}else Re.textContent=Ee.toUpperCase();ne.appendChild(Re)}},1100)}function Se(b,x,I,C){const P=_[b][x],$=document.querySelector(`[data-row='${b}'][data-col='${x}']`);$.style.transform;const ne=document.querySelector(`[data-row='${I}'][data-col='${C}']`),se=P.toLowerCase()==="k"&&Math.abs(x-C)===2;let Ee=null;if(se){const We=P==="K"?"white":"black",Ue=C===6?"kingside":"queenside",Ot=Ue==="kingside"?7:0,Br=Ue==="kingside"?5:3,xs=_[b][Ot];Ee={rookFromRow:b,rookFromCol:Ot,rookToRow:b,rookToCol:Br,rookPiece:xs},te(We,Ue),O[We]=!0}if($.classList.remove("no-bounce"),setTimeout(()=>{ne.style.setProperty("--start-z","0px"),ne.classList.add("no-bounce")},100),P.toLowerCase()==="p"&&!_[I][C]&&G&&b+(P==="P"?-1:1)===I&&Math.abs(x-C)===1&&G.row===b&&G.col===C){_[b][C]=null;const Ue=document.querySelector(`[data-row='${b}'][data-col='${C}']`),Ot=Ue.querySelector(".piece");Ot&&(Ue.classList.add("on-lower-plane"),Ue.style.transition="transform 1s ease",Ue.removeChild(Ot))}const Fe=_[I][C];if(P.toLowerCase()==="k"){const We=P==="K"?"white":"black";O[We]=!0}if(P.toLowerCase()==="r"&&((P==="R"?"white":"black")==="white"?b===7&&x===0?M.whiteQueenside=!0:b===7&&x===7&&(M.whiteKingside=!0):b===0&&x===0?M.blackQueenside=!0:b===0&&x===7&&(M.blackKingside=!0)),Fe&&Fe.toLowerCase()==="r"&&((Fe==="R"?"white":"black")==="white"?I===7&&C===0?M.whiteQueenside=!0:I===7&&C===7&&(M.whiteKingside=!0):I===0&&C===0?M.blackQueenside=!0:I===0&&C===7&&(M.blackKingside=!0)),Ps.push({boardState:JSON.parse(JSON.stringify(_)),fromRow:b,fromCol:x,toRow:I,toCol:C,capturedPiece:_[I][C]?{piece:_[I][C],row:I,col:C}:null,currentPlayer:y,isCastling:mt,castlingInfo:Ee}),Fe&&e(Fe,H),_[I][C]=P,_[b][x]=null,P.toLowerCase()==="p"&&(I===0||I===7)){oe(b,x,I,C,P);return}P.toLowerCase()==="p"&&Math.abs(b-I)===2?G={row:I,col:C,piece:P}:G=null;const Te=$.querySelector(".piece"),Re=ne.querySelector(".piece");Te.style.opacity=0,setTimeout(()=>{ne.querySelector(".hover-border").style.display="none",$.style.transition="transform 1s ease",k(!0,!1,!1),ne.style.transition="transform 1s ease",ne.style.transform="scaleZ(1)"},600),Q[`${b}-${x}`]={transition:"transform 1s ease"},Q[`${I}-${C}`]={transform:"scaleZ(1)",transition:"transform 1s ease"},setTimeout(()=>{const We=ne.querySelector(".front");We.style.boxShadow="0px 0px 48px 20px rgba(0,0,0,0)",$.querySelector(".hover-border").style.display="flex",$.querySelector(".hover-border").style.transform="translateZ(180px)",$.classList.add("on-lower-plane"),setTimeout(()=>{ne.classList.remove("on-lower-plane")},400);const Ue=Te.dataset.animation,Ot=Te.dataset.custom==="true",Br=Te.dataset.sound;Te&&Re?(Ot?setTimeout(()=>{we(Br),ne.removeChild(Re)},1500):ne.removeChild(Re),Ot?(k(!1,!0,Ot),t(Ue,ne,"50px","50px")):(k(!1,!0,Ot),t(Ue,ne,"100px","100px")),Te.style.opacity=0,$.removeChild(Te),ne.appendChild(Te),setTimeout(()=>{Te.style.opacity=1},1500)):($.removeChild(Te),Te.style.opacity=0,ne.appendChild(Te),setTimeout(()=>{Te.style.opacity=1},350)),Gn()},1100)}function Me(b){E(),b.querySelector(".front").style.border="2px solid white",b.querySelector(".front").style.filter="drop-shadow(0px 0px 5px rgb(164, 79, 255))";const x=parseInt(b.dataset.row),I=parseInt(b.dataset.col);v(x,I).forEach(P=>{const $=document.querySelector(`.tile[data-row='${P.row}'][data-col='${P.col}']`);$.querySelector(".hover-border").style.border="2px solid rgb(255, 255, 255)",$.querySelector(".hover-border").style.filter="drop-shadow(0px 0px 5px rgb(164, 79, 255))"})}function v(b,x){let I=[];for(let C=0;C<8;C++)for(let P=0;P<8;P++)ht(b,x,C,P)&&I.push({row:C,col:P});return I}function E(){document.querySelectorAll(".tile").forEach(x=>{const I=x.querySelector(".front"),C=x.querySelector(".hover-border");I.style.filter.includes("brightness")?(I.style.filter=I.style.filter.replace(/drop-shadow\(.*?\)/,"").trim(),C.style.filter=C.style.filter.replace(/drop-shadow\(.*?\)/,"").trim()):(I.style.filter="",C.style.filter=""),C.style.border="",I.style.border=""})}let B=d.timerTime*60;const U=document.querySelector(".timer-numbers");let j;function Z(){const b=Math.floor(B/60);let x=B%60;if(x=x<10?"0"+x:x,U.innerHTML=`${b}:${x}`,B--,B<0){clearInterval(j);const I=document.getElementById("end-screen");I.style.display="flex",I.querySelector("#lose-img").style.display="flex"}}function J(){if(y=y==="white"?"black":"white",H=y!==L,z(),c(H),Ve(y)){const b=document.getElementById("end-screen");b.style.display="flex",y==="white"||m==="black"?b.querySelector("#lose-img").style.display="flex":b.querySelector("#win-img").style.display="flex"}if(dt(y)){const b=document.getElementById("end-screen");b.style.display="flex",b.querySelector("#draw-img").style.display="flex"}if(on()){const b=document.getElementById("end-screen");b.style.display="flex",b.querySelector("#draw-img").style.display="flex"}if(nt()){const b=document.getElementById("end-screen");b.style.display="flex",b.querySelector("#draw-img").style.display="flex"}if(y===L){const b=_t();Hn(b,function(x){const{fromRow:I,fromCol:C,toRow:P,toCol:$}=Fi(x);_[I]&&_[I][C]?(setTimeout(()=>{Se(I,C,P,$)},3e3),setTimeout(()=>{J(),j=setInterval(Z,1e3)},5e3)):console.error("Ошибка: бот пытается сделать недействительный ход.")})}else H=!0}let Y=null;function z(){const b=y==="white"?"white":"black";let x=null;for(let C=0;C<8;C++){for(let P=0;P<8;P++)if(_[C][P]===(b==="white"?"K":"k")){x={row:C,col:P};break}if(x)break}Y&&(Y.style.border="");const I=document.querySelector(`.tile[data-row="${x.row}"][data-col="${x.col}"] .front`);x&&ee(b)&&I&&(I.style.border="2px solid red"),Y=I}function le(b){return y==="white"&&b===b.toUpperCase()||y==="black"&&b===b.toLowerCase()}function ee(b){let x=null;for(let I=0;I<8;I++){for(let C=0;C<8;C++)if(_[I][C]===(b==="white"?"K":"k")){x={row:I,col:C};break}if(x)break}if(!x)return console.error("King not found on the board."),!1;for(let I=0;I<8;I++)for(let C=0;C<8;C++){const P=_[I][C];if(P&&ce(P,b)&&ie(P,I,C,x.row,x.col))return!0}return!1}function ce(b,x){return x==="white"&&b===b.toLowerCase()||x==="black"&&b===b.toUpperCase()}function ie(b,x,I,C,P){const $=b.toLowerCase(),ne=_[C][P];_[C][P]=b,_[x][I]=null;let se=!1;switch($){case"p":se=ue(b,x,I,C,P);break;case"r":se=gt(x,I,C,P)&&at(x,I,C,P);break;case"n":se=Ge(x,I,C,P);break;case"b":se=je(x,I,C,P)&&at(x,I,C,P);break;case"q":se=(gt(x,I,C,P)||je(x,I,C,P))&&at(x,I,C,P);break;case"k":se=Math.abs(x-C)<=1&&Math.abs(I-P)<=1;break}return _[x][I]=b,_[C][P]=ne,se}function ue(b,x,I,C,P){const $=b==="P"?-1:1;return Math.abs(I-P)===1&&x+$===C}function Ve(b){if(!ee(b))return!1;for(let x=0;x<8;x++)for(let I=0;I<8;I++){const C=_[x][I];if(C&&le(C)){for(let P=0;P<8;P++)for(let $=0;$<8;$++)if(ht(x,I,P,$))return!1}}return!0}function ke(){O={white:!1,black:!1},M={whiteKingside:!1,whiteQueenside:!1,blackKingside:!1,blackQueenside:!1}}function dt(b){if(ee(b))return!1;for(let x=0;x<8;x++)for(let I=0;I<8;I++){const C=_[x][I];if(C&&le(C)){for(let P=0;P<8;P++)for(let $=0;$<8;$++)if(ht(x,I,P,$))return!1}}return!0}function nt(){let b=[],x=[];for(let P=0;P<8;P++)for(let $=0;$<8;$++){const ne=_[P][$];ne&&(ne===ne.toUpperCase()?b.push(ne):x.push(ne))}const I=rt(b),C=rt(x);return I&&C}function rt(b){const x=b.map(I=>I.toUpperCase());return!!(x.length===1&&x.includes("K")||x.length===2&&x.includes("K")&&(x.includes("B")||x.includes("N"))||x.length===3&&x.includes("K")&&x.filter(I=>I==="N").length===2)}let Ye={};function on(){const b=_t();return Ye[b]?Ye[b]++:Ye[b]=1,Ye[b]>=4}function Gn(){const b=_t();Ye[b]?Ye[b]++:Ye[b]=1}let st=new Worker("/Lost-in-the-Tiles/src/assets/public/resources/engine/stockfish-16.1-single.js");function _t(){let b="";for(let I=0;I<8;I++){let C=0;for(let P=0;P<8;P++){const $=_[I][P];$?(C>0&&(b+=C,C=0),b+=$):C++}C>0&&(b+=C),I<7&&(b+="/")}b+=` ${y==="white"?"w":"b"} `;let x="";return O.white||(M.whiteKingside||(x+="K"),M.whiteQueenside||(x+="Q")),O.black||(M.blackKingside||(x+="k"),M.blackQueenside||(x+="q")),b+=x||"-",b+=" - 0 1",b}function Hn(b,x){st.postMessage("uci"),st.postMessage(`position fen ${b}`),st.postMessage("go depth "+d.botLevel),st.onmessage=function(I){const C=I.data;if(C.startsWith("bestmove")){const P=C.split(" ")[1];x(P)}}}function Fi(b){const x={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},I=x[b[0]],C=8-parseInt(b[1]),P=x[b[2]],$=8-parseInt(b[3]);return{fromRow:C,fromCol:I,toRow:$,toCol:P}}let an=[{piece:"P",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/pawn.svg"},{piece:"p",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/pawn2.svg"},{piece:"R",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rook.svg"},{piece:"R1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rook.svg"},{piece:"r",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rook2.svg"},{piece:"r1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rook2.svg"},{piece:"N",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/knight.svg"},{piece:"N1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/knight.svg"},{piece:"n",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/knight2.svg"},{piece:"n1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/knight2.svg"},{piece:"B",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/bishop.svg"},{piece:"B1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/bishop.svg"},{piece:"b",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/bishop2.svg"},{piece:"b1",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/bishop2.svg"},{piece:"Q",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/queen.svg"},{piece:"q",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/queen2.svg"},{piece:"K",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/king.svg"},{piece:"k",image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/king2.svg"}],Tn=[{piece:"P",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"p",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"R",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"R1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"r",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"r1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"N",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"N1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"n",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"n1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"B",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"B1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"b",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"b1",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"Q",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"q",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"K",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""},{piece:"k",custom:!1,image:"https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/fighting-cloud (online-video-cutter.com).mp4",sound:""}];window.createChessboard=Lt;let Ps=[],ks=!0,bn="";ke(),window.addEventListener("load",()=>{Lt(),setTimeout(()=>{z()},200)}),j=setInterval(Z,1e3),y==="black"&&!bn&&J()}};function g5(t,e,n,r,s,i){return Wt(),dn("body",null,e[0]||(e[0]=[fn('<div id="loading-screen" style="z-index:900000;"></div><div id="currentPlayer"><img class="shield" alt="enemy-turn" src="'+a5+'" style="display:none;"><img class="sword" alt="player-turn" src="'+c5+'"></div><div id="end-screen"><div class="black-banner"><div id="end-images"><img id="win-img" src="'+l5+'" style="display:none;"><img id="lose-img" src="'+u5+'" style="display:none;"><img id="draw-img" src="'+h5+'" style="display:none;"></div><div id="end-button"><button id="repeat-battle"><span>Try again</span><img src="'+d5+'"></button><button id="quit-battle"><span>Continue</span><img src="'+f5+'"></button></div></div></div><div id="crd-cont" class="cards-container"></div><div id="desc-cont" class="desc-container"></div><div class="player-container"><div class="player-capture"></div></div><div class="enemy-container"><div class="enemy-capture"></div></div><div class="container"><div class="ui-container"><div class="ui"></div><div class="timer"><span class="timer-numbers">04:59</span></div></div><div class="chessboard" id="chessboard"></div><div id="settings" style="z-index:5000000;"><a href="/home"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.0001 3H3.00006V21H21.0001V3ZM8.13177 16.8033L16.1318 16.8033L16.1318 8.80331H14.1318V13.3891L7.88913 7.14645L6.47491 8.56067L12.7176 14.8033H8.13177V16.8033Z" fill="#ffffff"></path></g></svg></a></div></div><audio id="move-tile-sound" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/rocks-sliding-101019 (mp3cut.net).mp3"></audio><audio id="battle-sound" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/swords_battle.mp3"></audio><audio id="click-sound" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/Click_2.wav"></audio><audio id="changeStatus" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/Bleep_01.ogg"></audio><audio id="background-music" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/5 - Stellar Drift  (Loop).mp3" loop></audio><audio id="background-wind" src="https://raw.githubusercontent.com/garder-les-ciseaux-droits/echidna/main/uploads/Cold Wind Sound Effect No Copyright Free.mp3" loop></audio><audio id="skills-voices"></audio>',15)]))}const m5=qn(p5,[["render",g5]]),_5=sT({history:L9(),routes:[{path:"/",component:m5},{path:"/home",component:o5},{path:"/game",component:ap},{path:"/scene",component:uT}]}),au=k2(ap);au.use(n9);au.use(_5);au.mount("#app");
